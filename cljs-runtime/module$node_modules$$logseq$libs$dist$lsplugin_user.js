shadow$provide.module$node_modules$$logseq$libs$dist$lsplugin_user=function(global,require,module,exports){!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.LSPluginEntry=e():t.LSPluginEntry=e()}(self,()=>(()=>{function n$jscomp$3(r){var o=e$jscomp$3[r];if(void 0!==o)return o.exports;o=e$jscomp$3[r]={exports:{}};return t$jscomp$4[r].call(o.exports,o,o.exports,n$jscomp$3),o.exports}
var t$jscomp$4={227:(t$jscomp$1,e$jscomp$0,n$jscomp$0)=>{var r$jscomp$0=n$jscomp$0(155);e$jscomp$0.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t$jscomp$1.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(r++,"%c"===t&&(o=r))});e.splice(o,0,n)}};e$jscomp$0.save=function(t$jscomp$0){try{t$jscomp$0?e$jscomp$0.storage.setItem("debug",
t$jscomp$0):e$jscomp$0.storage.removeItem("debug")}catch(t){}};e$jscomp$0.load=function(){let t$jscomp$0;try{t$jscomp$0=e$jscomp$0.storage.getItem("debug")}catch(t){}!t$jscomp$0&&void 0!==r$jscomp$0&&"env"in r$jscomp$0&&(t$jscomp$0=r$jscomp$0.env.DEBUG);return t$jscomp$0};e$jscomp$0.useColors=function(){return"undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs)?!0:"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?
!1:"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};
a:{try{var JSCompiler_inline_result=localStorage;break a}catch(t){}JSCompiler_inline_result=void 0}e$jscomp$0.storage=JSCompiler_inline_result;e$jscomp$0.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();e$jscomp$0.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" ");
e$jscomp$0.log=console.debug||console.log||(()=>{});t$jscomp$1.exports=n$jscomp$0(447)(e$jscomp$0);({formatters:n$jscomp$0}=t$jscomp$1.exports);n$jscomp$0.j=function(t$jscomp$0){try{return JSON.stringify(t$jscomp$0)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},447:(t$jscomp$2,e$jscomp$1,n$jscomp$1)=>{t$jscomp$2.exports=function(t$jscomp$1){function e$jscomp$0(t$jscomp$0){function a(...t){if(a.enabled){var o$jscomp$0=Number(new Date);a.diff=o$jscomp$0-(n$jscomp$0||o$jscomp$0);a.prev=
n$jscomp$0;n$jscomp$0=a.curr=o$jscomp$0;t[0]=e$jscomp$0.coerce(t[0]);"string"!=typeof t[0]&&t.unshift("%O");var s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,o)=>{if("%%"===n)return"%";s++;o=e$jscomp$0.formatters[o];"function"==typeof o&&(n=o.call(a,t[s]),t.splice(s,1),s--);return n});e$jscomp$0.formatArgs.call(a,t);(a.log||e$jscomp$0.log).apply(a,t)}}let n$jscomp$0,o$jscomp$1,i,s$jscomp$0=null;return a.namespace=t$jscomp$0,a.useColors=e$jscomp$0.useColors(),a.color=e$jscomp$0.selectColor(t$jscomp$0),
a.extend=r$jscomp$0,a.destroy=e$jscomp$0.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s$jscomp$0?s$jscomp$0:(o$jscomp$1!==e$jscomp$0.namespaces&&(o$jscomp$1=e$jscomp$0.namespaces,i=e$jscomp$0.enabled(t$jscomp$0)),i),set:t=>{s$jscomp$0=t}}),"function"==typeof e$jscomp$0.init&&e$jscomp$0.init(a),a}function r$jscomp$0(t,n){t=e$jscomp$0(this.namespace+(void 0===n?":":n)+t);return t.log=this.log,t}function o$jscomp$3(t){return t.toString().substring(2,t.toString().length-
2).replace(/\.\*\?$/,"*")}return e$jscomp$0.debug=e$jscomp$0,e$jscomp$0.default=e$jscomp$0,e$jscomp$0.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e$jscomp$0.disable=function(){const t$jscomp$0=[...e$jscomp$0.names.map(o$jscomp$3),...e$jscomp$0.skips.map(o$jscomp$3).map(t=>"-"+t)].join();return e$jscomp$0.enable(""),t$jscomp$0},e$jscomp$0.enable=function(t){let n;e$jscomp$0.save(t);e$jscomp$0.namespaces=t;e$jscomp$0.names=[];e$jscomp$0.skips=[];const r=("string"==typeof t?t:
"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e$jscomp$0.skips.push(new RegExp("^"+t.slice(1)+"$")):e$jscomp$0.names.push(new RegExp("^"+t+"$")))},e$jscomp$0.enabled=function(t){if("*"===t[t.length-1])return!0;let n,r;n=0;for(r=e$jscomp$0.skips.length;n<r;n++)if(e$jscomp$0.skips[n].test(t))return!1;n=0;for(r=e$jscomp$0.names.length;n<r;n++)if(e$jscomp$0.names[n].test(t))return!0;return!1},e$jscomp$0.humanize=n$jscomp$1(824),e$jscomp$0.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},
Object.keys(t$jscomp$1).forEach(n=>{e$jscomp$0[n]=t$jscomp$1[n]}),e$jscomp$0.names=[],e$jscomp$0.skips=[],e$jscomp$0.formatters={},e$jscomp$0.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e$jscomp$0.colors[Math.abs(n)%e$jscomp$0.colors.length]},e$jscomp$0.enable(e$jscomp$0.load()),e$jscomp$0}},856:function(t$jscomp$2){t$jscomp$2.exports=function(){function t$jscomp$1(e){return t$jscomp$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?
function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t$jscomp$1(e)}function e$jscomp$2(t$jscomp$0,n){return e$jscomp$2=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e$jscomp$2(t$jscomp$0,n)}function n$jscomp$1(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(t){return!1}}function r$jscomp$2(t$jscomp$0,o$jscomp$0,i){return r$jscomp$2=n$jscomp$1()?Reflect.construct:function(t,n,r){var o=[null];o.push.apply(o,n);t=new (Function.bind.apply(t,o));return r&&e$jscomp$2(t,r.prototype),t},r$jscomp$2.apply(null,arguments)}function o$jscomp$1(t){var JSCompiler_inline_result=Array.isArray(t)?c(t):void 0;JSCompiler_inline_result||(JSCompiler_inline_result="undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"]?Array.from(t):
void 0);if(!JSCompiler_inline_result)if(t)if("string"==typeof t)JSCompiler_inline_result=c(t,void 0);else{var n=Object.prototype.toString.call(t).slice(8,-1);JSCompiler_inline_result=("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,void 0):void 0)}else JSCompiler_inline_result=void 0;if(!(t=JSCompiler_inline_result))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
return t}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function I(t){return function(e){for(var n=arguments.length,r=Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return b$jscomp$0(t,e,r)}}function L(t,e){f$jscomp$2&&f$jscomp$2(t,null);for(var n=e.length;n--;){var r=e[n];if("string"==typeof r){var o=O(r);o!==r&&(p(e)||(e[n]=o),r=o)}t[r]=!0}return t}function N(t){var e,n=v$jscomp$0(null);for(e in t)b$jscomp$0(u,t,[e])&&(n[e]=t[e]);return n}
function M(t$jscomp$0,e){for(;null!==t$jscomp$0;){var n=h$jscomp$0(t$jscomp$0,e);if(n){if(n.get)return I(n.get);if("function"==typeof n.value)return I(n.value)}t$jscomp$0=d(t$jscomp$0)}return function(t){return console.warn("fallback value for",t),null}}function rt(){var e$jscomp$1=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,n$jscomp$0=function(t){return rt(t)};if(n$jscomp$0.version="2.3.8",n$jscomp$0.removed=[],!e$jscomp$1||!e$jscomp$1.document||
9!==e$jscomp$1.document.nodeType)return n$jscomp$0.isSupported=!1,n$jscomp$0;var r$jscomp$1=e$jscomp$1.document,i$jscomp$0=e$jscomp$1.document,s$jscomp$0=e$jscomp$1.DocumentFragment,a$jscomp$0=e$jscomp$1.HTMLTemplateElement,c$jscomp$0=e$jscomp$1.Node,l$jscomp$0=e$jscomp$1.Element,u=e$jscomp$1.NodeFilter,f$jscomp$0=e$jscomp$1.NamedNodeMap,p=void 0===f$jscomp$0?e$jscomp$1.NamedNodeMap||e$jscomp$1.MozNamedAttrMap:f$jscomp$0,d=e$jscomp$1.HTMLFormElement,h=e$jscomp$1.DOMParser;f$jscomp$0=e$jscomp$1.trustedTypes;
var v=l$jscomp$0.prototype,y=M(v,"cloneNode"),b=M(v,"nextSibling"),_=M(v,"childNodes"),I=M(v,"parentNode");"function"==typeof a$jscomp$0&&(a$jscomp$0=i$jscomp$0.createElement("template"),a$jscomp$0.content&&a$jscomp$0.content.ownerDocument&&(i$jscomp$0=a$jscomp$0.content.ownerDocument));var ot=nt(f$jscomp$0,r$jscomp$1),it=ot?ot.createHTML(""):"";a$jscomp$0=i$jscomp$0;var at=a$jscomp$0.implementation,ct=a$jscomp$0.createNodeIterator,lt=a$jscomp$0.createDocumentFragment,ut=a$jscomp$0.getElementsByTagName,
ft=r$jscomp$1.importNode;a$jscomp$0={};try{a$jscomp$0=N(i$jscomp$0).documentMode?i$jscomp$0.documentMode:{}}catch(t){}var dt={};n$jscomp$0.isSupported="function"==typeof I&&at&&void 0!==at.createHTMLDocument&&9!==a$jscomp$0;var ht,mt,gt=J,vt=Z,yt=V,bt=K,_t=Q,wt=X,xt=Y,Ct=null,Ot=L({},[].concat(o$jscomp$1(P),o$jscomp$1(R),o$jscomp$1(D),o$jscomp$1($),o$jscomp$1(H))),St=null,jt=L({},[].concat(o$jscomp$1(B),o$jscomp$1(q),o$jscomp$1(W),o$jscomp$1(G))),At=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,
configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),kt=null,Et=null,Tt=!0,It=!0,Ft=!1,Lt=!1,Nt=!1,Mt=!1,Pt=!1,Rt=!1,Dt=!1,Ut=!1,$t=!0,zt=!0,Ht=!1,Bt={},qt=null,Wt=L({},"annotation-xml audio colgroup desc foreignobject head iframe math mi mn mo ms mtext noembed noframes noscript plaintext script style svg template thead title video xmp".split(" ")),
Gt=null,Jt=L({},"audio video img source image track".split(" ")),Zt=null,Vt=L({},"alt class for id label name pattern placeholder role summary title value style xmlns".split(" ")),Xt="http://www.w3.org/1999/xhtml",te=!1,ee=["application/xhtml+xml","text/html"],re=null,oe=i$jscomp$0.createElement("form"),ie=function(t){return t instanceof RegExp||t instanceof Function},se=function(e){re&&re===e||(e&&"object"===t$jscomp$1(e)||(e={}),e=N(e),Ct="ALLOWED_TAGS"in e?L({},e.ALLOWED_TAGS):Ot,St="ALLOWED_ATTR"in
e?L({},e.ALLOWED_ATTR):jt,Zt="ADD_URI_SAFE_ATTR"in e?L(N(Vt),e.ADD_URI_SAFE_ATTR):Vt,Gt="ADD_DATA_URI_TAGS"in e?L(N(Jt),e.ADD_DATA_URI_TAGS):Jt,qt="FORBID_CONTENTS"in e?L({},e.FORBID_CONTENTS):Wt,kt="FORBID_TAGS"in e?L({},e.FORBID_TAGS):{},Et="FORBID_ATTR"in e?L({},e.FORBID_ATTR):{},Bt="USE_PROFILES"in e&&e.USE_PROFILES,Tt=!1!==e.ALLOW_ARIA_ATTR,It=!1!==e.ALLOW_DATA_ATTR,Ft=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Lt=e.SAFE_FOR_TEMPLATES||!1,Nt=e.WHOLE_DOCUMENT||!1,Rt=e.RETURN_DOM||!1,Dt=e.RETURN_DOM_FRAGMENT||
!1,Ut=e.RETURN_TRUSTED_TYPE||!1,Pt=e.FORCE_BODY||!1,$t=!1!==e.SANITIZE_DOM,zt=!1!==e.KEEP_CONTENT,Ht=e.IN_PLACE||!1,xt=e.ALLOWED_URI_REGEXP||xt,Xt=e.NAMESPACE||"http://www.w3.org/1999/xhtml",e.CUSTOM_ELEMENT_HANDLING&&ie(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(At.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ie(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(At.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==
typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(At.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ht=ht=-1===ee.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,mt="application/xhtml+xml"===ht?function(t){return t}:O,Lt&&(It=!1),Dt&&(Rt=!0),Bt&&(Ct=L({},o$jscomp$1(H)),St=[],!0===Bt.html&&(L(Ct,P),L(St,B)),!0===Bt.svg&&(L(Ct,R),L(St,q),L(St,G)),!0===Bt.svgFilters&&(L(Ct,D),L(St,q),L(St,G)),!0===Bt.mathMl&&(L(Ct,$),L(St,W),L(St,
G))),e.ADD_TAGS&&(Ct===Ot&&(Ct=N(Ct)),L(Ct,e.ADD_TAGS)),e.ADD_ATTR&&(St===jt&&(St=N(St)),L(St,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&L(Zt,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(qt===Wt&&(qt=N(qt)),L(qt,e.FORBID_CONTENTS)),zt&&(Ct["#text"]=!0),Nt&&L(Ct,["html","head","body"]),Ct.table&&(L(Ct,["tbody"]),delete kt.tbody),m&&m(e),re=e)},ae=L({},["mi","mo","mn","ms","mtext"]),ce=L({},["foreignobject","desc","title","annotation-xml"]),le=L({},["title","style","font","a","script"]),ue=L({},R);L(ue,D);L(ue,
U);var fe=L({},$);L(fe,z);var de=function(t){C(n$jscomp$0.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e$jscomp$0){try{t.outerHTML=it}catch(e){t.remove()}}},he=function(t$jscomp$0,e){try{C(n$jscomp$0.removed,{attribute:e.getAttributeNode(t$jscomp$0),from:e})}catch(t){C(n$jscomp$0.removed,{attribute:null,from:e})}if(e.removeAttribute(t$jscomp$0),"is"===t$jscomp$0&&!St[t$jscomp$0])if(Rt||Dt)try{de(e)}catch(t){}else try{e.setAttribute(t$jscomp$0,"")}catch(t){}},me=function(t$jscomp$0){if(Pt)t$jscomp$0=
"\x3cremove\x3e\x3c/remove\x3e"+t$jscomp$0;else var n=(n=S(t$jscomp$0,/^[\r\n\t ]+/))&&n[0];"application/xhtml+xml"===ht&&(t$jscomp$0='\x3chtml xmlns\x3d"http://www.w3.org/1999/xhtml"\x3e\x3chead\x3e\x3c/head\x3e\x3cbody\x3e'+t$jscomp$0+"\x3c/body\x3e\x3c/html\x3e");var o=ot?ot.createHTML(t$jscomp$0):t$jscomp$0;if("http://www.w3.org/1999/xhtml"===Xt)try{var e=(new h).parseFromString(o,ht)}catch(t){}if(!e||!e.documentElement){e=at.createDocument(Xt,"template",null);try{e.documentElement.innerHTML=
te?"":o}catch(t){}}o=e.body||e.documentElement;return t$jscomp$0&&n&&o.insertBefore(i$jscomp$0.createTextNode(n),o.childNodes[0]||null),"http://www.w3.org/1999/xhtml"===Xt?ut.call(e,Nt?"html":"body")[0]:Nt?e.documentElement:o},ge=function(t){return ct.call(t.ownerDocument||t,t,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},ye=function(e){return"object"===t$jscomp$1(c$jscomp$0)?e instanceof c$jscomp$0:e&&"object"===t$jscomp$1(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},be=function(t$jscomp$0,
e,r){dt[t$jscomp$0]&&w(dt[t$jscomp$0],function(t){t.call(n$jscomp$0,e,r,re)})},_e=function(t){if((be("beforeSanitizeElements",t,null),t instanceof d&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof p)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore))||E(/[\u0080-\uFFFF]/,t.nodeName))return de(t),!0;var r=mt(t.nodeName);if((be("uponSanitizeElement",
t,{tagName:r,allowedTags:Ct}),!(!t.hasChildNodes()||ye(t.firstElementChild)||ye(t.content)&&ye(t.content.firstElementChild))&&E(/<[/\w]/g,t.innerHTML)&&E(/<[/\w]/g,t.textContent))||"select"===r&&E(/<template/i,t.innerHTML))return de(t),!0;if(!Ct[r]||kt[r]){if(!kt[r]&&0<r.indexOf("-")&&(At.tagNameCheck instanceof RegExp&&E(At.tagNameCheck,r)||At.tagNameCheck instanceof Function&&At.tagNameCheck(r)))return!1;if(zt&&!qt[r]){var e=I(t)||t.parentNode;if((r=_(t)||t.childNodes)&&e)for(var s=r.length-1;0<=
s;--s)e.insertBefore(y(r[s],!0),b(t))}return de(t),!0}if(s=t instanceof l$jscomp$0){(s=I(t))&&s.tagName||(s={namespaceURI:"http://www.w3.org/1999/xhtml",tagName:"template"});var n=O(t.tagName),r$jscomp$0=O(s.tagName);s=!("http://www.w3.org/2000/svg"===t.namespaceURI?"http://www.w3.org/1999/xhtml"===s.namespaceURI?"svg"===n:"http://www.w3.org/1998/Math/MathML"===s.namespaceURI?"svg"===n&&("annotation-xml"===r$jscomp$0||ae[r$jscomp$0]):ue[n]:"http://www.w3.org/1998/Math/MathML"===t.namespaceURI?"http://www.w3.org/1999/xhtml"===
s.namespaceURI?"math"===n:"http://www.w3.org/2000/svg"===s.namespaceURI?"math"===n&&ce[r$jscomp$0]:fe[n]:!("http://www.w3.org/1999/xhtml"!==t.namespaceURI||"http://www.w3.org/2000/svg"===s.namespaceURI&&!ce[r$jscomp$0]||"http://www.w3.org/1998/Math/MathML"===s.namespaceURI&&!ae[r$jscomp$0]||fe[n]||!le[n]&&ue[n]))}return s?(de(t),!0):"noscript"!==r&&"noembed"!==r||!E(/<\/no(script|embed)/i,t.innerHTML)?(Lt&&3===t.nodeType&&(e=t.textContent,e=j(e,gt," "),e=j(e,vt," "),t.textContent!==e&&(C(n$jscomp$0.removed,
{element:t.cloneNode()}),t.textContent=e)),be("afterSanitizeElements",t,null),!1):(de(t),!0)},we=function(t,e,n){if($t&&("id"===e||"name"===e)&&(n in i$jscomp$0||n in oe))return!1;if(!It||Et[e]||!E(yt,e))if(!Tt||!E(bt,e))if(!St[e]||Et[e]){if(!(0<t.indexOf("-")&&(At.tagNameCheck instanceof RegExp&&E(At.tagNameCheck,t)||At.tagNameCheck instanceof Function&&At.tagNameCheck(t))&&(At.attributeNameCheck instanceof RegExp&&E(At.attributeNameCheck,e)||At.attributeNameCheck instanceof Function&&At.attributeNameCheck(e))||
"is"===e&&At.allowCustomizedBuiltInElements&&(At.tagNameCheck instanceof RegExp&&E(At.tagNameCheck,n)||At.tagNameCheck instanceof Function&&At.tagNameCheck(n))))return!1}else if(!(Zt[e]||E(xt,j(n,wt,""))||("src"===e||"xlink:href"===e||"href"===e)&&"script"!==t&&0===A(n,"data:")&&Gt[t]||Ft&&!E(_t,j(n,wt,"")))&&n)return!1;return!0},Ce=function(t$jscomp$0){var e,r,o,i;be("beforeSanitizeAttributes",t$jscomp$0,null);var s=t$jscomp$0.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:St};
for(i=s.length;i--;){var c=e=s[i],l=c.name;c=c.namespaceURI;if(r="value"===l?e.value:k(e.value),o=mt(l),a.attrName=o,a.attrValue=r,a.keepAttr=!0,a.forceKeepAttr=void 0,be("uponSanitizeAttribute",t$jscomp$0,a),r=a.attrValue,!a.forceKeepAttr&&(he(l,t$jscomp$0),a.keepAttr))if(E(/\/>/i,r))he(l,t$jscomp$0);else if(Lt&&(r=j(r,gt," "),r=j(r,vt," ")),e=mt(t$jscomp$0.nodeName),we(e,o,r))try{c?t$jscomp$0.setAttributeNS(c,l,r):t$jscomp$0.setAttribute(l,r),x(n$jscomp$0.removed)}catch(t){}}be("afterSanitizeAttributes",
t$jscomp$0,null)}},Oe=function t(e){var n,r=ge(e);for(be("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)be("uponSanitizeShadowNode",n,null),_e(n)||(n.content instanceof s$jscomp$0&&t(n.content),Ce(n));be("afterSanitizeShadowDOM",e,null)};return n$jscomp$0.sanitize=function(o,i){var a,l,f;if((te=!o)&&(o="\x3c!--\x3e"),"string"!=typeof o&&!ye(o)){if("function"!=typeof o.toString)throw T("toString is not a function");if("string"!=typeof(o=o.toString()))throw T("dirty is not a string, aborting");}if(!n$jscomp$0.isSupported){if("object"===
t$jscomp$1(e$jscomp$1.toStaticHTML)||"function"==typeof e$jscomp$1.toStaticHTML){if("string"==typeof o)return e$jscomp$1.toStaticHTML(o);if(ye(o))return e$jscomp$1.toStaticHTML(o.outerHTML)}return o}if(Mt||se(i),n$jscomp$0.removed=[],"string"==typeof o&&(Ht=!1),Ht){if(o.nodeName&&(i=mt(o.nodeName),!Ct[i]||kt[i]))throw T("root node is forbidden and cannot be sanitized in-place");}else if(o instanceof c$jscomp$0)1===(l=(a=me("\x3c!----\x3e")).ownerDocument.importNode(o,!0)).nodeType&&"BODY"===l.nodeName||
"HTML"===l.nodeName?a=l:a.appendChild(l);else{if(!Rt&&!Lt&&!Nt&&-1===o.indexOf("\x3c"))return ot&&Ut?ot.createHTML(o):o;if(!(a=me(o)))return Rt?null:Ut?it:""}a&&Pt&&de(a.firstChild);for(l=ge(Ht?o:a);i=l.nextNode();)3===i.nodeType&&i===f||_e(i)||(i.content instanceof s$jscomp$0&&Oe(i.content),Ce(i),f=i);if(Ht)return o;if(Rt){if(Dt)for(o=lt.call(a.ownerDocument);a.firstChild;)o.appendChild(a.firstChild);else o=a;return St.shadowroot&&(o=ft.call(r$jscomp$1,o,!0)),o}o=Nt?a.outerHTML:a.innerHTML;return Nt&&
Ct["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&E(tt,a.ownerDocument.doctype.name)&&(o="\x3c!DOCTYPE "+a.ownerDocument.doctype.name+"\x3e\n"+o),Lt&&(o=j(o,gt," "),o=j(o,vt," ")),ot&&Ut?ot.createHTML(o):o},n$jscomp$0.setConfig=function(t){se(t);Mt=!0},n$jscomp$0.clearConfig=function(){re=null;Mt=!1},n$jscomp$0.isValidAttribute=function(t,e,n){re||se({});t=mt(t);e=mt(e);return we(t,e,n)},n$jscomp$0.addHook=function(t,e){"function"==typeof e&&(dt[t]=dt[t]||[],
C(dt[t],e))},n$jscomp$0.removeHook=function(t){if(dt[t])return x(dt[t])},n$jscomp$0.removeHooks=function(t){dt[t]&&(dt[t]=[])},n$jscomp$0.removeAllHooks=function(){dt={}},n$jscomp$0}var u=Object.hasOwnProperty,f$jscomp$2=Object.setPrototypeOf,p=Object.isFrozen,d=Object.getPrototypeOf,h$jscomp$0=Object.getOwnPropertyDescriptor,m=Object.freeze,g=Object.seal,v$jscomp$0=Object.create,y$jscomp$0="undefined"!=typeof Reflect&&Reflect,b$jscomp$0=y$jscomp$0.apply,_=y$jscomp$0.construct;b$jscomp$0||(b$jscomp$0=
function(t,e,n){return t.apply(e,n)});m||(m=function(t){return t});g||(g=function(t){return t});_||(_=function(t,e){return r$jscomp$2(t,o$jscomp$1(e))});var w=I(Array.prototype.forEach),x=I(Array.prototype.pop),C=I(Array.prototype.push),O=I(String.prototype.toLowerCase),S=I(String.prototype.match),j=I(String.prototype.replace),A=I(String.prototype.indexOf),k=I(String.prototype.trim),E=I(RegExp.prototype.test),T=function(t){return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];
return _(t,n)}}(TypeError),P=m("a abbr acronym address area article aside audio b bdi bdo big blink blockquote body br button canvas caption center cite code col colgroup content data datalist dd decorator del details dfn dialog dir div dl dt element em fieldset figcaption figure font footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i img input ins kbd label legend li main map mark marquee menu menuitem meter nav nobr ol optgroup option output p picture pre progress q rp rt ruby s samp section select shadow small source spacer span strike strong style sub summary sup table tbody td template textarea tfoot th thead time tr track tt u ul var video wbr".split(" ")),
R=m("svg a altglyph altglyphdef altglyphitem animatecolor animatemotion animatetransform circle clippath defs desc ellipse filter font g glyph glyphref hkern image line lineargradient marker mask metadata mpath path pattern polygon polyline radialgradient rect stop style switch symbol text textpath title tref tspan view vkern".split(" ")),D=m("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence".split(" ")),
U=m("animate color-profile cursor discard fedropshadow font-face font-face-format font-face-name font-face-src font-face-uri foreignobject hatch hatchpath mesh meshgradient meshpatch meshrow missing-glyph script set solidcolor unknown use".split(" ")),$=m("math menclose merror mfenced mfrac mglyph mi mlabeledtr mmultiscripts mn mo mover mpadded mphantom mroot mrow ms mspace msqrt mstyle msub msup msubsup mtable mtd mtext mtr munder munderover".split(" ")),z=m("maction maligngroup malignmark mlongdiv mscarries mscarry msgroup mstack msline msrow semantics annotation annotation-xml mprescripts none".split(" ")),
H=m(["#text"]),B=m("accept action align alt autocapitalize autocomplete autopictureinpicture autoplay background bgcolor border capture cellpadding cellspacing checked cite class clear color cols colspan controls controlslist coords crossorigin datetime decoding default dir disabled disablepictureinpicture disableremoteplayback download draggable enctype enterkeyhint face for headers height hidden high href hreflang id inputmode integrity ismap kind label lang list loading loop low max maxlength media method min minlength multiple muted name nonce noshade novalidate nowrap open optimum pattern placeholder playsinline poster preload pubdate radiogroup readonly rel required rev reversed role rows rowspan spellcheck scope selected shape size sizes span srclang start src srcset step style summary tabindex title translate type usemap valign value width xmlns slot".split(" ")),
q=m("accent-height accumulate additive alignment-baseline ascent attributename attributetype azimuth basefrequency baseline-shift begin bias by class clip clippathunits clip-path clip-rule color color-interpolation color-interpolation-filters color-profile color-rendering cx cy d dx dy diffuseconstant direction display divisor dur edgemode elevation end fill fill-opacity fill-rule filter filterunits flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight fx fy g1 g2 glyph-name glyphref gradientunits gradienttransform height href id image-rendering in in2 k k1 k2 k3 k4 kerning keypoints keysplines keytimes lang lengthadjust letter-spacing kernelmatrix kernelunitlength lighting-color local marker-end marker-mid marker-start markerheight markerunits markerwidth maskcontentunits maskunits max mask media method mode min name numoctaves offset operator opacity order orient orientation origin overflow paint-order path pathlength patterncontentunits patterntransform patternunits points preservealpha preserveaspectratio primitiveunits r rx ry radius refx refy repeatcount repeatdur restart result rotate scale seed shape-rendering specularconstant specularexponent spreadmethod startoffset stddeviation stitchtiles stop-color stop-opacity stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke stroke-width style surfacescale systemlanguage tabindex targetx targety transform transform-origin text-anchor text-decoration text-rendering textlength type u1 u2 unicode values viewbox visibility version vert-adv-y vert-origin-x vert-origin-y width word-spacing wrap writing-mode xchannelselector ychannelselector x x1 x2 xmlns y y1 y2 z zoomandpan".split(" ")),
W=m("accent accentunder align bevelled close columnsalign columnlines columnspan denomalign depth dir display displaystyle encoding fence frame height href id largeop length linethickness lspace lquote mathbackground mathcolor mathsize mathvariant maxsize minsize movablelimits notation numalign open rowalign rowlines rowspacing rowspan rspace rquote scriptlevel scriptminsize scriptsizemultiplier selection separator separators stretchy subscriptshift supscriptshift symmetric voffset width xmlns".split(" ")),
G=m(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),J=g(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Z=g(/<%[\w\W]*|[\w\W]*%>/gm),V=g(/^data-[\-\w.\u00B7-\uFFFF]/),K=g(/^aria-[\-\w]+$/),Y=g(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Q=g(/^(?:\w+script|data):/i),X=g(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tt=g(/^html$/i),nt=function(e,n){if("object"!==t$jscomp$1(e)||"function"!=typeof e.createPolicy)return null;var r=null;n.currentScript&&
n.currentScript.hasAttribute("data-tt-policy-suffix")&&(r=n.currentScript.getAttribute("data-tt-policy-suffix"));n="dompurify"+(r?"#"+r:"");try{return e.createPolicy(n,{createHTML:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+n+" could not be created."),null}};return rt()}()},729:t$jscomp$0=>{function r$jscomp$0(){}function o$jscomp$0(t,e,n){this.fn=t;this.context=e;this.once=n||!1}function i$jscomp$0(t,e,r,i,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");
r=new o$jscomp$0(r,i||t,s);e=n$jscomp$0?n$jscomp$0+e:e;return t._events[e]?t._events[e].fn?t._events[e]=[t._events[e],r]:t._events[e].push(r):(t._events[e]=r,t._eventsCount++),t}function s$jscomp$0(t,e){0==--t._eventsCount?t._events=new r$jscomp$0:delete t._events[e]}function a$jscomp$0(){this._events=new r$jscomp$0;this._eventsCount=0}var e$jscomp$0=Object.prototype.hasOwnProperty,n$jscomp$0="~";Object.create&&(r$jscomp$0.prototype=Object.create(null),(new r$jscomp$0).__proto__||(n$jscomp$0=!1));
a$jscomp$0.prototype.eventNames=function(){var t,r,o=[];if(0===this._eventsCount)return o;for(r in t=this._events)e$jscomp$0.call(t,r)&&o.push(n$jscomp$0?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o};a$jscomp$0.prototype.listeners=function(t){t=this._events[n$jscomp$0?n$jscomp$0+t:t];if(!t)return[];if(t.fn)return[t.fn];for(var o=0,i=t.length,s=Array(i);o<i;o++)s[o]=t[o].fn;return s};a$jscomp$0.prototype.listenerCount=function(t){return(t=this._events[n$jscomp$0?
n$jscomp$0+t:t])?t.fn?1:t.length:0};a$jscomp$0.prototype.emit=function(t,e,r,o,i,s){var a=n$jscomp$0?n$jscomp$0+t:t;if(!this._events[a])return!1;var c,u=this._events[a],f=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),f){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,o),!0;case 5:return u.fn.call(u.context,e,r,o,i),!0;case 6:return u.fn.call(u.context,e,r,
o,i,s),!0}a=1;for(c=Array(f-1);a<f;a++)c[a-1]=arguments[a];u.fn.apply(u.context,c)}else{var d=u.length;for(a=0;a<d;a++)switch(u[a].once&&this.removeListener(t,u[a].fn,void 0,!0),f){case 1:u[a].fn.call(u[a].context);break;case 2:u[a].fn.call(u[a].context,e);break;case 3:u[a].fn.call(u[a].context,e,r);break;case 4:u[a].fn.call(u[a].context,e,r,o);break;default:if(!c){var p=1;for(c=Array(f-1);p<f;p++)c[p-1]=arguments[p]}u[a].fn.apply(u[a].context,c)}}return!0};a$jscomp$0.prototype.on=function(t,e,n){return i$jscomp$0(this,
t,e,n,!1)};a$jscomp$0.prototype.once=function(t,e,n){return i$jscomp$0(this,t,e,n,!0)};a$jscomp$0.prototype.removeListener=function(t,e,r,o){t=n$jscomp$0?n$jscomp$0+t:t;if(!this._events[t])return this;if(!e)return s$jscomp$0(this,t),this;var a=this._events[t];if(a.fn)a.fn!==e||o&&!a.once||r&&a.context!==r||s$jscomp$0(this,t);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==e||o&&!a[c].once||r&&a[c].context!==r)&&l.push(a[c]);l.length?this._events[t]=1===l.length?l[0]:l:s$jscomp$0(this,t)}return this};
a$jscomp$0.prototype.removeAllListeners=function(t){var e;return t?(e=n$jscomp$0?n$jscomp$0+t:t,this._events[e]&&s$jscomp$0(this,e)):(this._events=new r$jscomp$0,this._eventsCount=0),this};a$jscomp$0.prototype.off=a$jscomp$0.prototype.removeListener;a$jscomp$0.prototype.addListener=a$jscomp$0.prototype.on;a$jscomp$0.prefixed=n$jscomp$0;a$jscomp$0.EventEmitter=a$jscomp$0;t$jscomp$0.exports=a$jscomp$0},717:t$jscomp$0=>{"function"==typeof Object.create?t$jscomp$0.exports=function(t,e){t.super_=e;t.prototype=
Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t$jscomp$0.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype;t.prototype=new n;t.prototype.constructor=t}},824:t$jscomp$1=>{function a(t,e,n,r){return Math.round(t/n)+" "+r+(e>=1.5*n?"s":"")}t$jscomp$1.exports=function(t$jscomp$0,c$jscomp$0){c$jscomp$0=c$jscomp$0||{};var l=typeof t$jscomp$0;if("string"===l&&0<t$jscomp$0.length)return function(t){if(!(100<(t=String(t)).length)&&(t=
/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t))){var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return 315576E5*c;case "weeks":case "week":case "w":return 6048E5*c;case "days":case "day":case "d":return 864E5*c;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*c;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*
c;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*c;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return c}}}(t$jscomp$0);if("number"===l&&isFinite(t$jscomp$0))return c$jscomp$0.long?function(t){var i=Math.abs(t);return 864E5<=i?a(t,i,864E5,"day"):36E5<=i?a(t,i,36E5,"hour"):6E4<=i?a(t,i,6E4,"minute"):1E3<=i?a(t,i,1E3,"second"):t+" ms"}(t$jscomp$0):function(t){var i=Math.abs(t);return 864E5<=i?Math.round(t/864E5)+"d":36E5<=i?Math.round(t/36E5)+"h":
6E4<=i?Math.round(t/6E4)+"m":1E3<=i?Math.round(t/1E3)+"s":t+"ms"}(t$jscomp$0);throw Error("val is not a non-empty string or a valid number. val\x3d"+JSON.stringify(t$jscomp$0));}},520:(t$jscomp$0,e$jscomp$0,n$jscomp$0)=>{function s$jscomp$0(t,e){for(var n=[],r=0;r<t.length;r++){var o=t[r];o&&"."!==o&&(".."===o?n.length&&".."!==n[n.length-1]?n.pop():e&&n.push(".."):n.push(o))}return n}function a$jscomp$0(t){for(var e=t.length-1,n=0;n<=e&&!t[n];n++);for(var r=e;0<=r&&!t[r];r--);return 0===n&&r===e?
t:n>r?[]:t.slice(n,r+1)}function f$jscomp$0(t){var e=c$jscomp$0.exec(t);t=(e[1]||"")+(e[2]||"");e=l$jscomp$0.exec(e[3]||"");return[t,e[1],e[2],e[3]]}function p(t){t=c$jscomp$0.exec(t);var n=t[1]||"",r=!!n&&":"!==n[1];return{device:n,isUnc:r,isAbsolute:r||!!t[2],tail:t[3]}}function d(t){return"\\\\"+t.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}var r$jscomp$0=n$jscomp$0(155);e$jscomp$0="win32"===r$jscomp$0.platform;var i$jscomp$0=n$jscomp$0(539),c$jscomp$0=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,
l$jscomp$0=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,u$jscomp$0={resolve:function(){for(var t="",e="",n=!1,o=arguments.length-1;-1<=o;o--){var a;if(0<=o?a=arguments[o]:t?(a=r$jscomp$0.env["\x3d"+t])&&a.substr(0,3).toLowerCase()===t.toLowerCase()+"\\"||(a=t+"\\"):a=r$jscomp$0.cwd(),!i$jscomp$0.isString(a))throw new TypeError("Arguments to path.resolve must be strings");if(a){var c=p(a),l=c.device,u=c.isUnc,f=c.isAbsolute;c=c.tail;if((!l||!t||l.toLowerCase()===t.toLowerCase())&&
(t||(t=l),n||(e=c+"\\"+e,n=f),t&&n))break}}return u&&(t=d(t)),t+(n?"\\":"")+s$jscomp$0(e.split(/[\\\/]+/),!n).join("\\")||"."},normalize:function(t){var e=p(t);t=e.device;var r=e.isUnc,o=e.isAbsolute;e=e.tail;var a=/[\\\/]$/.test(e);return(e=s$jscomp$0(e.split(/[\\\/]+/),!o).join("\\"))||o||(e="."),e&&a&&(e+="\\"),r&&(t=d(t)),t+(o?"\\":"")+e},isAbsolute:function(t){return p(t).isAbsolute},join:function(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(!i$jscomp$0.isString(n))throw new TypeError("Arguments to path.join must be strings");
n&&t.push(n)}e=t.join("\\");return/^[\\\/]{2}[^\\\/]/.test(t[0])||(e=e.replace(/^[\\\/]{2,}/,"\\")),u$jscomp$0.normalize(e)},relative:function(t,e){t=u$jscomp$0.resolve(t);e=u$jscomp$0.resolve(e);var n=t.toLowerCase(),r=e.toLowerCase();t=a$jscomp$0(e.split("\\"));n=a$jscomp$0(n.split("\\"));var s=a$jscomp$0(r.split("\\")),c=Math.min(n.length,s.length);r=c;for(var f=0;f<c;f++)if(n[f]!==s[f]){r=f;break}if(0==r)return e;e=[];for(f=r;f<n.length;f++)e.push("..");return e.concat(t.slice(r)).join("\\")},
_makeLong:function(t){if(!i$jscomp$0.isString(t))return t;if(!t)return"";var e=u$jscomp$0.resolve(t);return/^[a-zA-Z]:\\/.test(e)?"\\\\?\\"+e:/^\\\\[^?.]/.test(e)?"\\\\?\\UNC\\"+e.substring(2):t},dirname:function(t){var e=f$jscomp$0(t);t=e[0];e=e[1];return t||e?(e&&(e=e.substr(0,e.length-1)),t+e):"."},basename:function(t,e){t=f$jscomp$0(t)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t},extname:function(t){return f$jscomp$0(t)[3]},format:function(t){if(!i$jscomp$0.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+
typeof t);if(!i$jscomp$0.isString(t.root||""))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var n=t.dir;t=t.base||"";return n?n[n.length-1]===u$jscomp$0.sep?n+t:n+u$jscomp$0.sep+t:t},parse:function(t){if(!i$jscomp$0.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=f$jscomp$0(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,
e[2].length-e[3].length)}},sep:"\\",delimiter:";"},h=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,m={resolve:function(){for(var t="",e=!1,n=arguments.length-1;-1<=n&&!e;n--){var o=0<=n?arguments[n]:r$jscomp$0.cwd();if(!i$jscomp$0.isString(o))throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,e="/"===o[0])}return(e?"/":"")+s$jscomp$0(t.split("/"),!e).join("/")||"."},normalize:function(t){var e=m.isAbsolute(t),n=t&&"/"===t[t.length-1];return(t=s$jscomp$0(t.split("/"),
!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},isAbsolute:function(t){return"/"===t.charAt(0)},join:function(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];if(!i$jscomp$0.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(t+=t?"/"+n:n)}return m.normalize(t)},relative:function(t,e){t=m.resolve(t).substr(1);e=m.resolve(e).substr(1);t=a$jscomp$0(t.split("/"));e=a$jscomp$0(e.split("/"));for(var o=Math.min(t.length,e.length),i=o,s=0;s<o;s++)if(t[s]!==
e[s]){i=s;break}o=[];for(s=i;s<t.length;s++)o.push("..");return o.concat(e.slice(i)).join("/")},_makeLong:function(t){return t},dirname:function(t){var e=h.exec(t).slice(1);t=e[0];e=e[1];return t||e?(e&&(e=e.substr(0,e.length-1)),t+e):"."},basename:function(t,e){t=h.exec(t).slice(1)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t},extname:function(t){return h.exec(t).slice(1)[3]},format:function(t){if(!i$jscomp$0.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+
typeof t);if(!i$jscomp$0.isString(t.root||""))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);return(t.dir?t.dir+m.sep:"")+(t.base||"")},parse:function(t){if(!i$jscomp$0.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=h.exec(t).slice(1);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return e[1]=e[1]||"",e[2]=e[2]||"",e[3]=e[3]||"",{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,
e[2].length-e[3].length)}},sep:"/",delimiter:":"};t$jscomp$0.exports=e$jscomp$0?u$jscomp$0:m;t$jscomp$0.exports.posix=m;t$jscomp$0.exports.win32=u$jscomp$0},155:t$jscomp$1=>{function o(){throw Error("setTimeout has not been defined");}function i(){throw Error("clearTimeout has not been defined");}function s(t){if(e$jscomp$2===setTimeout)return setTimeout(t,0);if((e$jscomp$2===o||!e$jscomp$2)&&setTimeout)return e$jscomp$2=setTimeout,setTimeout(t,0);try{return e$jscomp$2(t,0)}catch(n$jscomp$0){try{return e$jscomp$2.call(null,
t,0)}catch(n){return e$jscomp$2.call(this,t,0)}}}function f(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&p())}function p(){if(!l){var t$jscomp$0=s(f);l=!0;for(var e$jscomp$1=c.length;e$jscomp$1;){a=c;for(c=[];++u<e$jscomp$1;)a&&a[u].run();u=-1;e$jscomp$1=c.length}a=null;l=!1;(function(t){if(n$jscomp$1===clearTimeout)return clearTimeout(t);if((n$jscomp$1===i||!n$jscomp$1)&&clearTimeout)return n$jscomp$1=clearTimeout,clearTimeout(t);try{n$jscomp$1(t)}catch(e$jscomp$0){try{return n$jscomp$1.call(null,
t)}catch(e){return n$jscomp$1.call(this,t)}}})(t$jscomp$0)}}function d(t,e){this.fun=t;this.array=e}function h(){}t$jscomp$1=t$jscomp$1.exports={};try{var e$jscomp$2="function"==typeof setTimeout?setTimeout:o}catch(t){e$jscomp$2=o}try{var n$jscomp$1="function"==typeof clearTimeout?clearTimeout:i}catch(t){n$jscomp$1=i}!0;var a,c=[],l=!1,u=-1;t$jscomp$1.nextTick=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e));
1!==c.length||l||s(p)};d.prototype.run=function(){this.fun.apply(null,this.array)};t$jscomp$1.title="browser";t$jscomp$1.browser=!0;t$jscomp$1.env={};t$jscomp$1.argv=[];t$jscomp$1.version="";t$jscomp$1.versions={};t$jscomp$1.on=h;t$jscomp$1.addListener=h;t$jscomp$1.once=h;t$jscomp$1.off=h;t$jscomp$1.removeListener=h;t$jscomp$1.removeAllListeners=h;t$jscomp$1.emit=h;t$jscomp$1.prependListener=h;t$jscomp$1.prependOnceListener=h;t$jscomp$1.listeners=function(t){return[]};t$jscomp$1.binding=function(t){throw Error("process.binding is not supported");
};t$jscomp$1.cwd=function(){return"/"};t$jscomp$1.chdir=function(t){throw Error("process.chdir is not supported");};t$jscomp$1.umask=function(){return 0}},384:t$jscomp$0=>{t$jscomp$0.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},539:(t$jscomp$2,e$jscomp$1,n$jscomp$1)=>{function a$jscomp$1(t,n){var r={seen:[],stylize:l};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),
h(n)?r.showHidden=n:n&&e$jscomp$1._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c$jscomp$0),u(r,t,r.depth)}function c$jscomp$0(t,e){return(e=a$jscomp$1.styles[e])?"["+a$jscomp$1.colors[e][0]+"m"+t+"["+a$jscomp$1.colors[e][1]+"m":t}function l(t,e){return t}function u(t$jscomp$1,n$jscomp$0,r$jscomp$0){if(t$jscomp$1.customInspect&&n$jscomp$0&&C(n$jscomp$0.inspect)&&n$jscomp$0.inspect!==
e$jscomp$1.inspect&&(!n$jscomp$0.constructor||n$jscomp$0.constructor.prototype!==n$jscomp$0)){var o$jscomp$1=n$jscomp$0.inspect(r$jscomp$0,t$jscomp$1);return v(o$jscomp$1)||(o$jscomp$1=u(t$jscomp$1,o$jscomp$1,r$jscomp$0)),o$jscomp$1}var i$jscomp$0=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(v(e))return e="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",t.stylize(e,"string");if(g(e))return t.stylize(""+e,"number");if(h(e))return t.stylize(""+
e,"boolean");if(null===e)return t.stylize("null","null")}(t$jscomp$1,n$jscomp$0);if(i$jscomp$0)return i$jscomp$0;i$jscomp$0=Object.keys(n$jscomp$0);var a$jscomp$0=function(t$jscomp$0){var e={};return t$jscomp$0.forEach(function(t,n){e[t]=!0}),e}(i$jscomp$0);if(t$jscomp$1.showHidden&&(i$jscomp$0=Object.getOwnPropertyNames(n$jscomp$0)),x(n$jscomp$0)&&(0<=i$jscomp$0.indexOf("message")||0<=i$jscomp$0.indexOf("description")))return f(n$jscomp$0);if(0===i$jscomp$0.length){if(C(n$jscomp$0))return t$jscomp$1.stylize("[Function"+
(n$jscomp$0.name?": "+n$jscomp$0.name:"")+"]","special");if(b(n$jscomp$0))return t$jscomp$1.stylize(RegExp.prototype.toString.call(n$jscomp$0),"regexp");if(w(n$jscomp$0))return t$jscomp$1.stylize(Date.prototype.toString.call(n$jscomp$0),"date");if(x(n$jscomp$0))return f(n$jscomp$0)}var _="",O=!1,S=["{","}"];(d(n$jscomp$0)&&(O=!0,S=["[","]"]),C(n$jscomp$0))&&(_=" [Function"+(n$jscomp$0.name?": "+n$jscomp$0.name:"")+"]");return b(n$jscomp$0)&&(_=" "+RegExp.prototype.toString.call(n$jscomp$0)),w(n$jscomp$0)&&
(_=" "+Date.prototype.toUTCString.call(n$jscomp$0)),x(n$jscomp$0)&&(_=" "+f(n$jscomp$0)),0!==i$jscomp$0.length||O&&0!=n$jscomp$0.length?0>r$jscomp$0?b(n$jscomp$0)?t$jscomp$1.stylize(RegExp.prototype.toString.call(n$jscomp$0),"regexp"):t$jscomp$1.stylize("[Object]","special"):(t$jscomp$1.seen.push(n$jscomp$0),o$jscomp$1=O?function(t,e,n,r,o$jscomp$0){for(var i=[],s=0,a=e.length;s<a;++s)Object.prototype.hasOwnProperty.call(e,String(s))?i.push(p(t,e,n,r,String(s),!0)):i.push("");return o$jscomp$0.forEach(function(o){o.match(/^\d+$/)||
i.push(p(t,e,n,r,o,!0))}),i}(t$jscomp$1,n$jscomp$0,r$jscomp$0,a$jscomp$0,i$jscomp$0):i$jscomp$0.map(function(e){return p(t$jscomp$1,n$jscomp$0,r$jscomp$0,a$jscomp$0,e,O)}),t$jscomp$1.seen.pop(),function(t$jscomp$0,e$jscomp$0,n){return 60<t$jscomp$0.reduce(function(t,e){return 0<=e.indexOf("\n")&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)?n[0]+(""===e$jscomp$0?"":e$jscomp$0+"\n ")+" "+t$jscomp$0.join(",\n  ")+" "+n[1]:n[0]+e$jscomp$0+" "+t$jscomp$0.join(", ")+" "+n[1]}(o$jscomp$1,_,S)):S[0]+
_+S[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t$jscomp$0,e,n,r,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?a=c.set?t$jscomp$0.stylize("[Getter/Setter]","special"):t$jscomp$0.stylize("[Getter]","special"):c.set&&(a=t$jscomp$0.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(r,o)||(s="["+o+"]"),a||(0>t$jscomp$0.seen.indexOf(c.value)?-1<(a=null===n?u(t$jscomp$0,c.value,null):u(t$jscomp$0,c.value,n-1)).indexOf("\n")&&
(a=i?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t$jscomp$0.stylize("[Circular]","special")),y(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t$jscomp$0.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t$jscomp$0.stylize(s,"string"))}return s+": "+a}function d(t){return Array.isArray(t)}function h(t){return"boolean"==
typeof t}function g(t){return"number"==typeof t}function v(t){return"string"==typeof t}function y(t){return void 0===t}function b(t){return _$jscomp$0(t)&&"[object RegExp]"===Object.prototype.toString.call(t)}function _$jscomp$0(t){return"object"==typeof t&&null!==t}function w(t){return _$jscomp$0(t)&&"[object Date]"===Object.prototype.toString.call(t)}function x(t){return _$jscomp$0(t)&&("[object Error]"===Object.prototype.toString.call(t)||t instanceof Error)}function C(t){return"function"==typeof t}
function S$jscomp$0(t){return 10>t?"0"+t.toString(10):t.toString(10)}var r$jscomp$1=n$jscomp$1(155),o$jscomp$2=/%[sdj%]/g;e$jscomp$1.format=function(t$jscomp$1){if(!v(t$jscomp$1)){for(var e=[],n=0;n<arguments.length;n++)e.push(a$jscomp$1(arguments[n]));return e.join(" ")}n=1;var r=arguments,i=r.length;e=String(t$jscomp$1).replace(o$jscomp$2,function(t$jscomp$0){if("%%"===t$jscomp$0)return"%";if(n>=i)return t$jscomp$0;switch(t$jscomp$0){case "%s":return String(r[n++]);case "%d":return Number(r[n++]);
case "%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t$jscomp$0}});for(var c=r[n];n<i;c=r[++n])null!==c&&_$jscomp$0(c)?e+=" "+a$jscomp$1(c):e+=" "+c;return e};e$jscomp$1.deprecate=function(t,o){if(y(n$jscomp$1.g.process))return function(){return e$jscomp$1.deprecate(t,o).apply(this,arguments)};if(!0===r$jscomp$1.noDeprecation)return t;var i=!1;return function(){if(!i){if(r$jscomp$1.throwDeprecation)throw Error(o);r$jscomp$1.traceDeprecation?console.trace(o):console.error(o);
i=!0}return t.apply(this,arguments)}};var i$jscomp$1,s$jscomp$0={};e$jscomp$1.debuglog=function(t){if(y(i$jscomp$1)&&(i$jscomp$1=r$jscomp$1.env.NODE_DEBUG||""),t=t.toUpperCase(),!s$jscomp$0[t])if((new RegExp("\\b"+t+"\\b","i")).test(i$jscomp$1)){var n=r$jscomp$1.pid;s$jscomp$0[t]=function(){var r=e$jscomp$1.format.apply(e$jscomp$1,arguments);console.error("%s %d: %s",t,n,r)}}else s$jscomp$0[t]=function(){};return s$jscomp$0[t]};e$jscomp$1.inspect=a$jscomp$1;a$jscomp$1.colors={bold:[1,22],italic:[3,
23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};a$jscomp$1.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};e$jscomp$1.isArray=d;e$jscomp$1.isBoolean=h;e$jscomp$1.isNull=function(t){return null===t};e$jscomp$1.isNullOrUndefined=function(t){return null==t};e$jscomp$1.isNumber=g;e$jscomp$1.isString=v;e$jscomp$1.isSymbol=
function(t){return"symbol"==typeof t};e$jscomp$1.isUndefined=y;e$jscomp$1.isRegExp=b;e$jscomp$1.isObject=_$jscomp$0;e$jscomp$1.isDate=w;e$jscomp$1.isError=x;e$jscomp$1.isFunction=C;e$jscomp$1.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t};e$jscomp$1.isBuffer=n$jscomp$1(384);var j="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");e$jscomp$1.log=function(){var JSCompiler_temp_const=console,JSCompiler_temp_const$jscomp$0=
JSCompiler_temp_const.log;var JSCompiler_inline_result=new Date;var e=[S$jscomp$0(JSCompiler_inline_result.getHours()),S$jscomp$0(JSCompiler_inline_result.getMinutes()),S$jscomp$0(JSCompiler_inline_result.getSeconds())].join(":");JSCompiler_inline_result=[JSCompiler_inline_result.getDate(),j[JSCompiler_inline_result.getMonth()],e].join(" ");JSCompiler_temp_const$jscomp$0.call(JSCompiler_temp_const,"%s - %s",JSCompiler_inline_result,e$jscomp$1.format.apply(e$jscomp$1,arguments))};e$jscomp$1.inherits=
n$jscomp$1(717);e$jscomp$1._extend=function(t,e){if(!e||!_$jscomp$0(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}},e$jscomp$3={};n$jscomp$3.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n$jscomp$3.d(e,{a:e}),e};n$jscomp$3.d=(t,e)=>{for(var r in e)n$jscomp$3.o(e,r)&&!n$jscomp$3.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})};n$jscomp$3.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||(new Function("return this"))()}catch(t){if("object"==
typeof window)return window}}();n$jscomp$3.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);n$jscomp$3.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});Object.defineProperty(t,"__esModule",{value:!0})};var r$jscomp$3={};return(()=>{function f(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}
function ft(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ht(t){this.size=(this.__data__=new p$jscomp$0(t)).size}function $e(t){return t.toLowerCase()}function Be(t$jscomp$0,e$jscomp$0,n){return e$jscomp$0 instanceof RegExp?t$jscomp$0.replace(e$jscomp$0,n):e$jscomp$0.reduce(function(t,e){return t.replace(e,n)},t$jscomp$0)}function Je(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xe(t$jscomp$0,
e$jscomp$0){let n$jscomp$0,r,o$jscomp$0=!1;const i=e=>n=>{t$jscomp$0&&clearTimeout(t$jscomp$0);e(n);o$jscomp$0=!0},s$jscomp$0=new Promise((o,s)=>{n$jscomp$0=i(o);r=i(s);t$jscomp$0&&(t$jscomp$0=setTimeout(()=>r(Error(`[deferred timeout] ${e$jscomp$0}`)),t$jscomp$0))});return{created:Date.now(),setTag:t=>e$jscomp$0=t,resolve:n$jscomp$0,reject:r,promise:s$jscomp$0,get settled(){return o$jscomp$0}}}function rn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):
t[e]=n,t}function dn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gn(t$jscomp$0,e$jscomp$0){return t$jscomp$0.startsWith("http")?fetch(t$jscomp$0,e$jscomp$0):(t$jscomp$0=t$jscomp$0.replace("file://",""),new Promise((e,n$jscomp$0)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{const n=yield window.apis.doAction(["readFile",t$jscomp$0]);e({text:()=>n})}catch(t){console.error(t),n$jscomp$0(t)}})))}function yn(t,e,
n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Un(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new pt;++e<n;)this.add(t[e])}function Pr(t,e){if("function"!=typeof t||null!=e&&"function"!=
typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);r=t.apply(this,r);return n.cache=i.set(o,r)||i,r};return n.cache=new (Pr.Cache||pt),n}function io(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ao(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fo(t,e,n){var r;
if("function"!=typeof n)return!1;const {key:o,label:i,desc:s,palette:a,keybinding:c,extras:l}=e;e=`SimpleCommandHook${o}${++vo}`;this.Editor["on"+e](n);null===(r=this.caller)||void 0===r||r.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:o,label:i,type:t,desc:s,keybinding:c,extras:l},["editor/hook",e]],a]})}function po(t){return!("string"!=typeof(e=t)||36!==e.length||!/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e))||
(uo.error(`#${t} is not a valid UUID string.`),!1);var e}function Oo(t,e){return new Co(t,e)}n$jscomp$3.r(r$jscomp$3);n$jscomp$3.d(r$jscomp$3,{LSPluginUser:()=>Co,setupPluginUserInstance:()=>Oo});var t$jscomp$3=n$jscomp$3(520);n$jscomp$3(856);const o$jscomp$1=function(t,e){return t===e||t!=t&&e!=e},i$jscomp$1=function(t,e){for(var n=t.length;n--;)if(o$jscomp$1(t[n][0],e))return n;return-1};var s$jscomp$1=Array.prototype.splice;f.prototype.clear=function(){this.__data__=[];this.size=0};f.prototype.delete=
function(t){var e=this.__data__;t=i$jscomp$1(e,t);return!(0>t)&&(t==e.length-1?e.pop():s$jscomp$1.call(e,t,1),--this.size,!0)};f.prototype.get=function(t){var e=this.__data__;t=i$jscomp$1(e,t);return 0>t?void 0:e[t][1]};f.prototype.has=function(t){return-1<i$jscomp$1(this.__data__,t)};f.prototype.set=function(t,e){var n=this.__data__,r=i$jscomp$1(n,t);return 0>r?(++this.size,n.push([t,e])):n[r][1]=e,this};const p$jscomp$0=f,v="object"==typeof global&&global&&global.Object===Object&&global;var y="object"==
typeof self&&self&&self.Object===Object&&self;const b=v||y||Function("return this")(),_=b.Symbol;var w=Object.prototype,x=w.hasOwnProperty,C=w.toString,O=_?_.toStringTag:void 0,j=Object.prototype.toString,k=_?_.toStringTag:void 0;const E=function(t$jscomp$0){if(null==t$jscomp$0)t$jscomp$0=void 0===t$jscomp$0?"[object Undefined]":"[object Null]";else if(k&&k in Object(t$jscomp$0)){var e=x.call(t$jscomp$0,O),n=t$jscomp$0[O];try{t$jscomp$0[O]=void 0;var r=!0}catch(t){}var o=C.call(t$jscomp$0);t$jscomp$0=
(r&&(e?t$jscomp$0[O]=n:delete t$jscomp$0[O]),o)}else t$jscomp$0=j.call(t$jscomp$0);return t$jscomp$0},T=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},I=function(t){if(!T(t))return!1;t=E(t);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},F=b["__core-js_shared__"];var L,N=(L=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"",P=Function.prototype.toString;const R=function(t$jscomp$0){if(null!=
t$jscomp$0){try{return P.call(t$jscomp$0)}catch(t){}return t$jscomp$0+""}return""};var D=/^\[object .+?Constructor\]$/,B=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const G=function(t,e){t=null==t?void 0:t[e];return!T(t)||N&&N in t||!(I(t)?B:D).test(R(t))?void 0:t},J=G(b,"Map"),Z=G(Object,"create");var Y=Object.prototype.hasOwnProperty,X=Object.prototype.hasOwnProperty;
nt.prototype.clear=function(){this.__data__=Z?Z(null):{};this.size=0};nt.prototype.delete=function(t){t=this.has(t)&&delete this.__data__[t];return this.size-=t?1:0,t};nt.prototype.get=function(t){var e=this.__data__;return Z?(t=e[t],"__lodash_hash_undefined__"===t?void 0:t):Y.call(e,t)?e[t]:void 0};nt.prototype.has=function(t){var e=this.__data__;return Z?void 0!==e[t]:X.call(e,t)};nt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Z&&void 0===e?"__lodash_hash_undefined__":
e,this};const st=function(t,e$jscomp$0){t=t.__data__;var e=typeof e$jscomp$0;return("string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==e$jscomp$0:null===e$jscomp$0)?t["string"==typeof e$jscomp$0?"string":"hash"]:t.map};ft.prototype.clear=function(){this.size=0;this.__data__={hash:new nt,map:new (J||p$jscomp$0),string:new nt}};ft.prototype.delete=function(t){t=st(this,t).delete(t);return this.size-=t?1:0,t};ft.prototype.get=function(t){return st(this,t).get(t)};ft.prototype.has=function(t){return st(this,
t).has(t)};ft.prototype.set=function(t,e){var n=st(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};const pt=ft;ht.prototype.clear=function(){this.__data__=new p$jscomp$0;this.size=0};ht.prototype.delete=function(t){var e=this.__data__;t=e.delete(t);return this.size=e.size,t};ht.prototype.get=function(t){return this.__data__.get(t)};ht.prototype.has=function(t){return this.__data__.has(t)};ht.prototype.set=function(t,e){var n=this.__data__;if(n instanceof p$jscomp$0){var r=n.__data__;
if(!J||199>r.length)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new pt(r)}return n.set(t,e),this.size=n.size,this};const gt=function(){try{var t$jscomp$0=G(Object,"defineProperty");return t$jscomp$0({},"",{}),t$jscomp$0}catch(t){}}(),vt=function(t,e,n){"__proto__"==e&&gt?gt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},yt=function(t,e,n){(void 0===n||o$jscomp$1(t[e],n))&&(void 0!==n||e in t)||vt(t,e,n)},bt=function(t){return function(e,n,r){var o=-1,i=Object(e);
r=r(e);for(var a=r.length;a--;){var c=r[t?a:++o];if(!1===n(i[c],c,i))break}return e}}(),St=b.Uint8Array;var Et=Object.create;const Tt=function(){function t(){}return function(e){if(!T(e))return{};if(Et)return Et(e);t.prototype=e;e=new t;return t.prototype=void 0,e}}(),It=function(t,e){return function(n){return t(e(n))}},Ft=It(Object.getPrototypeOf,Object);var Lt=Object.prototype;const Nt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Lt)},Pt=function(t){return null!=
t&&"object"==typeof t},Rt=function(t){return Pt(t)&&"[object Arguments]"==E(t)};var Dt=Object.prototype,Ut=Dt.hasOwnProperty,$t=Dt.propertyIsEnumerable;const zt=Rt(function(){return arguments}())?Rt:function(t){return Pt(t)&&Ut.call(t,"callee")&&!$t.call(t,"callee")},Ht=Array.isArray,Bt=function(t){return"number"==typeof t&&-1<t&&0==t%1&&9007199254740991>=t},qt=function(t){return null!=t&&Bt(t.length)&&!I(t)},Gt=function(){return!1};var Jt="object"==typeof exports&&exports&&!exports.nodeType&&exports,
Zt=Jt&&"object"==typeof module&&module&&!module.nodeType&&module,Vt=Zt&&Zt.exports===Jt?b.Buffer:void 0;const Kt=(Vt?Vt.isBuffer:void 0)||Gt;var Xt=Function.prototype.toString,te=Object.prototype.hasOwnProperty,ee=Xt.call(Object),re={};re["[object Float32Array]"]=re["[object Float64Array]"]=re["[object Int8Array]"]=re["[object Int16Array]"]=re["[object Int32Array]"]=re["[object Uint8Array]"]=re["[object Uint8ClampedArray]"]=re["[object Uint16Array]"]=re["[object Uint32Array]"]=!0;re["[object Arguments]"]=
re["[object Array]"]=re["[object ArrayBuffer]"]=re["[object Boolean]"]=re["[object DataView]"]=re["[object Date]"]=re["[object Error]"]=re["[object Function]"]=re["[object Map]"]=re["[object Number]"]=re["[object Object]"]=re["[object RegExp]"]=re["[object Set]"]=re["[object String]"]=re["[object WeakMap]"]=!1;const oe=function(t){return Pt(t)&&Bt(t.length)&&!!re[E(t)]},ie=function(t){return function(e){return t(e)}};var se="object"==typeof exports&&exports&&!exports.nodeType&&exports,ae=se&&"object"==
typeof module&&module&&!module.nodeType&&module,ce=ae&&ae.exports===se&&v.process;a:{try{var le=ae&&ae.require&&ae.require("util").types||ce&&ce.binding&&ce.binding("util");break a}catch(t){}le=void 0}var ue=le&&le.isTypedArray;const fe=ue?ie(ue):oe,pe=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var de=Object.prototype.hasOwnProperty,ve=/^(?:0|[1-9]\d*)$/;const ye=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=
n&&ve.test(t))&&-1<t&&0==t%1&&t<e};var be=Object.prototype.hasOwnProperty;const _e=function(t,e$jscomp$0){var n=Ht(t),r=!n&&zt(t),o=!n&&!r&&Kt(t),i=!n&&!r&&!o&&fe(t);if(n=n||r||o||i){r=t.length;for(var e=String,n$jscomp$0=-1,r$jscomp$0=Array(r);++n$jscomp$0<r;)r$jscomp$0[n$jscomp$0]=e(n$jscomp$0);r=r$jscomp$0}else r=[];e=r.length;for(var l in t)!e$jscomp$0&&!be.call(t,l)||n&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ye(l,e))||r.push(l);return r};
var xe=Object.prototype.hasOwnProperty;const Oe=function(t){if(qt(t))t=_e(t,!0);else if(T(t)){var e=Nt(t),n=[];for(r in t)("constructor"!=r||!e&&xe.call(t,r))&&n.push(r);t=n}else{var r=[];if(null!=t)for(e in Object(t))r.push(e);t=r}return t},Ae=function t$jscomp$0(e,n,r$jscomp$0,o,i){e!==n&&bt(n,function(s$jscomp$0,a$jscomp$1){if(i||(i=new ht),T(s$jscomp$0)){s$jscomp$0=i;var a=pe(e,a$jscomp$1),c=pe(n,a$jscomp$1),l=s$jscomp$0.get(c);if(l)yt(e,a$jscomp$1,l);else{var u=o?o(a,c,a$jscomp$1+"",e,n,s$jscomp$0):
void 0;if(l=void 0===u){var p=Ht(c),d=!p&&Kt(c),h=!p&&!d&&fe(c);u=c;if(p||d||h)if(Ht(a))u=a;else if(Pt(a)&&qt(a))for(u=void 0,p=-1,d=a.length,u||(u=Array(d));++p<d;)u[p]=a[p];else d?(l=!1,a=c.slice(),u=a):h?(l=!1,a=c.buffer,u=new a.constructor(a.byteLength),a=((new St(u)).set(new St(a)),u),u=new c.constructor(a,c.byteOffset,c.length)):u=[];else if(Pt(c)&&"[object Object]"==E(c)?(p=Ft(c),null===p?p=!0:(p=te.call(p,"constructor")&&p.constructor,p="function"==typeof p&&p instanceof p&&Xt.call(p)==ee)):
p=!1,p||zt(c))if(u=a,zt(a)){u=Oe(a);p=void 0;d=!p;p||(p={});h=-1;for(var s=u.length;++h<s;){var a$jscomp$0=u[h],c$jscomp$0=void 0;void 0===c$jscomp$0&&(c$jscomp$0=a[a$jscomp$0]);if(d)vt(p,a$jscomp$0,c$jscomp$0);else{var t=p,r=t[a$jscomp$0];de.call(t,a$jscomp$0)&&o$jscomp$1(r,c$jscomp$0)&&(void 0!==c$jscomp$0||a$jscomp$0 in t)||vt(t,a$jscomp$0,c$jscomp$0)}}u=p}else T(a)&&!I(a)||(u="function"!=typeof c.constructor||Nt(c)?{}:Tt(Ft(c)));else l=!1}l&&(s$jscomp$0.set(c,u),t$jscomp$0(u,c,r$jscomp$0,o,s$jscomp$0),
s$jscomp$0.delete(c));yt(e,a$jscomp$1,u)}}else c=o?o(pe(e,a$jscomp$1),s$jscomp$0,a$jscomp$1+"",e,n,i):void 0,void 0===c&&(c=s$jscomp$0),yt(e,a$jscomp$1,c)},Oe)},ke=function(t){return t},Ee=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var Te=Math.max;const Ie=function(t,e,n){return e=Te(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=Te(r.length-e,
0),s=Array(i);++o<i;)s[o]=r[e+o];o=-1;for(i=Array(e+1);++o<e;)i[o]=r[o];return i[e]=n(s),Ee(t,this,i)}},Fe=function(t){return function(){return t}};var Ne=Date.now;const Me=function(t){var e=0,n=0;return function(){var r=Ne(),o=16-(r-n);if(n=r,0<o){if(800<=++e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(gt?function(t,e){return gt(t,"toString",{configurable:!0,enumerable:!1,value:Fe(e),writable:!0})}:ke),Pe=function(t,e){return Me(Ie(t,e,ke),t+"")},De=function(t){return Pe(function(e$jscomp$0,
n){var r=-1,o=n.length,i=1<o?n[o-1]:void 0,s=2<o?n[2]:void 0;i=3<t.length&&"function"==typeof i?(o--,i):void 0;var JSCompiler_temp;if(JSCompiler_temp=s){JSCompiler_temp=n[0];var e=n[1];if(T(s)){var r$jscomp$0=typeof e;JSCompiler_temp=!!("number"==r$jscomp$0?qt(s)&&ye(e,s.length):"string"==r$jscomp$0&&e in s)&&o$jscomp$1(s[e],JSCompiler_temp)}else JSCompiler_temp=!1}JSCompiler_temp&&(i=3>o?void 0:i,o=1);for(e$jscomp$0=Object(e$jscomp$0);++r<o;)(s=n[r])&&t(e$jscomp$0,s,r,i);return e$jscomp$0})}(function(t,
e,n){Ae(t,e,n)});var Ue=function(){return Ue=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ue.apply(this,arguments)};Object.create;Object.create;var ze=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],He=/[^A-Z0-9]+/gi,We=n$jscomp$3(729),Ge=n$jscomp$3.n(We);const Ze="win32"===navigator.platform.toLowerCase()?t$jscomp$3.win32:t$jscomp$3.posix,Ve=function(t,e$jscomp$0){void 0===e$jscomp$0&&
(e$jscomp$0={});e$jscomp$0=Ue({delimiter:"_"},e$jscomp$0);void 0===e$jscomp$0&&(e$jscomp$0={});var e=Ue({delimiter:"."},e$jscomp$0);void 0===e&&(e={});var n=e.splitRegexp;e$jscomp$0=e.stripRegexp;var i=void 0===e$jscomp$0?He:e$jscomp$0;e$jscomp$0=e.transform;e$jscomp$0=void 0===e$jscomp$0?$e:e$jscomp$0;e=e.delimiter;e=void 0===e?" ":e;t=Be(Be(t,void 0===n?ze:n,"$1\x00$2"),i,"\x00");n=0;for(i=t.length;"\x00"===t.charAt(n);)n++;for(;"\x00"===t.charAt(i-1);)i--;return t.slice(n,i).split("\x00").map(e$jscomp$0).join(e)};
class Ye extends Ge(){constructor(t,e){super();Je(this,"_tag",void 0);Je(this,"_opts",void 0);Je(this,"_logs",[]);this._tag=t;this._opts=e}write(t$jscomp$0,e$jscomp$0,n){var r;null!=e$jscomp$0&&e$jscomp$0.length&&!0===e$jscomp$0[e$jscomp$0.length-1]&&(n=!0,e$jscomp$0.pop());e$jscomp$0=e$jscomp$0.reduce((t,e)=>(e&&e instanceof Error?t+=`${e.message} ${e.stack}`:t+=e.toString(),t),`[${this._tag}][${(new Date).toLocaleTimeString()}] `);var i;(this._logs.push([t$jscomp$0,e$jscomp$0]),n||null!==(r=this._opts)&&
void 0!==r&&r.console)&&(null===(i=console)||void 0===i||i["ERROR"===t$jscomp$0?"error":"debug"](`${t$jscomp$0}: ${e$jscomp$0}`));this.emit("change")}clear(){this._logs=[];this.emit("change")}info(...t){this.write("INFO",t)}error(...t){this.write("ERROR",t)}warn(...t){this.write("WARN",t)}setTag(t){this._tag=t}toJSON(){return this._logs}}const tn=new Map;window.__injectedUIEffects=tn;var en=n$jscomp$3(227),nn=n$jscomp$3.n(en);let sn=0;const an={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,
request:1},cn=(t,e)=>("string"!=typeof e||t.origin===e)&&!!t.data&&("object"!=typeof t.data||"postmate"in t.data)&&"application/x-postmate-v1+json"===t.data.type&&!!an[t.data.postmate];class ln{constructor(t$jscomp$1){rn(this,"parent",void 0);rn(this,"frame",void 0);rn(this,"child",void 0);rn(this,"events",{});rn(this,"childOrigin",void 0);rn(this,"listener",void 0);this.parent=t$jscomp$1.parent;this.frame=t$jscomp$1.frame;this.child=t$jscomp$1.child;this.childOrigin=t$jscomp$1.childOrigin;this.listener=
t$jscomp$0=>{if(!cn(t$jscomp$0,this.childOrigin))return!1;const {data:e,name:n}=((t$jscomp$0||{}).data||{}).value||{};"emit"===t$jscomp$0.data.postmate&&n in this.events&&this.events[n].forEach(t=>{t.call(this,e)})};this.parent.addEventListener("message",this.listener,!1)}get(t$jscomp$0,...e){return new Promise(n=>{const r=++sn,o=t=>{t.data.uid===r&&"reply"===t.data.postmate&&(this.parent.removeEventListener("message",o,!1),n(t.data.value))};this.parent.addEventListener("message",o,!1);this.child.postMessage({postmate:"request",
type:"application/x-postmate-v1+json",property:t$jscomp$0,args:e,uid:r},this.childOrigin)})}call(t,e){this.child.postMessage({postmate:"call",type:"application/x-postmate-v1+json",property:t,data:e},this.childOrigin)}on(t,e){this.events[t]||(this.events[t]=[]);this.events[t].push(e)}destroy(){window.removeEventListener("message",this.listener,!1);this.frame.parentNode.removeChild(this.frame)}}class un{constructor(t$jscomp$1){rn(this,"model",void 0);rn(this,"parent",void 0);rn(this,"parentOrigin",
void 0);rn(this,"child",void 0);this.model=t$jscomp$1.model;this.parent=t$jscomp$1.parent;this.parentOrigin=t$jscomp$1.parentOrigin;this.child=t$jscomp$1.child;this.child.addEventListener("message",t$jscomp$0=>{if(cn(t$jscomp$0,this.parentOrigin)){var {property:e$jscomp$0,uid:n$jscomp$0,data:r$jscomp$0,args:o}=t$jscomp$0.data;"call"!==t$jscomp$0.data.postmate?((t,e,n)=>{t="function"==typeof t[e]?t[e].apply(null,n):t[e];return Promise.resolve(t)})(this.model,e$jscomp$0,o).then(r=>{t$jscomp$0.source.postMessage({property:e$jscomp$0,
postmate:"reply",type:"application/x-postmate-v1+json",uid:n$jscomp$0,value:r},t$jscomp$0.origin)}):e$jscomp$0 in this.model&&"function"==typeof this.model[e$jscomp$0]&&this.model[e$jscomp$0](r$jscomp$0)}})}emit(t,e){this.parent.postMessage({postmate:"emit",type:"application/x-postmate-v1+json",value:{name:t,data:e}},this.parentOrigin)}}class fn{constructor(t){rn(this,"container",void 0);rn(this,"parent",void 0);rn(this,"frame",void 0);rn(this,"child",void 0);rn(this,"childOrigin",void 0);rn(this,
"url",void 0);rn(this,"model",void 0);this.container=t.container;this.url=t.url;this.parent=window;this.frame=document.createElement("iframe");t.id&&(this.frame.id=t.id);t.name&&(this.frame.name=t.name);this.frame.classList.add.apply(this.frame.classList,t.classListArray||[]);this.container.appendChild(this.frame);this.child=this.frame.contentWindow;this.model=t.model||{}}sendHandshake(t$jscomp$0){const e$jscomp$0=(t=>{const e=document.createElement("a");e.href=t;t=4<e.protocol.length?e.protocol:
window.location.protocol;const r=e.host.length?"80"===e.port||"443"===e.port?e.hostname:e.host:window.location.host;return e.origin||`${t}//${r}`})(t$jscomp$0=t$jscomp$0||this.url);let n,r$jscomp$0=0;return new Promise((o,i)=>{const s=t=>!!cn(t,e$jscomp$0)&&("handshake-reply"===t.data.postmate?(clearInterval(n),this.parent.removeEventListener("message",s,!1),this.childOrigin=t.origin,o(new ln(this))):i("Failed handshake"));this.parent.addEventListener("message",s,!1);const a=()=>{r$jscomp$0++;this.child.postMessage({postmate:"handshake",
type:"application/x-postmate-v1+json",model:this.model},e$jscomp$0);5===r$jscomp$0&&clearInterval(n)};this.frame.addEventListener("load",()=>{a();n=setInterval(a,500)});this.frame.src=t$jscomp$0})}destroy(){this.frame.parentNode.removeChild(this.frame)}}rn(fn,"debug",!1);rn(fn,"Model",void 0);class pn{constructor(t){rn(this,"child",void 0);rn(this,"model",void 0);rn(this,"parent",void 0);rn(this,"parentOrigin",void 0);this.child=window;this.model=t;this.parent=this.child.parent}sendHandshakeReply(){return new Promise((t$jscomp$0,
e$jscomp$0)=>{const n=r=>{if(r.data.postmate){if("handshake"===r.data.postmate){0;this.child.removeEventListener("message",n,!1);r.source.postMessage({postmate:"handshake-reply",type:"application/x-postmate-v1+json"},r.origin);this.parentOrigin=r.origin;const e=r.data.model;return e&&Object.keys(e).forEach(t=>{this.model[t]=e[t]}),t$jscomp$0(new un(this))}return e$jscomp$0("Handshake Reply Failed")}};this.child.addEventListener("message",n,!1)})}}const {importHTML:hn,createSandboxContainer:mn}=window.QSandbox||
{};class vn extends Ge(){constructor(t){super();dn(this,"_pluginLocal",void 0);dn(this,"_frame",void 0);dn(this,"_root",void 0);dn(this,"_loaded",!1);dn(this,"_unmountFns",[]);this._pluginLocal=t;t._dispose(()=>{this._unmount()})}load(){const $jscomp$async$this=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){const {name:t$jscomp$0,entry:e}=$jscomp$async$this._pluginLocal.options;if(!$jscomp$async$this.loaded&&e){var {template:n,execScripts:r}=yield hn(e,{fetch:gn});$jscomp$async$this._mount(n,
document.body);var o=mn(t$jscomp$0,{elementGetter:()=>{var t;return null===(t=$jscomp$async$this._root)||void 0===t?void 0:t.firstChild}}).instance.proxy;o.__shadow_mode__=!0;o.LSPluginLocal=$jscomp$async$this._pluginLocal;o.LSPluginShadow=$jscomp$async$this;o.LSPluginUser=o.logseq=new Co($jscomp$async$this._pluginLocal.toJSON(),$jscomp$async$this._pluginLocal.caller);o=yield r(o,!0);$jscomp$async$this._unmountFns.push(o.unmount);$jscomp$async$this._loaded=!0}})}_mount(t,e){const n=this._frame=document.createElement("div");
n.classList.add("lsp-shadow-sandbox");n.id=this._pluginLocal.id;this._root=n.attachShadow({mode:"open"});this._root.innerHTML=`<div>${t}</div>`;e.appendChild(n);this.emit("mounted")}_unmount(){for(const t of this._unmountFns)t&&t.call(null)}destroy(){var t,e;null===(t=this.frame)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(this.frame)}get loaded(){return this._loaded}get document(){var t;return null===(t=this._root)||void 0===t?void 0:t.firstChild}get frame(){return this._frame}}
const bn=nn()("LSPlugin:caller");class On extends Ge(){constructor(t){super();yn(this,"_pluginLocal",void 0);yn(this,"_connected",!1);yn(this,"_parent",void 0);yn(this,"_child",void 0);yn(this,"_shadow",void 0);yn(this,"_status",void 0);yn(this,"_userModel",{});yn(this,"_call",void 0);yn(this,"_callUserModel",void 0);yn(this,"_debugTag","");(this._pluginLocal=t)&&(this._debugTag=t.debugTag)}connectToChild(){const $jscomp$async$this=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(!$jscomp$async$this._connected){var {shadow:t}=
$jscomp$async$this._pluginLocal;t?yield $jscomp$async$this._setupShadowSandbox():yield $jscomp$async$this._setupIframeSandbox()}})}connectToParent(t$jscomp$1){t$jscomp$1=void 0===t$jscomp$1?{}:t$jscomp$1;const $jscomp$async$this=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(!$jscomp$async$this._connected){var n$jscomp$0=null!=$jscomp$async$this._pluginLocal,o=0,i=new Map,s=Xe(6E4),a=$jscomp$async$this._extendUserModel(Object.assign({},{"#lspmsg#ready#":t$jscomp$0=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){a[`#lspmsg#${null==
t$jscomp$0?void 0:t$jscomp$0.pid}`]=$jscomp$destructuring$var0=>{var {type:t,payload:n}=$jscomp$destructuring$var0;bn(`[host (_call) -> *user] ${$jscomp$async$this._debugTag}`,t,n);$jscomp$async$this.emit(t,n)};yield s.resolve()}),"#lspmsg#beforeunload#":t=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){const n=Xe(1E4);$jscomp$async$this.emit("beforeunload",Object.assign({actor:n},t));yield n.promise}),"#lspmsg#settings#":$jscomp$destructuring$var1=>{var {payload:n}=$jscomp$destructuring$var1;
return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){$jscomp$async$this.emit("settings:changed",n)})},["#lspmsg#"]:$jscomp$destructuring$var2=>{var {ns:t,type:n,payload:r}=$jscomp$destructuring$var2;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){bn(`[host (async) -> *user] ${$jscomp$async$this._debugTag} ns=${t} type=${n}`,r);t&&t.startsWith("hook")?$jscomp$async$this.emit(`${t}:${n}`,r):$jscomp$async$this.emit(n,r)})},"#lspmsg#reply#":$jscomp$destructuring$var3=>{var {_sync:t,
result:e}=$jscomp$destructuring$var3;(bn(`[sync host -> *user] #${t}`,e),i.has(t))&&($jscomp$destructuring$var3=i.get(t))&&(null!=e&&e.hasOwnProperty("#lspmsg#error#")?$jscomp$destructuring$var3.reject(e["#lspmsg#error#"]):$jscomp$destructuring$var3.resolve(e),i.delete(t))}},t$jscomp$1)),c;if(n$jscomp$0)return yield s.promise,JSON.parse(JSON.stringify(null===(c=$jscomp$async$this._pluginLocal)||void 0===c?void 0:c.toJSON()));n$jscomp$0=(new pn(a)).sendHandshakeReply();return $jscomp$async$this._status=
"pending",yield n$jscomp$0.then(t$jscomp$0=>{$jscomp$async$this._child=t$jscomp$0;$jscomp$async$this._connected=!0;$jscomp$async$this._call=(e,n,r)=>{n=void 0===n?{}:n;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(r){const t=++o;i.set(t,r);n._sync=t;r.setTag(`async call #${t}`);bn(`async call #${t}`)}return t$jscomp$0.emit(`#lspmsg#${a.baseInfo.id}`,{type:e,payload:n}),null==r?void 0:r.promise})};$jscomp$async$this._callUserModel=(t,e$jscomp$0)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{a[t](e$jscomp$0)}catch(e){bn(`[model method] #${t} not existed`)}});
setInterval(()=>{if(100<i.size)for(const $jscomp$destructuring$var4 of i){const [t,e]=$jscomp$destructuring$var4;e.settled&&i.delete(t)}},18E5)}).finally(()=>{$jscomp$async$this._status=void 0}),yield s.promise,a.baseInfo}})}call(t,e){e=void 0===e?{}:e;const $jscomp$async$this=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var n;return null===(n=$jscomp$async$this._call)||void 0===n?void 0:n.call($jscomp$async$this,t,e)})}callAsync(t,e){e=void 0===e?{}:e;const $jscomp$async$this=
this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var n;const r=Xe(1E4);return null===(n=$jscomp$async$this._call)||void 0===n?void 0:n.call($jscomp$async$this,t,e,r)})}callUserModel(t,...e){const $jscomp$async$this=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var n;return null===(n=$jscomp$async$this._callUserModel)||void 0===n?void 0:n.apply($jscomp$async$this,[t,...e])})}callUserModelAsync(t,...e){const $jscomp$async$this=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var n;
return t=`${"#await#response#"}${t}`,null===(n=$jscomp$async$this._callUserModel)||void 0===n?void 0:n.apply($jscomp$async$this,[t,...e])})}_setupIframeSandbox(){const $jscomp$async$this=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){const t$jscomp$0=$jscomp$async$this._pluginLocal,e$jscomp$1=t$jscomp$0.id,n$jscomp$2=`${e$jscomp$1}_lsp_main`,r$jscomp$0=new URL(t$jscomp$0.options.entry);r$jscomp$0.searchParams.set("__v__",t$jscomp$0.options.version);var o$jscomp$0=document.querySelector(`#${n$jscomp$2}`);
o$jscomp$0&&o$jscomp$0.parentElement.removeChild(o$jscomp$0);o$jscomp$0=document.createElement("div");o$jscomp$0.classList.add("lsp-iframe-sandbox-container");o$jscomp$0.id=n$jscomp$2;o$jscomp$0.dataset.pid=e$jscomp$1;try{var s$jscomp$0;const t=null===(s$jscomp$0=yield $jscomp$async$this._pluginLocal._loadLayoutsData())||void 0===s$jscomp$0?void 0:s$jscomp$0.$$0;if(t){o$jscomp$0.dataset.inited_layout="true";let {width:e,height:n,left:r,top:o,vw:s,vh:a}=t;r=Math.max(r,0);r="number"==typeof s?`${Math.min(100*
r/s,99)}%`:`${r}px`;o=Math.max(o,45);o="number"==typeof a?`${Math.min(100*o/a,99)}%`:`${o}px`;Object.assign(o$jscomp$0.style,{width:e+"px",height:n+"px",left:r,top:o})}}catch(t){console.error("[Restore Layout Error]",t)}document.body.appendChild(o$jscomp$0);const a$jscomp$0=new fn({id:e$jscomp$1+"_iframe",container:o$jscomp$0,url:r$jscomp$0.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(t$jscomp$0.toJSON()))}});let c,l=a$jscomp$0.sendHandshake();return $jscomp$async$this._status=
"pending",(new Promise((e$jscomp$0,n$jscomp$1)=>{c=setTimeout(()=>{n$jscomp$1(Error("handshake Timeout"));a$jscomp$0.destroy()},4E3);l.then(n$jscomp$0=>{$jscomp$async$this._parent=n$jscomp$0;$jscomp$async$this._connected=!0;$jscomp$async$this.emit("connected");n$jscomp$0.on(`#lspmsg#${t$jscomp$0.id}`,$jscomp$destructuring$var5=>{var {type:t,payload:e}=$jscomp$destructuring$var5,n,r;bn("[user -\x3e *host] ",t,e);null===(n=$jscomp$async$this._pluginLocal)||void 0===n||n.emit(t,e||{});null===(r=$jscomp$async$this._pluginLocal)||
void 0===r||r.caller.emit(t,e||{})});$jscomp$async$this._call=(...e)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){yield n$jscomp$0.call(`#lspmsg#${t$jscomp$0.id}`,{type:e[0],payload:Object.assign(e[1]||{},{$$pid:t$jscomp$0.id})})});$jscomp$async$this._callUserModel=(t,...e)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(t.startsWith("#await#response#"))return yield n$jscomp$0.get(t.replace("#await#response#",""),...e);n$jscomp$0.call(t,null==e?void 0:e[0])});e$jscomp$0(null)}).catch(t=>
{n$jscomp$1(t)}).finally(()=>{clearTimeout(c)})})).catch(t=>{throw bn("[iframe sandbox] error",t),t;}).finally(()=>{$jscomp$async$this._status=void 0})})}_setupShadowSandbox(){const $jscomp$async$this=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){const t$jscomp$0=$jscomp$async$this._pluginLocal,e$jscomp$0=$jscomp$async$this._shadow=new vn(t$jscomp$0);try{$jscomp$async$this._status="pending",yield e$jscomp$0.load(),$jscomp$async$this._connected=!0,$jscomp$async$this.emit("connected"),
$jscomp$async$this._call=(e,n,r)=>{n=void 0===n?{}:n;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var o;return r&&(n.actor=r),null===(o=$jscomp$async$this._pluginLocal)||void 0===o||o.emit(e,Object.assign(n,{$$pid:t$jscomp$0.id})),null==r?void 0:r.promise})},$jscomp$async$this._callUserModel=(...t)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){var e,n=t[0];null!==(e=n)&&void 0!==e&&e.startsWith("#await#response#")&&(n=n.replace("#await#response#",""));e=t[1]||{};n=$jscomp$async$this._userModel[n];
"function"==typeof n&&(yield n.call(null,e))})}catch(t){throw bn("[shadow sandbox] error",t),t;}finally{$jscomp$async$this._status=void 0}})}_extendUserModel(t){return Object.assign(this._userModel,t)}_getSandboxIframeContainer(){var t;return null===(t=this._parent)||void 0===t?void 0:t.frame.parentNode}_getSandboxShadowContainer(){var t;return null===(t=this._shadow)||void 0===t?void 0:t.frame.parentNode}_getSandboxIframeRoot(){var t;return null===(t=this._parent)||void 0===t?void 0:t.frame}_getSandboxShadowRoot(){var t;
return null===(t=this._shadow)||void 0===t?void 0:t.frame}set debugTag(t){this._debugTag=t}destroy(){const $jscomp$async$this=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var t;let e=null;$jscomp$async$this._parent&&(e=$jscomp$async$this._getSandboxIframeContainer(),yield $jscomp$async$this._parent.destroy());$jscomp$async$this._shadow&&(e=$jscomp$async$this._getSandboxShadowContainer(),$jscomp$async$this._shadow.destroy());null===(t=e)||void 0===t||t.parentNode.removeChild(e)})}}
class jn{constructor(t,e){Sn(this,"ctx",void 0);Sn(this,"opts",void 0);this.ctx=t;this.opts=e}get ctxId(){return this.ctx.baseInfo.id}setItem(t,e){var n;return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,t,e,null===(n=this.opts)||void 0===n?void 0:n.assets]})}getItem(t){var e;return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,t,null===(e=this.opts)||void 0===e?void 0:e.assets]})}removeItem(t){var e;return this.ctx.caller.call("api:call",
{method:"unlink-plugin-storage-file",args:[this.ctxId,t,null===(e=this.opts)||void 0===e?void 0:e.assets]})}allKeys(){var t;return this.ctx.caller.callAsync("api:call",{method:"list-plugin-storage-files",args:[this.ctxId,null===(t=this.opts)||void 0===t?void 0:t.assets]})}clear(){var t;return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId,null===(t=this.opts)||void 0===t?void 0:t.assets]})}hasItem(t){var e;return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",
args:[this.ctxId,t,null===(e=this.opts)||void 0===e?void 0:e.assets]})}}class An{constructor(t){"ctx"in this?Object.defineProperty(this,"ctx",{value:void 0,enumerable:!0,configurable:!0,writable:!0}):this.ctx=void 0;this.ctx=t}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(t,...e){var n,r;const o=this.ensureHostScope();return t=null===
(n=Ve(t))||void 0===n?void 0:n.toLowerCase(),null===(r=o.logseq.api["exper_"+t])||void 0===r?void 0:r.apply(o,e)}loadScripts(...t$jscomp$0){const $jscomp$async$this=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){(t$jscomp$0=t$jscomp$0.map(t=>null!=t&&t.startsWith("http")?t:$jscomp$async$this.ctx.resolveResourceFullUrl(t))).unshift($jscomp$async$this.ctx.baseInfo.id);yield $jscomp$async$this.invokeExperMethod("loadScripts",...t$jscomp$0)})}registerFencedCodeRenderer(t,e){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,
t,e)}registerExtensionsEnhancer(t,e){const n=this.ensureHostScope();"katex"===t&&n.katex&&e(n.katex).catch(console.error);return n.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,t,e)}ensureHostScope(){if(window===top)throw Error("Can not access host scope!");return top}}class Tn{constructor(t$jscomp$0,e$jscomp$0,n$jscomp$0){n$jscomp$0=void 0===n$jscomp$0?{}:n$jscomp$0;kn(this,"_client",void 0);kn(this,"_requestId",void 0);kn(this,"_requestOptions",void 0);kn(this,"_promise",void 0);
kn(this,"_aborted",!1);this._client=t$jscomp$0;this._requestId=e$jscomp$0;this._requestOptions=n$jscomp$0;this._promise=new Promise((t,e)=>{if(!this._requestId)return e(null);this._client.once(`task_callback_${this._requestId}`,n=>{n&&n instanceof Error?e(n):t(n)})});const {success:r,fail:o,final:i}=this._requestOptions;this._promise.then(t=>{null==r||r(t)}).catch(t=>{null==o||o(t)}).finally(()=>{null==i||i()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",
this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class In extends We.EventEmitter{constructor(t$jscomp$0){super();kn(this,"_ctx",void 0);this._ctx=t$jscomp$0;this.ctx.caller.on("#lsp#request#callback",t=>{const e=null==t?void 0:t.requestId;e&&this.emit(`task_callback_${e}`,null==t?void 0:t.payload)})}static createRequestTask(t,e,n){return new Tn(t,e,n)}_request(t){const $jscomp$async$this=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var e=
$jscomp$async$this.ctx.baseInfo.id,$jscomp$destructuring$var7=Object.assign({},t);$jscomp$destructuring$var7=(delete $jscomp$destructuring$var7.success,delete $jscomp$destructuring$var7.fail,delete $jscomp$destructuring$var7.final,$jscomp$destructuring$var7);e=$jscomp$async$this.ctx.Experiments.invokeExperMethod("request",e,$jscomp$destructuring$var7);e=In.createRequestTask($jscomp$async$this.ctx.Request,e,t);return $jscomp$destructuring$var7.abortable?e:e.promise})}get ctx(){return this._ctx}}const Fn=
It(Object.keys,Object);var Ln=Object.prototype.hasOwnProperty;const Mn=function(t){if(qt(t))t=_e(t);else if(Nt(t)){var e=[],n;for(n in Object(t))Ln.call(t,n)&&"constructor"!=n&&e.push(n);t=e}else t=Fn(t);return t},Pn=function(t,e){return t&&bt(t,e,Mn)};Un.prototype.add=Un.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};Un.prototype.has=function(t){return this.__data__.has(t)};const zn=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;
return!1},Bn=function(t$jscomp$0,e$jscomp$0,n,r,o,i){var s=1&n,a=t$jscomp$0.length,c=e$jscomp$0.length;if(a!=c&&!(s&&c>a))return!1;c=i.get(t$jscomp$0);var u=i.get(e$jscomp$0);if(c&&u)return c==e$jscomp$0&&u==t$jscomp$0;c=-1;u=!0;var d=2&n?new Un:void 0;i.set(t$jscomp$0,e$jscomp$0);for(i.set(e$jscomp$0,t$jscomp$0);++c<a;){var h=t$jscomp$0[c],m=e$jscomp$0[c];if(r)var g=s?r(m,h,c,e$jscomp$0,t$jscomp$0,i):r(h,m,c,t$jscomp$0,e$jscomp$0,i);if(void 0!==g){if(g)continue;u=!1;break}if(d){if(!zn(e$jscomp$0,
function(t,e){if(!d.has(e)&&(h===t||o(h,t,n,r,i)))return d.push(e)})){u=!1;break}}else if(h!==m&&!o(h,m,n,r,i)){u=!1;break}}return i.delete(t$jscomp$0),i.delete(e$jscomp$0),u},qn=function(t$jscomp$0){var e=-1,n=Array(t$jscomp$0.size);return t$jscomp$0.forEach(function(t,r){n[++e]=[r,t]}),n},Wn=function(t$jscomp$0){var e=-1,n=Array(t$jscomp$0.size);return t$jscomp$0.forEach(function(t){n[++e]=t}),n};var Gn=_?_.prototype:void 0,Jn=Gn?Gn.valueOf:void 0;const Zn=function(t,e,n,r,i,s,a){switch(n){case "[object DataView]":if(t.byteLength!=
e.byteLength||t.byteOffset!=e.byteOffset)break;t=t.buffer;e=e.buffer;case "[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new St(t),new St(e)));case "[object Boolean]":case "[object Date]":case "[object Number]":return o$jscomp$1(+t,+e);case "[object Error]":return t.name==e.name&&t.message==e.message;case "[object RegExp]":case "[object String]":return t==e+"";case "[object Map]":var c=qn;case "[object Set]":if(c||(c=Wn),t.size!=e.size&&!(1&r))break;if(n=a.get(t))return n==e;r|=2;a.set(t,
e);e=Bn(c(t),c(e),r,i,s,a);return a.delete(t),e;case "[object Symbol]":if(Jn)return Jn.call(t)==Jn.call(e)}return!1},Kn=function(t,e,n){e=e(t);if(!Ht(t)){t=n(t);n=-1;for(var r=t.length,o=e.length;++n<r;)e[o+n]=t[n]}return e},Yn=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i},Qn=function(){return[]};var Xn=Object.prototype.propertyIsEnumerable,tr=Object.getOwnPropertySymbols;const er=tr?function(t){return null==t?[]:(t=Object(t),Yn(tr(t),function(e){return Xn.call(t,
e)}))}:Qn;var rr=Object.prototype.hasOwnProperty;const ir=G(b,"DataView"),sr=G(b,"Promise"),ar=G(b,"Set"),cr=G(b,"WeakMap");var hr=R(ir),mr=R(J),gr=R(sr),vr=R(ar),yr=R(cr),br=E;(ir&&"[object DataView]"!=br(new ir(new ArrayBuffer(1)))||J&&"[object Map]"!=br(new J)||sr&&"[object Promise]"!=br(sr.resolve())||ar&&"[object Set]"!=br(new ar)||cr&&"[object WeakMap]"!=br(new cr))&&(br=function(t){var e=E(t);if(t=(t="[object Object]"==e?t.constructor:void 0)?R(t):"")switch(t){case hr:return"[object DataView]";
case mr:return"[object Map]";case gr:return"[object Promise]";case vr:return"[object Set]";case yr:return"[object WeakMap]"}return e});const _r=br;var Or=Object.prototype.hasOwnProperty;const jr=function t(e,n,r,o,i){var JSCompiler_temp;if(!(JSCompiler_temp=e===n)){if(null==e||null==n||!Pt(e)&&!Pt(n))var JSCompiler_temp$jscomp$0=e!=e&&n!=n;else a:{JSCompiler_temp=Ht(e);var a=Ht(n),c=JSCompiler_temp?"[object Array]":_r(e),l=a?"[object Array]":_r(n),u="[object Object]"==(c="[object Arguments]"==c?"[object Object]":
c);a="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l);if((l=c==l)&&Kt(e)){if(!Kt(n)){JSCompiler_temp$jscomp$0=!1;break a}JSCompiler_temp=!0;u=!1}if(l&&!u)JSCompiler_temp$jscomp$0=(i||(i=new ht),JSCompiler_temp||fe(e)?Bn(e,n,r,o,t,i):Zn(e,n,c,r,o,t,i));else{if(!(1&r)&&(JSCompiler_temp=u&&Or.call(e,"__wrapped__"),c=a&&Or.call(n,"__wrapped__"),JSCompiler_temp||c)){e=JSCompiler_temp?e.value():e;n=c?n.value():n;JSCompiler_temp$jscomp$0=(i||(i=new ht),t(e,n,r,o,i));break a}if(JSCompiler_temp=
!!l){i||(i=new ht);b:if(JSCompiler_temp=1&r,c=Kn(e,Mn,er),a=c.length,a==Kn(n,Mn,er).length||JSCompiler_temp){for(l=a;l--;){var u$jscomp$0=c[l];if(!(JSCompiler_temp?u$jscomp$0 in n:rr.call(n,u$jscomp$0))){n=!1;break b}}u=i.get(e);u$jscomp$0=i.get(n);if(u&&u$jscomp$0)n=u==n&&u$jscomp$0==e;else{u=!0;i.set(e,n);i.set(n,e);for(var h=JSCompiler_temp;++l<a;){var m=e[u$jscomp$0=c[l]],g=n[u$jscomp$0];o&&(JSCompiler_temp$jscomp$0=JSCompiler_temp?o(g,m,u$jscomp$0,n,e,i):o(m,g,u$jscomp$0,e,n,i));if(void 0===
JSCompiler_temp$jscomp$0?m!==g&&!t(m,g,r,o,i):!JSCompiler_temp$jscomp$0){u=!1;break}h||(h="constructor"==u$jscomp$0)}u&&!h&&(r=e.constructor,o=n.constructor,!(r!=o&&"constructor"in e&&"constructor"in n)||"function"==typeof r&&r instanceof r&&"function"==typeof o&&o instanceof o||(u=!1));n=(i.delete(e),i.delete(n),u)}}else n=!1;JSCompiler_temp=n}JSCompiler_temp$jscomp$0=JSCompiler_temp}}JSCompiler_temp=JSCompiler_temp$jscomp$0}return JSCompiler_temp},Ar=function(t,e,n,r){var o=n.length,i=o,s=!r;if(null==
t)return!i;for(t=Object(t);o--;){var a=n[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){var c=(a=n[o])[0],l=t[c],u=a[1];if(s&&a[2]){if(void 0===l&&!(c in t))return!1}else{a=new ht;if(r)var p=r(l,u,c,t,e,a);if(void 0===p?!jr(u,l,3,r,a):!p)return!1}}return!0},Er=function(t){for(var e=Mn(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,o==o&&!T(o)]}return e},Tr=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},Ir=function(t){var e=Er(t);return 1==
e.length&&e[0][2]?Tr(e[0][0],e[0][1]):function(n){return n===t||Ar(n,t,e)}},Fr=function(t){return"symbol"==typeof t||Pt(t)&&"[object Symbol]"==E(t)};var Lr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nr=/^\w*$/;const Mr=function(t,e){if(Ht(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Fr(t))||Nr.test(t)||!Lr.test(t)||null!=e&&t in Object(e)};Pr.Cache=pt;var Dr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,
Ur=/\\(\\)?/g;const $r=function(t$jscomp$0){t$jscomp$0=Pr(t$jscomp$0,function(t){return 500===n.size&&n.clear(),t});var n=t$jscomp$0.cache;return t$jscomp$0}(function(t$jscomp$0){var e=[];return 46===t$jscomp$0.charCodeAt(0)&&e.push(""),t$jscomp$0.replace(Dr,function(t,n,r,o){e.push(r?o.replace(Ur,"$1"):n||t)}),e});var Hr=_?_.prototype:void 0,Br=Hr?Hr.toString:void 0;const qr=function t(e){if("string"==typeof e)return e;if(Ht(e)){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);
return o+""}if(Fr(e))return Br?Br.call(e):"";n=e+"";return"0"==n&&-Infinity==1/e?"-0":n},Gr=function(t,e){return Ht(t)?t:Mr(t,e)?[t]:$r(null==t?"":qr(t))},Jr=function(t){if("string"==typeof t||Fr(t))return t;var e=t+"";return"0"==e&&-Infinity==1/t?"-0":e},Zr=function(t,e){for(var n=0,r=(e=Gr(e,t)).length;null!=t&&n<r;)t=t[Jr(e[n++])];return n&&n==r?t:void 0},Xr=function(t,e){return Mr(t)&&e==e&&!T(e)?Tr(Jr(t),e):function(n){var r=null==n?void 0:Zr(n,t);r=void 0===r?void 0:r;if(void 0===r&&r===e){var JSCompiler_temp;
if(JSCompiler_temp=null!=n){JSCompiler_temp=t;var r$jscomp$0=-1;r=(JSCompiler_temp=Gr(JSCompiler_temp,n)).length;for(var i=!1;++r$jscomp$0<r;){var JSCompiler_temp$jscomp$0=Jr(JSCompiler_temp[r$jscomp$0]);if(!(i=null!=n&&null!=n&&JSCompiler_temp$jscomp$0 in Object(n)))break;n=n[JSCompiler_temp$jscomp$0]}JSCompiler_temp=i||++r$jscomp$0!=r?i:!!(r=null==n?0:n.length)&&Bt(r)&&ye(JSCompiler_temp$jscomp$0,r)&&(Ht(n)||zt(n))}JSCompiler_temp$jscomp$0=JSCompiler_temp}else JSCompiler_temp$jscomp$0=jr(e,r,3);
return JSCompiler_temp$jscomp$0}},to=function(t){return function(e){return null==e?void 0:e[t]}},eo=function(t){return function(e){return Zr(e,t)}},ro=function(t){return"function"==typeof t?t:null==t?ke:"object"==typeof t?Ht(t)?Xr(t[0],t[1]):Ir(t):Mr(t)?to(Jr(t)):eo(t)},oo=function(t$jscomp$0,e){var n={};return e=ro(e,3),Pn(t$jscomp$0,function(t,r,o){vt(n,e(t,r,o),t)}),n};class so{constructor(t$jscomp$2,e$jscomp$0){io(this,"ctx",void 0);io(this,"serviceHooks",void 0);this.ctx=t$jscomp$2;this.serviceHooks=
e$jscomp$0;t$jscomp$2._execCallableAPI("register-search-service",t$jscomp$2.baseInfo.id,e$jscomp$0.name,e$jscomp$0.options);Object.entries({query:{f:"onQuery",args:["graph","q",!0],reply:!0,transformOutput:t$jscomp$1=>(Ht(null==t$jscomp$1?void 0:t$jscomp$1.blocks)&&(t$jscomp$1.blocks=t$jscomp$1.blocks.map(t$jscomp$0=>t$jscomp$0&&oo(t$jscomp$0,(t,e)=>`block/${e}`))),t$jscomp$1)},rebuildBlocksIndice:{f:"onIndiceInit",args:["graph","blocks"]},transactBlocks:{f:"onBlocksChanged",args:["graph","data"]},
truncateBlocks:{f:"onIndiceReset",args:["graph"]},removeDb:{f:"onGraph",args:["graph"]}}).forEach($jscomp$destructuring$var8=>{var [n$jscomp$0,r]=$jscomp$destructuring$var8;const o=`service:search:${n$jscomp$0}:${e$jscomp$0.name}`;t$jscomp$2.caller.on(o,n=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(I(null==e$jscomp$0?void 0:e$jscomp$0[r.f])){let i=null;try{i=yield e$jscomp$0[r.f].apply(e$jscomp$0,(r.args||[]).map(t=>{if(n){if(!0===t)return n;if(n.hasOwnProperty(t)){const e=n[t];return delete n[t],
e}}})),r.transformOutput&&(i=r.transformOutput(i))}catch(t){console.error("[SearchService] ",t),i=t}finally{r.reply&&t$jscomp$2.caller.call(`${o}:reply`,i)}}}))})}}const co=Symbol.for("proxy-continue"),lo=nn()("LSPlugin:user"),uo=new Ye("",{console:!0});let ho=null,mo=new Map;const go={getInfo(t){const $jscomp$async$this=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){return ho||(ho=yield $jscomp$async$this._execCallableAPIAsync("get-app-info")),"string"==typeof t?ho[t]:ho})},
registerCommand:fo,registerSearchService(t){if(mo.has(t.name))throw Error(`SearchService: #${t.name} has registered!`);mo.set(t.name,new so(this,t))},registerCommandPalette(t,e){const {key:n,label:r,keybinding:o}=t;return fo.call(this,"$palette$",{key:n,label:r,palette:!0,keybinding:o},e)},registerCommandShortcut(t,e){var {binding:n}=t;n="$shortcut$"+Ve(n);return fo.call(this,"$shortcut$",{key:n,palette:!1,keybinding:t},e)},registerUIItem(t,e){var n;const r=this.baseInfo.id;null===(n=this.caller)||
void 0===n||n.call("api:call",{method:"register-plugin-ui-item",args:[r,t,e]})},registerPageMenuItem(t,e){if("function"!=typeof e)return!1;fo.call(this,"page-menu-item",{key:t+"_"+this.baseInfo.id,label:t},e)},onBlockRendererSlotted(t,e){if(po(t)){var n=this.baseInfo.id,r=`hook:editor:${Ve(`slot:${t}`)}`;return this.caller.on(r,e),this.App._installPluginHook(n,r),()=>{this.caller.off(r,e);this.App._uninstallPluginHook(n,r)}}},invokeExternalPlugin(t,...e){var n;if(t=null===(n=t)||void 0===n?void 0:
n.trim()){var [r,o]=t.split(".");if(!["models","commands"].includes(null==o?void 0:o.toLowerCase()))throw Error("Type only support '.models' or '.commands' currently.");n=t.replace(`${r}.${o}.`,"");if(!r||!o||!n)throw Error(`Illegal type of #${t} to invoke external plugin.`);return this._execCallableAPIAsync("invoke_external_plugin_cmd",r,o.toLowerCase(),n,e)}},setFullScreen(t$jscomp$0){const e=(...t)=>this._callWin("setFullScreen",...t);"toggle"===t$jscomp$0?this._callWin("isFullScreen").then(t=>
{t?e():e(!0)}):t$jscomp$0?e(!0):e()}};let vo=0;const yo={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(t$jscomp$1,e$jscomp$0){var n$jscomp$0;lo("Register slash command #",this.baseInfo.id,t$jscomp$1,e$jscomp$0);"function"==typeof e$jscomp$0&&(e$jscomp$0=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",e$jscomp$0]]);e$jscomp$0=e$jscomp$0.map(t$jscomp$0=>{const [e,...n]=t$jscomp$0;if("editor/hook"===e){let r=n[0],o=()=>{var t;
null===(t=this.caller)||void 0===t||t.callUserModel(r)};"function"==typeof r&&(o=r);const i=`SlashCommandHook${e}${++vo}`;t$jscomp$0[1]=i;this.Editor["on"+i](o)}return t$jscomp$0});null===(n$jscomp$0=this.caller)||void 0===n$jscomp$0||n$jscomp$0.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[t$jscomp$1,e$jscomp$0]]})},registerBlockContextMenuItem(t,e){if("function"!=typeof e)return!1;fo.call(this,"block-context-menu-item",{key:t+"_"+this.baseInfo.id,label:t},e)},registerHighlightContextMenuItem(t,
e,n){if("function"!=typeof e)return!1;fo.call(this,"highlight-context-menu-item",{key:t+"_"+this.baseInfo.id,label:t,extras:n},e)},scrollToBlockInPage(t,e,n){e="block-content-"+e;null!=n&&n.replaceState?this.App.replaceState("page",{name:t},{anchor:e}):this.App.pushState("page",{name:t},{anchor:e})}},bo={onBlockChanged(t,e){if(po(t)){var n$jscomp$0=this.baseInfo.id,r$jscomp$0=`hook:db:${Ve(`block:${t}`)}`,o$jscomp$0=$jscomp$destructuring$var9=>{var {block:n,txData:r,txMeta:o}=$jscomp$destructuring$var9;
n.uuid===t&&e(n,r,o)};return this.caller.on(r$jscomp$0,o$jscomp$0),this.App._installPluginHook(n$jscomp$0,r$jscomp$0),()=>{this.caller.off(r$jscomp$0,o$jscomp$0);this.App._uninstallPluginHook(n$jscomp$0,r$jscomp$0)}}},datascriptQuery(t$jscomp$0,...e){return(e.pop(),null!=e&&e.some(t=>"function"==typeof t))?this.Experiments.ensureHostScope().logseq.api.datascript_query(t$jscomp$0,...e):this._execCallableAPIAsync("datascript_query",t$jscomp$0,...e)}},_o={},wo={},xo={makeSandboxStorage(){return new jn(this,
{assets:!0})}};class Co extends Ge(){constructor(t$jscomp$1,e$jscomp$0){super();ao(this,"_baseInfo",void 0);ao(this,"_caller",void 0);ao(this,"_version","0.0.15");ao(this,"_debugTag","");ao(this,"_settingsSchema",void 0);ao(this,"_connected",!1);ao(this,"_ui",new Map);ao(this,"_mFileStorage",void 0);ao(this,"_mRequest",void 0);ao(this,"_mExperiments",void 0);ao(this,"_beforeunloadCallback",void 0);this._baseInfo=t$jscomp$1;this._caller=e$jscomp$0;e$jscomp$0.on("sys:ui:visible",t=>{null!=t&&t.toggle&&
this.toggleMainUI()});e$jscomp$0.on("settings:changed",t=>{const e=Object.assign({},this.settings);t=Object.assign(this._baseInfo.settings,t);this.emit("settings:changed",Object.assign({},t),e)});e$jscomp$0.on("beforeunload",t$jscomp$0=>{const $jscomp$async$this=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var $jscomp$destructuring$var11=Object.assign({},t$jscomp$0);const n=t$jscomp$0.actor;$jscomp$destructuring$var11=(delete $jscomp$destructuring$var11.actor,$jscomp$destructuring$var11);
const o=$jscomp$async$this._beforeunloadCallback;try{o&&(yield o($jscomp$destructuring$var11)),null==n||n.resolve(null)}catch(t){console.debug(`${e$jscomp$0.debugTag} [beforeunload] `,t),null==n||n.reject(t)}})})}ready(t$jscomp$1,e$jscomp$1){const $jscomp$async$this=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(!$jscomp$async$this._connected)try{var n;"function"==typeof t$jscomp$1&&(e$jscomp$1=t$jscomp$1,t$jscomp$1={});let r=yield $jscomp$async$this._caller.connectToParent(t$jscomp$1);
$jscomp$async$this._connected=!0;r=De($jscomp$async$this._baseInfo,r);null!==(n=r)&&void 0!==n&&n.id&&($jscomp$async$this._debugTag=$jscomp$async$this._caller.debugTag=`#${r.id} [${r.name}]`,$jscomp$async$this.logger.setTag($jscomp$async$this._debugTag));$jscomp$async$this._settingsSchema&&(r.settings=function(t$jscomp$0,e$jscomp$0){e$jscomp$0=(e$jscomp$0||[]).reduce((t,e)=>("default"in e&&(t[e.key]=e.default),t),{});return Object.assign(e$jscomp$0,t$jscomp$0)}(r.settings,$jscomp$async$this._settingsSchema),
yield $jscomp$async$this.useSettingsSchema($jscomp$async$this._settingsSchema));try{yield $jscomp$async$this._execCallableAPIAsync("setSDKMetadata",{version:$jscomp$async$this._version})}catch(t){console.warn(t)}e$jscomp$1&&e$jscomp$1.call($jscomp$async$this,r)}catch(t){console.error(`${$jscomp$async$this._debugTag} [Ready Error]`,t)}})}ensureConnected(){if(!this._connected)throw Error("not connected");}beforeunload(t){"function"==typeof t&&(this._beforeunloadCallback=t)}provideModel(t){return this.caller._extendUserModel(t),
this}provideTheme(t){return this.caller.call("provider:theme",t),this}provideStyle(t){return this.caller.call("provider:style",t),this}provideUI(t){return this.caller.call("provider:ui",t),this}useSettingsSchema(t){return this.connected&&this.caller.call("settings:schema",{schema:t,isSync:!0}),this._settingsSchema=t,this}updateSettings(t){this.caller.call("settings:update",t)}onSettingsChanged(t){return this.on("settings:changed",t),()=>this.off("settings:changed",t)}showSettingsUI(){this.caller.call("settings:visible:changed",
{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(t){this.caller.call("main-ui:attrs",t)}setMainUIInlineStyle(t){this.caller.call("main-ui:style",t)}hideMainUI(t){t={key:0,visible:!1,cursor:null==t?void 0:t.restoreEditingCursor};this.caller.call("main-ui:visible",t);this.emit("ui:visible:changed",t);this._ui.set(t.key,t)}showMainUI(t){t={key:0,visible:!0,autoFocus:null==t?void 0:t.autoFocus};this.caller.call("main-ui:visible",t);this.emit("ui:visible:changed",
t);this._ui.set(t.key,t)}toggleMainUI(){const e=this._ui.get(0);e&&e.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const t=this._ui.get(0);return!(!t||!t.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get effect(){return(t=this)&&((null===(e=t.baseInfo)||void 0===e?void 0:e.effect)||!(null!==(n=t.baseInfo)&&void 0!==n&&n.iir));var t,e,n}get logger(){return uo}get settings(){var t;return null===(t=this.baseInfo)||
void 0===t?void 0:t.settings}get caller(){return this._caller}resolveResourceFullUrl(t$jscomp$0){if(this.ensureConnected(),t$jscomp$0){t$jscomp$0=t$jscomp$0.replace(/^[.\\/]+/,"");var t=this._baseInfo.lsr;t$jscomp$0=[t$jscomp$0];try{const n=new URL(t);if(!n.origin)throw Error(null);const r=Ze.join(t.substr(n.origin.length),...t$jscomp$0);var JSCompiler_inline_result=n.origin+r}catch(n){JSCompiler_inline_result=Ze.join(t,...t$jscomp$0)}return JSCompiler_inline_result}}_makeUserProxy(t$jscomp$1,e){const n=
this,r$jscomp$0=this.caller;return new Proxy(t$jscomp$1,{get(t$jscomp$0,o,i$jscomp$0){const s$jscomp$0=t$jscomp$0[o];return function(...t){if(s$jscomp$0){var r=s$jscomp$0.apply(n,t.concat(e));if(r!==co)return r}if(e){var i=o.toString().match(/^(once|off|on)/i);if(null!=i){r=i[0].toLowerCase();const s=i.input.slice(r.length);i="off"===r;const c=n.baseInfo.id,l=`hook:${e}:${Ve(s)}`,u=t[0];t=t[1];r$jscomp$0[r](l,u);r=()=>{r$jscomp$0.off(l,u);r$jscomp$0.listenerCount(l)||n.App._uninstallPluginHook(c,
l)};return i?void r():(n.App._installPluginHook(c,l,t),r)}}r=o;return["git","ui","assets"].includes(e)&&(r=e+"_"+r),r$jscomp$0.callAsync("api:call",{tag:e,method:r,args:t})}}})}_execCallableAPIAsync(t,...e){return this._caller.callAsync("api:call",{method:t,args:e})}_execCallableAPI(t,...e){this._caller.call("api:call",{method:t,args:e})}_callWin(...t){return this._execCallableAPIAsync("_callMainWin",...t)}get App(){return this._makeUserProxy(go,"app")}get Editor(){return this._makeUserProxy(yo,"editor")}get DB(){return this._makeUserProxy(bo,
"db")}get Git(){return this._makeUserProxy(_o,"git")}get UI(){return this._makeUserProxy(wo,"ui")}get Assets(){return this._makeUserProxy(xo,"assets")}get FileStorage(){let t=this._mFileStorage;return t||(t=this._mFileStorage=new jn(this)),t}get Request(){let t=this._mRequest;return t||(t=this._mRequest=new In(this)),t}get Experiments(){let t=this._mExperiments;return t||(t=this._mExperiments=new An(this)),t}}if(null==window.__LSP__HOST__){const t=new On(null);window.logseq=Oo({},t)}})(),r$jscomp$3})())}
//# sourceMappingURL=module$node_modules$$logseq$libs$dist$lsplugin_user.js.map
