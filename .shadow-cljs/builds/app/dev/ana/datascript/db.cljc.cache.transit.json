["^ ","~:output",["^ ","~:js","goog.provide('datascript.db');\ngoog.scope(function(){\n  datascript.db.goog$module$goog$array = goog.module.get('goog.array');\n});\ndatascript.db.Exception = Error;\n\ndatascript.db.IllegalArgumentException = Error;\n\ndatascript.db.UnsupportedOperationException = Error;\ndatascript.db.e0 = (0);\ndatascript.db.tx0 = (536870912);\ndatascript.db.emax = (2147483647);\ndatascript.db.txmax = (2147483647);\ndatascript.db.implicit_schema = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(\"db\",\"ident\",\"db/ident\",-737096),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(\"db\",\"unique\",\"db/unique\",329396388),new cljs.core.Keyword(\"db.unique\",\"identity\",\"db.unique/identity\",1675950722)], null)], null);\ndatascript.db.seqable_QMARK_ = (function datascript$db$seqable_QMARK_(x){\nreturn (((!(typeof x === 'string'))) && (((cljs.core.seqable_QMARK_(x)) || (me.tonsky.persistent_sorted_set.arrays.array_QMARK_(x)))));\n});\ndatascript.db.conjv = cljs.core.fnil.cljs$core$IFn$_invoke$arity$2(cljs.core.conj,cljs.core.PersistentVector.EMPTY);\ndatascript.db.conjs = cljs.core.fnil.cljs$core$IFn$_invoke$arity$2(cljs.core.conj,cljs.core.PersistentHashSet.EMPTY);\n/**\n * Same as reduce, but `f` takes [acc el idx]\n */\ndatascript.db.reduce_indexed = (function datascript$db$reduce_indexed(f,init,xs){\nreturn cljs.core.first(cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (p__38676,x){\nvar vec__38677 = p__38676;\nvar acc = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38677,(0),null);\nvar idx = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38677,(1),null);\nvar res = (f.cljs$core$IFn$_invoke$arity$3 ? f.cljs$core$IFn$_invoke$arity$3(acc,x,idx) : f.call(null,acc,x,idx));\nif(cljs.core.reduced_QMARK_(res)){\nreturn cljs.core.reduced(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [res,idx], null));\n} else {\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [res,(idx + (1))], null);\n}\n}),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [init,(0)], null),xs));\n});\n/**\n * Take the &env from a macro, and tell whether we are expanding into cljs.\n */\ndatascript.db.cljs_env_QMARK_ = (function datascript$db$cljs_env_QMARK_(env){\nreturn cljs.core.boolean$(new cljs.core.Keyword(null,\"ns\",\"ns\",441598760).cljs$core$IFn$_invoke$arity$1(env));\n});\ndatascript.db.combine_hashes = (function datascript$db$combine_hashes(x,y){\nreturn cljs.core.hash_combine(x,y);\n});\n\n\n\n\n\n\n/**\n * @interface\n */\ndatascript.db.IDatom = function(){};\n\nvar datascript$db$IDatom$datom_tx$dyn_38913 = (function (this$){\nvar x__4550__auto__ = (((this$ == null))?null:this$);\nvar m__4551__auto__ = (datascript.db.datom_tx[goog.typeOf(x__4550__auto__)]);\nif((!((m__4551__auto__ == null)))){\nreturn (m__4551__auto__.cljs$core$IFn$_invoke$arity$1 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$1(this$) : m__4551__auto__.call(null,this$));\n} else {\nvar m__4549__auto__ = (datascript.db.datom_tx[\"_\"]);\nif((!((m__4549__auto__ == null)))){\nreturn (m__4549__auto__.cljs$core$IFn$_invoke$arity$1 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$1(this$) : m__4549__auto__.call(null,this$));\n} else {\nthrow cljs.core.missing_protocol(\"IDatom.datom-tx\",this$);\n}\n}\n});\ndatascript.db.datom_tx = (function datascript$db$datom_tx(this$){\nif((((!((this$ == null)))) && ((!((this$.datascript$db$IDatom$datom_tx$arity$1 == null)))))){\nreturn this$.datascript$db$IDatom$datom_tx$arity$1(this$);\n} else {\nreturn datascript$db$IDatom$datom_tx$dyn_38913(this$);\n}\n});\n\nvar datascript$db$IDatom$datom_added$dyn_38916 = (function (this$){\nvar x__4550__auto__ = (((this$ == null))?null:this$);\nvar m__4551__auto__ = (datascript.db.datom_added[goog.typeOf(x__4550__auto__)]);\nif((!((m__4551__auto__ == null)))){\nreturn (m__4551__auto__.cljs$core$IFn$_invoke$arity$1 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$1(this$) : m__4551__auto__.call(null,this$));\n} else {\nvar m__4549__auto__ = (datascript.db.datom_added[\"_\"]);\nif((!((m__4549__auto__ == null)))){\nreturn (m__4549__auto__.cljs$core$IFn$_invoke$arity$1 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$1(this$) : m__4549__auto__.call(null,this$));\n} else {\nthrow cljs.core.missing_protocol(\"IDatom.datom-added\",this$);\n}\n}\n});\ndatascript.db.datom_added = (function datascript$db$datom_added(this$){\nif((((!((this$ == null)))) && ((!((this$.datascript$db$IDatom$datom_added$arity$1 == null)))))){\nreturn this$.datascript$db$IDatom$datom_added$arity$1(this$);\n} else {\nreturn datascript$db$IDatom$datom_added$dyn_38916(this$);\n}\n});\n\nvar datascript$db$IDatom$datom_get_idx$dyn_38919 = (function (this$){\nvar x__4550__auto__ = (((this$ == null))?null:this$);\nvar m__4551__auto__ = (datascript.db.datom_get_idx[goog.typeOf(x__4550__auto__)]);\nif((!((m__4551__auto__ == null)))){\nreturn (m__4551__auto__.cljs$core$IFn$_invoke$arity$1 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$1(this$) : m__4551__auto__.call(null,this$));\n} else {\nvar m__4549__auto__ = (datascript.db.datom_get_idx[\"_\"]);\nif((!((m__4549__auto__ == null)))){\nreturn (m__4549__auto__.cljs$core$IFn$_invoke$arity$1 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$1(this$) : m__4549__auto__.call(null,this$));\n} else {\nthrow cljs.core.missing_protocol(\"IDatom.datom-get-idx\",this$);\n}\n}\n});\ndatascript.db.datom_get_idx = (function datascript$db$datom_get_idx(this$){\nif((((!((this$ == null)))) && ((!((this$.datascript$db$IDatom$datom_get_idx$arity$1 == null)))))){\nreturn this$.datascript$db$IDatom$datom_get_idx$arity$1(this$);\n} else {\nreturn datascript$db$IDatom$datom_get_idx$dyn_38919(this$);\n}\n});\n\nvar datascript$db$IDatom$datom_set_idx$dyn_38930 = (function (this$,value){\nvar x__4550__auto__ = (((this$ == null))?null:this$);\nvar m__4551__auto__ = (datascript.db.datom_set_idx[goog.typeOf(x__4550__auto__)]);\nif((!((m__4551__auto__ == null)))){\nreturn (m__4551__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$2(this$,value) : m__4551__auto__.call(null,this$,value));\n} else {\nvar m__4549__auto__ = (datascript.db.datom_set_idx[\"_\"]);\nif((!((m__4549__auto__ == null)))){\nreturn (m__4549__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$2(this$,value) : m__4549__auto__.call(null,this$,value));\n} else {\nthrow cljs.core.missing_protocol(\"IDatom.datom-set-idx\",this$);\n}\n}\n});\ndatascript.db.datom_set_idx = (function datascript$db$datom_set_idx(this$,value){\nif((((!((this$ == null)))) && ((!((this$.datascript$db$IDatom$datom_set_idx$arity$2 == null)))))){\nreturn this$.datascript$db$IDatom$datom_set_idx$arity$2(this$,value);\n} else {\nreturn datascript$db$IDatom$datom_set_idx$dyn_38930(this$,value);\n}\n});\n\n\n/**\n* @constructor\n * @implements {cljs.core.IIndexed}\n * @implements {datascript.db.IDatom}\n * @implements {cljs.core.IEquiv}\n * @implements {cljs.core.IHash}\n * @implements {cljs.core.ISeqable}\n * @implements {cljs.core.IPrintWithWriter}\n * @implements {cljs.core.IAssociative}\n * @implements {cljs.core.ILookup}\n*/\ndatascript.db.Datom = (function (e,a,v,tx,idx,_hash){\nthis.e = e;\nthis.a = a;\nthis.v = v;\nthis.tx = tx;\nthis.idx = idx;\nthis._hash = _hash;\nthis.cljs$lang$protocol_mask$partition0$ = 2162164496;\nthis.cljs$lang$protocol_mask$partition1$ = 0;\n});\n(datascript.db.Datom.prototype.datascript$db$IDatom$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.Datom.prototype.datascript$db$IDatom$datom_tx$arity$1 = (function (d){\nvar self__ = this;\nvar d__$1 = this;\nif((self__.tx > (0))){\nreturn self__.tx;\n} else {\nreturn (- self__.tx);\n}\n}));\n\n(datascript.db.Datom.prototype.datascript$db$IDatom$datom_added$arity$1 = (function (d){\nvar self__ = this;\nvar d__$1 = this;\nreturn (self__.tx > (0));\n}));\n\n(datascript.db.Datom.prototype.datascript$db$IDatom$datom_get_idx$arity$1 = (function (_){\nvar self__ = this;\nvar ___$1 = this;\nreturn self__.idx;\n}));\n\n(datascript.db.Datom.prototype.datascript$db$IDatom$datom_set_idx$arity$2 = (function (_,value){\nvar self__ = this;\nvar ___$1 = this;\nreturn (self__.idx = (value | (0)));\n}));\n\n(datascript.db.Datom.prototype.cljs$core$IHash$_hash$arity$1 = (function (d){\nvar self__ = this;\nvar d__$1 = this;\nif((self__._hash === (0))){\nreturn (self__._hash = (datascript.db.hash_datom.cljs$core$IFn$_invoke$arity$1 ? datascript.db.hash_datom.cljs$core$IFn$_invoke$arity$1(d__$1) : datascript.db.hash_datom.call(null,d__$1)));\n} else {\nreturn self__._hash;\n}\n}));\n\n(datascript.db.Datom.prototype.cljs$core$IEquiv$_equiv$arity$2 = (function (d,o){\nvar self__ = this;\nvar d__$1 = this;\nvar and__4251__auto__ = (o instanceof datascript.db.Datom);\nif(and__4251__auto__){\nreturn (datascript.db.equiv_datom.cljs$core$IFn$_invoke$arity$2 ? datascript.db.equiv_datom.cljs$core$IFn$_invoke$arity$2(d__$1,o) : datascript.db.equiv_datom.call(null,d__$1,o));\n} else {\nreturn and__4251__auto__;\n}\n}));\n\n(datascript.db.Datom.prototype.cljs$core$ISeqable$_seq$arity$1 = (function (d){\nvar self__ = this;\nvar d__$1 = this;\nreturn (datascript.db.seq_datom.cljs$core$IFn$_invoke$arity$1 ? datascript.db.seq_datom.cljs$core$IFn$_invoke$arity$1(d__$1) : datascript.db.seq_datom.call(null,d__$1));\n}));\n\n(datascript.db.Datom.prototype.cljs$core$ILookup$_lookup$arity$2 = (function (d,k){\nvar self__ = this;\nvar d__$1 = this;\nreturn (datascript.db.val_at_datom.cljs$core$IFn$_invoke$arity$3 ? datascript.db.val_at_datom.cljs$core$IFn$_invoke$arity$3(d__$1,k,null) : datascript.db.val_at_datom.call(null,d__$1,k,null));\n}));\n\n(datascript.db.Datom.prototype.cljs$core$ILookup$_lookup$arity$3 = (function (d,k,nf){\nvar self__ = this;\nvar d__$1 = this;\nreturn (datascript.db.val_at_datom.cljs$core$IFn$_invoke$arity$3 ? datascript.db.val_at_datom.cljs$core$IFn$_invoke$arity$3(d__$1,k,nf) : datascript.db.val_at_datom.call(null,d__$1,k,nf));\n}));\n\n(datascript.db.Datom.prototype.cljs$core$IIndexed$_nth$arity$2 = (function (this$,i){\nvar self__ = this;\nvar this$__$1 = this;\nreturn (datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$2 ? datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$2(this$__$1,i) : datascript.db.nth_datom.call(null,this$__$1,i));\n}));\n\n(datascript.db.Datom.prototype.cljs$core$IIndexed$_nth$arity$3 = (function (this$,i,not_found){\nvar self__ = this;\nvar this$__$1 = this;\nreturn (datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$3 ? datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$3(this$__$1,i,not_found) : datascript.db.nth_datom.call(null,this$__$1,i,not_found));\n}));\n\n(datascript.db.Datom.prototype.cljs$core$IAssociative$_assoc$arity$3 = (function (d,k,v__$1){\nvar self__ = this;\nvar d__$1 = this;\nreturn (datascript.db.assoc_datom.cljs$core$IFn$_invoke$arity$3 ? datascript.db.assoc_datom.cljs$core$IFn$_invoke$arity$3(d__$1,k,v__$1) : datascript.db.assoc_datom.call(null,d__$1,k,v__$1));\n}));\n\n(datascript.db.Datom.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = (function (d,writer,opts){\nvar self__ = this;\nvar d__$1 = this;\nreturn cljs.core.pr_sequential_writer(writer,cljs.core.pr_writer,\"#datascript/Datom [\",\" \",\"]\",opts,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [d__$1.e,d__$1.a,d__$1.v,d__$1.datascript$db$IDatom$datom_tx$arity$1(null),d__$1.datascript$db$IDatom$datom_added$arity$1(null)], null));\n}));\n\n(datascript.db.Datom.getBasis = (function (){\nreturn new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.with_meta(new cljs.core.Symbol(null,\"e\",\"e\",-1273166571,null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\"tag\",\"tag\",-1290361223),new cljs.core.Symbol(null,\"number\",\"number\",-1084057331,null)], null)),new cljs.core.Symbol(null,\"a\",\"a\",-482876059,null),new cljs.core.Symbol(null,\"v\",\"v\",1661996586,null),cljs.core.with_meta(new cljs.core.Symbol(null,\"tx\",\"tx\",2107161945,null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\"tag\",\"tag\",-1290361223),new cljs.core.Symbol(null,\"number\",\"number\",-1084057331,null)], null)),cljs.core.with_meta(new cljs.core.Symbol(null,\"idx\",\"idx\",-1600747296,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"tag\",\"tag\",-1290361223),new cljs.core.Symbol(null,\"number\",\"number\",-1084057331,null),new cljs.core.Keyword(null,\"mutable\",\"mutable\",875778266),true], null)),cljs.core.with_meta(new cljs.core.Symbol(null,\"_hash\",\"_hash\",-2130838312,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"tag\",\"tag\",-1290361223),new cljs.core.Symbol(null,\"number\",\"number\",-1084057331,null),new cljs.core.Keyword(null,\"mutable\",\"mutable\",875778266),true], null))], null);\n}));\n\n(datascript.db.Datom.cljs$lang$type = true);\n\n(datascript.db.Datom.cljs$lang$ctorStr = \"datascript.db/Datom\");\n\n(datascript.db.Datom.cljs$lang$ctorPrWriter = (function (this__4491__auto__,writer__4492__auto__,opt__4493__auto__){\nreturn cljs.core._write(writer__4492__auto__,\"datascript.db/Datom\");\n}));\n\n/**\n * Positional factory function for datascript.db/Datom.\n */\ndatascript.db.__GT_Datom = (function datascript$db$__GT_Datom(e,a,v,tx,idx,_hash){\nreturn (new datascript.db.Datom(e,a,v,tx,idx,_hash));\n});\n\ngoog.exportSymbol(\"datascript.db.Datom\",datascript.db.Datom);\ndatascript.db.datom = (function datascript$db$datom(var_args){\nvar G__38681 = arguments.length;\nswitch (G__38681) {\ncase 3:\nreturn datascript.db.datom.cljs$core$IFn$_invoke$arity$3((arguments[(0)]),(arguments[(1)]),(arguments[(2)]));\n\nbreak;\ncase 4:\nreturn datascript.db.datom.cljs$core$IFn$_invoke$arity$4((arguments[(0)]),(arguments[(1)]),(arguments[(2)]),(arguments[(3)]));\n\nbreak;\ncase 5:\nreturn datascript.db.datom.cljs$core$IFn$_invoke$arity$5((arguments[(0)]),(arguments[(1)]),(arguments[(2)]),(arguments[(3)]),(arguments[(4)]));\n\nbreak;\ndefault:\nthrow (new Error([\"Invalid arity: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));\n\n}\n});\n\n(datascript.db.datom.cljs$core$IFn$_invoke$arity$3 = (function (e,a,v){\nreturn (new datascript.db.Datom(e,a,v,(536870912),(0),(0)));\n}));\n\n(datascript.db.datom.cljs$core$IFn$_invoke$arity$4 = (function (e,a,v,tx){\nreturn (new datascript.db.Datom(e,a,v,tx,(0),(0)));\n}));\n\n(datascript.db.datom.cljs$core$IFn$_invoke$arity$5 = (function (e,a,v,tx,added){\nreturn (new datascript.db.Datom(e,a,v,(cljs.core.truth_(added)?tx:(- tx)),(0),(0)));\n}));\n\n(datascript.db.datom.cljs$lang$maxFixedArity = 5);\n\ndatascript.db.datom_QMARK_ = (function datascript$db$datom_QMARK_(x){\nreturn (x instanceof datascript.db.Datom);\n});\ndatascript.db.hash_datom = (function datascript$db$hash_datom(d){\nreturn datascript.db.combine_hashes(datascript.db.combine_hashes(cljs.core.hash(d.e),cljs.core.hash(d.a)),cljs.core.hash(d.v));\n});\ndatascript.db.equiv_datom = (function datascript$db$equiv_datom(d,o){\nreturn (((d.e === o.e)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(d.a,o.a)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(d.v,o.v)))));\n});\ndatascript.db.seq_datom = (function datascript$db$seq_datom(d){\nreturn (new cljs.core.List(null,d.e,(new cljs.core.List(null,d.a,(new cljs.core.List(null,d.v,(new cljs.core.List(null,d.datascript$db$IDatom$datom_tx$arity$1(null),(new cljs.core.List(null,d.datascript$db$IDatom$datom_added$arity$1(null),null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null));\n});\ndatascript.db.val_at_datom = (function datascript$db$val_at_datom(d,k,not_found){\nvar G__38682 = k;\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"v\",\"v\",21465059),G__38682)){\nreturn d.v;\n} else {\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(\"e\",G__38682)){\nreturn d.e;\n} else {\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"added\",\"added\",2057651688),G__38682)){\nreturn d.datascript$db$IDatom$datom_added$arity$1(null);\n} else {\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(\"v\",G__38682)){\nreturn d.v;\n} else {\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"e\",\"e\",1381269198),G__38682)){\nreturn d.e;\n} else {\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(\"a\",G__38682)){\nreturn d.a;\n} else {\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"tx\",\"tx\",466630418),G__38682)){\nreturn d.datascript$db$IDatom$datom_tx$arity$1(null);\n} else {\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(\"added\",G__38682)){\nreturn d.datascript$db$IDatom$datom_added$arity$1(null);\n} else {\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(\"tx\",G__38682)){\nreturn d.datascript$db$IDatom$datom_tx$arity$1(null);\n} else {\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"a\",\"a\",-2123407586),G__38682)){\nreturn d.a;\n} else {\nreturn not_found;\n\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n});\ndatascript.db.nth_datom = (function datascript$db$nth_datom(var_args){\nvar G__38684 = arguments.length;\nswitch (G__38684) {\ncase 2:\nreturn datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));\n\nbreak;\ncase 3:\nreturn datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$3((arguments[(0)]),(arguments[(1)]),(arguments[(2)]));\n\nbreak;\ndefault:\nthrow (new Error([\"Invalid arity: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));\n\n}\n});\n\n(datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$2 = (function (d,i){\nvar G__38685 = i;\nswitch (G__38685) {\ncase (0):\nreturn d.e;\n\nbreak;\ncase (1):\nreturn d.a;\n\nbreak;\ncase (2):\nreturn d.v;\n\nbreak;\ncase (3):\nreturn d.datascript$db$IDatom$datom_tx$arity$1(null);\n\nbreak;\ncase (4):\nreturn d.datascript$db$IDatom$datom_added$arity$1(null);\n\nbreak;\ndefault:\nthrow (new Error([\"Datom/-nth: Index out of bounds: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(i)].join('')));\n\n}\n}));\n\n(datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$3 = (function (d,i,not_found){\nvar G__38686 = i;\nswitch (G__38686) {\ncase (0):\nreturn d.e;\n\nbreak;\ncase (1):\nreturn d.a;\n\nbreak;\ncase (2):\nreturn d.v;\n\nbreak;\ncase (3):\nreturn d.datascript$db$IDatom$datom_tx$arity$1(null);\n\nbreak;\ncase (4):\nreturn d.datascript$db$IDatom$datom_added$arity$1(null);\n\nbreak;\ndefault:\nreturn not_found;\n\n}\n}));\n\n(datascript.db.nth_datom.cljs$lang$maxFixedArity = 3);\n\ndatascript.db.assoc_datom = (function datascript$db$assoc_datom(d,k,v){\nvar G__38687 = k;\nvar G__38687__$1 = (((G__38687 instanceof cljs.core.Keyword))?G__38687.fqn:null);\nswitch (G__38687__$1) {\ncase \"e\":\nreturn datascript.db.datom.cljs$core$IFn$_invoke$arity$5(v,d.a,d.v,d.datascript$db$IDatom$datom_tx$arity$1(null),d.datascript$db$IDatom$datom_added$arity$1(null));\n\nbreak;\ncase \"a\":\nreturn datascript.db.datom.cljs$core$IFn$_invoke$arity$5(d.e,v,d.v,d.datascript$db$IDatom$datom_tx$arity$1(null),d.datascript$db$IDatom$datom_added$arity$1(null));\n\nbreak;\ncase \"v\":\nreturn datascript.db.datom.cljs$core$IFn$_invoke$arity$5(d.e,d.a,v,d.datascript$db$IDatom$datom_tx$arity$1(null),d.datascript$db$IDatom$datom_added$arity$1(null));\n\nbreak;\ncase \"tx\":\nreturn datascript.db.datom.cljs$core$IFn$_invoke$arity$5(d.e,d.a,d.v,v,d.datascript$db$IDatom$datom_added$arity$1(null));\n\nbreak;\ncase \"added\":\nreturn datascript.db.datom.cljs$core$IFn$_invoke$arity$5(d.e,d.a,d.v,d.datascript$db$IDatom$datom_tx$arity$1(null),v);\n\nbreak;\ndefault:\nthrow (new datascript.db.IllegalArgumentException([\"invalid key for #datascript/Datom: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(k)].join('')));\n\n}\n});\ndatascript.db.datom_from_reader = (function datascript$db$datom_from_reader(vec){\nreturn cljs.core.apply.cljs$core$IFn$_invoke$arity$2(datascript.db.datom,vec);\n});\ndatascript.db.cmp = (function datascript$db$cmp(x,y){\nif((x == null)){\nreturn (0);\n} else {\nif((y == null)){\nreturn (0);\n} else {\nreturn cljs.core.compare(x,y);\n}\n}\n});\ndatascript.db.class_identical_QMARK_ = (function datascript$db$class_identical_QMARK_(x,y){\nreturn (cljs.core.type(x) === cljs.core.type(y));\n});\ndatascript.db.class_compare = (function datascript$db$class_compare(x,y){\nreturn datascript.db.goog$module$goog$array.defaultCompare(cljs.core.type__GT_str(cljs.core.type(x)),cljs.core.type__GT_str(cljs.core.type(y)));\n});\ndatascript.db.value_compare = (function datascript$db$value_compare(x,y){\ntry{if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(x,y)){\nreturn (0);\n} else {\nif((((!((x == null))))?(((((x.cljs$lang$protocol_mask$partition1$ & (2048))) || ((cljs.core.PROTOCOL_SENTINEL === x.cljs$core$IComparable$))))?true:(((!x.cljs$lang$protocol_mask$partition1$))?cljs.core.native_satisfies_QMARK_(cljs.core.IComparable,x):false)):cljs.core.native_satisfies_QMARK_(cljs.core.IComparable,x))){\nreturn cljs.core._compare(x,y);\n} else {\nif((!(datascript.db.class_identical_QMARK_(x,y)))){\nreturn datascript.db.class_compare(x,y);\n} else {\nif(((typeof x === 'number') || (((typeof x === 'string') || (((cljs.core.array_QMARK_(x)) || (((x === true) || (x === false))))))))){\nreturn datascript.db.goog$module$goog$array.defaultCompare(x,y);\n} else {\nreturn (cljs.core.hash(x) - cljs.core.hash(y));\n\n}\n}\n}\n}\n}catch (e38689){if((e38689 instanceof Error)){\nvar e = e38689;\nif((!(datascript.db.class_identical_QMARK_(x,y)))){\nreturn datascript.db.class_compare(x,y);\n} else {\nthrow e;\n}\n} else {\nthrow e38689;\n\n}\n}});\ndatascript.db.value_cmp = (function datascript$db$value_cmp(x,y){\nif((x == null)){\nreturn (0);\n} else {\nif((y == null)){\nreturn (0);\n} else {\nreturn datascript.db.value_compare(x,y);\n\n}\n}\n});\ndatascript.db.cmp_datoms_eavt = (function datascript$db$cmp_datoms_eavt(d1,d2){\nvar c__38034__auto__ = (d1.e - d2.e);\nif(((0) === c__38034__auto__)){\nvar c__38034__auto____$1 = datascript.db.cmp(d1.a,d2.a);\nif(((0) === c__38034__auto____$1)){\nvar c__38034__auto____$2 = datascript.db.value_cmp(d1.v,d2.v);\nif(((0) === c__38034__auto____$2)){\nvar c__38034__auto____$3 = (d1.datascript$db$IDatom$datom_tx$arity$1(null) - d2.datascript$db$IDatom$datom_tx$arity$1(null));\nif(((0) === c__38034__auto____$3)){\nreturn (0);\n} else {\nreturn c__38034__auto____$3;\n}\n} else {\nreturn c__38034__auto____$2;\n}\n} else {\nreturn c__38034__auto____$1;\n}\n} else {\nreturn c__38034__auto__;\n}\n});\ndatascript.db.cmp_datoms_aevt = (function datascript$db$cmp_datoms_aevt(d1,d2){\nvar c__38034__auto__ = datascript.db.cmp(d1.a,d2.a);\nif(((0) === c__38034__auto__)){\nvar c__38034__auto____$1 = (d1.e - d2.e);\nif(((0) === c__38034__auto____$1)){\nvar c__38034__auto____$2 = datascript.db.value_cmp(d1.v,d2.v);\nif(((0) === c__38034__auto____$2)){\nvar c__38034__auto____$3 = (d1.datascript$db$IDatom$datom_tx$arity$1(null) - d2.datascript$db$IDatom$datom_tx$arity$1(null));\nif(((0) === c__38034__auto____$3)){\nreturn (0);\n} else {\nreturn c__38034__auto____$3;\n}\n} else {\nreturn c__38034__auto____$2;\n}\n} else {\nreturn c__38034__auto____$1;\n}\n} else {\nreturn c__38034__auto__;\n}\n});\ndatascript.db.cmp_datoms_avet = (function datascript$db$cmp_datoms_avet(d1,d2){\nvar c__38034__auto__ = datascript.db.cmp(d1.a,d2.a);\nif(((0) === c__38034__auto__)){\nvar c__38034__auto____$1 = datascript.db.value_cmp(d1.v,d2.v);\nif(((0) === c__38034__auto____$1)){\nvar c__38034__auto____$2 = (d1.e - d2.e);\nif(((0) === c__38034__auto____$2)){\nvar c__38034__auto____$3 = (d1.datascript$db$IDatom$datom_tx$arity$1(null) - d2.datascript$db$IDatom$datom_tx$arity$1(null));\nif(((0) === c__38034__auto____$3)){\nreturn (0);\n} else {\nreturn c__38034__auto____$3;\n}\n} else {\nreturn c__38034__auto____$2;\n}\n} else {\nreturn c__38034__auto____$1;\n}\n} else {\nreturn c__38034__auto__;\n}\n});\ndatascript.db.cmp_attr_quick = (function datascript$db$cmp_attr_quick(a1,a2){\nif((a1 instanceof cljs.core.Keyword)){\nreturn cljs.core._compare(a1,a2);\n} else {\nreturn datascript.db.goog$module$goog$array.defaultCompare(a1,a2);\n}\n});\ndatascript.db.cmp_datoms_eav_quick = (function datascript$db$cmp_datoms_eav_quick(d1,d2){\nvar c__38034__auto__ = (d1.e - d2.e);\nif(((0) === c__38034__auto__)){\nvar c__38034__auto____$1 = datascript.db.cmp_attr_quick(d1.a,d2.a);\nif(((0) === c__38034__auto____$1)){\nvar c__38034__auto____$2 = datascript.db.value_compare(d1.v,d2.v);\nif(((0) === c__38034__auto____$2)){\nreturn (0);\n} else {\nreturn c__38034__auto____$2;\n}\n} else {\nreturn c__38034__auto____$1;\n}\n} else {\nreturn c__38034__auto__;\n}\n});\ndatascript.db.cmp_datoms_eavt_quick = (function datascript$db$cmp_datoms_eavt_quick(d1,d2){\nvar c__38034__auto__ = (d1.e - d2.e);\nif(((0) === c__38034__auto__)){\nvar c__38034__auto____$1 = datascript.db.cmp_attr_quick(d1.a,d2.a);\nif(((0) === c__38034__auto____$1)){\nvar c__38034__auto____$2 = datascript.db.value_compare(d1.v,d2.v);\nif(((0) === c__38034__auto____$2)){\nvar c__38034__auto____$3 = (d1.datascript$db$IDatom$datom_tx$arity$1(null) - d2.datascript$db$IDatom$datom_tx$arity$1(null));\nif(((0) === c__38034__auto____$3)){\nreturn (0);\n} else {\nreturn c__38034__auto____$3;\n}\n} else {\nreturn c__38034__auto____$2;\n}\n} else {\nreturn c__38034__auto____$1;\n}\n} else {\nreturn c__38034__auto__;\n}\n});\ndatascript.db.cmp_datoms_aevt_quick = (function datascript$db$cmp_datoms_aevt_quick(d1,d2){\nvar c__38034__auto__ = datascript.db.cmp_attr_quick(d1.a,d2.a);\nif(((0) === c__38034__auto__)){\nvar c__38034__auto____$1 = (d1.e - d2.e);\nif(((0) === c__38034__auto____$1)){\nvar c__38034__auto____$2 = datascript.db.value_compare(d1.v,d2.v);\nif(((0) === c__38034__auto____$2)){\nvar c__38034__auto____$3 = (d1.datascript$db$IDatom$datom_tx$arity$1(null) - d2.datascript$db$IDatom$datom_tx$arity$1(null));\nif(((0) === c__38034__auto____$3)){\nreturn (0);\n} else {\nreturn c__38034__auto____$3;\n}\n} else {\nreturn c__38034__auto____$2;\n}\n} else {\nreturn c__38034__auto____$1;\n}\n} else {\nreturn c__38034__auto__;\n}\n});\ndatascript.db.cmp_datoms_avet_quick = (function datascript$db$cmp_datoms_avet_quick(d1,d2){\nvar c__38034__auto__ = datascript.db.cmp_attr_quick(d1.a,d2.a);\nif(((0) === c__38034__auto__)){\nvar c__38034__auto____$1 = datascript.db.value_compare(d1.v,d2.v);\nif(((0) === c__38034__auto____$1)){\nvar c__38034__auto____$2 = (d1.e - d2.e);\nif(((0) === c__38034__auto____$2)){\nvar c__38034__auto____$3 = (d1.datascript$db$IDatom$datom_tx$arity$1(null) - d2.datascript$db$IDatom$datom_tx$arity$1(null));\nif(((0) === c__38034__auto____$3)){\nreturn (0);\n} else {\nreturn c__38034__auto____$3;\n}\n} else {\nreturn c__38034__auto____$2;\n}\n} else {\nreturn c__38034__auto____$1;\n}\n} else {\nreturn c__38034__auto__;\n}\n});\ndatascript.db.diff_sorted = (function datascript$db$diff_sorted(a,b,cmp){\nvar only_a = cljs.core.PersistentVector.EMPTY;\nvar only_b = cljs.core.PersistentVector.EMPTY;\nvar both = cljs.core.PersistentVector.EMPTY;\nvar a__$1 = a;\nvar b__$1 = b;\nwhile(true){\nif(cljs.core.empty_QMARK_(a__$1)){\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.not_empty(only_a),cljs.core.not_empty(cljs.core.into.cljs$core$IFn$_invoke$arity$2(only_b,b__$1)),cljs.core.not_empty(both)], null);\n} else {\nif(cljs.core.empty_QMARK_(b__$1)){\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.not_empty(cljs.core.into.cljs$core$IFn$_invoke$arity$2(only_a,a__$1)),cljs.core.not_empty(only_b),cljs.core.not_empty(both)], null);\n} else {\nvar first_a = cljs.core.first(a__$1);\nvar first_b = cljs.core.first(b__$1);\nvar diff = (function (){try{return (cmp.cljs$core$IFn$_invoke$arity$2 ? cmp.cljs$core$IFn$_invoke$arity$2(first_a,first_b) : cmp.call(null,first_a,first_b));\n}catch (e38692){if((e38692 instanceof Error)){\nvar _ = e38692;\nreturn new cljs.core.Keyword(null,\"incomparable\",\"incomparable\",1634329662);\n} else {\nthrow e38692;\n\n}\n}})();\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(diff,new cljs.core.Keyword(null,\"incomparable\",\"incomparable\",1634329662))){\nvar G__39072 = cljs.core.conj.cljs$core$IFn$_invoke$arity$2(only_a,first_a);\nvar G__39073 = cljs.core.conj.cljs$core$IFn$_invoke$arity$2(only_b,first_b);\nvar G__39074 = both;\nvar G__39075 = cljs.core.next(a__$1);\nvar G__39076 = cljs.core.next(b__$1);\nonly_a = G__39072;\nonly_b = G__39073;\nboth = G__39074;\na__$1 = G__39075;\nb__$1 = G__39076;\ncontinue;\n} else {\nif((diff === (0))){\nvar G__39079 = only_a;\nvar G__39080 = only_b;\nvar G__39081 = cljs.core.conj.cljs$core$IFn$_invoke$arity$2(both,first_a);\nvar G__39082 = cljs.core.next(a__$1);\nvar G__39083 = cljs.core.next(b__$1);\nonly_a = G__39079;\nonly_b = G__39080;\nboth = G__39081;\na__$1 = G__39082;\nb__$1 = G__39083;\ncontinue;\n} else {\nif((diff < (0))){\nvar G__39084 = cljs.core.conj.cljs$core$IFn$_invoke$arity$2(only_a,first_a);\nvar G__39085 = only_b;\nvar G__39086 = both;\nvar G__39087 = cljs.core.next(a__$1);\nvar G__39088 = b__$1;\nonly_a = G__39084;\nonly_b = G__39085;\nboth = G__39086;\na__$1 = G__39087;\nb__$1 = G__39088;\ncontinue;\n} else {\nif((diff > (0))){\nvar G__39089 = only_a;\nvar G__39090 = cljs.core.conj.cljs$core$IFn$_invoke$arity$2(only_b,first_b);\nvar G__39091 = both;\nvar G__39092 = a__$1;\nvar G__39093 = cljs.core.next(b__$1);\nonly_a = G__39089;\nonly_b = G__39090;\nboth = G__39091;\na__$1 = G__39092;\nb__$1 = G__39093;\ncontinue;\n} else {\nreturn null;\n}\n}\n}\n}\n\n}\n}\nbreak;\n}\n});\n\n\n\n\n\n\n\n\n/**\n * @interface\n */\ndatascript.db.ISearch = function(){};\n\nvar datascript$db$ISearch$_search$dyn_39102 = (function (data,pattern){\nvar x__4550__auto__ = (((data == null))?null:data);\nvar m__4551__auto__ = (datascript.db._search[goog.typeOf(x__4550__auto__)]);\nif((!((m__4551__auto__ == null)))){\nreturn (m__4551__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$2(data,pattern) : m__4551__auto__.call(null,data,pattern));\n} else {\nvar m__4549__auto__ = (datascript.db._search[\"_\"]);\nif((!((m__4549__auto__ == null)))){\nreturn (m__4549__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$2(data,pattern) : m__4549__auto__.call(null,data,pattern));\n} else {\nthrow cljs.core.missing_protocol(\"ISearch.-search\",data);\n}\n}\n});\ndatascript.db._search = (function datascript$db$_search(data,pattern){\nif((((!((data == null)))) && ((!((data.datascript$db$ISearch$_search$arity$2 == null)))))){\nreturn data.datascript$db$ISearch$_search$arity$2(data,pattern);\n} else {\nreturn datascript$db$ISearch$_search$dyn_39102(data,pattern);\n}\n});\n\ndatascript.db.fsearch = (function datascript$db$fsearch(data,pattern){\nreturn cljs.core.first(datascript.db._search(data,pattern));\n});\n\n/**\n * @interface\n */\ndatascript.db.IIndexAccess = function(){};\n\nvar datascript$db$IIndexAccess$_datoms$dyn_39112 = (function (db,index,components){\nvar x__4550__auto__ = (((db == null))?null:db);\nvar m__4551__auto__ = (datascript.db._datoms[goog.typeOf(x__4550__auto__)]);\nif((!((m__4551__auto__ == null)))){\nreturn (m__4551__auto__.cljs$core$IFn$_invoke$arity$3 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$3(db,index,components) : m__4551__auto__.call(null,db,index,components));\n} else {\nvar m__4549__auto__ = (datascript.db._datoms[\"_\"]);\nif((!((m__4549__auto__ == null)))){\nreturn (m__4549__auto__.cljs$core$IFn$_invoke$arity$3 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$3(db,index,components) : m__4549__auto__.call(null,db,index,components));\n} else {\nthrow cljs.core.missing_protocol(\"IIndexAccess.-datoms\",db);\n}\n}\n});\ndatascript.db._datoms = (function datascript$db$_datoms(db,index,components){\nif((((!((db == null)))) && ((!((db.datascript$db$IIndexAccess$_datoms$arity$3 == null)))))){\nreturn db.datascript$db$IIndexAccess$_datoms$arity$3(db,index,components);\n} else {\nreturn datascript$db$IIndexAccess$_datoms$dyn_39112(db,index,components);\n}\n});\n\nvar datascript$db$IIndexAccess$_seek_datoms$dyn_39115 = (function (db,index,components){\nvar x__4550__auto__ = (((db == null))?null:db);\nvar m__4551__auto__ = (datascript.db._seek_datoms[goog.typeOf(x__4550__auto__)]);\nif((!((m__4551__auto__ == null)))){\nreturn (m__4551__auto__.cljs$core$IFn$_invoke$arity$3 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$3(db,index,components) : m__4551__auto__.call(null,db,index,components));\n} else {\nvar m__4549__auto__ = (datascript.db._seek_datoms[\"_\"]);\nif((!((m__4549__auto__ == null)))){\nreturn (m__4549__auto__.cljs$core$IFn$_invoke$arity$3 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$3(db,index,components) : m__4549__auto__.call(null,db,index,components));\n} else {\nthrow cljs.core.missing_protocol(\"IIndexAccess.-seek-datoms\",db);\n}\n}\n});\ndatascript.db._seek_datoms = (function datascript$db$_seek_datoms(db,index,components){\nif((((!((db == null)))) && ((!((db.datascript$db$IIndexAccess$_seek_datoms$arity$3 == null)))))){\nreturn db.datascript$db$IIndexAccess$_seek_datoms$arity$3(db,index,components);\n} else {\nreturn datascript$db$IIndexAccess$_seek_datoms$dyn_39115(db,index,components);\n}\n});\n\nvar datascript$db$IIndexAccess$_rseek_datoms$dyn_39122 = (function (db,index,components){\nvar x__4550__auto__ = (((db == null))?null:db);\nvar m__4551__auto__ = (datascript.db._rseek_datoms[goog.typeOf(x__4550__auto__)]);\nif((!((m__4551__auto__ == null)))){\nreturn (m__4551__auto__.cljs$core$IFn$_invoke$arity$3 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$3(db,index,components) : m__4551__auto__.call(null,db,index,components));\n} else {\nvar m__4549__auto__ = (datascript.db._rseek_datoms[\"_\"]);\nif((!((m__4549__auto__ == null)))){\nreturn (m__4549__auto__.cljs$core$IFn$_invoke$arity$3 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$3(db,index,components) : m__4549__auto__.call(null,db,index,components));\n} else {\nthrow cljs.core.missing_protocol(\"IIndexAccess.-rseek-datoms\",db);\n}\n}\n});\ndatascript.db._rseek_datoms = (function datascript$db$_rseek_datoms(db,index,components){\nif((((!((db == null)))) && ((!((db.datascript$db$IIndexAccess$_rseek_datoms$arity$3 == null)))))){\nreturn db.datascript$db$IIndexAccess$_rseek_datoms$arity$3(db,index,components);\n} else {\nreturn datascript$db$IIndexAccess$_rseek_datoms$dyn_39122(db,index,components);\n}\n});\n\nvar datascript$db$IIndexAccess$_index_range$dyn_39124 = (function (db,attr,start,end){\nvar x__4550__auto__ = (((db == null))?null:db);\nvar m__4551__auto__ = (datascript.db._index_range[goog.typeOf(x__4550__auto__)]);\nif((!((m__4551__auto__ == null)))){\nreturn (m__4551__auto__.cljs$core$IFn$_invoke$arity$4 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$4(db,attr,start,end) : m__4551__auto__.call(null,db,attr,start,end));\n} else {\nvar m__4549__auto__ = (datascript.db._index_range[\"_\"]);\nif((!((m__4549__auto__ == null)))){\nreturn (m__4549__auto__.cljs$core$IFn$_invoke$arity$4 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$4(db,attr,start,end) : m__4549__auto__.call(null,db,attr,start,end));\n} else {\nthrow cljs.core.missing_protocol(\"IIndexAccess.-index-range\",db);\n}\n}\n});\ndatascript.db._index_range = (function datascript$db$_index_range(db,attr,start,end){\nif((((!((db == null)))) && ((!((db.datascript$db$IIndexAccess$_index_range$arity$4 == null)))))){\nreturn db.datascript$db$IIndexAccess$_index_range$arity$4(db,attr,start,end);\n} else {\nreturn datascript$db$IIndexAccess$_index_range$dyn_39124(db,attr,start,end);\n}\n});\n\ndatascript.db.validate_indexed = (function datascript$db$validate_indexed(db,index,components){\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(index,new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032))){\nvar temp__5757__auto__ = cljs.core.first(components);\nif((temp__5757__auto__ == null)){\nreturn null;\n} else {\nvar attr = temp__5757__auto__;\nif(cljs.core.truth_((datascript.db.indexing_QMARK_.cljs$core$IFn$_invoke$arity$2 ? datascript.db.indexing_QMARK_.cljs$core$IFn$_invoke$arity$2(db,attr) : datascript.db.indexing_QMARK_.call(null,db,attr)))){\nreturn null;\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Attribute \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([attr], 0)),\" should be marked as :db/index true\"].join(''),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(null,\"index-access\",\"index-access\",-1548960265),new cljs.core.Keyword(null,\"index\",\"index\",-1531685915),new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),new cljs.core.Keyword(null,\"components\",\"components\",-1073188942),components], null));\n}\n}\n} else {\nreturn null;\n}\n});\n\n/**\n * @interface\n */\ndatascript.db.IDB = function(){};\n\nvar datascript$db$IDB$_schema$dyn_39129 = (function (db){\nvar x__4550__auto__ = (((db == null))?null:db);\nvar m__4551__auto__ = (datascript.db._schema[goog.typeOf(x__4550__auto__)]);\nif((!((m__4551__auto__ == null)))){\nreturn (m__4551__auto__.cljs$core$IFn$_invoke$arity$1 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$1(db) : m__4551__auto__.call(null,db));\n} else {\nvar m__4549__auto__ = (datascript.db._schema[\"_\"]);\nif((!((m__4549__auto__ == null)))){\nreturn (m__4549__auto__.cljs$core$IFn$_invoke$arity$1 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$1(db) : m__4549__auto__.call(null,db));\n} else {\nthrow cljs.core.missing_protocol(\"IDB.-schema\",db);\n}\n}\n});\ndatascript.db._schema = (function datascript$db$_schema(db){\nif((((!((db == null)))) && ((!((db.datascript$db$IDB$_schema$arity$1 == null)))))){\nreturn db.datascript$db$IDB$_schema$arity$1(db);\n} else {\nreturn datascript$db$IDB$_schema$dyn_39129(db);\n}\n});\n\nvar datascript$db$IDB$_attrs_by$dyn_39131 = (function (db,property){\nvar x__4550__auto__ = (((db == null))?null:db);\nvar m__4551__auto__ = (datascript.db._attrs_by[goog.typeOf(x__4550__auto__)]);\nif((!((m__4551__auto__ == null)))){\nreturn (m__4551__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$2(db,property) : m__4551__auto__.call(null,db,property));\n} else {\nvar m__4549__auto__ = (datascript.db._attrs_by[\"_\"]);\nif((!((m__4549__auto__ == null)))){\nreturn (m__4549__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$2(db,property) : m__4549__auto__.call(null,db,property));\n} else {\nthrow cljs.core.missing_protocol(\"IDB.-attrs-by\",db);\n}\n}\n});\ndatascript.db._attrs_by = (function datascript$db$_attrs_by(db,property){\nif((((!((db == null)))) && ((!((db.datascript$db$IDB$_attrs_by$arity$2 == null)))))){\nreturn db.datascript$db$IDB$_attrs_by$arity$2(db,property);\n} else {\nreturn datascript$db$IDB$_attrs_by$dyn_39131(db,property);\n}\n});\n\ndatascript.db.db_transient = (function datascript$db$db_transient(db){\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$3(cljs.core.update.cljs$core$IFn$_invoke$arity$3(cljs.core.update.cljs$core$IFn$_invoke$arity$3(db,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),cljs.core.transient$),new cljs.core.Keyword(null,\"aevt\",\"aevt\",-585148059),cljs.core.transient$),new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),cljs.core.transient$);\n});\ndatascript.db.db_persistent_BANG_ = (function datascript$db$db_persistent_BANG_(db){\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$3(cljs.core.update.cljs$core$IFn$_invoke$arity$3(cljs.core.update.cljs$core$IFn$_invoke$arity$3(db,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),cljs.core.persistent_BANG_),new cljs.core.Keyword(null,\"aevt\",\"aevt\",-585148059),cljs.core.persistent_BANG_),new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),cljs.core.persistent_BANG_);\n});\n\n/**\n* @constructor\n * @implements {cljs.core.IRecord}\n * @implements {cljs.core.IKVReduce}\n * @implements {cljs.core.IEquiv}\n * @implements {cljs.core.IHash}\n * @implements {cljs.core.ICollection}\n * @implements {cljs.core.ICounted}\n * @implements {cljs.core.ISeqable}\n * @implements {cljs.core.IMeta}\n * @implements {cljs.core.ICloneable}\n * @implements {cljs.core.IPrintWithWriter}\n * @implements {cljs.core.IIterable}\n * @implements {cljs.core.IWithMeta}\n * @implements {cljs.core.IAssociative}\n * @implements {cljs.core.IMap}\n * @implements {cljs.core.ILookup}\n*/\ndatascript.db.DB = (function (schema,eavt,aevt,avet,max_eid,max_tx,rschema,pull_patterns,pull_attrs,hash,__meta,__extmap,__hash){\nthis.schema = schema;\nthis.eavt = eavt;\nthis.aevt = aevt;\nthis.avet = avet;\nthis.max_eid = max_eid;\nthis.max_tx = max_tx;\nthis.rschema = rschema;\nthis.pull_patterns = pull_patterns;\nthis.pull_attrs = pull_attrs;\nthis.hash = hash;\nthis.__meta = __meta;\nthis.__extmap = __extmap;\nthis.__hash = __hash;\nthis.cljs$lang$protocol_mask$partition0$ = 2230716170;\nthis.cljs$lang$protocol_mask$partition1$ = 139264;\n});\n(datascript.db.DB.prototype.cljs$core$ILookup$_lookup$arity$2 = (function (this__4502__auto__,k__4503__auto__){\nvar self__ = this;\nvar this__4502__auto____$1 = this;\nreturn this__4502__auto____$1.cljs$core$ILookup$_lookup$arity$3(null,k__4503__auto__,null);\n}));\n\n(datascript.db.DB.prototype.cljs$core$ILookup$_lookup$arity$3 = (function (this__4504__auto__,k38695,else__4505__auto__){\nvar self__ = this;\nvar this__4504__auto____$1 = this;\nvar G__38699 = k38695;\nvar G__38699__$1 = (((G__38699 instanceof cljs.core.Keyword))?G__38699.fqn:null);\nswitch (G__38699__$1) {\ncase \"schema\":\nreturn self__.schema;\n\nbreak;\ncase \"eavt\":\nreturn self__.eavt;\n\nbreak;\ncase \"aevt\":\nreturn self__.aevt;\n\nbreak;\ncase \"avet\":\nreturn self__.avet;\n\nbreak;\ncase \"max-eid\":\nreturn self__.max_eid;\n\nbreak;\ncase \"max-tx\":\nreturn self__.max_tx;\n\nbreak;\ncase \"rschema\":\nreturn self__.rschema;\n\nbreak;\ncase \"pull-patterns\":\nreturn self__.pull_patterns;\n\nbreak;\ncase \"pull-attrs\":\nreturn self__.pull_attrs;\n\nbreak;\ncase \"hash\":\nreturn self__.hash;\n\nbreak;\ndefault:\nreturn cljs.core.get.cljs$core$IFn$_invoke$arity$3(self__.__extmap,k38695,else__4505__auto__);\n\n}\n}));\n\n(datascript.db.DB.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = (function (this__4522__auto__,f__4523__auto__,init__4524__auto__){\nvar self__ = this;\nvar this__4522__auto____$1 = this;\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (ret__4525__auto__,p__38700){\nvar vec__38701 = p__38700;\nvar k__4526__auto__ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38701,(0),null);\nvar v__4527__auto__ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38701,(1),null);\nreturn (f__4523__auto__.cljs$core$IFn$_invoke$arity$3 ? f__4523__auto__.cljs$core$IFn$_invoke$arity$3(ret__4525__auto__,k__4526__auto__,v__4527__auto__) : f__4523__auto__.call(null,ret__4525__auto__,k__4526__auto__,v__4527__auto__));\n}),init__4524__auto__,this__4522__auto____$1);\n}));\n\n(datascript.db.DB.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = (function (this__4517__auto__,writer__4518__auto__,opts__4519__auto__){\nvar self__ = this;\nvar this__4517__auto____$1 = this;\nvar pr_pair__4520__auto__ = (function (keyval__4521__auto__){\nreturn cljs.core.pr_sequential_writer(writer__4518__auto__,cljs.core.pr_writer,\"\",\" \",\"\",opts__4519__auto__,keyval__4521__auto__);\n});\nreturn cljs.core.pr_sequential_writer(writer__4518__auto__,pr_pair__4520__auto__,\"#datascript.db.DB{\",\", \",\"}\",opts__4519__auto__,cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new cljs.core.PersistentVector(null, 10, 5, cljs.core.PersistentVector.EMPTY_NODE, [(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"schema\",\"schema\",-1582001791),self__.schema],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),self__.eavt],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"aevt\",\"aevt\",-585148059),self__.aevt],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),self__.avet],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"max-eid\",\"max-eid\",2134868075),self__.max_eid],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"max-tx\",\"max-tx\",1119558339),self__.max_tx],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"rschema\",\"rschema\",-1196134054),self__.rschema],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"pull-patterns\",\"pull-patterns\",-343695048),self__.pull_patterns],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"pull-attrs\",\"pull-attrs\",-974863177),self__.pull_attrs],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596),self__.hash],null))], null),self__.__extmap));\n}));\n\n(datascript.db.DB.prototype.cljs$core$IIterable$_iterator$arity$1 = (function (G__38694){\nvar self__ = this;\nvar G__38694__$1 = this;\nreturn (new cljs.core.RecordIter((0),G__38694__$1,10,new cljs.core.PersistentVector(null, 10, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"schema\",\"schema\",-1582001791),new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),new cljs.core.Keyword(null,\"aevt\",\"aevt\",-585148059),new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),new cljs.core.Keyword(null,\"max-eid\",\"max-eid\",2134868075),new cljs.core.Keyword(null,\"max-tx\",\"max-tx\",1119558339),new cljs.core.Keyword(null,\"rschema\",\"rschema\",-1196134054),new cljs.core.Keyword(null,\"pull-patterns\",\"pull-patterns\",-343695048),new cljs.core.Keyword(null,\"pull-attrs\",\"pull-attrs\",-974863177),new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596)], null),(cljs.core.truth_(self__.__extmap)?cljs.core._iterator(self__.__extmap):cljs.core.nil_iter())));\n}));\n\n(datascript.db.DB.prototype.cljs$core$IMeta$_meta$arity$1 = (function (this__4500__auto__){\nvar self__ = this;\nvar this__4500__auto____$1 = this;\nreturn self__.__meta;\n}));\n\n(datascript.db.DB.prototype.cljs$core$ICloneable$_clone$arity$1 = (function (this__4497__auto__){\nvar self__ = this;\nvar this__4497__auto____$1 = this;\nreturn (new datascript.db.DB(self__.schema,self__.eavt,self__.aevt,self__.avet,self__.max_eid,self__.max_tx,self__.rschema,self__.pull_patterns,self__.pull_attrs,self__.hash,self__.__meta,self__.__extmap,self__.__hash));\n}));\n\n(datascript.db.DB.prototype.cljs$core$ICounted$_count$arity$1 = (function (this__4506__auto__){\nvar self__ = this;\nvar this__4506__auto____$1 = this;\nreturn (10 + cljs.core.count(self__.__extmap));\n}));\n\n(datascript.db.DB.prototype.cljs$core$IHash$_hash$arity$1 = (function (this__4498__auto__){\nvar self__ = this;\nvar this__4498__auto____$1 = this;\nvar h__4360__auto__ = self__.__hash;\nif((!((h__4360__auto__ == null)))){\nreturn h__4360__auto__;\n} else {\nvar h__4360__auto____$1 = (function (coll__4499__auto__){\nreturn (-1515640948 ^ cljs.core.hash_unordered_coll(coll__4499__auto__));\n})(this__4498__auto____$1);\n(self__.__hash = h__4360__auto____$1);\n\nreturn h__4360__auto____$1;\n}\n}));\n\n(datascript.db.DB.prototype.cljs$core$IEquiv$_equiv$arity$2 = (function (this38696,other38697){\nvar self__ = this;\nvar this38696__$1 = this;\nreturn (((!((other38697 == null)))) && ((((this38696__$1.constructor === other38697.constructor)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38696__$1.schema,other38697.schema)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38696__$1.eavt,other38697.eavt)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38696__$1.aevt,other38697.aevt)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38696__$1.avet,other38697.avet)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38696__$1.max_eid,other38697.max_eid)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38696__$1.max_tx,other38697.max_tx)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38696__$1.rschema,other38697.rschema)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38696__$1.pull_patterns,other38697.pull_patterns)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38696__$1.pull_attrs,other38697.pull_attrs)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38696__$1.hash,other38697.hash)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38696__$1.__extmap,other38697.__extmap)))))))))))))))))))))))));\n}));\n\n(datascript.db.DB.prototype.cljs$core$IMap$_dissoc$arity$2 = (function (this__4512__auto__,k__4513__auto__){\nvar self__ = this;\nvar this__4512__auto____$1 = this;\nif(cljs.core.contains_QMARK_(new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 10, [new cljs.core.Keyword(null,\"schema\",\"schema\",-1582001791),null,new cljs.core.Keyword(null,\"max-tx\",\"max-tx\",1119558339),null,new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596),null,new cljs.core.Keyword(null,\"aevt\",\"aevt\",-585148059),null,new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),null,new cljs.core.Keyword(null,\"max-eid\",\"max-eid\",2134868075),null,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),null,new cljs.core.Keyword(null,\"pull-attrs\",\"pull-attrs\",-974863177),null,new cljs.core.Keyword(null,\"pull-patterns\",\"pull-patterns\",-343695048),null,new cljs.core.Keyword(null,\"rschema\",\"rschema\",-1196134054),null], null), null),k__4513__auto__)){\nreturn cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(cljs.core._with_meta(cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentArrayMap.EMPTY,this__4512__auto____$1),self__.__meta),k__4513__auto__);\n} else {\nreturn (new datascript.db.DB(self__.schema,self__.eavt,self__.aevt,self__.avet,self__.max_eid,self__.max_tx,self__.rschema,self__.pull_patterns,self__.pull_attrs,self__.hash,self__.__meta,cljs.core.not_empty(cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(self__.__extmap,k__4513__auto__)),null));\n}\n}));\n\n(datascript.db.DB.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = (function (this__4509__auto__,k38695){\nvar self__ = this;\nvar this__4509__auto____$1 = this;\nvar G__38704 = k38695;\nvar G__38704__$1 = (((G__38704 instanceof cljs.core.Keyword))?G__38704.fqn:null);\nswitch (G__38704__$1) {\ncase \"schema\":\ncase \"eavt\":\ncase \"aevt\":\ncase \"avet\":\ncase \"max-eid\":\ncase \"max-tx\":\ncase \"rschema\":\ncase \"pull-patterns\":\ncase \"pull-attrs\":\ncase \"hash\":\nreturn true;\n\nbreak;\ndefault:\nreturn cljs.core.contains_QMARK_(self__.__extmap,k38695);\n\n}\n}));\n\n(datascript.db.DB.prototype.cljs$core$IAssociative$_assoc$arity$3 = (function (this__4510__auto__,k__4511__auto__,G__38694){\nvar self__ = this;\nvar this__4510__auto____$1 = this;\nvar pred__38705 = cljs.core.keyword_identical_QMARK_;\nvar expr__38706 = k__4511__auto__;\nif(cljs.core.truth_((pred__38705.cljs$core$IFn$_invoke$arity$2 ? pred__38705.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"schema\",\"schema\",-1582001791),expr__38706) : pred__38705.call(null,new cljs.core.Keyword(null,\"schema\",\"schema\",-1582001791),expr__38706)))){\nreturn (new datascript.db.DB(G__38694,self__.eavt,self__.aevt,self__.avet,self__.max_eid,self__.max_tx,self__.rschema,self__.pull_patterns,self__.pull_attrs,self__.hash,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38705.cljs$core$IFn$_invoke$arity$2 ? pred__38705.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),expr__38706) : pred__38705.call(null,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),expr__38706)))){\nreturn (new datascript.db.DB(self__.schema,G__38694,self__.aevt,self__.avet,self__.max_eid,self__.max_tx,self__.rschema,self__.pull_patterns,self__.pull_attrs,self__.hash,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38705.cljs$core$IFn$_invoke$arity$2 ? pred__38705.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"aevt\",\"aevt\",-585148059),expr__38706) : pred__38705.call(null,new cljs.core.Keyword(null,\"aevt\",\"aevt\",-585148059),expr__38706)))){\nreturn (new datascript.db.DB(self__.schema,self__.eavt,G__38694,self__.avet,self__.max_eid,self__.max_tx,self__.rschema,self__.pull_patterns,self__.pull_attrs,self__.hash,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38705.cljs$core$IFn$_invoke$arity$2 ? pred__38705.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),expr__38706) : pred__38705.call(null,new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),expr__38706)))){\nreturn (new datascript.db.DB(self__.schema,self__.eavt,self__.aevt,G__38694,self__.max_eid,self__.max_tx,self__.rschema,self__.pull_patterns,self__.pull_attrs,self__.hash,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38705.cljs$core$IFn$_invoke$arity$2 ? pred__38705.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"max-eid\",\"max-eid\",2134868075),expr__38706) : pred__38705.call(null,new cljs.core.Keyword(null,\"max-eid\",\"max-eid\",2134868075),expr__38706)))){\nreturn (new datascript.db.DB(self__.schema,self__.eavt,self__.aevt,self__.avet,G__38694,self__.max_tx,self__.rschema,self__.pull_patterns,self__.pull_attrs,self__.hash,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38705.cljs$core$IFn$_invoke$arity$2 ? pred__38705.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"max-tx\",\"max-tx\",1119558339),expr__38706) : pred__38705.call(null,new cljs.core.Keyword(null,\"max-tx\",\"max-tx\",1119558339),expr__38706)))){\nreturn (new datascript.db.DB(self__.schema,self__.eavt,self__.aevt,self__.avet,self__.max_eid,G__38694,self__.rschema,self__.pull_patterns,self__.pull_attrs,self__.hash,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38705.cljs$core$IFn$_invoke$arity$2 ? pred__38705.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"rschema\",\"rschema\",-1196134054),expr__38706) : pred__38705.call(null,new cljs.core.Keyword(null,\"rschema\",\"rschema\",-1196134054),expr__38706)))){\nreturn (new datascript.db.DB(self__.schema,self__.eavt,self__.aevt,self__.avet,self__.max_eid,self__.max_tx,G__38694,self__.pull_patterns,self__.pull_attrs,self__.hash,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38705.cljs$core$IFn$_invoke$arity$2 ? pred__38705.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"pull-patterns\",\"pull-patterns\",-343695048),expr__38706) : pred__38705.call(null,new cljs.core.Keyword(null,\"pull-patterns\",\"pull-patterns\",-343695048),expr__38706)))){\nreturn (new datascript.db.DB(self__.schema,self__.eavt,self__.aevt,self__.avet,self__.max_eid,self__.max_tx,self__.rschema,G__38694,self__.pull_attrs,self__.hash,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38705.cljs$core$IFn$_invoke$arity$2 ? pred__38705.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"pull-attrs\",\"pull-attrs\",-974863177),expr__38706) : pred__38705.call(null,new cljs.core.Keyword(null,\"pull-attrs\",\"pull-attrs\",-974863177),expr__38706)))){\nreturn (new datascript.db.DB(self__.schema,self__.eavt,self__.aevt,self__.avet,self__.max_eid,self__.max_tx,self__.rschema,self__.pull_patterns,G__38694,self__.hash,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38705.cljs$core$IFn$_invoke$arity$2 ? pred__38705.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596),expr__38706) : pred__38705.call(null,new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596),expr__38706)))){\nreturn (new datascript.db.DB(self__.schema,self__.eavt,self__.aevt,self__.avet,self__.max_eid,self__.max_tx,self__.rschema,self__.pull_patterns,self__.pull_attrs,G__38694,self__.__meta,self__.__extmap,null));\n} else {\nreturn (new datascript.db.DB(self__.schema,self__.eavt,self__.aevt,self__.avet,self__.max_eid,self__.max_tx,self__.rschema,self__.pull_patterns,self__.pull_attrs,self__.hash,self__.__meta,cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(self__.__extmap,k__4511__auto__,G__38694),null));\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}));\n\n(datascript.db.DB.prototype.cljs$core$ISeqable$_seq$arity$1 = (function (this__4515__auto__){\nvar self__ = this;\nvar this__4515__auto____$1 = this;\nreturn cljs.core.seq(cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new cljs.core.PersistentVector(null, 10, 5, cljs.core.PersistentVector.EMPTY_NODE, [(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"schema\",\"schema\",-1582001791),self__.schema,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),self__.eavt,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"aevt\",\"aevt\",-585148059),self__.aevt,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),self__.avet,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"max-eid\",\"max-eid\",2134868075),self__.max_eid,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"max-tx\",\"max-tx\",1119558339),self__.max_tx,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"rschema\",\"rschema\",-1196134054),self__.rschema,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"pull-patterns\",\"pull-patterns\",-343695048),self__.pull_patterns,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"pull-attrs\",\"pull-attrs\",-974863177),self__.pull_attrs,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596),self__.hash,null))], null),self__.__extmap));\n}));\n\n(datascript.db.DB.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (this__4501__auto__,G__38694){\nvar self__ = this;\nvar this__4501__auto____$1 = this;\nreturn (new datascript.db.DB(self__.schema,self__.eavt,self__.aevt,self__.avet,self__.max_eid,self__.max_tx,self__.rschema,self__.pull_patterns,self__.pull_attrs,self__.hash,G__38694,self__.__extmap,self__.__hash));\n}));\n\n(datascript.db.DB.prototype.cljs$core$ICollection$_conj$arity$2 = (function (this__4507__auto__,entry__4508__auto__){\nvar self__ = this;\nvar this__4507__auto____$1 = this;\nif(cljs.core.vector_QMARK_(entry__4508__auto__)){\nreturn this__4507__auto____$1.cljs$core$IAssociative$_assoc$arity$3(null,cljs.core._nth(entry__4508__auto__,(0)),cljs.core._nth(entry__4508__auto__,(1)));\n} else {\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(cljs.core._conj,this__4507__auto____$1,entry__4508__auto__);\n}\n}));\n\n(datascript.db.DB.getBasis = (function (){\nreturn new cljs.core.PersistentVector(null, 10, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"schema\",\"schema\",58529736,null),new cljs.core.Symbol(null,\"eavt\",\"eavt\",974094454,null),new cljs.core.Symbol(null,\"aevt\",\"aevt\",1055383468,null),new cljs.core.Symbol(null,\"avet\",\"avet\",-1270578737,null),new cljs.core.Symbol(null,\"max-eid\",\"max-eid\",-519567694,null),new cljs.core.Symbol(null,\"max-tx\",\"max-tx\",-1534877430,null),new cljs.core.Symbol(null,\"rschema\",\"rschema\",444397473,null),new cljs.core.Symbol(null,\"pull-patterns\",\"pull-patterns\",1296836479,null),new cljs.core.Symbol(null,\"pull-attrs\",\"pull-attrs\",665668350,null),new cljs.core.Symbol(null,\"hash\",\"hash\",1626749931,null)], null);\n}));\n\n(datascript.db.DB.cljs$lang$type = true);\n\n(datascript.db.DB.cljs$lang$ctorPrSeq = (function (this__4546__auto__){\nreturn (new cljs.core.List(null,\"datascript.db/DB\",null,(1),null));\n}));\n\n(datascript.db.DB.cljs$lang$ctorPrWriter = (function (this__4546__auto__,writer__4547__auto__){\nreturn cljs.core._write(writer__4547__auto__,\"datascript.db/DB\");\n}));\n\n/**\n * Positional factory function for datascript.db/DB.\n */\ndatascript.db.__GT_DB = (function datascript$db$__GT_DB(schema,eavt,aevt,avet,max_eid,max_tx,rschema,pull_patterns,pull_attrs,hash){\nreturn (new datascript.db.DB(schema,eavt,aevt,avet,max_eid,max_tx,rschema,pull_patterns,pull_attrs,hash,null,null,null));\n});\n\n/**\n * Factory function for datascript.db/DB, taking a map of keywords to field values.\n */\ndatascript.db.map__GT_DB = (function datascript$db$map__GT_DB(G__38698){\nvar extmap__4542__auto__ = (function (){var G__38708 = cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic(G__38698,new cljs.core.Keyword(null,\"schema\",\"schema\",-1582001791),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),new cljs.core.Keyword(null,\"aevt\",\"aevt\",-585148059),new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),new cljs.core.Keyword(null,\"max-eid\",\"max-eid\",2134868075),new cljs.core.Keyword(null,\"max-tx\",\"max-tx\",1119558339),new cljs.core.Keyword(null,\"rschema\",\"rschema\",-1196134054),new cljs.core.Keyword(null,\"pull-patterns\",\"pull-patterns\",-343695048),new cljs.core.Keyword(null,\"pull-attrs\",\"pull-attrs\",-974863177),new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596)], 0));\nif(cljs.core.record_QMARK_(G__38698)){\nreturn cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentArrayMap.EMPTY,G__38708);\n} else {\nreturn G__38708;\n}\n})();\nreturn (new datascript.db.DB(new cljs.core.Keyword(null,\"schema\",\"schema\",-1582001791).cljs$core$IFn$_invoke$arity$1(G__38698),new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073).cljs$core$IFn$_invoke$arity$1(G__38698),new cljs.core.Keyword(null,\"aevt\",\"aevt\",-585148059).cljs$core$IFn$_invoke$arity$1(G__38698),new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032).cljs$core$IFn$_invoke$arity$1(G__38698),new cljs.core.Keyword(null,\"max-eid\",\"max-eid\",2134868075).cljs$core$IFn$_invoke$arity$1(G__38698),new cljs.core.Keyword(null,\"max-tx\",\"max-tx\",1119558339).cljs$core$IFn$_invoke$arity$1(G__38698),new cljs.core.Keyword(null,\"rschema\",\"rschema\",-1196134054).cljs$core$IFn$_invoke$arity$1(G__38698),new cljs.core.Keyword(null,\"pull-patterns\",\"pull-patterns\",-343695048).cljs$core$IFn$_invoke$arity$1(G__38698),new cljs.core.Keyword(null,\"pull-attrs\",\"pull-attrs\",-974863177).cljs$core$IFn$_invoke$arity$1(G__38698),new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596).cljs$core$IFn$_invoke$arity$1(G__38698),null,cljs.core.not_empty(extmap__4542__auto__),null));\n});\n\n\n(datascript.db.DB.prototype.clojure$data$Diff$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.DB.prototype.clojure$data$Diff$diff_similar$arity$2 = (function (a,b){\nvar a__$1 = this;\nreturn datascript.db.diff_sorted(a__$1.eavt,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073).cljs$core$IFn$_invoke$arity$1(b),datascript.db.cmp_datoms_eav_quick);\n}));\n\n(datascript.db.DB.prototype.cljs$core$IPrintWithWriter$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.DB.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = (function (db,w,opts){\nvar db__$1 = this;\nreturn (datascript.db.pr_db.cljs$core$IFn$_invoke$arity$3 ? datascript.db.pr_db.cljs$core$IFn$_invoke$arity$3(db__$1,w,opts) : datascript.db.pr_db.call(null,db__$1,w,opts));\n}));\n\n(datascript.db.DB.prototype.cljs$core$ICounted$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.DB.prototype.cljs$core$ICounted$_count$arity$1 = (function (db){\nvar db__$1 = this;\nreturn cljs.core.count(db__$1.eavt);\n}));\n\n(datascript.db.DB.prototype.cljs$core$IReversible$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.DB.prototype.cljs$core$IReversible$_rseq$arity$1 = (function (db){\nvar db__$1 = this;\nreturn cljs.core._rseq(db__$1.eavt);\n}));\n\n(datascript.db.DB.prototype.cljs$core$IHash$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.DB.prototype.cljs$core$IHash$_hash$arity$1 = (function (db){\nvar db__$1 = this;\nreturn (datascript.db.hash_db.cljs$core$IFn$_invoke$arity$1 ? datascript.db.hash_db.cljs$core$IFn$_invoke$arity$1(db__$1) : datascript.db.hash_db.call(null,db__$1));\n}));\n\n(datascript.db.DB.prototype.cljs$core$IEquiv$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.DB.prototype.cljs$core$IEquiv$_equiv$arity$2 = (function (db,other){\nvar db__$1 = this;\nreturn (datascript.db.equiv_db.cljs$core$IFn$_invoke$arity$2 ? datascript.db.equiv_db.cljs$core$IFn$_invoke$arity$2(db__$1,other) : datascript.db.equiv_db.call(null,db__$1,other));\n}));\n\n(datascript.db.DB.prototype.cljs$core$IEditableCollection$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.DB.prototype.cljs$core$IEditableCollection$_as_transient$arity$1 = (function (db){\nvar db__$1 = this;\nreturn datascript.db.db_transient(db__$1);\n}));\n\n(datascript.db.DB.prototype.cljs$core$IEmptyableCollection$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.DB.prototype.cljs$core$IEmptyableCollection$_empty$arity$1 = (function (db){\nvar db__$1 = this;\nreturn cljs.core.with_meta((function (){var G__38709 = db__$1.schema;\nreturn (datascript.db.empty_db.cljs$core$IFn$_invoke$arity$1 ? datascript.db.empty_db.cljs$core$IFn$_invoke$arity$1(G__38709) : datascript.db.empty_db.call(null,G__38709));\n})(),cljs.core.meta(db__$1));\n}));\n\n(datascript.db.DB.prototype.cljs$core$ITransientCollection$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.DB.prototype.cljs$core$ITransientCollection$_conj_BANG_$arity$2 = (function (db,key){\nvar db__$1 = this;\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(\"datascript.DB/conj! is not supported\",cljs.core.PersistentArrayMap.EMPTY);\n}));\n\n(datascript.db.DB.prototype.cljs$core$ITransientCollection$_persistent_BANG_$arity$1 = (function (db){\nvar db__$1 = this;\nreturn datascript.db.db_persistent_BANG_(db__$1);\n}));\n\n(datascript.db.DB.prototype.clojure$data$EqualityPartition$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.DB.prototype.clojure$data$EqualityPartition$equality_partition$arity$1 = (function (x){\nvar x__$1 = this;\nreturn new cljs.core.Keyword(\"datascript\",\"db\",\"datascript/db\",-1190971692);\n}));\n\n(datascript.db.DB.prototype.datascript$db$IIndexAccess$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.DB.prototype.datascript$db$IIndexAccess$_datoms$arity$3 = (function (db,index,cs){\nvar db__$1 = this;\ndatascript.db.validate_indexed(db__$1,index,cs);\n\nreturn me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(cljs.core.get.cljs$core$IFn$_invoke$arity$2(db__$1,index),(datascript.db.components__GT_pattern.cljs$core$IFn$_invoke$arity$5 ? datascript.db.components__GT_pattern.cljs$core$IFn$_invoke$arity$5(db__$1,index,cs,(0),(536870912)) : datascript.db.components__GT_pattern.call(null,db__$1,index,cs,(0),(536870912))),(datascript.db.components__GT_pattern.cljs$core$IFn$_invoke$arity$5 ? datascript.db.components__GT_pattern.cljs$core$IFn$_invoke$arity$5(db__$1,index,cs,(2147483647),(2147483647)) : datascript.db.components__GT_pattern.call(null,db__$1,index,cs,(2147483647),(2147483647))));\n}));\n\n(datascript.db.DB.prototype.datascript$db$IIndexAccess$_seek_datoms$arity$3 = (function (db,index,cs){\nvar db__$1 = this;\ndatascript.db.validate_indexed(db__$1,index,cs);\n\nreturn me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(cljs.core.get.cljs$core$IFn$_invoke$arity$2(db__$1,index),(datascript.db.components__GT_pattern.cljs$core$IFn$_invoke$arity$5 ? datascript.db.components__GT_pattern.cljs$core$IFn$_invoke$arity$5(db__$1,index,cs,(0),(536870912)) : datascript.db.components__GT_pattern.call(null,db__$1,index,cs,(0),(536870912))),datascript.db.datom.cljs$core$IFn$_invoke$arity$4((2147483647),null,null,(2147483647)));\n}));\n\n(datascript.db.DB.prototype.datascript$db$IIndexAccess$_rseek_datoms$arity$3 = (function (db,index,cs){\nvar db__$1 = this;\ndatascript.db.validate_indexed(db__$1,index,cs);\n\nreturn me.tonsky.persistent_sorted_set.rslice.cljs$core$IFn$_invoke$arity$3(cljs.core.get.cljs$core$IFn$_invoke$arity$2(db__$1,index),(datascript.db.components__GT_pattern.cljs$core$IFn$_invoke$arity$5 ? datascript.db.components__GT_pattern.cljs$core$IFn$_invoke$arity$5(db__$1,index,cs,(2147483647),(2147483647)) : datascript.db.components__GT_pattern.call(null,db__$1,index,cs,(2147483647),(2147483647))),datascript.db.datom.cljs$core$IFn$_invoke$arity$4((0),null,null,(536870912)));\n}));\n\n(datascript.db.DB.prototype.datascript$db$IIndexAccess$_index_range$arity$4 = (function (db,attr,start,end){\nvar db__$1 = this;\ndatascript.db.validate_indexed(db__$1,new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [attr], null));\n\nvar G__38710_39203 = attr;\nvar G__38711_39204 = (new cljs.core.List(null,new cljs.core.Symbol(null,\"-index-range\",\"-index-range\",898114142,null),(new cljs.core.List(null,new cljs.core.Symbol(null,\"db\",\"db\",-1661185010,null),(new cljs.core.List(null,attr,(new cljs.core.List(null,start,(new cljs.core.List(null,end,null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null));\n(datascript.db.validate_attr.cljs$core$IFn$_invoke$arity$2 ? datascript.db.validate_attr.cljs$core$IFn$_invoke$arity$2(G__38710_39203,G__38711_39204) : datascript.db.validate_attr.call(null,G__38710_39203,G__38711_39204));\n\nreturn me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(db__$1.avet,(datascript.db.resolve_datom.cljs$core$IFn$_invoke$arity$7 ? datascript.db.resolve_datom.cljs$core$IFn$_invoke$arity$7(db__$1,null,attr,start,null,(0),(536870912)) : datascript.db.resolve_datom.call(null,db__$1,null,attr,start,null,(0),(536870912))),(datascript.db.resolve_datom.cljs$core$IFn$_invoke$arity$7 ? datascript.db.resolve_datom.cljs$core$IFn$_invoke$arity$7(db__$1,null,attr,end,null,(2147483647),(2147483647)) : datascript.db.resolve_datom.call(null,db__$1,null,attr,end,null,(2147483647),(2147483647))));\n}));\n\n(datascript.db.DB.prototype.datascript$db$IDB$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.DB.prototype.datascript$db$IDB$_schema$arity$1 = (function (db){\nvar db__$1 = this;\nreturn db__$1.schema;\n}));\n\n(datascript.db.DB.prototype.datascript$db$IDB$_attrs_by$arity$2 = (function (db,property){\nvar db__$1 = this;\nvar fexpr__38712 = db__$1.rschema;\nreturn (fexpr__38712.cljs$core$IFn$_invoke$arity$1 ? fexpr__38712.cljs$core$IFn$_invoke$arity$1(property) : fexpr__38712.call(null,property));\n}));\n\n(datascript.db.DB.prototype.datascript$db$ISearch$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.DB.prototype.datascript$db$ISearch$_search$arity$2 = (function (db,pattern){\nvar db__$1 = this;\nvar vec__38713 = pattern;\nvar e = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38713,(0),null);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38713,(1),null);\nvar v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38713,(2),null);\nvar tx = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38713,(3),null);\nvar eavt = db__$1.eavt;\nvar aevt = db__$1.aevt;\nvar avet = db__$1.avet;\nvar multival_QMARK_ = cljs.core.contains_QMARK_(datascript.db._attrs_by(db__$1,new cljs.core.Keyword(\"db.cardinality\",\"many\",\"db.cardinality/many\",772806234)),a);\nif(cljs.core.truth_(e)){\nif(cljs.core.truth_(a)){\nif((!((v == null)))){\nif(cljs.core.truth_(tx)){\nreturn me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(eavt,datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,a,v,tx),datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,a,v,tx));\n} else {\nreturn me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(eavt,datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,a,v,(536870912)),datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,a,v,(2147483647)));\n}\n} else {\nif(cljs.core.truth_(tx)){\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (d){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(tx,d.datascript$db$IDatom$datom_tx$arity$1(null));\n}),me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(eavt,datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,a,null,(536870912)),datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,a,null,(2147483647))));\n} else {\nreturn me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(eavt,datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,a,null,(536870912)),datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,a,null,(2147483647)));\n}\n}\n} else {\nif((!((v == null)))){\nif(cljs.core.truth_(tx)){\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (d){\nreturn ((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(v,d.v)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(tx,d.datascript$db$IDatom$datom_tx$arity$1(null))));\n}),me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(eavt,datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,null,null,(536870912)),datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,null,null,(2147483647))));\n} else {\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (d){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(v,d.v);\n}),me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(eavt,datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,null,null,(536870912)),datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,null,null,(2147483647))));\n}\n} else {\nif(cljs.core.truth_(tx)){\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (d){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(tx,d.datascript$db$IDatom$datom_tx$arity$1(null));\n}),me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(eavt,datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,null,null,(536870912)),datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,null,null,(2147483647))));\n} else {\nreturn me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(eavt,datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,null,null,(536870912)),datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,null,null,(2147483647)));\n}\n}\n}\n} else {\nif(cljs.core.truth_(a)){\nif((!((v == null)))){\nif(cljs.core.truth_(tx)){\nif(cljs.core.truth_((datascript.db.indexing_QMARK_.cljs$core$IFn$_invoke$arity$2 ? datascript.db.indexing_QMARK_.cljs$core$IFn$_invoke$arity$2(db__$1,a) : datascript.db.indexing_QMARK_.call(null,db__$1,a)))){\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (d){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(tx,d.datascript$db$IDatom$datom_tx$arity$1(null));\n}),me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(avet,datascript.db.datom.cljs$core$IFn$_invoke$arity$4((0),a,v,(536870912)),datascript.db.datom.cljs$core$IFn$_invoke$arity$4((2147483647),a,v,(2147483647))));\n} else {\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (d){\nreturn ((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(v,d.v)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(tx,d.datascript$db$IDatom$datom_tx$arity$1(null))));\n}),me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(aevt,datascript.db.datom.cljs$core$IFn$_invoke$arity$4((0),a,null,(536870912)),datascript.db.datom.cljs$core$IFn$_invoke$arity$4((2147483647),a,null,(2147483647))));\n}\n} else {\nif(cljs.core.truth_((datascript.db.indexing_QMARK_.cljs$core$IFn$_invoke$arity$2 ? datascript.db.indexing_QMARK_.cljs$core$IFn$_invoke$arity$2(db__$1,a) : datascript.db.indexing_QMARK_.call(null,db__$1,a)))){\nreturn me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(avet,datascript.db.datom.cljs$core$IFn$_invoke$arity$4((0),a,v,(536870912)),datascript.db.datom.cljs$core$IFn$_invoke$arity$4((2147483647),a,v,(2147483647)));\n} else {\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (d){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(v,d.v);\n}),me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(aevt,datascript.db.datom.cljs$core$IFn$_invoke$arity$4((0),a,null,(536870912)),datascript.db.datom.cljs$core$IFn$_invoke$arity$4((2147483647),a,null,(2147483647))));\n}\n}\n} else {\nif(cljs.core.truth_(tx)){\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (d){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(tx,d.datascript$db$IDatom$datom_tx$arity$1(null));\n}),me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(aevt,datascript.db.datom.cljs$core$IFn$_invoke$arity$4((0),a,null,(536870912)),datascript.db.datom.cljs$core$IFn$_invoke$arity$4((2147483647),a,null,(2147483647))));\n} else {\nreturn me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(aevt,datascript.db.datom.cljs$core$IFn$_invoke$arity$4((0),a,null,(536870912)),datascript.db.datom.cljs$core$IFn$_invoke$arity$4((2147483647),a,null,(2147483647)));\n}\n}\n} else {\nif((!((v == null)))){\nif(cljs.core.truth_(tx)){\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (d){\nreturn ((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(v,d.v)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(tx,d.datascript$db$IDatom$datom_tx$arity$1(null))));\n}),eavt);\n} else {\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (d){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(v,d.v);\n}),eavt);\n}\n} else {\nif(cljs.core.truth_(tx)){\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (d){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(tx,d.datascript$db$IDatom$datom_tx$arity$1(null));\n}),eavt);\n} else {\nreturn eavt;\n}\n}\n}\n}\n}));\ndatascript.db.db_QMARK_ = (function datascript$db$db_QMARK_(x){\nvar and__4251__auto__ = (((!((x == null))))?((((false) || ((cljs.core.PROTOCOL_SENTINEL === x.datascript$db$ISearch$))))?true:(((!x.cljs$lang$protocol_mask$partition$))?cljs.core.native_satisfies_QMARK_(datascript.db.ISearch,x):false)):cljs.core.native_satisfies_QMARK_(datascript.db.ISearch,x));\nif(and__4251__auto__){\nvar and__4251__auto____$1 = (((!((x == null))))?((((false) || ((cljs.core.PROTOCOL_SENTINEL === x.datascript$db$IIndexAccess$))))?true:(((!x.cljs$lang$protocol_mask$partition$))?cljs.core.native_satisfies_QMARK_(datascript.db.IIndexAccess,x):false)):cljs.core.native_satisfies_QMARK_(datascript.db.IIndexAccess,x));\nif(and__4251__auto____$1){\nif((!((x == null)))){\nif(((false) || ((cljs.core.PROTOCOL_SENTINEL === x.datascript$db$IDB$)))){\nreturn true;\n} else {\nif((!x.cljs$lang$protocol_mask$partition$)){\nreturn cljs.core.native_satisfies_QMARK_(datascript.db.IDB,x);\n} else {\nreturn false;\n}\n}\n} else {\nreturn cljs.core.native_satisfies_QMARK_(datascript.db.IDB,x);\n}\n} else {\nreturn and__4251__auto____$1;\n}\n} else {\nreturn and__4251__auto__;\n}\n});\n\n/**\n* @constructor\n * @implements {cljs.core.IRecord}\n * @implements {cljs.core.IKVReduce}\n * @implements {cljs.core.IEquiv}\n * @implements {cljs.core.IHash}\n * @implements {cljs.core.ICollection}\n * @implements {cljs.core.ICounted}\n * @implements {cljs.core.ISeqable}\n * @implements {cljs.core.IMeta}\n * @implements {cljs.core.ICloneable}\n * @implements {cljs.core.IPrintWithWriter}\n * @implements {cljs.core.IIterable}\n * @implements {cljs.core.IWithMeta}\n * @implements {cljs.core.IAssociative}\n * @implements {cljs.core.IMap}\n * @implements {cljs.core.ILookup}\n*/\ndatascript.db.FilteredDB = (function (unfiltered_db,pred,hash,__meta,__extmap,__hash){\nthis.unfiltered_db = unfiltered_db;\nthis.pred = pred;\nthis.hash = hash;\nthis.__meta = __meta;\nthis.__extmap = __extmap;\nthis.__hash = __hash;\nthis.cljs$lang$protocol_mask$partition0$ = 2230716170;\nthis.cljs$lang$protocol_mask$partition1$ = 139264;\n});\n(datascript.db.FilteredDB.prototype.cljs$core$ILookup$_lookup$arity$2 = (function (this__4502__auto__,k__4503__auto__){\nvar self__ = this;\nvar this__4502__auto____$1 = this;\nreturn this__4502__auto____$1.cljs$core$ILookup$_lookup$arity$3(null,k__4503__auto__,null);\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$ILookup$_lookup$arity$3 = (function (this__4504__auto__,k38723,else__4505__auto__){\nvar self__ = this;\nvar this__4504__auto____$1 = this;\nvar G__38727 = k38723;\nvar G__38727__$1 = (((G__38727 instanceof cljs.core.Keyword))?G__38727.fqn:null);\nswitch (G__38727__$1) {\ncase \"unfiltered-db\":\nreturn self__.unfiltered_db;\n\nbreak;\ncase \"pred\":\nreturn self__.pred;\n\nbreak;\ncase \"hash\":\nreturn self__.hash;\n\nbreak;\ndefault:\nreturn cljs.core.get.cljs$core$IFn$_invoke$arity$3(self__.__extmap,k38723,else__4505__auto__);\n\n}\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = (function (this__4522__auto__,f__4523__auto__,init__4524__auto__){\nvar self__ = this;\nvar this__4522__auto____$1 = this;\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (ret__4525__auto__,p__38728){\nvar vec__38729 = p__38728;\nvar k__4526__auto__ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38729,(0),null);\nvar v__4527__auto__ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38729,(1),null);\nreturn (f__4523__auto__.cljs$core$IFn$_invoke$arity$3 ? f__4523__auto__.cljs$core$IFn$_invoke$arity$3(ret__4525__auto__,k__4526__auto__,v__4527__auto__) : f__4523__auto__.call(null,ret__4525__auto__,k__4526__auto__,v__4527__auto__));\n}),init__4524__auto__,this__4522__auto____$1);\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = (function (this__4517__auto__,writer__4518__auto__,opts__4519__auto__){\nvar self__ = this;\nvar this__4517__auto____$1 = this;\nvar pr_pair__4520__auto__ = (function (keyval__4521__auto__){\nreturn cljs.core.pr_sequential_writer(writer__4518__auto__,cljs.core.pr_writer,\"\",\" \",\"\",opts__4519__auto__,keyval__4521__auto__);\n});\nreturn cljs.core.pr_sequential_writer(writer__4518__auto__,pr_pair__4520__auto__,\"#datascript.db.FilteredDB{\",\", \",\"}\",opts__4519__auto__,cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"unfiltered-db\",\"unfiltered-db\",-1363720391),self__.unfiltered_db],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"pred\",\"pred\",1927423397),self__.pred],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596),self__.hash],null))], null),self__.__extmap));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IIterable$_iterator$arity$1 = (function (G__38722){\nvar self__ = this;\nvar G__38722__$1 = this;\nreturn (new cljs.core.RecordIter((0),G__38722__$1,3,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"unfiltered-db\",\"unfiltered-db\",-1363720391),new cljs.core.Keyword(null,\"pred\",\"pred\",1927423397),new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596)], null),(cljs.core.truth_(self__.__extmap)?cljs.core._iterator(self__.__extmap):cljs.core.nil_iter())));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IMeta$_meta$arity$1 = (function (this__4500__auto__){\nvar self__ = this;\nvar this__4500__auto____$1 = this;\nreturn self__.__meta;\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$ICloneable$_clone$arity$1 = (function (this__4497__auto__){\nvar self__ = this;\nvar this__4497__auto____$1 = this;\nreturn (new datascript.db.FilteredDB(self__.unfiltered_db,self__.pred,self__.hash,self__.__meta,self__.__extmap,self__.__hash));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$ICounted$_count$arity$1 = (function (this__4506__auto__){\nvar self__ = this;\nvar this__4506__auto____$1 = this;\nreturn (3 + cljs.core.count(self__.__extmap));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IHash$_hash$arity$1 = (function (this__4498__auto__){\nvar self__ = this;\nvar this__4498__auto____$1 = this;\nvar h__4360__auto__ = self__.__hash;\nif((!((h__4360__auto__ == null)))){\nreturn h__4360__auto__;\n} else {\nvar h__4360__auto____$1 = (function (coll__4499__auto__){\nreturn (-351969977 ^ cljs.core.hash_unordered_coll(coll__4499__auto__));\n})(this__4498__auto____$1);\n(self__.__hash = h__4360__auto____$1);\n\nreturn h__4360__auto____$1;\n}\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IEquiv$_equiv$arity$2 = (function (this38724,other38725){\nvar self__ = this;\nvar this38724__$1 = this;\nreturn (((!((other38725 == null)))) && ((((this38724__$1.constructor === other38725.constructor)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38724__$1.unfiltered_db,other38725.unfiltered_db)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38724__$1.pred,other38725.pred)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38724__$1.hash,other38725.hash)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38724__$1.__extmap,other38725.__extmap)))))))))));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IMap$_dissoc$arity$2 = (function (this__4512__auto__,k__4513__auto__){\nvar self__ = this;\nvar this__4512__auto____$1 = this;\nif(cljs.core.contains_QMARK_(new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596),null,new cljs.core.Keyword(null,\"pred\",\"pred\",1927423397),null,new cljs.core.Keyword(null,\"unfiltered-db\",\"unfiltered-db\",-1363720391),null], null), null),k__4513__auto__)){\nreturn cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(cljs.core._with_meta(cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentArrayMap.EMPTY,this__4512__auto____$1),self__.__meta),k__4513__auto__);\n} else {\nreturn (new datascript.db.FilteredDB(self__.unfiltered_db,self__.pred,self__.hash,self__.__meta,cljs.core.not_empty(cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(self__.__extmap,k__4513__auto__)),null));\n}\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = (function (this__4509__auto__,k38723){\nvar self__ = this;\nvar this__4509__auto____$1 = this;\nvar G__38732 = k38723;\nvar G__38732__$1 = (((G__38732 instanceof cljs.core.Keyword))?G__38732.fqn:null);\nswitch (G__38732__$1) {\ncase \"unfiltered-db\":\ncase \"pred\":\ncase \"hash\":\nreturn true;\n\nbreak;\ndefault:\nreturn cljs.core.contains_QMARK_(self__.__extmap,k38723);\n\n}\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IAssociative$_assoc$arity$3 = (function (this__4510__auto__,k__4511__auto__,G__38722){\nvar self__ = this;\nvar this__4510__auto____$1 = this;\nvar pred__38733 = cljs.core.keyword_identical_QMARK_;\nvar expr__38734 = k__4511__auto__;\nif(cljs.core.truth_((pred__38733.cljs$core$IFn$_invoke$arity$2 ? pred__38733.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"unfiltered-db\",\"unfiltered-db\",-1363720391),expr__38734) : pred__38733.call(null,new cljs.core.Keyword(null,\"unfiltered-db\",\"unfiltered-db\",-1363720391),expr__38734)))){\nreturn (new datascript.db.FilteredDB(G__38722,self__.pred,self__.hash,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38733.cljs$core$IFn$_invoke$arity$2 ? pred__38733.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"pred\",\"pred\",1927423397),expr__38734) : pred__38733.call(null,new cljs.core.Keyword(null,\"pred\",\"pred\",1927423397),expr__38734)))){\nreturn (new datascript.db.FilteredDB(self__.unfiltered_db,G__38722,self__.hash,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38733.cljs$core$IFn$_invoke$arity$2 ? pred__38733.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596),expr__38734) : pred__38733.call(null,new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596),expr__38734)))){\nreturn (new datascript.db.FilteredDB(self__.unfiltered_db,self__.pred,G__38722,self__.__meta,self__.__extmap,null));\n} else {\nreturn (new datascript.db.FilteredDB(self__.unfiltered_db,self__.pred,self__.hash,self__.__meta,cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(self__.__extmap,k__4511__auto__,G__38722),null));\n}\n}\n}\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$ISeqable$_seq$arity$1 = (function (this__4515__auto__){\nvar self__ = this;\nvar this__4515__auto____$1 = this;\nreturn cljs.core.seq(cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"unfiltered-db\",\"unfiltered-db\",-1363720391),self__.unfiltered_db,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"pred\",\"pred\",1927423397),self__.pred,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596),self__.hash,null))], null),self__.__extmap));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (this__4501__auto__,G__38722){\nvar self__ = this;\nvar this__4501__auto____$1 = this;\nreturn (new datascript.db.FilteredDB(self__.unfiltered_db,self__.pred,self__.hash,G__38722,self__.__extmap,self__.__hash));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$ICollection$_conj$arity$2 = (function (this__4507__auto__,entry__4508__auto__){\nvar self__ = this;\nvar this__4507__auto____$1 = this;\nif(cljs.core.vector_QMARK_(entry__4508__auto__)){\nreturn this__4507__auto____$1.cljs$core$IAssociative$_assoc$arity$3(null,cljs.core._nth(entry__4508__auto__,(0)),cljs.core._nth(entry__4508__auto__,(1)));\n} else {\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(cljs.core._conj,this__4507__auto____$1,entry__4508__auto__);\n}\n}));\n\n(datascript.db.FilteredDB.getBasis = (function (){\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"unfiltered-db\",\"unfiltered-db\",276811136,null),new cljs.core.Symbol(null,\"pred\",\"pred\",-727012372,null),new cljs.core.Symbol(null,\"hash\",\"hash\",1626749931,null)], null);\n}));\n\n(datascript.db.FilteredDB.cljs$lang$type = true);\n\n(datascript.db.FilteredDB.cljs$lang$ctorPrSeq = (function (this__4546__auto__){\nreturn (new cljs.core.List(null,\"datascript.db/FilteredDB\",null,(1),null));\n}));\n\n(datascript.db.FilteredDB.cljs$lang$ctorPrWriter = (function (this__4546__auto__,writer__4547__auto__){\nreturn cljs.core._write(writer__4547__auto__,\"datascript.db/FilteredDB\");\n}));\n\n/**\n * Positional factory function for datascript.db/FilteredDB.\n */\ndatascript.db.__GT_FilteredDB = (function datascript$db$__GT_FilteredDB(unfiltered_db,pred,hash){\nreturn (new datascript.db.FilteredDB(unfiltered_db,pred,hash,null,null,null));\n});\n\n/**\n * Factory function for datascript.db/FilteredDB, taking a map of keywords to field values.\n */\ndatascript.db.map__GT_FilteredDB = (function datascript$db$map__GT_FilteredDB(G__38726){\nvar extmap__4542__auto__ = (function (){var G__38736 = cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic(G__38726,new cljs.core.Keyword(null,\"unfiltered-db\",\"unfiltered-db\",-1363720391),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\"pred\",\"pred\",1927423397),new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596)], 0));\nif(cljs.core.record_QMARK_(G__38726)){\nreturn cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentArrayMap.EMPTY,G__38736);\n} else {\nreturn G__38736;\n}\n})();\nreturn (new datascript.db.FilteredDB(new cljs.core.Keyword(null,\"unfiltered-db\",\"unfiltered-db\",-1363720391).cljs$core$IFn$_invoke$arity$1(G__38726),new cljs.core.Keyword(null,\"pred\",\"pred\",1927423397).cljs$core$IFn$_invoke$arity$1(G__38726),new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596).cljs$core$IFn$_invoke$arity$1(G__38726),null,cljs.core.not_empty(extmap__4542__auto__),null));\n});\n\n\n(datascript.db.FilteredDB.prototype.cljs$core$ILookup$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.FilteredDB.prototype.cljs$core$ILookup$_lookup$arity$2 = (function (_,___$1){\nvar ___$2 = this;\nthrow (new Error(\"-lookup is not supported on FilteredDB\"));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$ILookup$_lookup$arity$3 = (function (_,___$1,___$2){\nvar ___$3 = this;\nthrow (new Error(\"-lookup is not supported on FilteredDB\"));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IPrintWithWriter$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.FilteredDB.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = (function (db,w,opts){\nvar db__$1 = this;\nreturn (datascript.db.pr_db.cljs$core$IFn$_invoke$arity$3 ? datascript.db.pr_db.cljs$core$IFn$_invoke$arity$3(db__$1,w,opts) : datascript.db.pr_db.call(null,db__$1,w,opts));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$ICounted$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.FilteredDB.prototype.cljs$core$ICounted$_count$arity$1 = (function (db){\nvar db__$1 = this;\nreturn cljs.core.count(datascript.db._datoms(db__$1,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),cljs.core.PersistentVector.EMPTY));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IHash$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.FilteredDB.prototype.cljs$core$IHash$_hash$arity$1 = (function (db){\nvar db__$1 = this;\nreturn (datascript.db.hash_fdb.cljs$core$IFn$_invoke$arity$1 ? datascript.db.hash_fdb.cljs$core$IFn$_invoke$arity$1(db__$1) : datascript.db.hash_fdb.call(null,db__$1));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IEquiv$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.FilteredDB.prototype.cljs$core$IEquiv$_equiv$arity$2 = (function (db,other){\nvar db__$1 = this;\nreturn (datascript.db.equiv_db.cljs$core$IFn$_invoke$arity$2 ? datascript.db.equiv_db.cljs$core$IFn$_invoke$arity$2(db__$1,other) : datascript.db.equiv_db.call(null,db__$1,other));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IEmptyableCollection$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.FilteredDB.prototype.cljs$core$IEmptyableCollection$_empty$arity$1 = (function (_){\nvar ___$1 = this;\nthrow (new Error(\"-empty is not supported on FilteredDB\"));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IAssociative$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.FilteredDB.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = (function (_,___$1){\nvar ___$2 = this;\nthrow (new Error(\"-contains-key? is not supported on FilteredDB\"));\n}));\n\n(datascript.db.FilteredDB.prototype.cljs$core$IAssociative$_assoc$arity$3 = (function (_,___$1,___$2){\nvar ___$3 = this;\nthrow (new Error(\"-assoc is not supported on FilteredDB\"));\n}));\n\n(datascript.db.FilteredDB.prototype.datascript$db$IIndexAccess$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.FilteredDB.prototype.datascript$db$IIndexAccess$_datoms$arity$3 = (function (db,index,cs){\nvar db__$1 = this;\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2(db__$1.pred,datascript.db._datoms(db__$1.unfiltered_db,index,cs));\n}));\n\n(datascript.db.FilteredDB.prototype.datascript$db$IIndexAccess$_seek_datoms$arity$3 = (function (db,index,cs){\nvar db__$1 = this;\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2(db__$1.pred,datascript.db._seek_datoms(db__$1.unfiltered_db,index,cs));\n}));\n\n(datascript.db.FilteredDB.prototype.datascript$db$IIndexAccess$_rseek_datoms$arity$3 = (function (db,index,cs){\nvar db__$1 = this;\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2(db__$1.pred,datascript.db._rseek_datoms(db__$1.unfiltered_db,index,cs));\n}));\n\n(datascript.db.FilteredDB.prototype.datascript$db$IIndexAccess$_index_range$arity$4 = (function (db,attr,start,end){\nvar db__$1 = this;\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2(db__$1.pred,datascript.db._index_range(db__$1.unfiltered_db,attr,start,end));\n}));\n\n(datascript.db.FilteredDB.prototype.datascript$db$IDB$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.FilteredDB.prototype.datascript$db$IDB$_schema$arity$1 = (function (db){\nvar db__$1 = this;\nreturn datascript.db._schema(db__$1.unfiltered_db);\n}));\n\n(datascript.db.FilteredDB.prototype.datascript$db$IDB$_attrs_by$arity$2 = (function (db,property){\nvar db__$1 = this;\nreturn datascript.db._attrs_by(db__$1.unfiltered_db,property);\n}));\n\n(datascript.db.FilteredDB.prototype.datascript$db$ISearch$ = cljs.core.PROTOCOL_SENTINEL);\n\n(datascript.db.FilteredDB.prototype.datascript$db$ISearch$_search$arity$2 = (function (db,pattern){\nvar db__$1 = this;\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2(db__$1.pred,datascript.db._search(db__$1.unfiltered_db,pattern));\n}));\ndatascript.db.unfiltered_db = (function datascript$db$unfiltered_db(db){\nif((db instanceof datascript.db.FilteredDB)){\nreturn db.unfiltered_db;\n} else {\nreturn db;\n}\n});\ndatascript.db.attr__GT_properties = (function datascript$db$attr__GT_properties(k,v){\nvar G__38737 = v;\nvar G__38737__$1 = (((G__38737 instanceof cljs.core.Keyword))?G__38737.fqn:null);\nswitch (G__38737__$1) {\ncase \"db.unique/identity\":\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"unique\",\"db/unique\",329396388),new cljs.core.Keyword(\"db.unique\",\"identity\",\"db.unique/identity\",1675950722),new cljs.core.Keyword(\"db\",\"index\",\"db/index\",-1531680669)], null);\n\nbreak;\ncase \"db.unique/value\":\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"unique\",\"db/unique\",329396388),new cljs.core.Keyword(\"db.unique\",\"value\",\"db.unique/value\",276903088),new cljs.core.Keyword(\"db\",\"index\",\"db/index\",-1531680669)], null);\n\nbreak;\ncase \"db.cardinality/many\":\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db.cardinality\",\"many\",\"db.cardinality/many\",772806234)], null);\n\nbreak;\ncase \"db.type/ref\":\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db.type\",\"ref\",\"db.type/ref\",-1728373079),new cljs.core.Keyword(\"db\",\"index\",\"db/index\",-1531680669)], null);\n\nbreak;\ndefault:\nif(((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"db\",\"isComponent\",\"db/isComponent\",423352398),k)) && (v === true))){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"isComponent\",\"db/isComponent\",423352398)], null);\n} else {\nif(((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"db\",\"index\",\"db/index\",-1531680669),k)) && (v === true))){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"index\",\"db/index\",-1531680669)], null);\n} else {\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092),k)){\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db.type\",\"tuple\",\"db.type/tuple\",938234914),new cljs.core.Keyword(\"db\",\"index\",\"db/index\",-1531680669)], null);\n} else {\nreturn cljs.core.PersistentVector.EMPTY;\n\n}\n}\n}\n\n}\n});\n/**\n * e.g. :reg/semester => #{:reg/semester+course+student ...}\n */\ndatascript.db.attr_tuples = (function datascript$db$attr_tuples(schema,rschema){\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (m,tuple_attr){\nreturn datascript.db.reduce_indexed((function (m__$1,src_attr,idx){\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$5(m__$1,src_attr,cljs.core.assoc,tuple_attr,idx);\n}),m,new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092).cljs$core$IFn$_invoke$arity$1((tuple_attr.cljs$core$IFn$_invoke$arity$1 ? tuple_attr.cljs$core$IFn$_invoke$arity$1(schema) : tuple_attr.call(null,schema))));\n}),cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(\"db.type\",\"tuple\",\"db.type/tuple\",938234914).cljs$core$IFn$_invoke$arity$1(rschema));\n});\n/**\n * :db/unique           => #{attr ...}\n * :db.unique/identity  => #{attr ...}\n * :db.unique/value     => #{attr ...}\n * :db/index            => #{attr ...}\n * :db.cardinality/many => #{attr ...}\n * :db.type/ref         => #{attr ...}\n * :db/isComponent      => #{attr ...}\n * :db.type/tuple       => #{attr ...}\n * :db/attrTuples       => {attr => {tuple-attr => idx}}\n */\ndatascript.db.rschema = (function datascript$db$rschema(schema){\nvar rschema = cljs.core.reduce_kv((function (rschema,attr,attr_schema){\nreturn cljs.core.reduce_kv((function (rschema__$1,key,value){\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (rschema__$2,prop){\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$4(rschema__$2,prop,datascript.db.conjs,attr);\n}),rschema__$1,datascript.db.attr__GT_properties(key,value));\n}),rschema,attr_schema);\n}),cljs.core.PersistentArrayMap.EMPTY,schema);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(rschema,new cljs.core.Keyword(\"db\",\"attrTuples\",\"db/attrTuples\",860541631),datascript.db.attr_tuples(schema,rschema));\n});\ndatascript.db.validate_schema_key = (function datascript$db$validate_schema_key(a,k,v,expected){\nif((((v == null)) || (cljs.core.contains_QMARK_(expected,v)))){\nreturn null;\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Bad attribute specification for \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.PersistentArrayMap.createAsIfByAssoc([a,cljs.core.PersistentArrayMap.createAsIfByAssoc([k,v])])], 0)),\", expected one of \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(expected)].join(''),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"schema\",\"validation\",\"schema/validation\",1178447161),new cljs.core.Keyword(null,\"attribute\",\"attribute\",-2074029119),a,new cljs.core.Keyword(null,\"key\",\"key\",-1516042587),k,new cljs.core.Keyword(null,\"value\",\"value\",305978217),v], null));\n}\n});\ndatascript.db.validate_schema = (function datascript$db$validate_schema(schema){\nvar seq__38738 = cljs.core.seq(schema);\nvar chunk__38739 = null;\nvar count__38740 = (0);\nvar i__38741 = (0);\nwhile(true){\nif((i__38741 < count__38740)){\nvar vec__38760 = chunk__38739.cljs$core$IIndexed$_nth$arity$2(null,i__38741);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38760,(0),null);\nvar kv = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38760,(1),null);\nvar comp_QMARK__39304 = new cljs.core.Keyword(\"db\",\"isComponent\",\"db/isComponent\",423352398).cljs$core$IFn$_invoke$arity$2(kv,false);\ndatascript.db.validate_schema_key(a,new cljs.core.Keyword(\"db\",\"isComponent\",\"db/isComponent\",423352398),new cljs.core.Keyword(\"db\",\"isComponent\",\"db/isComponent\",423352398).cljs$core$IFn$_invoke$arity$1(kv),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [true,null,false,null], null), null));\n\nif(cljs.core.truth_((function (){var and__4251__auto__ = comp_QMARK__39304;\nif(cljs.core.truth_(and__4251__auto__)){\nreturn cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"db\",\"valueType\",\"db/valueType\",1827971944).cljs$core$IFn$_invoke$arity$1(kv),new cljs.core.Keyword(\"db.type\",\"ref\",\"db.type/ref\",-1728373079));\n} else {\nreturn and__4251__auto__;\n}\n})())){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Bad attribute specification for \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\": {:db/isComponent true} should also have {:db/valueType :db.type/ref}\"].join(''),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"schema\",\"validation\",\"schema/validation\",1178447161),new cljs.core.Keyword(null,\"attribute\",\"attribute\",-2074029119),a,new cljs.core.Keyword(null,\"key\",\"key\",-1516042587),new cljs.core.Keyword(\"db\",\"isComponent\",\"db/isComponent\",423352398)], null));\n} else {\n}\n\ndatascript.db.validate_schema_key(a,new cljs.core.Keyword(\"db\",\"unique\",\"db/unique\",329396388),new cljs.core.Keyword(\"db\",\"unique\",\"db/unique\",329396388).cljs$core$IFn$_invoke$arity$1(kv),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\"db.unique\",\"identity\",\"db.unique/identity\",1675950722),null,new cljs.core.Keyword(\"db.unique\",\"value\",\"db.unique/value\",276903088),null], null), null));\n\ndatascript.db.validate_schema_key(a,new cljs.core.Keyword(\"db\",\"valueType\",\"db/valueType\",1827971944),new cljs.core.Keyword(\"db\",\"valueType\",\"db/valueType\",1827971944).cljs$core$IFn$_invoke$arity$1(kv),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\"db.type\",\"tuple\",\"db.type/tuple\",938234914),null,new cljs.core.Keyword(\"db.type\",\"ref\",\"db.type/ref\",-1728373079),null], null), null));\n\ndatascript.db.validate_schema_key(a,new cljs.core.Keyword(\"db\",\"cardinality\",\"db/cardinality\",-104975659),new cljs.core.Keyword(\"db\",\"cardinality\",\"db/cardinality\",-104975659).cljs$core$IFn$_invoke$arity$1(kv),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\"db.cardinality\",\"many\",\"db.cardinality/many\",772806234),null,new cljs.core.Keyword(\"db.cardinality\",\"one\",\"db.cardinality/one\",1428352190),null], null), null));\n\nif(((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"db.type\",\"tuple\",\"db.type/tuple\",938234914),new cljs.core.Keyword(\"db\",\"valueType\",\"db/valueType\",1827971944).cljs$core$IFn$_invoke$arity$1(kv))) && ((!(cljs.core.contains_QMARK_(kv,new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092))))))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Bad attribute specification for \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\": {:db/valueType :db.type/tuple} should also have :db/tupleAttrs\"].join(''),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"schema\",\"validation\",\"schema/validation\",1178447161),new cljs.core.Keyword(null,\"attribute\",\"attribute\",-2074029119),a,new cljs.core.Keyword(null,\"key\",\"key\",-1516042587),new cljs.core.Keyword(\"db\",\"valueType\",\"db/valueType\",1827971944)], null));\n} else {\n}\n\nif(cljs.core.contains_QMARK_(kv,new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092))){\nvar ex_data_39312 = new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"schema\",\"validation\",\"schema/validation\",1178447161),new cljs.core.Keyword(null,\"attribute\",\"attribute\",-2074029119),a,new cljs.core.Keyword(null,\"key\",\"key\",-1516042587),new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092)], null);\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"db.cardinality\",\"many\",\"db.cardinality/many\",772806234),new cljs.core.Keyword(\"db\",\"cardinality\",\"db/cardinality\",-104975659).cljs$core$IFn$_invoke$arity$1(kv))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\" has :db/tupleAttrs, must be :db.cardinality/one\"].join(''),ex_data_39312);\n} else {\n}\n\nvar attrs_39314 = new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092).cljs$core$IFn$_invoke$arity$1(kv);\nif(cljs.core.sequential_QMARK_(attrs_39314)){\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\" :db/tupleAttrs must be a sequential collection, got: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([attrs_39314], 0))].join(''),ex_data_39312);\n}\n\nif(cljs.core.empty_QMARK_(attrs_39314)){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\" :db/tupleAttrs can\\u2019t be empty\"].join(''),ex_data_39312);\n} else {\n}\n\nvar seq__38763_39316 = cljs.core.seq(attrs_39314);\nvar chunk__38765_39317 = null;\nvar count__38766_39318 = (0);\nvar i__38767_39319 = (0);\nwhile(true){\nif((i__38767_39319 < count__38766_39318)){\nvar attr_39321 = chunk__38765_39317.cljs$core$IIndexed$_nth$arity$2(null,i__38767_39319);\nvar ex_data_39322__$1 = cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(ex_data_39312,new cljs.core.Keyword(null,\"value\",\"value\",305978217),attr_39321);\nif(cljs.core.contains_QMARK_(cljs.core.get.cljs$core$IFn$_invoke$arity$2(schema,attr_39321),new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\" :db/tupleAttrs can\\u2019t depend on another tuple attribute: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([attr_39321], 0))].join(''),ex_data_39322__$1);\n} else {\n}\n\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"db.cardinality\",\"many\",\"db.cardinality/many\",772806234),new cljs.core.Keyword(\"db\",\"cardinality\",\"db/cardinality\",-104975659).cljs$core$IFn$_invoke$arity$1(cljs.core.get.cljs$core$IFn$_invoke$arity$2(schema,attr_39321)))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\" :db/tupleAttrs can\\u2019t depend on :db.cardinality/many attribute: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([attr_39321], 0))].join(''),ex_data_39322__$1);\n} else {\n}\n\n\nvar G__39325 = seq__38763_39316;\nvar G__39326 = chunk__38765_39317;\nvar G__39327 = count__38766_39318;\nvar G__39328 = (i__38767_39319 + (1));\nseq__38763_39316 = G__39325;\nchunk__38765_39317 = G__39326;\ncount__38766_39318 = G__39327;\ni__38767_39319 = G__39328;\ncontinue;\n} else {\nvar temp__5753__auto___39329 = cljs.core.seq(seq__38763_39316);\nif(temp__5753__auto___39329){\nvar seq__38763_39330__$1 = temp__5753__auto___39329;\nif(cljs.core.chunked_seq_QMARK_(seq__38763_39330__$1)){\nvar c__4679__auto___39331 = cljs.core.chunk_first(seq__38763_39330__$1);\nvar G__39332 = cljs.core.chunk_rest(seq__38763_39330__$1);\nvar G__39333 = c__4679__auto___39331;\nvar G__39334 = cljs.core.count(c__4679__auto___39331);\nvar G__39335 = (0);\nseq__38763_39316 = G__39332;\nchunk__38765_39317 = G__39333;\ncount__38766_39318 = G__39334;\ni__38767_39319 = G__39335;\ncontinue;\n} else {\nvar attr_39339 = cljs.core.first(seq__38763_39330__$1);\nvar ex_data_39340__$1 = cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(ex_data_39312,new cljs.core.Keyword(null,\"value\",\"value\",305978217),attr_39339);\nif(cljs.core.contains_QMARK_(cljs.core.get.cljs$core$IFn$_invoke$arity$2(schema,attr_39339),new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\" :db/tupleAttrs can\\u2019t depend on another tuple attribute: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([attr_39339], 0))].join(''),ex_data_39340__$1);\n} else {\n}\n\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"db.cardinality\",\"many\",\"db.cardinality/many\",772806234),new cljs.core.Keyword(\"db\",\"cardinality\",\"db/cardinality\",-104975659).cljs$core$IFn$_invoke$arity$1(cljs.core.get.cljs$core$IFn$_invoke$arity$2(schema,attr_39339)))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\" :db/tupleAttrs can\\u2019t depend on :db.cardinality/many attribute: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([attr_39339], 0))].join(''),ex_data_39340__$1);\n} else {\n}\n\n\nvar G__39343 = cljs.core.next(seq__38763_39330__$1);\nvar G__39344 = null;\nvar G__39345 = (0);\nvar G__39346 = (0);\nseq__38763_39316 = G__39343;\nchunk__38765_39317 = G__39344;\ncount__38766_39318 = G__39345;\ni__38767_39319 = G__39346;\ncontinue;\n}\n} else {\n}\n}\nbreak;\n}\n} else {\n}\n\n\nvar G__39347 = seq__38738;\nvar G__39348 = chunk__38739;\nvar G__39349 = count__38740;\nvar G__39350 = (i__38741 + (1));\nseq__38738 = G__39347;\nchunk__38739 = G__39348;\ncount__38740 = G__39349;\ni__38741 = G__39350;\ncontinue;\n} else {\nvar temp__5753__auto__ = cljs.core.seq(seq__38738);\nif(temp__5753__auto__){\nvar seq__38738__$1 = temp__5753__auto__;\nif(cljs.core.chunked_seq_QMARK_(seq__38738__$1)){\nvar c__4679__auto__ = cljs.core.chunk_first(seq__38738__$1);\nvar G__39351 = cljs.core.chunk_rest(seq__38738__$1);\nvar G__39352 = c__4679__auto__;\nvar G__39353 = cljs.core.count(c__4679__auto__);\nvar G__39354 = (0);\nseq__38738 = G__39351;\nchunk__38739 = G__39352;\ncount__38740 = G__39353;\ni__38741 = G__39354;\ncontinue;\n} else {\nvar vec__38769 = cljs.core.first(seq__38738__$1);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38769,(0),null);\nvar kv = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38769,(1),null);\nvar comp_QMARK__39355 = new cljs.core.Keyword(\"db\",\"isComponent\",\"db/isComponent\",423352398).cljs$core$IFn$_invoke$arity$2(kv,false);\ndatascript.db.validate_schema_key(a,new cljs.core.Keyword(\"db\",\"isComponent\",\"db/isComponent\",423352398),new cljs.core.Keyword(\"db\",\"isComponent\",\"db/isComponent\",423352398).cljs$core$IFn$_invoke$arity$1(kv),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [true,null,false,null], null), null));\n\nif(cljs.core.truth_((function (){var and__4251__auto__ = comp_QMARK__39355;\nif(cljs.core.truth_(and__4251__auto__)){\nreturn cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"db\",\"valueType\",\"db/valueType\",1827971944).cljs$core$IFn$_invoke$arity$1(kv),new cljs.core.Keyword(\"db.type\",\"ref\",\"db.type/ref\",-1728373079));\n} else {\nreturn and__4251__auto__;\n}\n})())){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Bad attribute specification for \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\": {:db/isComponent true} should also have {:db/valueType :db.type/ref}\"].join(''),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"schema\",\"validation\",\"schema/validation\",1178447161),new cljs.core.Keyword(null,\"attribute\",\"attribute\",-2074029119),a,new cljs.core.Keyword(null,\"key\",\"key\",-1516042587),new cljs.core.Keyword(\"db\",\"isComponent\",\"db/isComponent\",423352398)], null));\n} else {\n}\n\ndatascript.db.validate_schema_key(a,new cljs.core.Keyword(\"db\",\"unique\",\"db/unique\",329396388),new cljs.core.Keyword(\"db\",\"unique\",\"db/unique\",329396388).cljs$core$IFn$_invoke$arity$1(kv),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\"db.unique\",\"identity\",\"db.unique/identity\",1675950722),null,new cljs.core.Keyword(\"db.unique\",\"value\",\"db.unique/value\",276903088),null], null), null));\n\ndatascript.db.validate_schema_key(a,new cljs.core.Keyword(\"db\",\"valueType\",\"db/valueType\",1827971944),new cljs.core.Keyword(\"db\",\"valueType\",\"db/valueType\",1827971944).cljs$core$IFn$_invoke$arity$1(kv),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\"db.type\",\"tuple\",\"db.type/tuple\",938234914),null,new cljs.core.Keyword(\"db.type\",\"ref\",\"db.type/ref\",-1728373079),null], null), null));\n\ndatascript.db.validate_schema_key(a,new cljs.core.Keyword(\"db\",\"cardinality\",\"db/cardinality\",-104975659),new cljs.core.Keyword(\"db\",\"cardinality\",\"db/cardinality\",-104975659).cljs$core$IFn$_invoke$arity$1(kv),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\"db.cardinality\",\"many\",\"db.cardinality/many\",772806234),null,new cljs.core.Keyword(\"db.cardinality\",\"one\",\"db.cardinality/one\",1428352190),null], null), null));\n\nif(((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"db.type\",\"tuple\",\"db.type/tuple\",938234914),new cljs.core.Keyword(\"db\",\"valueType\",\"db/valueType\",1827971944).cljs$core$IFn$_invoke$arity$1(kv))) && ((!(cljs.core.contains_QMARK_(kv,new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092))))))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Bad attribute specification for \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\": {:db/valueType :db.type/tuple} should also have :db/tupleAttrs\"].join(''),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"schema\",\"validation\",\"schema/validation\",1178447161),new cljs.core.Keyword(null,\"attribute\",\"attribute\",-2074029119),a,new cljs.core.Keyword(null,\"key\",\"key\",-1516042587),new cljs.core.Keyword(\"db\",\"valueType\",\"db/valueType\",1827971944)], null));\n} else {\n}\n\nif(cljs.core.contains_QMARK_(kv,new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092))){\nvar ex_data_39358 = new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"schema\",\"validation\",\"schema/validation\",1178447161),new cljs.core.Keyword(null,\"attribute\",\"attribute\",-2074029119),a,new cljs.core.Keyword(null,\"key\",\"key\",-1516042587),new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092)], null);\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"db.cardinality\",\"many\",\"db.cardinality/many\",772806234),new cljs.core.Keyword(\"db\",\"cardinality\",\"db/cardinality\",-104975659).cljs$core$IFn$_invoke$arity$1(kv))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\" has :db/tupleAttrs, must be :db.cardinality/one\"].join(''),ex_data_39358);\n} else {\n}\n\nvar attrs_39359 = new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092).cljs$core$IFn$_invoke$arity$1(kv);\nif(cljs.core.sequential_QMARK_(attrs_39359)){\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\" :db/tupleAttrs must be a sequential collection, got: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([attrs_39359], 0))].join(''),ex_data_39358);\n}\n\nif(cljs.core.empty_QMARK_(attrs_39359)){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\" :db/tupleAttrs can\\u2019t be empty\"].join(''),ex_data_39358);\n} else {\n}\n\nvar seq__38772_39362 = cljs.core.seq(attrs_39359);\nvar chunk__38774_39363 = null;\nvar count__38775_39364 = (0);\nvar i__38776_39365 = (0);\nwhile(true){\nif((i__38776_39365 < count__38775_39364)){\nvar attr_39367 = chunk__38774_39363.cljs$core$IIndexed$_nth$arity$2(null,i__38776_39365);\nvar ex_data_39368__$1 = cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(ex_data_39358,new cljs.core.Keyword(null,\"value\",\"value\",305978217),attr_39367);\nif(cljs.core.contains_QMARK_(cljs.core.get.cljs$core$IFn$_invoke$arity$2(schema,attr_39367),new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\" :db/tupleAttrs can\\u2019t depend on another tuple attribute: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([attr_39367], 0))].join(''),ex_data_39368__$1);\n} else {\n}\n\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"db.cardinality\",\"many\",\"db.cardinality/many\",772806234),new cljs.core.Keyword(\"db\",\"cardinality\",\"db/cardinality\",-104975659).cljs$core$IFn$_invoke$arity$1(cljs.core.get.cljs$core$IFn$_invoke$arity$2(schema,attr_39367)))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\" :db/tupleAttrs can\\u2019t depend on :db.cardinality/many attribute: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([attr_39367], 0))].join(''),ex_data_39368__$1);\n} else {\n}\n\n\nvar G__39370 = seq__38772_39362;\nvar G__39371 = chunk__38774_39363;\nvar G__39372 = count__38775_39364;\nvar G__39373 = (i__38776_39365 + (1));\nseq__38772_39362 = G__39370;\nchunk__38774_39363 = G__39371;\ncount__38775_39364 = G__39372;\ni__38776_39365 = G__39373;\ncontinue;\n} else {\nvar temp__5753__auto___39374__$1 = cljs.core.seq(seq__38772_39362);\nif(temp__5753__auto___39374__$1){\nvar seq__38772_39375__$1 = temp__5753__auto___39374__$1;\nif(cljs.core.chunked_seq_QMARK_(seq__38772_39375__$1)){\nvar c__4679__auto___39376 = cljs.core.chunk_first(seq__38772_39375__$1);\nvar G__39377 = cljs.core.chunk_rest(seq__38772_39375__$1);\nvar G__39378 = c__4679__auto___39376;\nvar G__39379 = cljs.core.count(c__4679__auto___39376);\nvar G__39380 = (0);\nseq__38772_39362 = G__39377;\nchunk__38774_39363 = G__39378;\ncount__38775_39364 = G__39379;\ni__38776_39365 = G__39380;\ncontinue;\n} else {\nvar attr_39381 = cljs.core.first(seq__38772_39375__$1);\nvar ex_data_39382__$1 = cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(ex_data_39358,new cljs.core.Keyword(null,\"value\",\"value\",305978217),attr_39381);\nif(cljs.core.contains_QMARK_(cljs.core.get.cljs$core$IFn$_invoke$arity$2(schema,attr_39381),new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\" :db/tupleAttrs can\\u2019t depend on another tuple attribute: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([attr_39381], 0))].join(''),ex_data_39382__$1);\n} else {\n}\n\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"db.cardinality\",\"many\",\"db.cardinality/many\",772806234),new cljs.core.Keyword(\"db\",\"cardinality\",\"db/cardinality\",-104975659).cljs$core$IFn$_invoke$arity$1(cljs.core.get.cljs$core$IFn$_invoke$arity$2(schema,attr_39381)))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\" :db/tupleAttrs can\\u2019t depend on :db.cardinality/many attribute: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([attr_39381], 0))].join(''),ex_data_39382__$1);\n} else {\n}\n\n\nvar G__39389 = cljs.core.next(seq__38772_39375__$1);\nvar G__39390 = null;\nvar G__39391 = (0);\nvar G__39392 = (0);\nseq__38772_39362 = G__39389;\nchunk__38774_39363 = G__39390;\ncount__38775_39364 = G__39391;\ni__38776_39365 = G__39392;\ncontinue;\n}\n} else {\n}\n}\nbreak;\n}\n} else {\n}\n\n\nvar G__39395 = cljs.core.next(seq__38738__$1);\nvar G__39396 = null;\nvar G__39397 = (0);\nvar G__39398 = (0);\nseq__38738 = G__39395;\nchunk__38739 = G__39396;\ncount__38740 = G__39397;\ni__38741 = G__39398;\ncontinue;\n}\n} else {\nreturn null;\n}\n}\nbreak;\n}\n});\ndatascript.db.empty_db = (function datascript$db$empty_db(var_args){\nvar G__38779 = arguments.length;\nswitch (G__38779) {\ncase 0:\nreturn datascript.db.empty_db.cljs$core$IFn$_invoke$arity$0();\n\nbreak;\ncase 1:\nreturn datascript.db.empty_db.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));\n\nbreak;\ndefault:\nthrow (new Error([\"Invalid arity: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));\n\n}\n});\n\n(datascript.db.empty_db.cljs$core$IFn$_invoke$arity$0 = (function (){\nreturn datascript.db.empty_db.cljs$core$IFn$_invoke$arity$1(null);\n}));\n\n(datascript.db.empty_db.cljs$core$IFn$_invoke$arity$1 = (function (schema){\nif((((schema == null)) || (cljs.core.map_QMARK_(schema)))){\n} else {\nthrow (new Error(\"Assert failed: (or (nil? schema) (map? schema))\"));\n}\n\ndatascript.db.validate_schema(schema);\n\nreturn datascript.db.map__GT_DB(cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,\"schema\",\"schema\",-1582001791),new cljs.core.Keyword(null,\"max-tx\",\"max-tx\",1119558339),new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596),new cljs.core.Keyword(null,\"aevt\",\"aevt\",-585148059),new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),new cljs.core.Keyword(null,\"max-eid\",\"max-eid\",2134868075),new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),new cljs.core.Keyword(null,\"pull-attrs\",\"pull-attrs\",-974863177),new cljs.core.Keyword(null,\"pull-patterns\",\"pull-patterns\",-343695048),new cljs.core.Keyword(null,\"rschema\",\"rschema\",-1196134054)],[schema,(536870912),cljs.core.atom.cljs$core$IFn$_invoke$arity$1((0)),me.tonsky.persistent_sorted_set.sorted_set_by.cljs$core$IFn$_invoke$arity$1(datascript.db.cmp_datoms_aevt),me.tonsky.persistent_sorted_set.sorted_set_by.cljs$core$IFn$_invoke$arity$1(datascript.db.cmp_datoms_avet),(0),me.tonsky.persistent_sorted_set.sorted_set_by.cljs$core$IFn$_invoke$arity$1(datascript.db.cmp_datoms_eavt),datascript.lru.cache((100)),datascript.lru.cache((100)),datascript.db.rschema(cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(\"db\",\"ident\",\"db/ident\",-737096),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(\"db\",\"unique\",\"db/unique\",329396388),new cljs.core.Keyword(\"db.unique\",\"identity\",\"db.unique/identity\",1675950722)], null)], null),schema], 0)))]));\n}));\n\n(datascript.db.empty_db.cljs$lang$maxFixedArity = 1);\n\ndatascript.db.init_max_eid = (function datascript$db$init_max_eid(eavt){\nvar or__4253__auto__ = new cljs.core.Keyword(null,\"e\",\"e\",1381269198).cljs$core$IFn$_invoke$arity$1(cljs.core.first(me.tonsky.persistent_sorted_set.rslice.cljs$core$IFn$_invoke$arity$3(eavt,datascript.db.datom.cljs$core$IFn$_invoke$arity$4(((536870912) - (1)),null,null,(2147483647)),datascript.db.datom.cljs$core$IFn$_invoke$arity$4((0),null,null,(536870912)))));\nif(cljs.core.truth_(or__4253__auto__)){\nreturn or__4253__auto__;\n} else {\nreturn (0);\n}\n});\ndatascript.db.init_db = (function datascript$db$init_db(var_args){\nvar G__38781 = arguments.length;\nswitch (G__38781) {\ncase 1:\nreturn datascript.db.init_db.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));\n\nbreak;\ncase 2:\nreturn datascript.db.init_db.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));\n\nbreak;\ndefault:\nthrow (new Error([\"Invalid arity: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));\n\n}\n});\n\n(datascript.db.init_db.cljs$core$IFn$_invoke$arity$1 = (function (datoms){\nreturn datascript.db.init_db.cljs$core$IFn$_invoke$arity$2(datoms,null);\n}));\n\n(datascript.db.init_db.cljs$core$IFn$_invoke$arity$2 = (function (datoms,schema){\nvar temp__5757__auto___39412 = cljs.core.first(cljs.core.drop_while.cljs$core$IFn$_invoke$arity$2(datascript.db.datom_QMARK_,datoms));\nif((temp__5757__auto___39412 == null)){\n} else {\nvar not_datom_39413 = temp__5757__auto___39412;\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"init-db expects list of Datoms, got \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.type(not_datom_39413)], 0))].join(''),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(null,\"init-db\",\"init-db\",1595181278)], null));\n}\n\ndatascript.db.validate_schema(schema);\n\nvar rschema = datascript.db.rschema(cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(\"db\",\"ident\",\"db/ident\",-737096),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(\"db\",\"unique\",\"db/unique\",329396388),new cljs.core.Keyword(\"db.unique\",\"identity\",\"db.unique/identity\",1675950722)], null)], null),schema], 0)));\nvar indexed = new cljs.core.Keyword(\"db\",\"index\",\"db/index\",-1531680669).cljs$core$IFn$_invoke$arity$1(rschema);\nvar arr = (function (){var G__38782 = datoms;\nif((!(me.tonsky.persistent_sorted_set.arrays.array_QMARK_(datoms)))){\nreturn me.tonsky.persistent_sorted_set.arrays.into_array(G__38782);\n} else {\nreturn G__38782;\n}\n})();\nvar _ = me.tonsky.persistent_sorted_set.arrays.asort(arr,datascript.db.cmp_datoms_eavt_quick);\nvar eavt = me.tonsky.persistent_sorted_set.from_sorted_array(datascript.db.cmp_datoms_eavt,arr);\nvar ___$1 = me.tonsky.persistent_sorted_set.arrays.asort(arr,datascript.db.cmp_datoms_aevt_quick);\nvar aevt = me.tonsky.persistent_sorted_set.from_sorted_array(datascript.db.cmp_datoms_aevt,arr);\nvar avet_datoms = cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (d){\nreturn cljs.core.contains_QMARK_(indexed,d.a);\n}),datoms);\nvar avet_arr = cljs.core.to_array(avet_datoms);\nvar ___$2 = me.tonsky.persistent_sorted_set.arrays.asort(avet_arr,datascript.db.cmp_datoms_avet_quick);\nvar avet = me.tonsky.persistent_sorted_set.from_sorted_array(datascript.db.cmp_datoms_avet,avet_arr);\nvar max_eid = datascript.db.init_max_eid(eavt);\nvar max_tx = cljs.core.transduce.cljs$core$IFn$_invoke$arity$4(cljs.core.map.cljs$core$IFn$_invoke$arity$1((function (d){\nreturn d.datascript$db$IDatom$datom_tx$arity$1(null);\n})),cljs.core.max,(536870912),eavt);\nreturn datascript.db.map__GT_DB(cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,\"schema\",\"schema\",-1582001791),new cljs.core.Keyword(null,\"max-tx\",\"max-tx\",1119558339),new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596),new cljs.core.Keyword(null,\"aevt\",\"aevt\",-585148059),new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),new cljs.core.Keyword(null,\"max-eid\",\"max-eid\",2134868075),new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),new cljs.core.Keyword(null,\"pull-attrs\",\"pull-attrs\",-974863177),new cljs.core.Keyword(null,\"pull-patterns\",\"pull-patterns\",-343695048),new cljs.core.Keyword(null,\"rschema\",\"rschema\",-1196134054)],[schema,max_tx,cljs.core.atom.cljs$core$IFn$_invoke$arity$1((0)),aevt,avet,max_eid,eavt,datascript.lru.cache((100)),datascript.lru.cache((100)),rschema]));\n}));\n\n(datascript.db.init_db.cljs$lang$maxFixedArity = 2);\n\ndatascript.db.equiv_db_index = (function datascript$db$equiv_db_index(x,y){\nvar xs = cljs.core.seq(x);\nvar ys = cljs.core.seq(y);\nwhile(true){\nif((xs == null)){\nreturn (ys == null);\n} else {\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs.core.first(xs),cljs.core.first(ys))){\nvar G__39426 = cljs.core.next(xs);\nvar G__39427 = cljs.core.next(ys);\nxs = G__39426;\nys = G__39427;\ncontinue;\n} else {\nreturn false;\n\n}\n}\nbreak;\n}\n});\ndatascript.db.hash_db = (function datascript$db$hash_db(db){\nvar h = cljs.core.deref(db.hash);\nif((h === (0))){\nreturn cljs.core.reset_BANG_(db.hash,datascript.db.combine_hashes(cljs.core.hash(db.schema),cljs.core.hash(db.eavt)));\n} else {\nreturn h;\n}\n});\ndatascript.db.hash_fdb = (function datascript$db$hash_fdb(db){\nvar h = cljs.core.deref(db.hash);\nvar datoms = (function (){var or__4253__auto__ = datascript.db._datoms(db,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),cljs.core.PersistentVector.EMPTY);\nif(cljs.core.truth_(or__4253__auto__)){\nreturn or__4253__auto__;\n} else {\nreturn cljs.core.PersistentHashSet.EMPTY;\n}\n})();\nif((h === (0))){\nvar datoms__$1 = (function (){var or__4253__auto__ = datascript.db._datoms(db,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),cljs.core.PersistentVector.EMPTY);\nif(cljs.core.truth_(or__4253__auto__)){\nreturn or__4253__auto__;\n} else {\nreturn cljs.core.PersistentHashSet.EMPTY;\n}\n})();\nreturn cljs.core.reset_BANG_(db.hash,datascript.db.combine_hashes(cljs.core.hash(datascript.db._schema(db)),cljs.core.hash_unordered_coll(datoms__$1)));\n} else {\nreturn h;\n}\n});\ndatascript.db.equiv_db = (function datascript$db$equiv_db(db,other){\nreturn (((((other instanceof datascript.db.DB)) || ((other instanceof datascript.db.FilteredDB)))) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(datascript.db._schema(db),datascript.db._schema(other))) && (datascript.db.equiv_db_index(datascript.db._datoms(db,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),cljs.core.PersistentVector.EMPTY),datascript.db._datoms(other,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),cljs.core.PersistentVector.EMPTY))))));\n});\ndatascript.db.pr_db = (function datascript$db$pr_db(db,w,opts){\ncljs.core._write(w,\"#datascript/DB {\");\n\ncljs.core._write(w,\":schema \");\n\ncljs.core.pr_writer(datascript.db._schema(db),w,opts);\n\ncljs.core._write(w,\", :datoms \");\n\ncljs.core.pr_sequential_writer(w,(function (d,w__$1,opts__$1){\nreturn cljs.core.pr_sequential_writer(w__$1,cljs.core.pr_writer,\"[\",\" \",\"]\",opts__$1,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [d.e,d.a,d.v,datascript.db.datom_tx(d)], null));\n}),\"[\",\" \",\"]\",opts,datascript.db._datoms(db,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),cljs.core.PersistentVector.EMPTY));\n\nreturn cljs.core._write(w,\"}\");\n});\ndatascript.db.db_from_reader = (function datascript$db$db_from_reader(p__38783){\nvar map__38784 = p__38783;\nvar map__38784__$1 = cljs.core.__destructure_map(map__38784);\nvar schema = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__38784__$1,new cljs.core.Keyword(null,\"schema\",\"schema\",-1582001791));\nvar datoms = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__38784__$1,new cljs.core.Keyword(null,\"datoms\",\"datoms\",-290874434));\nreturn datascript.db.init_db.cljs$core$IFn$_invoke$arity$2(cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__38785){\nvar vec__38786 = p__38785;\nvar e = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38786,(0),null);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38786,(1),null);\nvar v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38786,(2),null);\nvar tx = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38786,(3),null);\nreturn datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e,a,v,tx);\n}),datoms),schema);\n});\n\n\ndatascript.db.resolve_datom = (function datascript$db$resolve_datom(db,e,a,v,t,default_e,default_tx){\nif(cljs.core.truth_(a)){\nvar G__38789_39441 = a;\nvar G__38790_39442 = (new cljs.core.List(null,new cljs.core.Symbol(null,\"resolve-datom\",\"resolve-datom\",-294110827,null),(new cljs.core.List(null,new cljs.core.Symbol(null,\"db\",\"db\",-1661185010,null),(new cljs.core.List(null,e,(new cljs.core.List(null,a,(new cljs.core.List(null,v,(new cljs.core.List(null,t,null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null)),(6),null));\n(datascript.db.validate_attr.cljs$core$IFn$_invoke$arity$2 ? datascript.db.validate_attr.cljs$core$IFn$_invoke$arity$2(G__38789_39441,G__38790_39442) : datascript.db.validate_attr.call(null,G__38789_39441,G__38790_39442));\n} else {\n}\n\nreturn datascript.db.datom.cljs$core$IFn$_invoke$arity$4((function (){var or__4253__auto__ = (datascript.db.entid_some.cljs$core$IFn$_invoke$arity$2 ? datascript.db.entid_some.cljs$core$IFn$_invoke$arity$2(db,e) : datascript.db.entid_some.call(null,db,e));\nif(cljs.core.truth_(or__4253__auto__)){\nreturn or__4253__auto__;\n} else {\nreturn default_e;\n}\n})(),a,(cljs.core.truth_((function (){var and__4251__auto__ = (!((v == null)));\nif(and__4251__auto__){\nreturn (datascript.db.ref_QMARK_.cljs$core$IFn$_invoke$arity$2 ? datascript.db.ref_QMARK_.cljs$core$IFn$_invoke$arity$2(db,a) : datascript.db.ref_QMARK_.call(null,db,a));\n} else {\nreturn and__4251__auto__;\n}\n})())?(datascript.db.entid_strict.cljs$core$IFn$_invoke$arity$2 ? datascript.db.entid_strict.cljs$core$IFn$_invoke$arity$2(db,v) : datascript.db.entid_strict.call(null,db,v)):v),(function (){var or__4253__auto__ = (datascript.db.entid_some.cljs$core$IFn$_invoke$arity$2 ? datascript.db.entid_some.cljs$core$IFn$_invoke$arity$2(db,t) : datascript.db.entid_some.call(null,db,t));\nif(cljs.core.truth_(or__4253__auto__)){\nreturn or__4253__auto__;\n} else {\nreturn default_tx;\n}\n})());\n});\ndatascript.db.components__GT_pattern = (function datascript$db$components__GT_pattern(db,index,p__38791,default_e,default_tx){\nvar vec__38792 = p__38791;\nvar c0 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38792,(0),null);\nvar c1 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38792,(1),null);\nvar c2 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38792,(2),null);\nvar c3 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38792,(3),null);\nvar G__38795 = index;\nvar G__38795__$1 = (((G__38795 instanceof cljs.core.Keyword))?G__38795.fqn:null);\nswitch (G__38795__$1) {\ncase \"eavt\":\nreturn datascript.db.resolve_datom(db,c0,c1,c2,c3,default_e,default_tx);\n\nbreak;\ncase \"aevt\":\nreturn datascript.db.resolve_datom(db,c1,c0,c2,c3,default_e,default_tx);\n\nbreak;\ncase \"avet\":\nreturn datascript.db.resolve_datom(db,c2,c0,c1,c3,default_e,default_tx);\n\nbreak;\ndefault:\nthrow (new Error([\"No matching clause: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(G__38795__$1)].join('')));\n\n}\n});\n\n/**\n* @constructor\n * @implements {cljs.core.IRecord}\n * @implements {cljs.core.IKVReduce}\n * @implements {cljs.core.IEquiv}\n * @implements {cljs.core.IHash}\n * @implements {cljs.core.ICollection}\n * @implements {cljs.core.ICounted}\n * @implements {cljs.core.ISeqable}\n * @implements {cljs.core.IMeta}\n * @implements {cljs.core.ICloneable}\n * @implements {cljs.core.IPrintWithWriter}\n * @implements {cljs.core.IIterable}\n * @implements {cljs.core.IWithMeta}\n * @implements {cljs.core.IAssociative}\n * @implements {cljs.core.IMap}\n * @implements {cljs.core.ILookup}\n*/\ndatascript.db.TxReport = (function (db_before,db_after,tx_data,tempids,tx_meta,__meta,__extmap,__hash){\nthis.db_before = db_before;\nthis.db_after = db_after;\nthis.tx_data = tx_data;\nthis.tempids = tempids;\nthis.tx_meta = tx_meta;\nthis.__meta = __meta;\nthis.__extmap = __extmap;\nthis.__hash = __hash;\nthis.cljs$lang$protocol_mask$partition0$ = 2230716170;\nthis.cljs$lang$protocol_mask$partition1$ = 139264;\n});\n(datascript.db.TxReport.prototype.cljs$core$ILookup$_lookup$arity$2 = (function (this__4502__auto__,k__4503__auto__){\nvar self__ = this;\nvar this__4502__auto____$1 = this;\nreturn this__4502__auto____$1.cljs$core$ILookup$_lookup$arity$3(null,k__4503__auto__,null);\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$ILookup$_lookup$arity$3 = (function (this__4504__auto__,k38797,else__4505__auto__){\nvar self__ = this;\nvar this__4504__auto____$1 = this;\nvar G__38801 = k38797;\nvar G__38801__$1 = (((G__38801 instanceof cljs.core.Keyword))?G__38801.fqn:null);\nswitch (G__38801__$1) {\ncase \"db-before\":\nreturn self__.db_before;\n\nbreak;\ncase \"db-after\":\nreturn self__.db_after;\n\nbreak;\ncase \"tx-data\":\nreturn self__.tx_data;\n\nbreak;\ncase \"tempids\":\nreturn self__.tempids;\n\nbreak;\ncase \"tx-meta\":\nreturn self__.tx_meta;\n\nbreak;\ndefault:\nreturn cljs.core.get.cljs$core$IFn$_invoke$arity$3(self__.__extmap,k38797,else__4505__auto__);\n\n}\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = (function (this__4522__auto__,f__4523__auto__,init__4524__auto__){\nvar self__ = this;\nvar this__4522__auto____$1 = this;\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (ret__4525__auto__,p__38802){\nvar vec__38803 = p__38802;\nvar k__4526__auto__ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38803,(0),null);\nvar v__4527__auto__ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38803,(1),null);\nreturn (f__4523__auto__.cljs$core$IFn$_invoke$arity$3 ? f__4523__auto__.cljs$core$IFn$_invoke$arity$3(ret__4525__auto__,k__4526__auto__,v__4527__auto__) : f__4523__auto__.call(null,ret__4525__auto__,k__4526__auto__,v__4527__auto__));\n}),init__4524__auto__,this__4522__auto____$1);\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = (function (this__4517__auto__,writer__4518__auto__,opts__4519__auto__){\nvar self__ = this;\nvar this__4517__auto____$1 = this;\nvar pr_pair__4520__auto__ = (function (keyval__4521__auto__){\nreturn cljs.core.pr_sequential_writer(writer__4518__auto__,cljs.core.pr_writer,\"\",\" \",\"\",opts__4519__auto__,keyval__4521__auto__);\n});\nreturn cljs.core.pr_sequential_writer(writer__4518__auto__,pr_pair__4520__auto__,\"#datascript.db.TxReport{\",\", \",\"}\",opts__4519__auto__,cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"db-before\",\"db-before\",-553691536),self__.db_before],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666),self__.db_after],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761),self__.tx_data],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089),self__.tempids],null)),(new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword(null,\"tx-meta\",\"tx-meta\",1159283194),self__.tx_meta],null))], null),self__.__extmap));\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$IIterable$_iterator$arity$1 = (function (G__38796){\nvar self__ = this;\nvar G__38796__$1 = this;\nreturn (new cljs.core.RecordIter((0),G__38796__$1,5,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"db-before\",\"db-before\",-553691536),new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666),new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761),new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089),new cljs.core.Keyword(null,\"tx-meta\",\"tx-meta\",1159283194)], null),(cljs.core.truth_(self__.__extmap)?cljs.core._iterator(self__.__extmap):cljs.core.nil_iter())));\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$IMeta$_meta$arity$1 = (function (this__4500__auto__){\nvar self__ = this;\nvar this__4500__auto____$1 = this;\nreturn self__.__meta;\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$ICloneable$_clone$arity$1 = (function (this__4497__auto__){\nvar self__ = this;\nvar this__4497__auto____$1 = this;\nreturn (new datascript.db.TxReport(self__.db_before,self__.db_after,self__.tx_data,self__.tempids,self__.tx_meta,self__.__meta,self__.__extmap,self__.__hash));\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$ICounted$_count$arity$1 = (function (this__4506__auto__){\nvar self__ = this;\nvar this__4506__auto____$1 = this;\nreturn (5 + cljs.core.count(self__.__extmap));\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$IHash$_hash$arity$1 = (function (this__4498__auto__){\nvar self__ = this;\nvar this__4498__auto____$1 = this;\nvar h__4360__auto__ = self__.__hash;\nif((!((h__4360__auto__ == null)))){\nreturn h__4360__auto__;\n} else {\nvar h__4360__auto____$1 = (function (coll__4499__auto__){\nreturn (-2022644885 ^ cljs.core.hash_unordered_coll(coll__4499__auto__));\n})(this__4498__auto____$1);\n(self__.__hash = h__4360__auto____$1);\n\nreturn h__4360__auto____$1;\n}\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$IEquiv$_equiv$arity$2 = (function (this38798,other38799){\nvar self__ = this;\nvar this38798__$1 = this;\nreturn (((!((other38799 == null)))) && ((((this38798__$1.constructor === other38799.constructor)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38798__$1.db_before,other38799.db_before)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38798__$1.db_after,other38799.db_after)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38798__$1.tx_data,other38799.tx_data)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38798__$1.tempids,other38799.tempids)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38798__$1.tx_meta,other38799.tx_meta)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this38798__$1.__extmap,other38799.__extmap)))))))))))))));\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$IMap$_dissoc$arity$2 = (function (this__4512__auto__,k__4513__auto__){\nvar self__ = this;\nvar this__4512__auto____$1 = this;\nif(cljs.core.contains_QMARK_(new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089),null,new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666),null,new cljs.core.Keyword(null,\"db-before\",\"db-before\",-553691536),null,new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761),null,new cljs.core.Keyword(null,\"tx-meta\",\"tx-meta\",1159283194),null], null), null),k__4513__auto__)){\nreturn cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(cljs.core._with_meta(cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentArrayMap.EMPTY,this__4512__auto____$1),self__.__meta),k__4513__auto__);\n} else {\nreturn (new datascript.db.TxReport(self__.db_before,self__.db_after,self__.tx_data,self__.tempids,self__.tx_meta,self__.__meta,cljs.core.not_empty(cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(self__.__extmap,k__4513__auto__)),null));\n}\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = (function (this__4509__auto__,k38797){\nvar self__ = this;\nvar this__4509__auto____$1 = this;\nvar G__38806 = k38797;\nvar G__38806__$1 = (((G__38806 instanceof cljs.core.Keyword))?G__38806.fqn:null);\nswitch (G__38806__$1) {\ncase \"db-before\":\ncase \"db-after\":\ncase \"tx-data\":\ncase \"tempids\":\ncase \"tx-meta\":\nreturn true;\n\nbreak;\ndefault:\nreturn cljs.core.contains_QMARK_(self__.__extmap,k38797);\n\n}\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$IAssociative$_assoc$arity$3 = (function (this__4510__auto__,k__4511__auto__,G__38796){\nvar self__ = this;\nvar this__4510__auto____$1 = this;\nvar pred__38807 = cljs.core.keyword_identical_QMARK_;\nvar expr__38808 = k__4511__auto__;\nif(cljs.core.truth_((pred__38807.cljs$core$IFn$_invoke$arity$2 ? pred__38807.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"db-before\",\"db-before\",-553691536),expr__38808) : pred__38807.call(null,new cljs.core.Keyword(null,\"db-before\",\"db-before\",-553691536),expr__38808)))){\nreturn (new datascript.db.TxReport(G__38796,self__.db_after,self__.tx_data,self__.tempids,self__.tx_meta,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38807.cljs$core$IFn$_invoke$arity$2 ? pred__38807.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666),expr__38808) : pred__38807.call(null,new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666),expr__38808)))){\nreturn (new datascript.db.TxReport(self__.db_before,G__38796,self__.tx_data,self__.tempids,self__.tx_meta,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38807.cljs$core$IFn$_invoke$arity$2 ? pred__38807.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761),expr__38808) : pred__38807.call(null,new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761),expr__38808)))){\nreturn (new datascript.db.TxReport(self__.db_before,self__.db_after,G__38796,self__.tempids,self__.tx_meta,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38807.cljs$core$IFn$_invoke$arity$2 ? pred__38807.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089),expr__38808) : pred__38807.call(null,new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089),expr__38808)))){\nreturn (new datascript.db.TxReport(self__.db_before,self__.db_after,self__.tx_data,G__38796,self__.tx_meta,self__.__meta,self__.__extmap,null));\n} else {\nif(cljs.core.truth_((pred__38807.cljs$core$IFn$_invoke$arity$2 ? pred__38807.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"tx-meta\",\"tx-meta\",1159283194),expr__38808) : pred__38807.call(null,new cljs.core.Keyword(null,\"tx-meta\",\"tx-meta\",1159283194),expr__38808)))){\nreturn (new datascript.db.TxReport(self__.db_before,self__.db_after,self__.tx_data,self__.tempids,G__38796,self__.__meta,self__.__extmap,null));\n} else {\nreturn (new datascript.db.TxReport(self__.db_before,self__.db_after,self__.tx_data,self__.tempids,self__.tx_meta,self__.__meta,cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(self__.__extmap,k__4511__auto__,G__38796),null));\n}\n}\n}\n}\n}\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$ISeqable$_seq$arity$1 = (function (this__4515__auto__){\nvar self__ = this;\nvar this__4515__auto____$1 = this;\nreturn cljs.core.seq(cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"db-before\",\"db-before\",-553691536),self__.db_before,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666),self__.db_after,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761),self__.tx_data,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089),self__.tempids,null)),(new cljs.core.MapEntry(new cljs.core.Keyword(null,\"tx-meta\",\"tx-meta\",1159283194),self__.tx_meta,null))], null),self__.__extmap));\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (this__4501__auto__,G__38796){\nvar self__ = this;\nvar this__4501__auto____$1 = this;\nreturn (new datascript.db.TxReport(self__.db_before,self__.db_after,self__.tx_data,self__.tempids,self__.tx_meta,G__38796,self__.__extmap,self__.__hash));\n}));\n\n(datascript.db.TxReport.prototype.cljs$core$ICollection$_conj$arity$2 = (function (this__4507__auto__,entry__4508__auto__){\nvar self__ = this;\nvar this__4507__auto____$1 = this;\nif(cljs.core.vector_QMARK_(entry__4508__auto__)){\nreturn this__4507__auto____$1.cljs$core$IAssociative$_assoc$arity$3(null,cljs.core._nth(entry__4508__auto__,(0)),cljs.core._nth(entry__4508__auto__,(1)));\n} else {\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(cljs.core._conj,this__4507__auto____$1,entry__4508__auto__);\n}\n}));\n\n(datascript.db.TxReport.getBasis = (function (){\nreturn new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"db-before\",\"db-before\",1086839991,null),new cljs.core.Symbol(null,\"db-after\",\"db-after\",1068646861,null),new cljs.core.Symbol(null,\"tx-data\",\"tx-data\",-1720276008,null),new cljs.core.Symbol(null,\"tempids\",\"tempids\",-886926680,null),new cljs.core.Symbol(null,\"tx-meta\",\"tx-meta\",-1495152575,null)], null);\n}));\n\n(datascript.db.TxReport.cljs$lang$type = true);\n\n(datascript.db.TxReport.cljs$lang$ctorPrSeq = (function (this__4546__auto__){\nreturn (new cljs.core.List(null,\"datascript.db/TxReport\",null,(1),null));\n}));\n\n(datascript.db.TxReport.cljs$lang$ctorPrWriter = (function (this__4546__auto__,writer__4547__auto__){\nreturn cljs.core._write(writer__4547__auto__,\"datascript.db/TxReport\");\n}));\n\n/**\n * Positional factory function for datascript.db/TxReport.\n */\ndatascript.db.__GT_TxReport = (function datascript$db$__GT_TxReport(db_before,db_after,tx_data,tempids,tx_meta){\nreturn (new datascript.db.TxReport(db_before,db_after,tx_data,tempids,tx_meta,null,null,null));\n});\n\n/**\n * Factory function for datascript.db/TxReport, taking a map of keywords to field values.\n */\ndatascript.db.map__GT_TxReport = (function datascript$db$map__GT_TxReport(G__38800){\nvar extmap__4542__auto__ = (function (){var G__38810 = cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic(G__38800,new cljs.core.Keyword(null,\"db-before\",\"db-before\",-553691536),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666),new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761),new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089),new cljs.core.Keyword(null,\"tx-meta\",\"tx-meta\",1159283194)], 0));\nif(cljs.core.record_QMARK_(G__38800)){\nreturn cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentArrayMap.EMPTY,G__38810);\n} else {\nreturn G__38810;\n}\n})();\nreturn (new datascript.db.TxReport(new cljs.core.Keyword(null,\"db-before\",\"db-before\",-553691536).cljs$core$IFn$_invoke$arity$1(G__38800),new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666).cljs$core$IFn$_invoke$arity$1(G__38800),new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761).cljs$core$IFn$_invoke$arity$1(G__38800),new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089).cljs$core$IFn$_invoke$arity$1(G__38800),new cljs.core.Keyword(null,\"tx-meta\",\"tx-meta\",1159283194).cljs$core$IFn$_invoke$arity$1(G__38800),null,cljs.core.not_empty(extmap__4542__auto__),null));\n});\n\ndatascript.db.is_attr_QMARK_ = (function datascript$db$is_attr_QMARK_(db,attr,property){\nreturn cljs.core.contains_QMARK_(datascript.db._attrs_by(db,property),attr);\n});\ndatascript.db.multival_QMARK_ = (function datascript$db$multival_QMARK_(db,attr){\nreturn datascript.db.is_attr_QMARK_(db,attr,new cljs.core.Keyword(\"db.cardinality\",\"many\",\"db.cardinality/many\",772806234));\n});\ndatascript.db.ref_QMARK_ = (function datascript$db$ref_QMARK_(db,attr){\nreturn datascript.db.is_attr_QMARK_(db,attr,new cljs.core.Keyword(\"db.type\",\"ref\",\"db.type/ref\",-1728373079));\n});\ndatascript.db.component_QMARK_ = (function datascript$db$component_QMARK_(db,attr){\nreturn datascript.db.is_attr_QMARK_(db,attr,new cljs.core.Keyword(\"db\",\"isComponent\",\"db/isComponent\",423352398));\n});\ndatascript.db.indexing_QMARK_ = (function datascript$db$indexing_QMARK_(db,attr){\nreturn datascript.db.is_attr_QMARK_(db,attr,new cljs.core.Keyword(\"db\",\"index\",\"db/index\",-1531680669));\n});\ndatascript.db.tuple_QMARK_ = (function datascript$db$tuple_QMARK_(db,attr){\nreturn datascript.db.is_attr_QMARK_(db,attr,new cljs.core.Keyword(\"db.type\",\"tuple\",\"db.type/tuple\",938234914));\n});\ndatascript.db.tuple_source_QMARK_ = (function datascript$db$tuple_source_QMARK_(db,attr){\nreturn datascript.db.is_attr_QMARK_(db,attr,new cljs.core.Keyword(\"db\",\"attrTuples\",\"db/attrTuples\",860541631));\n});\ndatascript.db.entid = (function datascript$db$entid(db,eid){\nwhile(true){\nif(datascript.db.db_QMARK_(db)){\n} else {\nthrow (new Error(\"Assert failed: (db? db)\"));\n}\n\nif(((typeof eid === 'number') && ((eid > (0))))){\nif((eid > (2147483647))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Highest supported entity id is \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([(2147483647)], 0)),\", got \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([eid], 0))].join(''),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(null,\"entity-id\",\"entity-id\",1485898093),new cljs.core.Keyword(null,\"value\",\"value\",305978217),eid], null));\n} else {\nreturn eid;\n}\n} else {\nif(cljs.core.sequential_QMARK_(eid)){\nvar vec__38811 = eid;\nvar attr = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38811,(0),null);\nvar value = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38811,(1),null);\nif(cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs.core.count(eid),(2))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Lookup ref should contain 2 elements: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([eid], 0))].join(''),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"lookup-ref\",\"syntax\",\"lookup-ref/syntax\",-317304012),new cljs.core.Keyword(null,\"entity-id\",\"entity-id\",1485898093),eid], null));\n} else {\nif((!(datascript.db.is_attr_QMARK_(db,attr,new cljs.core.Keyword(\"db\",\"unique\",\"db/unique\",329396388))))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Lookup ref attribute should be marked as :db/unique: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([eid], 0))].join(''),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"lookup-ref\",\"unique\",\"lookup-ref/unique\",-960647710),new cljs.core.Keyword(null,\"entity-id\",\"entity-id\",1485898093),eid], null));\n} else {\nif((value == null)){\nreturn null;\n} else {\nreturn new cljs.core.Keyword(null,\"e\",\"e\",1381269198).cljs$core$IFn$_invoke$arity$1(cljs.core.first(datascript.db._datoms(db,new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),eid)));\n\n}\n}\n}\n} else {\nif(cljs.core.array_QMARK_(eid)){\nvar G__39492 = db;\nvar G__39493 = cljs.core.array_seq.cljs$core$IFn$_invoke$arity$1(eid);\ndb = G__39492;\neid = G__39493;\ncontinue;\n} else {\nif((eid instanceof cljs.core.Keyword)){\nreturn new cljs.core.Keyword(null,\"e\",\"e\",1381269198).cljs$core$IFn$_invoke$arity$1(cljs.core.first(datascript.db._datoms(db,new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"ident\",\"db/ident\",-737096),eid], null))));\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Expected number or lookup ref for entity id, got \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([eid], 0))].join(''),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"entity-id\",\"syntax\",\"entity-id/syntax\",1921317045),new cljs.core.Keyword(null,\"entity-id\",\"entity-id\",1485898093),eid], null));\n\n}\n}\n}\n}\nbreak;\n}\n});\ndatascript.db.entid_strict = (function datascript$db$entid_strict(db,eid){\nvar or__4253__auto__ = datascript.db.entid(db,eid);\nif(cljs.core.truth_(or__4253__auto__)){\nreturn or__4253__auto__;\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Nothing found for entity id \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([eid], 0))].join(''),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"entity-id\",\"missing\",\"entity-id/missing\",1234588374),new cljs.core.Keyword(null,\"entity-id\",\"entity-id\",1485898093),eid], null));\n}\n});\ndatascript.db.entid_some = (function datascript$db$entid_some(db,eid){\nif(cljs.core.truth_(eid)){\nreturn datascript.db.entid_strict(db,eid);\n} else {\nreturn null;\n}\n});\ndatascript.db.validate_datom = (function datascript$db$validate_datom(db,datom){\nif(cljs.core.truth_((function (){var and__4251__auto__ = datom.datascript$db$IDatom$datom_added$arity$1(null);\nif(cljs.core.truth_(and__4251__auto__)){\nreturn datascript.db.is_attr_QMARK_(db,datom.a,new cljs.core.Keyword(\"db\",\"unique\",\"db/unique\",329396388));\n} else {\nreturn and__4251__auto__;\n}\n})())){\nvar temp__5757__auto__ = cljs.core.not_empty(datascript.db._datoms(db,new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [datom.a,datom.v], null)));\nif((temp__5757__auto__ == null)){\nreturn null;\n} else {\nvar found = temp__5757__auto__;\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Cannot add \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datom], 0)),\" because of unique constraint: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([found], 0))].join(''),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"unique\",\"transact/unique\",-940992320),new cljs.core.Keyword(null,\"attribute\",\"attribute\",-2074029119),datom.a,new cljs.core.Keyword(null,\"datom\",\"datom\",-371556090),datom], null));\n}\n} else {\nreturn null;\n}\n});\ndatascript.db.validate_attr = (function datascript$db$validate_attr(attr,at){\nif((((attr instanceof cljs.core.Keyword)) || (typeof attr === 'string'))){\nreturn null;\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Bad entity attribute \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([attr], 0)),\" at \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([at], 0)),\", expected keyword or string\"].join(''),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"syntax\",\"transact/syntax\",-299207078),new cljs.core.Keyword(null,\"attribute\",\"attribute\",-2074029119),attr,new cljs.core.Keyword(null,\"context\",\"context\",-830191113),at], null));\n}\n});\ndatascript.db.validate_val = (function datascript$db$validate_val(v,at){\nif((v == null)){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Cannot store nil as a value at \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([at], 0))].join(''),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"syntax\",\"transact/syntax\",-299207078),new cljs.core.Keyword(null,\"value\",\"value\",305978217),v,new cljs.core.Keyword(null,\"context\",\"context\",-830191113),at], null));\n} else {\nreturn null;\n}\n});\ndatascript.db.current_tx = (function datascript$db$current_tx(report){\nreturn (cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(report,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"db-before\",\"db-before\",-553691536),new cljs.core.Keyword(null,\"max-tx\",\"max-tx\",1119558339)], null)) + (1));\n});\ndatascript.db.next_eid = (function datascript$db$next_eid(db){\nreturn (new cljs.core.Keyword(null,\"max-eid\",\"max-eid\",2134868075).cljs$core$IFn$_invoke$arity$1(db) + (1));\n});\ndatascript.db.tx_id_QMARK_ = (function datascript$db$tx_id_QMARK_(e){\nreturn ((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(e,new cljs.core.Keyword(\"db\",\"current-tx\",\"db/current-tx\",1600722132))) || (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(e,\":db/current-tx\")) || (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(e,\"datomic.tx\")) || (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(e,\"datascript.tx\")))))));\n});\ndatascript.db.tempid_QMARK_ = (function datascript$db$tempid_QMARK_(x){\nreturn ((((typeof x === 'number') && ((x < (0))))) || (typeof x === 'string'));\n});\ndatascript.db.new_eid_QMARK_ = (function datascript$db$new_eid_QMARK_(db,eid){\nreturn (((eid > new cljs.core.Keyword(null,\"max-eid\",\"max-eid\",2134868075).cljs$core$IFn$_invoke$arity$1(db))) && ((eid < (536870912))));\n});\ndatascript.db.advance_max_eid = (function datascript$db$advance_max_eid(db,eid){\nvar G__38814 = db;\nif(datascript.db.new_eid_QMARK_(db,eid)){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(G__38814,new cljs.core.Keyword(null,\"max-eid\",\"max-eid\",2134868075),eid);\n} else {\nreturn G__38814;\n}\n});\ndatascript.db.allocate_eid = (function datascript$db$allocate_eid(var_args){\nvar G__38816 = arguments.length;\nswitch (G__38816) {\ncase 2:\nreturn datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));\n\nbreak;\ncase 3:\nreturn datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3((arguments[(0)]),(arguments[(1)]),(arguments[(2)]));\n\nbreak;\ndefault:\nthrow (new Error([\"Invalid arity: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));\n\n}\n});\n\n(datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$2 = (function (report,eid){\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$4(report,new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666),datascript.db.advance_max_eid,eid);\n}));\n\n(datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3 = (function (report,e,eid){\nvar G__38817 = report;\nvar G__38817__$1 = ((datascript.db.tx_id_QMARK_(e))?cljs.core.update.cljs$core$IFn$_invoke$arity$5(G__38817,new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089),cljs.core.assoc,e,eid):G__38817);\nvar G__38817__$2 = ((datascript.db.tempid_QMARK_(e))?cljs.core.update.cljs$core$IFn$_invoke$arity$5(G__38817__$1,new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089),cljs.core.assoc,e,eid):G__38817__$1);\nvar G__38817__$3 = (((((!(datascript.db.tempid_QMARK_(e)))) && (datascript.db.new_eid_QMARK_(new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666).cljs$core$IFn$_invoke$arity$1(report),eid))))?cljs.core.update.cljs$core$IFn$_invoke$arity$5(G__38817__$2,new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089),cljs.core.assoc,eid,eid):G__38817__$2);\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$4(G__38817__$3,new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666),datascript.db.advance_max_eid,eid);\n\n}));\n\n(datascript.db.allocate_eid.cljs$lang$maxFixedArity = 3);\n\ndatascript.db.with_datom = (function datascript$db$with_datom(db,datom){\ndatascript.db.validate_datom(db,datom);\n\nvar indexing_QMARK_ = datascript.db.indexing_QMARK_(db,datom.a);\nif(cljs.core.truth_(datom.datascript$db$IDatom$datom_added$arity$1(null))){\nvar G__38818 = db;\nvar G__38818__$1 = cljs.core.update.cljs$core$IFn$_invoke$arity$5(G__38818,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),me.tonsky.persistent_sorted_set.conj,datom,datascript.db.cmp_datoms_eavt_quick)\n;\nvar G__38818__$2 = cljs.core.update.cljs$core$IFn$_invoke$arity$5(G__38818__$1,new cljs.core.Keyword(null,\"aevt\",\"aevt\",-585148059),me.tonsky.persistent_sorted_set.conj,datom,datascript.db.cmp_datoms_aevt_quick)\n;\nvar G__38818__$3 = ((indexing_QMARK_)?cljs.core.update.cljs$core$IFn$_invoke$arity$5(G__38818__$2,new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),me.tonsky.persistent_sorted_set.conj,datom,datascript.db.cmp_datoms_avet_quick):G__38818__$2);\nvar G__38818__$4 = datascript.db.advance_max_eid(G__38818__$3,datom.e)\n;\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(G__38818__$4,new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596),cljs.core.atom.cljs$core$IFn$_invoke$arity$1((0)));\n\n} else {\nvar temp__5755__auto__ = datascript.db.fsearch(db,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [datom.e,datom.a,datom.v], null));\nif((temp__5755__auto__ == null)){\nreturn db;\n} else {\nvar removing = temp__5755__auto__;\nvar G__38819 = db;\nvar G__38819__$1 = cljs.core.update.cljs$core$IFn$_invoke$arity$5(G__38819,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),me.tonsky.persistent_sorted_set.disj,removing,datascript.db.cmp_datoms_eavt_quick)\n;\nvar G__38819__$2 = cljs.core.update.cljs$core$IFn$_invoke$arity$5(G__38819__$1,new cljs.core.Keyword(null,\"aevt\",\"aevt\",-585148059),me.tonsky.persistent_sorted_set.disj,removing,datascript.db.cmp_datoms_aevt_quick)\n;\nvar G__38819__$3 = ((indexing_QMARK_)?cljs.core.update.cljs$core$IFn$_invoke$arity$5(G__38819__$2,new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),me.tonsky.persistent_sorted_set.disj,removing,datascript.db.cmp_datoms_avet_quick):G__38819__$2);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(G__38819__$3,new cljs.core.Keyword(null,\"hash\",\"hash\",-13781596),cljs.core.atom.cljs$core$IFn$_invoke$arity$1((0)));\n\n}\n}\n});\ndatascript.db.queue_tuple = (function datascript$db$queue_tuple(queue,tuple,idx,db,e,a,v){\nvar tuple_value = (function (){var or__4253__auto__ = cljs.core.get.cljs$core$IFn$_invoke$arity$2(queue,tuple);\nif(cljs.core.truth_(or__4253__auto__)){\nreturn or__4253__auto__;\n} else {\nvar or__4253__auto____$1 = new cljs.core.Keyword(null,\"v\",\"v\",21465059).cljs$core$IFn$_invoke$arity$1(cljs.core.first(datascript.db._datoms(db,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [e,tuple], null))));\nif(cljs.core.truth_(or__4253__auto____$1)){\nreturn or__4253__auto____$1;\n} else {\nreturn cljs.core.vec(cljs.core.repeat.cljs$core$IFn$_invoke$arity$2(cljs.core.count(new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092).cljs$core$IFn$_invoke$arity$1(cljs.core.get.cljs$core$IFn$_invoke$arity$2(datascript.db._schema(db),tuple))),null));\n}\n}\n})();\nvar tuple_value_SINGLEQUOTE_ = cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(tuple_value,idx,v);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(queue,tuple,tuple_value_SINGLEQUOTE_);\n});\ndatascript.db.queue_tuples = (function datascript$db$queue_tuples(queue,tuples,db,e,a,v){\nreturn cljs.core.reduce_kv((function (queue__$1,tuple,idx){\nreturn datascript.db.queue_tuple(queue__$1,tuple,idx,db,e,a,v);\n}),queue,tuples);\n});\ndatascript.db.transact_report = (function datascript$db$transact_report(report,datom){\nvar db = new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666).cljs$core$IFn$_invoke$arity$1(report);\nvar a = new cljs.core.Keyword(null,\"a\",\"a\",-2123407586).cljs$core$IFn$_invoke$arity$1(datom);\nvar report_SINGLEQUOTE_ = cljs.core.update.cljs$core$IFn$_invoke$arity$4(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(report,new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666),datascript.db.with_datom(db,datom)),new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761),cljs.core.conj,datom);\nif(datascript.db.tuple_source_QMARK_(db,a)){\nvar e = new cljs.core.Keyword(null,\"e\",\"e\",1381269198).cljs$core$IFn$_invoke$arity$1(datom);\nvar v = (cljs.core.truth_(datascript.db.datom_added(datom))?new cljs.core.Keyword(null,\"v\",\"v\",21465059).cljs$core$IFn$_invoke$arity$1(datom):null);\nvar queue = (function (){var or__4253__auto__ = cljs.core.get.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"datascript.db\",\"queued-tuples\",\"datascript.db/queued-tuples\",-762852029).cljs$core$IFn$_invoke$arity$1(report_SINGLEQUOTE_),e);\nif(cljs.core.truth_(or__4253__auto__)){\nreturn or__4253__auto__;\n} else {\nreturn cljs.core.PersistentArrayMap.EMPTY;\n}\n})();\nvar tuples = cljs.core.get.cljs$core$IFn$_invoke$arity$2(datascript.db._attrs_by(db,new cljs.core.Keyword(\"db\",\"attrTuples\",\"db/attrTuples\",860541631)),a);\nvar queue_SINGLEQUOTE_ = datascript.db.queue_tuples(queue,tuples,db,e,a,v);\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$5(report_SINGLEQUOTE_,new cljs.core.Keyword(\"datascript.db\",\"queued-tuples\",\"datascript.db/queued-tuples\",-762852029),cljs.core.assoc,e,queue_SINGLEQUOTE_);\n} else {\nreturn report_SINGLEQUOTE_;\n}\n});\ndatascript.db.reverse_ref_QMARK_ = (function datascript$db$reverse_ref_QMARK_(attr){\nif((attr instanceof cljs.core.Keyword)){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(\"_\",cljs.core.nth.cljs$core$IFn$_invoke$arity$2(cljs.core.name(attr),(0)));\n} else {\nif(typeof attr === 'string'){\nreturn cljs.core.boolean$(cljs.core.re_matches(/(?:([^\\/]+)\\/)?_([^\\/]+)/,attr));\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Bad attribute type: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([attr], 0)),\", expected keyword or string\"].join(''),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"syntax\",\"transact/syntax\",-299207078),new cljs.core.Keyword(null,\"attribute\",\"attribute\",-2074029119),attr], null));\n\n}\n}\n});\ndatascript.db.reverse_ref = (function datascript$db$reverse_ref(attr){\nif((attr instanceof cljs.core.Keyword)){\nif(datascript.db.reverse_ref_QMARK_(attr)){\nreturn cljs.core.keyword.cljs$core$IFn$_invoke$arity$2(cljs.core.namespace(attr),cljs.core.subs.cljs$core$IFn$_invoke$arity$2(cljs.core.name(attr),(1)));\n} else {\nreturn cljs.core.keyword.cljs$core$IFn$_invoke$arity$2(cljs.core.namespace(attr),[\"_\",cljs.core.name(attr)].join(''));\n}\n} else {\nif(typeof attr === 'string'){\nvar vec__38820 = cljs.core.re_matches(/(?:([^\\/]+)\\/)?([^\\/]+)/,attr);\nvar _ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38820,(0),null);\nvar ns = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38820,(1),null);\nvar name = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38820,(2),null);\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(\"_\",cljs.core.nth.cljs$core$IFn$_invoke$arity$2(name,(0)))){\nif(cljs.core.truth_(ns)){\nreturn [cljs.core.str.cljs$core$IFn$_invoke$arity$1(ns),\"/\",cljs.core.subs.cljs$core$IFn$_invoke$arity$2(name,(1))].join('');\n} else {\nreturn cljs.core.subs.cljs$core$IFn$_invoke$arity$2(name,(1));\n}\n} else {\nif(cljs.core.truth_(ns)){\nreturn [cljs.core.str.cljs$core$IFn$_invoke$arity$1(ns),\"/_\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(name)].join('');\n} else {\nreturn [\"_\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(name)].join('');\n}\n}\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Bad attribute type: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([attr], 0)),\", expected keyword or string\"].join(''),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"syntax\",\"transact/syntax\",-299207078),new cljs.core.Keyword(null,\"attribute\",\"attribute\",-2074029119),attr], null));\n\n}\n}\n});\n/**\n * Returns [entity' upserts]. Upsert attributes that resolve to existing entities\n * are removed from entity, rest are kept in entity for insertion. No validation is performed.\n * \n * upserts :: {:name  {\"Ivan\"  1}\n *             :email {\"ivan@\" 2}\n *             :alias {\"abc\"   3\n *                     \"def\"   4}}}\n */\ndatascript.db.resolve_upserts = (function datascript$db$resolve_upserts(db,entity){\nvar temp__5755__auto__ = cljs.core.not_empty(datascript.db._attrs_by(db,new cljs.core.Keyword(\"db.unique\",\"identity\",\"db.unique/identity\",1675950722)));\nif((temp__5755__auto__ == null)){\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [entity,null], null);\n} else {\nvar idents = temp__5755__auto__;\nvar resolve = (function (a,v){\nreturn new cljs.core.Keyword(null,\"e\",\"e\",1381269198).cljs$core$IFn$_invoke$arity$1(cljs.core.first(datascript.db._datoms(db,new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [a,v], null))));\n});\nvar split = (function (a,vs){\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (acc,v){\nvar temp__5755__auto____$1 = resolve(a,v);\nif((temp__5755__auto____$1 == null)){\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$4(acc,(0),cljs.core.conj,v);\n} else {\nvar e = temp__5755__auto____$1;\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$5(acc,(1),cljs.core.assoc,v,e);\n}\n}),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.PersistentVector.EMPTY,cljs.core.PersistentArrayMap.EMPTY], null),vs);\n});\nreturn cljs.core.reduce_kv((function (p__38823,a,v){\nvar vec__38824 = p__38823;\nvar entity__$1 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38824,(0),null);\nvar upserts = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38824,(1),null);\nif((!(cljs.core.contains_QMARK_(idents,a)))){\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(entity__$1,a,v),upserts], null);\n} else {\nif(((datascript.db.multival_QMARK_(db,a)) && (((me.tonsky.persistent_sorted_set.arrays.array_QMARK_(v)) || (((cljs.core.coll_QMARK_(v)) && ((!(cljs.core.map_QMARK_(v)))))))))){\nvar vec__38827 = split(a,v);\nvar insert = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38827,(0),null);\nvar upsert = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38827,(1),null);\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (){var G__38830 = entity__$1;\nif((!(cljs.core.empty_QMARK_(insert)))){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(G__38830,a,insert);\n} else {\nreturn G__38830;\n}\n})(),(function (){var G__38831 = upserts;\nif((!(cljs.core.empty_QMARK_(upsert)))){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(G__38831,a,upsert);\n} else {\nreturn G__38831;\n}\n})()], null);\n} else {\nvar temp__5755__auto____$1 = resolve(a,v);\nif((temp__5755__auto____$1 == null)){\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(entity__$1,a,v),upserts], null);\n} else {\nvar e = temp__5755__auto____$1;\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [entity__$1,cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(upserts,a,cljs.core.PersistentArrayMap.createAsIfByAssoc([v,e]))], null);\n}\n\n}\n}\n}),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.PersistentArrayMap.EMPTY,cljs.core.PersistentArrayMap.EMPTY], null),entity);\n}\n});\n/**\n * Throws if not all upserts point to the same entity. \n * Returns single eid that all upserts point to, or null.\n */\ndatascript.db.validate_upserts = (function datascript$db$validate_upserts(entity,upserts){\nvar upsert_ids = cljs.core.reduce_kv((function (m,a,v__GT_e){\nreturn cljs.core.reduce_kv((function (m__$1,v,e){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(m__$1,e,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [a,v], null));\n}),m,v__GT_e);\n}),cljs.core.PersistentArrayMap.EMPTY,upserts);\nif(((2) <= cljs.core.count(upsert_ids))){\nvar vec__38832 = cljs.core.first(upsert_ids);\nvar e1 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38832,(0),null);\nvar vec__38835 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38832,(1),null);\nvar a1 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38835,(0),null);\nvar v1 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38835,(1),null);\nvar vec__38838 = cljs.core.second(upsert_ids);\nvar e2 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38838,(0),null);\nvar vec__38841 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38838,(1),null);\nvar a2 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38841,(0),null);\nvar v2 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38841,(1),null);\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Conflicting upserts: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [a1,v1], null)], 0)),\" resolves to \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([e1], 0)),\", but \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [a2,v2], null)], 0)),\" resolves to \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([e2], 0))].join(''),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"upsert\",\"transact/upsert\",412688078),new cljs.core.Keyword(null,\"assertion\",\"assertion\",-1645134882),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [e1,a1,v1], null),new cljs.core.Keyword(null,\"conflict\",\"conflict\",1978796605),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [e2,a2,v2], null)], null));\n} else {\nvar vec__38844 = cljs.core.first(upsert_ids);\nvar upsert_id = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38844,(0),null);\nvar vec__38847 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38844,(1),null);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38847,(0),null);\nvar v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38847,(1),null);\nvar eid = new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098).cljs$core$IFn$_invoke$arity$1(entity);\nif((((!((upsert_id == null)))) && ((((!((eid == null)))) && ((((!(datascript.db.tempid_QMARK_(eid)))) && (cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(upsert_id,eid)))))))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Conflicting upsert: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [a,v], null)], 0)),\" resolves to \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([upsert_id], 0)),\", but entity already has :db/id \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([eid], 0))].join(''),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"upsert\",\"transact/upsert\",412688078),new cljs.core.Keyword(null,\"assertion\",\"assertion\",-1645134882),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [upsert_id,a,v], null),new cljs.core.Keyword(null,\"conflict\",\"conflict\",1978796605),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098),eid], null)], null));\n} else {\n}\n\nreturn upsert_id;\n}\n});\ndatascript.db.maybe_wrap_multival = (function datascript$db$maybe_wrap_multival(db,a,vs){\nif((!(((datascript.db.reverse_ref_QMARK_(a)) || (datascript.db.multival_QMARK_(db,a)))))){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [vs], null);\n} else {\nif((!(((me.tonsky.persistent_sorted_set.arrays.array_QMARK_(vs)) || (((cljs.core.coll_QMARK_(vs)) && ((!(cljs.core.map_QMARK_(vs)))))))))){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [vs], null);\n} else {\nif(((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs.core.count(vs),(2))) && (datascript.db.is_attr_QMARK_(db,cljs.core.first(vs),new cljs.core.Keyword(\"db.unique\",\"identity\",\"db.unique/identity\",1675950722))))){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [vs], null);\n} else {\nreturn vs;\n\n}\n}\n}\n});\ndatascript.db.explode = (function datascript$db$explode(db,entity){\nvar eid = new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098).cljs$core$IFn$_invoke$arity$1(entity);\nvar a_PLUS_vs = cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.concat,cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (acc,p__38850){\nvar vec__38851 = p__38850;\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38851,(0),null);\nvar vs = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38851,(1),null);\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$4(acc,((datascript.db.tuple_QMARK_(db,a))?(1):(0)),cljs.core.conj,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [a,vs], null));\n}),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.PersistentVector.EMPTY,cljs.core.PersistentVector.EMPTY], null),entity));\nvar iter__4652__auto__ = (function datascript$db$explode_$_iter__38854(s__38855){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__38855__$1 = s__38855;\nwhile(true){\nvar temp__5753__auto__ = cljs.core.seq(s__38855__$1);\nif(temp__5753__auto__){\nvar xs__6308__auto__ = temp__5753__auto__;\nvar vec__38860 = cljs.core.first(xs__6308__auto__);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38860,(0),null);\nvar vs = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38860,(1),null);\nif(cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(a,new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098))){\nvar _ = datascript.db.validate_attr(a,cljs.core.PersistentArrayMap.createAsIfByAssoc([new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098),eid,a,vs]));\nvar reverse_QMARK_ = datascript.db.reverse_ref_QMARK_(a);\nvar straight_a = ((reverse_QMARK_)?datascript.db.reverse_ref(a):a);\nvar ___$1 = ((((reverse_QMARK_) && ((!(datascript.db.ref_QMARK_(db,straight_a))))))?(function(){throw cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Bad attribute \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a], 0)),\": reverse attribute name requires {:db/valueType :db.type/ref} in schema\"].join(''),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"syntax\",\"transact/syntax\",-299207078),new cljs.core.Keyword(null,\"attribute\",\"attribute\",-2074029119),a,new cljs.core.Keyword(null,\"context\",\"context\",-830191113),cljs.core.PersistentArrayMap.createAsIfByAssoc([new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098),eid,a,vs])], null))})():null);\nvar iterys__4648__auto__ = ((function (s__38855__$1,_,reverse_QMARK_,straight_a,___$1,vec__38860,a,vs,xs__6308__auto__,temp__5753__auto__,eid,a_PLUS_vs){\nreturn (function datascript$db$explode_$_iter__38854_$_iter__38856(s__38857){\nreturn (new cljs.core.LazySeq(null,((function (s__38855__$1,_,reverse_QMARK_,straight_a,___$1,vec__38860,a,vs,xs__6308__auto__,temp__5753__auto__,eid,a_PLUS_vs){\nreturn (function (){\nvar s__38857__$1 = s__38857;\nwhile(true){\nvar temp__5753__auto____$1 = cljs.core.seq(s__38857__$1);\nif(temp__5753__auto____$1){\nvar s__38857__$2 = temp__5753__auto____$1;\nif(cljs.core.chunked_seq_QMARK_(s__38857__$2)){\nvar c__4650__auto__ = cljs.core.chunk_first(s__38857__$2);\nvar size__4651__auto__ = cljs.core.count(c__4650__auto__);\nvar b__38859 = cljs.core.chunk_buffer(size__4651__auto__);\nif((function (){var i__38858 = (0);\nwhile(true){\nif((i__38858 < size__4651__auto__)){\nvar v = cljs.core._nth(c__4650__auto__,i__38858);\ncljs.core.chunk_append(b__38859,((((datascript.db.ref_QMARK_(db,straight_a)) && (cljs.core.map_QMARK_(v))))?cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(v,datascript.db.reverse_ref(a),eid):((reverse_QMARK_)?new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"add\",\"db/add\",235286841),v,straight_a,eid], null):new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"add\",\"db/add\",235286841),eid,straight_a,v], null))));\n\nvar G__39560 = (i__38858 + (1));\ni__38858 = G__39560;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__38859),datascript$db$explode_$_iter__38854_$_iter__38856(cljs.core.chunk_rest(s__38857__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__38859),null);\n}\n} else {\nvar v = cljs.core.first(s__38857__$2);\nreturn cljs.core.cons(((((datascript.db.ref_QMARK_(db,straight_a)) && (cljs.core.map_QMARK_(v))))?cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(v,datascript.db.reverse_ref(a),eid):((reverse_QMARK_)?new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"add\",\"db/add\",235286841),v,straight_a,eid], null):new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"add\",\"db/add\",235286841),eid,straight_a,v], null))),datascript$db$explode_$_iter__38854_$_iter__38856(cljs.core.rest(s__38857__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n});})(s__38855__$1,_,reverse_QMARK_,straight_a,___$1,vec__38860,a,vs,xs__6308__auto__,temp__5753__auto__,eid,a_PLUS_vs))\n,null,null));\n});})(s__38855__$1,_,reverse_QMARK_,straight_a,___$1,vec__38860,a,vs,xs__6308__auto__,temp__5753__auto__,eid,a_PLUS_vs))\n;\nvar fs__4649__auto__ = cljs.core.seq(iterys__4648__auto__(datascript.db.maybe_wrap_multival(db,a,vs)));\nif(fs__4649__auto__){\nreturn cljs.core.concat.cljs$core$IFn$_invoke$arity$2(fs__4649__auto__,datascript$db$explode_$_iter__38854(cljs.core.rest(s__38855__$1)));\n} else {\nvar G__39563 = cljs.core.rest(s__38855__$1);\ns__38855__$1 = G__39563;\ncontinue;\n}\n} else {\nvar G__39564 = cljs.core.rest(s__38855__$1);\ns__38855__$1 = G__39564;\ncontinue;\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4652__auto__(a_PLUS_vs);\n});\ndatascript.db.transact_add = (function datascript$db$transact_add(report,p__38863){\nvar vec__38864 = p__38863;\nvar _ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38864,(0),null);\nvar e = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38864,(1),null);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38864,(2),null);\nvar v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38864,(3),null);\nvar tx = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38864,(4),null);\nvar ent = vec__38864;\ndatascript.db.validate_attr(a,ent);\n\ndatascript.db.validate_val(v,ent);\n\nvar tx__$1 = (function (){var or__4253__auto__ = tx;\nif(cljs.core.truth_(or__4253__auto__)){\nreturn or__4253__auto__;\n} else {\nreturn datascript.db.current_tx(report);\n}\n})();\nvar db = new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666).cljs$core$IFn$_invoke$arity$1(report);\nvar e__$1 = datascript.db.entid_strict(db,e);\nvar v__$1 = ((datascript.db.ref_QMARK_(db,a))?datascript.db.entid_strict(db,v):v);\nvar new_datom = datascript.db.datom.cljs$core$IFn$_invoke$arity$4(e__$1,a,v__$1,tx__$1);\nvar multival_QMARK_ = datascript.db.multival_QMARK_(db,a);\nvar old_datom = ((multival_QMARK_)?datascript.db.fsearch(db,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [e__$1,a,v__$1], null)):datascript.db.fsearch(db,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [e__$1,a], null)));\nif((old_datom == null)){\nreturn datascript.db.transact_report(report,new_datom);\n} else {\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(old_datom.v,v__$1)){\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$4(report,new cljs.core.Keyword(\"datascript.db\",\"tx-redundant\",\"datascript.db/tx-redundant\",-1117921977),datascript.db.conjv,new_datom);\n} else {\nreturn datascript.db.transact_report(datascript.db.transact_report(report,datascript.db.datom.cljs$core$IFn$_invoke$arity$5(e__$1,a,old_datom.v,tx__$1,false)),new_datom);\n\n}\n}\n});\ndatascript.db.transact_retract_datom = (function datascript$db$transact_retract_datom(report,d){\nvar tx = datascript.db.current_tx(report);\nreturn datascript.db.transact_report(report,datascript.db.datom.cljs$core$IFn$_invoke$arity$5(d.e,d.a,d.v,tx,false));\n});\ndatascript.db.retract_components = (function datascript$db$retract_components(db,datoms){\nreturn cljs.core.into.cljs$core$IFn$_invoke$arity$3(cljs.core.PersistentHashSet.EMPTY,cljs.core.comp.cljs$core$IFn$_invoke$arity$2(cljs.core.filter.cljs$core$IFn$_invoke$arity$1((function (d){\nreturn datascript.db.component_QMARK_(db,d.a);\n})),cljs.core.map.cljs$core$IFn$_invoke$arity$1((function (d){\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db.fn\",\"retractEntity\",\"db.fn/retractEntity\",-1423535441),d.v], null);\n}))),datoms);\n});\ndatascript.db.retry_with_tempid = (function datascript$db$retry_with_tempid(initial_report,report,es,tempid,upserted_eid){\nif(cljs.core.contains_QMARK_(new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089).cljs$core$IFn$_invoke$arity$1(initial_report),tempid)){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Conflicting upsert: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([tempid], 0)),\" resolves\",\" both to \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([upserted_eid], 0)),\" and \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(initial_report,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089),tempid], null))], 0))].join(''),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"upsert\",\"transact/upsert\",412688078)], null));\n} else {\nvar tempids_SINGLEQUOTE_ = cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089).cljs$core$IFn$_invoke$arity$1(report),tempid,upserted_eid);\nvar report_SINGLEQUOTE_ = cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(initial_report,new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089),tempids_SINGLEQUOTE_);\nreturn (datascript.db.transact_tx_data.cljs$core$IFn$_invoke$arity$2 ? datascript.db.transact_tx_data.cljs$core$IFn$_invoke$arity$2(report_SINGLEQUOTE_,es) : datascript.db.transact_tx_data.call(null,report_SINGLEQUOTE_,es));\n}\n});\ndatascript.db.builtin_fn_QMARK_ = new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 8, [new cljs.core.Keyword(\"db.fn\",\"call\",\"db.fn/call\",-151594418),null,new cljs.core.Keyword(\"db\",\"cas\",\"db/cas\",-451542322),null,new cljs.core.Keyword(\"db.fn\",\"retractEntity\",\"db.fn/retractEntity\",-1423535441),null,new cljs.core.Keyword(\"db\",\"retractEntity\",\"db/retractEntity\",-1452737935),null,new cljs.core.Keyword(\"db\",\"retract\",\"db/retract\",-1549825231),null,new cljs.core.Keyword(\"db.fn\",\"retractAttribute\",\"db.fn/retractAttribute\",937402164),null,new cljs.core.Keyword(\"db.fn\",\"cas\",\"db.fn/cas\",-379352172),null,new cljs.core.Keyword(\"db\",\"add\",\"db/add\",235286841),null], null), null);\ndatascript.db.flush_tuples = (function datascript$db$flush_tuples(report){\nvar db = new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666).cljs$core$IFn$_invoke$arity$1(report);\nvar schema = datascript.db._schema(db);\nvar attr_tuples = datascript.db._attrs_by(db,new cljs.core.Keyword(\"db\",\"attrTuples\",\"db/attrTuples\",860541631));\nreturn cljs.core.reduce_kv((function (entities,eid,tuples_PLUS_values){\nreturn cljs.core.reduce_kv((function (entities__$1,tuple,value){\nvar value__$1 = ((cljs.core.every_QMARK_(cljs.core.nil_QMARK_,value))?null:value);\nvar current = new cljs.core.Keyword(null,\"v\",\"v\",21465059).cljs$core$IFn$_invoke$arity$1(cljs.core.first(datascript.db._datoms(db,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [eid,tuple], null))));\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(value__$1,current)){\nreturn entities__$1;\n} else {\nif((value__$1 == null)){\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(entities__$1,cljs.core.with_meta(new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"retract\",\"db/retract\",-1549825231),eid,tuple,current], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(\"datascript.db\",\"internal\",\"datascript.db/internal\",-249301114),true], null)));\n} else {\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(entities__$1,cljs.core.with_meta(new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"add\",\"db/add\",235286841),eid,tuple,value__$1], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(\"datascript.db\",\"internal\",\"datascript.db/internal\",-249301114),true], null)));\n\n}\n}\n}),entities,tuples_PLUS_values);\n}),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(\"datascript.db\",\"queued-tuples\",\"datascript.db/queued-tuples\",-762852029).cljs$core$IFn$_invoke$arity$1(report));\n});\ndatascript.db.check_value_tempids = (function datascript$db$check_value_tempids(report){\nvar all_tempids = new cljs.core.Keyword(\"datascript.db\",\"value-tempids\",\"datascript.db/value-tempids\",244806162).cljs$core$IFn$_invoke$arity$1(report);\nvar reduce_fn = (function (tempids,datom){\nif(cljs.core.truth_(datascript.db.datom_added(datom))){\nreturn cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(tempids,new cljs.core.Keyword(null,\"e\",\"e\",1381269198).cljs$core$IFn$_invoke$arity$1(datom));\n} else {\nreturn tempids;\n}\n});\nvar unused = cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(reduce_fn,all_tempids,cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761).cljs$core$IFn$_invoke$arity$1(report),new cljs.core.Keyword(\"datascript.db\",\"tx-redundant\",\"datascript.db/tx-redundant\",-1117921977).cljs$core$IFn$_invoke$arity$1(report)));\nif(cljs.core.empty_QMARK_(unused)){\nreturn cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic(report,new cljs.core.Keyword(\"datascript.db\",\"value-tempids\",\"datascript.db/value-tempids\",244806162),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(\"datascript.db\",\"tx-redundant\",\"datascript.db/tx-redundant\",-1117921977)], 0));\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Tempids used only as value in transaction: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.sort.cljs$core$IFn$_invoke$arity$1(cljs.core.vals(unused))], 0))].join(''),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"syntax\",\"transact/syntax\",-299207078),new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089),unused], null));\n}\n});\ndatascript.db.transact_tx_data = (function datascript$db$transact_tx_data(initial_report,initial_es){\nif((((initial_es == null)) || (cljs.core.sequential_QMARK_(initial_es)))){\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Bad transaction data \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([initial_es], 0)),\", expected sequential collection\"].join(''),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"syntax\",\"transact/syntax\",-299207078),new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761),initial_es], null));\n}\n\nvar initial_report_SINGLEQUOTE_ = initial_report;\nvar has_tuples_QMARK_ = (!(cljs.core.empty_QMARK_(datascript.db._attrs_by(new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666).cljs$core$IFn$_invoke$arity$1(initial_report),new cljs.core.Keyword(\"db.type\",\"tuple\",\"db.type/tuple\",938234914)))));\nvar initial_es_SINGLEQUOTE_ = ((has_tuples_QMARK_)?cljs.core.interleave.cljs$core$IFn$_invoke$arity$2(initial_es,cljs.core.repeat.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(\"datascript.db\",\"flush-tuples\",\"datascript.db/flush-tuples\",-797350002))):initial_es);\nvar report = initial_report_SINGLEQUOTE_;\nvar es = initial_es_SINGLEQUOTE_;\nwhile(true){\nif(cljs.core.empty_QMARK_(es)){\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$5(cljs.core.update.cljs$core$IFn$_invoke$arity$5(datascript.db.check_value_tempids(report),new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089),cljs.core.assoc,new cljs.core.Keyword(\"db\",\"current-tx\",\"db/current-tx\",1600722132),datascript.db.current_tx(report)),new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666),cljs.core.update,new cljs.core.Keyword(null,\"max-tx\",\"max-tx\",1119558339),cljs.core.inc);\n} else {\nvar vec__38889 = es;\nvar seq__38890 = cljs.core.seq(vec__38889);\nvar first__38891 = cljs.core.first(seq__38890);\nvar seq__38890__$1 = cljs.core.next(seq__38890);\nvar entity = first__38891;\nvar entities = seq__38890__$1;\nif((entity == null)){\nvar G__39586 = report;\nvar G__39587 = entities;\nreport = G__39586;\nes = G__39587;\ncontinue;\n} else {\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\"datascript.db\",\"flush-tuples\",\"datascript.db/flush-tuples\",-797350002),entity)){\nif(cljs.core.contains_QMARK_(report,new cljs.core.Keyword(\"datascript.db\",\"queued-tuples\",\"datascript.db/queued-tuples\",-762852029))){\nvar G__39588 = cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(report,new cljs.core.Keyword(\"datascript.db\",\"queued-tuples\",\"datascript.db/queued-tuples\",-762852029));\nvar G__39589 = cljs.core.concat.cljs$core$IFn$_invoke$arity$2(datascript.db.flush_tuples(report),entities);\nreport = G__39588;\nes = G__39589;\ncontinue;\n} else {\nvar G__39590 = report;\nvar G__39591 = entities;\nreport = G__39590;\nes = G__39591;\ncontinue;\n}\n} else {\nvar db = new cljs.core.Keyword(null,\"db-after\",\"db-after\",-571884666).cljs$core$IFn$_invoke$arity$1(report);\nvar tempids = new cljs.core.Keyword(null,\"tempids\",\"tempids\",1767509089).cljs$core$IFn$_invoke$arity$1(report);\nif(cljs.core.map_QMARK_(entity)){\nvar old_eid = new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098).cljs$core$IFn$_invoke$arity$1(entity);\nif(datascript.db.tx_id_QMARK_(old_eid)){\nvar id = datascript.db.current_tx(report);\nvar G__39592 = datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3(report,old_eid,id);\nvar G__39593 = cljs.core.cons(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(entity,new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098),id),entities);\nreport = G__39592;\nes = G__39593;\ncontinue;\n} else {\nif(cljs.core.sequential_QMARK_(old_eid)){\nvar id = datascript.db.entid_strict(db,old_eid);\nvar G__39596 = report;\nvar G__39597 = cljs.core.cons(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(entity,new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098),id),entities);\nreport = G__39596;\nes = G__39597;\ncontinue;\n} else {\nvar vec__38892 = datascript.db.resolve_upserts(db,entity);\nvar entity_SINGLEQUOTE_ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38892,(0),null);\nvar upserts = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38892,(1),null);\nvar upserted_eid = datascript.db.validate_upserts(entity_SINGLEQUOTE_,upserts);\nif((!((upserted_eid == null)))){\nif(((datascript.db.tempid_QMARK_(old_eid)) && (((cljs.core.contains_QMARK_(tempids,old_eid)) && (cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(upserted_eid,cljs.core.get.cljs$core$IFn$_invoke$arity$2(tempids,old_eid))))))){\nreturn datascript.db.retry_with_tempid(initial_report,report,initial_es,old_eid,upserted_eid);\n} else {\nvar G__39598 = cljs.core.update.cljs$core$IFn$_invoke$arity$4(datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3(report,old_eid,upserted_eid),new cljs.core.Keyword(\"datascript.db\",\"tx-redundant\",\"datascript.db/tx-redundant\",-1117921977),datascript.db.conjv,datascript.db.datom.cljs$core$IFn$_invoke$arity$4(upserted_eid,null,null,(536870912)));\nvar G__39599 = cljs.core.concat.cljs$core$IFn$_invoke$arity$2(datascript.db.explode(db,cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(entity_SINGLEQUOTE_,new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098),upserted_eid)),entities);\nreport = G__39598;\nes = G__39599;\ncontinue;\n}\n} else {\nif(((typeof old_eid === 'number') || ((((old_eid == null)) || (typeof old_eid === 'string'))))){\nvar new_eid = (((old_eid == null))?datascript.db.next_eid(db):((datascript.db.tempid_QMARK_(old_eid))?(function (){var or__4253__auto__ = cljs.core.get.cljs$core$IFn$_invoke$arity$2(tempids,old_eid);\nif(cljs.core.truth_(or__4253__auto__)){\nreturn or__4253__auto__;\n} else {\nreturn datascript.db.next_eid(db);\n}\n})():old_eid\n));\nvar new_entity = cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(entity,new cljs.core.Keyword(\"db\",\"id\",\"db/id\",-1388397098),new_eid);\nvar G__39603 = datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3(report,old_eid,new_eid);\nvar G__39604 = cljs.core.concat.cljs$core$IFn$_invoke$arity$2(datascript.db.explode(db,new_entity),entities);\nreport = G__39603;\nes = G__39604;\ncontinue;\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Expected number, string or lookup ref for :db/id, got \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([old_eid], 0))].join(''),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"entity-id\",\"syntax\",\"entity-id/syntax\",1921317045),new cljs.core.Keyword(null,\"entity\",\"entity\",-450970276),entity], null));\n\n}\n}\n}\n}\n} else {\nif(cljs.core.sequential_QMARK_(entity)){\nvar vec__38895 = entity;\nvar op = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38895,(0),null);\nvar e = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38895,(1),null);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38895,(2),null);\nvar v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38895,(3),null);\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(op,new cljs.core.Keyword(\"db.fn\",\"call\",\"db.fn/call\",-151594418))){\nvar vec__38898 = entity;\nvar seq__38899 = cljs.core.seq(vec__38898);\nvar first__38900 = cljs.core.first(seq__38899);\nvar seq__38899__$1 = cljs.core.next(seq__38899);\nvar _ = first__38900;\nvar first__38900__$1 = cljs.core.first(seq__38899__$1);\nvar seq__38899__$2 = cljs.core.next(seq__38899__$1);\nvar f = first__38900__$1;\nvar args = seq__38899__$2;\nvar G__39607 = report;\nvar G__39608 = cljs.core.concat.cljs$core$IFn$_invoke$arity$2(cljs.core.apply.cljs$core$IFn$_invoke$arity$3(f,db,args),entities);\nreport = G__39607;\nes = G__39608;\ncontinue;\n} else {\nif((((op instanceof cljs.core.Keyword)) && (cljs.core.not((datascript.db.builtin_fn_QMARK_.cljs$core$IFn$_invoke$arity$1 ? datascript.db.builtin_fn_QMARK_.cljs$core$IFn$_invoke$arity$1(op) : datascript.db.builtin_fn_QMARK_.call(null,op)))))){\nvar temp__5755__auto__ = datascript.db.entid(db,op);\nif((temp__5755__auto__ == null)){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Can\\u2019t find entity for transaction fn \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([op], 0))].join(''),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"syntax\",\"transact/syntax\",-299207078),new cljs.core.Keyword(null,\"operation\",\"operation\",-1267664310),new cljs.core.Keyword(\"db.fn\",\"call\",\"db.fn/call\",-151594418),new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761),entity], null));\n} else {\nvar ident = temp__5755__auto__;\nvar fun = new cljs.core.Keyword(null,\"v\",\"v\",21465059).cljs$core$IFn$_invoke$arity$1(datascript.db.fsearch(db,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [ident,new cljs.core.Keyword(\"db\",\"fn\",\"db/fn\",-1175261470)], null)));\nvar args = cljs.core.next(entity);\nif(cljs.core.fn_QMARK_(fun)){\nvar G__39611 = report;\nvar G__39612 = cljs.core.concat.cljs$core$IFn$_invoke$arity$2(cljs.core.apply.cljs$core$IFn$_invoke$arity$3(fun,db,args),entities);\nreport = G__39611;\nes = G__39612;\ncontinue;\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Entity \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([op], 0)),\" expected to have :db/fn attribute with fn? value\"].join(''),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"syntax\",\"transact/syntax\",-299207078),new cljs.core.Keyword(null,\"operation\",\"operation\",-1267664310),new cljs.core.Keyword(\"db.fn\",\"call\",\"db.fn/call\",-151594418),new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761),entity], null));\n}\n}\n} else {\nif(((datascript.db.tempid_QMARK_(e)) && (cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(op,new cljs.core.Keyword(\"db\",\"add\",\"db/add\",235286841))))){\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Can't use tempid in '\",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([entity], 0)),\"'. Tempids are allowed in :db/add only\"].join(''),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"syntax\",\"transact/syntax\",-299207078),new cljs.core.Keyword(null,\"op\",\"op\",-1882987955),entity], null));\n} else {\nif(((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(op,new cljs.core.Keyword(\"db.fn\",\"cas\",\"db.fn/cas\",-379352172))) || (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(op,new cljs.core.Keyword(\"db\",\"cas\",\"db/cas\",-451542322))))){\nvar vec__38901 = entity;\nvar _ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38901,(0),null);\nvar e__$1 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38901,(1),null);\nvar a__$1 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38901,(2),null);\nvar ov = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38901,(3),null);\nvar nv = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38901,(4),null);\nvar e__$2 = datascript.db.entid_strict(db,e__$1);\nvar ___$1 = datascript.db.validate_attr(a__$1,entity);\nvar ov__$1 = ((datascript.db.ref_QMARK_(db,a__$1))?datascript.db.entid_strict(db,ov):ov);\nvar nv__$1 = ((datascript.db.ref_QMARK_(db,a__$1))?datascript.db.entid_strict(db,nv):nv);\nvar ___$2 = datascript.db.validate_val(nv__$1,entity);\nvar datoms = cljs.core.vec(datascript.db._search(db,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [e__$2,a__$1], null)));\nif(datascript.db.multival_QMARK_(db,a__$1)){\nif(cljs.core.truth_(cljs.core.some(((function (report,es,vec__38901,_,e__$1,a__$1,ov,nv,e__$2,___$1,ov__$1,nv__$1,___$2,datoms,vec__38895,op,e,a,v,db,tempids,vec__38889,seq__38890,first__38891,seq__38890__$1,entity,entities,initial_report_SINGLEQUOTE_,has_tuples_QMARK_,initial_es_SINGLEQUOTE_){\nreturn (function (d){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(d.v,ov__$1);\n});})(report,es,vec__38901,_,e__$1,a__$1,ov,nv,e__$2,___$1,ov__$1,nv__$1,___$2,datoms,vec__38895,op,e,a,v,db,tempids,vec__38889,seq__38890,first__38891,seq__38890__$1,entity,entities,initial_report_SINGLEQUOTE_,has_tuples_QMARK_,initial_es_SINGLEQUOTE_))\n,datoms))){\nvar G__39624 = datascript.db.transact_add(report,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"add\",\"db/add\",235286841),e__$2,a__$1,nv__$1], null));\nvar G__39625 = entities;\nreport = G__39624;\nes = G__39625;\ncontinue;\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\":db.fn/cas failed on datom [\",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([e__$2], 0)),\" \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a__$1], 0)),\" \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.map.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"v\",\"v\",21465059),datoms)], 0)),\"], expected \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([ov__$1], 0))].join(''),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"cas\",\"transact/cas\",816687170),new cljs.core.Keyword(null,\"old\",\"old\",-1825222690),datoms,new cljs.core.Keyword(null,\"expected\",\"expected\",1583670997),ov__$1,new cljs.core.Keyword(null,\"new\",\"new\",-2085437848),nv__$1], null));\n}\n} else {\nvar v__$1 = new cljs.core.Keyword(null,\"v\",\"v\",21465059).cljs$core$IFn$_invoke$arity$1(cljs.core.first(datoms));\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(v__$1,ov__$1)){\nvar G__39630 = datascript.db.transact_add(report,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"add\",\"db/add\",235286841),e__$2,a__$1,nv__$1], null));\nvar G__39631 = entities;\nreport = G__39630;\nes = G__39631;\ncontinue;\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\":db.fn/cas failed on datom [\",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([e__$2], 0)),\" \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([a__$1], 0)),\" \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([v__$1], 0)),\"], expected \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([ov__$1], 0))].join(''),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"cas\",\"transact/cas\",816687170),new cljs.core.Keyword(null,\"old\",\"old\",-1825222690),cljs.core.first(datoms),new cljs.core.Keyword(null,\"expected\",\"expected\",1583670997),ov__$1,new cljs.core.Keyword(null,\"new\",\"new\",-2085437848),nv__$1], null));\n}\n}\n} else {\nif(datascript.db.tx_id_QMARK_(e)){\nvar G__39634 = datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3(report,e,datascript.db.current_tx(report));\nvar G__39635 = cljs.core.cons(new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [op,datascript.db.current_tx(report),a,v], null),entities);\nreport = G__39634;\nes = G__39635;\ncontinue;\n} else {\nif(((datascript.db.ref_QMARK_(db,a)) && (datascript.db.tx_id_QMARK_(v)))){\nvar G__39637 = datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3(report,v,datascript.db.current_tx(report));\nvar G__39638 = cljs.core.cons(new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [op,e,a,datascript.db.current_tx(report)], null),entities);\nreport = G__39637;\nes = G__39638;\ncontinue;\n} else {\nif(((datascript.db.ref_QMARK_(db,a)) && (datascript.db.tempid_QMARK_(v)))){\nvar temp__5755__auto__ = cljs.core.get.cljs$core$IFn$_invoke$arity$2(tempids,v);\nif((temp__5755__auto__ == null)){\nvar resolved = datascript.db.next_eid(db);\nvar report_SINGLEQUOTE_ = cljs.core.update.cljs$core$IFn$_invoke$arity$5(datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3(report,v,resolved),new cljs.core.Keyword(\"datascript.db\",\"value-tempids\",\"datascript.db/value-tempids\",244806162),cljs.core.assoc,resolved,v);\nvar G__39645 = report_SINGLEQUOTE_;\nvar G__39646 = es;\nreport = G__39645;\nes = G__39646;\ncontinue;\n} else {\nvar resolved = temp__5755__auto__;\nvar report_SINGLEQUOTE_ = cljs.core.update.cljs$core$IFn$_invoke$arity$5(report,new cljs.core.Keyword(\"datascript.db\",\"value-tempids\",\"datascript.db/value-tempids\",244806162),cljs.core.assoc,resolved,v);\nvar G__39648 = report_SINGLEQUOTE_;\nvar G__39649 = cljs.core.cons(new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [op,e,a,resolved], null),entities);\nreport = G__39648;\nes = G__39649;\ncontinue;\n}\n} else {\nif(datascript.db.tempid_QMARK_(e)){\nvar upserted_eid = ((datascript.db.is_attr_QMARK_(db,a,new cljs.core.Keyword(\"db.unique\",\"identity\",\"db.unique/identity\",1675950722)))?new cljs.core.Keyword(null,\"e\",\"e\",1381269198).cljs$core$IFn$_invoke$arity$1(cljs.core.first(datascript.db._datoms(db,new cljs.core.Keyword(null,\"avet\",\"avet\",1383857032),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [a,v], null)))):null);\nvar allocated_eid = cljs.core.get.cljs$core$IFn$_invoke$arity$2(tempids,e);\nif(cljs.core.truth_((function (){var and__4251__auto__ = upserted_eid;\nif(cljs.core.truth_(and__4251__auto__)){\nvar and__4251__auto____$1 = allocated_eid;\nif(cljs.core.truth_(and__4251__auto____$1)){\nreturn cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(upserted_eid,allocated_eid);\n} else {\nreturn and__4251__auto____$1;\n}\n} else {\nreturn and__4251__auto__;\n}\n})())){\nreturn datascript.db.retry_with_tempid(initial_report,report,initial_es,e,upserted_eid);\n} else {\nvar eid = (function (){var or__4253__auto__ = upserted_eid;\nif(cljs.core.truth_(or__4253__auto__)){\nreturn or__4253__auto__;\n} else {\nvar or__4253__auto____$1 = allocated_eid;\nif(cljs.core.truth_(or__4253__auto____$1)){\nreturn or__4253__auto____$1;\n} else {\nreturn datascript.db.next_eid(db);\n}\n}\n})();\nvar G__39655 = datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3(report,e,eid);\nvar G__39656 = cljs.core.cons(new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [op,eid,a,v], null),entities);\nreport = G__39655;\nes = G__39656;\ncontinue;\n}\n} else {\nif(((cljs.core.not(new cljs.core.Keyword(\"datascript.db\",\"internal\",\"datascript.db/internal\",-249301114).cljs$core$IFn$_invoke$arity$1(cljs.core.meta(entity)))) && (datascript.db.tuple_QMARK_(db,a)))){\nvar tuple_attrs = cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(db,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"schema\",\"schema\",-1582001791),a,new cljs.core.Keyword(\"db\",\"tupleAttrs\",\"db/tupleAttrs\",250080092)], null));\nif(((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs.core.count(tuple_attrs),cljs.core.count(v))) && (((cljs.core.every_QMARK_(cljs.core.some_QMARK_,v)) && (cljs.core.every_QMARK_(((function (report,es,tuple_attrs,vec__38895,op,e,a,v,db,tempids,vec__38889,seq__38890,first__38891,seq__38890__$1,entity,entities,initial_report_SINGLEQUOTE_,has_tuples_QMARK_,initial_es_SINGLEQUOTE_){\nreturn (function (p__38904){\nvar vec__38905 = p__38904;\nvar tuple_attr = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38905,(0),null);\nvar tuple_value = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38905,(1),null);\nvar db_value = new cljs.core.Keyword(null,\"v\",\"v\",21465059).cljs$core$IFn$_invoke$arity$1(cljs.core.first(datascript.db._datoms(db,new cljs.core.Keyword(null,\"eavt\",\"eavt\",-666437073),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [e,tuple_attr], null))));\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(tuple_value,db_value);\n});})(report,es,tuple_attrs,vec__38895,op,e,a,v,db,tempids,vec__38889,seq__38890,first__38891,seq__38890__$1,entity,entities,initial_report_SINGLEQUOTE_,has_tuples_QMARK_,initial_es_SINGLEQUOTE_))\n,cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,tuple_attrs,v))))))){\nvar G__39669 = report;\nvar G__39670 = entities;\nreport = G__39669;\nes = G__39670;\ncontinue;\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Can\\u2019t modify tuple attrs directly: \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([entity], 0))].join(''),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"syntax\",\"transact/syntax\",-299207078),new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761),entity], null));\n}\n} else {\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(op,new cljs.core.Keyword(\"db\",\"add\",\"db/add\",235286841))){\nvar G__39672 = datascript.db.transact_add(report,entity);\nvar G__39673 = entities;\nreport = G__39672;\nes = G__39673;\ncontinue;\n} else {\nif(((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(op,new cljs.core.Keyword(\"db\",\"retract\",\"db/retract\",-1549825231))) && ((!((v == null)))))){\nvar temp__5755__auto__ = datascript.db.entid(db,e);\nif((temp__5755__auto__ == null)){\nvar G__39674 = report;\nvar G__39675 = entities;\nreport = G__39674;\nes = G__39675;\ncontinue;\n} else {\nvar e__$1 = temp__5755__auto__;\nvar v__$1 = ((datascript.db.ref_QMARK_(db,a))?datascript.db.entid_strict(db,v):v);\ndatascript.db.validate_attr(a,entity);\n\ndatascript.db.validate_val(v__$1,entity);\n\nvar temp__5755__auto____$1 = datascript.db.fsearch(db,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [e__$1,a,v__$1], null));\nif((temp__5755__auto____$1 == null)){\nvar G__39676 = report;\nvar G__39677 = entities;\nreport = G__39676;\nes = G__39677;\ncontinue;\n} else {\nvar old_datom = temp__5755__auto____$1;\nvar G__39678 = datascript.db.transact_retract_datom(report,old_datom);\nvar G__39679 = entities;\nreport = G__39678;\nes = G__39679;\ncontinue;\n}\n}\n} else {\nif(((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(op,new cljs.core.Keyword(\"db.fn\",\"retractAttribute\",\"db.fn/retractAttribute\",937402164))) || (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(op,new cljs.core.Keyword(\"db\",\"retract\",\"db/retract\",-1549825231))))){\nvar temp__5755__auto__ = datascript.db.entid(db,e);\nif((temp__5755__auto__ == null)){\nvar G__39680 = report;\nvar G__39681 = entities;\nreport = G__39680;\nes = G__39681;\ncontinue;\n} else {\nvar e__$1 = temp__5755__auto__;\nvar _ = datascript.db.validate_attr(a,entity);\nvar datoms = cljs.core.vec(datascript.db._search(db,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [e__$1,a], null)));\nvar G__39682 = cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(datascript.db.transact_retract_datom,report,datoms);\nvar G__39683 = cljs.core.concat.cljs$core$IFn$_invoke$arity$2(datascript.db.retract_components(db,datoms),entities);\nreport = G__39682;\nes = G__39683;\ncontinue;\n}\n} else {\nif(((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(op,new cljs.core.Keyword(\"db.fn\",\"retractEntity\",\"db.fn/retractEntity\",-1423535441))) || (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(op,new cljs.core.Keyword(\"db\",\"retractEntity\",\"db/retractEntity\",-1452737935))))){\nvar temp__5755__auto__ = datascript.db.entid(db,e);\nif((temp__5755__auto__ == null)){\nvar G__39686 = report;\nvar G__39687 = entities;\nreport = G__39686;\nes = G__39687;\ncontinue;\n} else {\nvar e__$1 = temp__5755__auto__;\nvar e_datoms = cljs.core.vec(datascript.db._search(db,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [e__$1], null)));\nvar v_datoms = cljs.core.vec(cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(((function (report,es,e_datoms,e__$1,temp__5755__auto__,vec__38895,op,e,a,v,db,tempids,vec__38889,seq__38890,first__38891,seq__38890__$1,entity,entities,initial_report_SINGLEQUOTE_,has_tuples_QMARK_,initial_es_SINGLEQUOTE_){\nreturn (function (a__$1){\nreturn datascript.db._search(db,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [null,a__$1,e__$1], null));\n});})(report,es,e_datoms,e__$1,temp__5755__auto__,vec__38895,op,e,a,v,db,tempids,vec__38889,seq__38890,first__38891,seq__38890__$1,entity,entities,initial_report_SINGLEQUOTE_,has_tuples_QMARK_,initial_es_SINGLEQUOTE_))\n,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datascript.db._attrs_by(db,new cljs.core.Keyword(\"db.type\",\"ref\",\"db.type/ref\",-1728373079))], 0)));\nvar G__39688 = cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(datascript.db.transact_retract_datom,report,cljs.core.concat.cljs$core$IFn$_invoke$arity$2(e_datoms,v_datoms));\nvar G__39689 = cljs.core.concat.cljs$core$IFn$_invoke$arity$2(datascript.db.retract_components(db,e_datoms),entities);\nreport = G__39688;\nes = G__39689;\ncontinue;\n}\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Unknown operation at \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([entity], 0)),\", expected :db/add, :db/retract, :db.fn/call, :db.fn/retractAttribute, :db.fn/retractEntity or an ident corresponding to an installed transaction function (e.g. {:db/ident <keyword> :db/fn <Ifn>}, usage of :db/ident requires {:db/unique :db.unique/identity} in schema)\"].join(''),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"syntax\",\"transact/syntax\",-299207078),new cljs.core.Keyword(null,\"operation\",\"operation\",-1267664310),op,new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761),entity], null));\n\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n} else {\nif(datascript.db.datom_QMARK_(entity)){\nvar vec__38908 = entity;\nvar e = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38908,(0),null);\nvar a = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38908,(1),null);\nvar v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38908,(2),null);\nvar tx = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38908,(3),null);\nvar added = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__38908,(4),null);\nif(cljs.core.truth_(added)){\nvar G__39692 = datascript.db.transact_add(report,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"add\",\"db/add\",235286841),e,a,v,tx], null));\nvar G__39693 = entities;\nreport = G__39692;\nes = G__39693;\ncontinue;\n} else {\nvar G__39695 = report;\nvar G__39696 = cljs.core.cons(new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"db\",\"retract\",\"db/retract\",-1549825231),e,a,v], null),entities);\nreport = G__39695;\nes = G__39696;\ncontinue;\n}\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([\"Bad entity type at \",cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([entity], 0)),\", expected map or vector\"].join(''),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"error\",\"error\",-978969032),new cljs.core.Keyword(\"transact\",\"syntax\",\"transact/syntax\",-299207078),new cljs.core.Keyword(null,\"tx-data\",\"tx-data\",934159761),entity], null));\n\n}\n}\n}\n}\n}\n}\nbreak;\n}\n});\n","~:ns-info",["^ ","~:rename-macros",null,"~:renames",["^ "],"~:meta",["^ ","~:file","datascript/db.cljc","~:line",1,"~:column",24,"~:end-line",1,"~:end-column",37,"~:lean-ns",true,"~:no-doc",true],"~:ns-aliases",["^ ","~$cljs.loader","~$shadow.loader","~$clojure.pprint","~$cljs.pprint","~$clojure.spec.alpha","~$cljs.spec.alpha"],"~:use-macros",["^ ","~$case-tree","~$datascript.db","~$combine-cmp","^F","~$raise","^F","~$defrecord-updatable","^F","~$cond+","^F"],"~:excludes",["~#set",["~$seqable?"]],"~:macros",["^ ","^J",["^ ","~:arglists",["~#list",[["~$&","~$clauses"]]],"^7",48,"^8",3,"^6","datascript/db.cljc","~:name","~$datascript.db/cond+","~:ns","^F","~:macro",true],"^E",["^ ","^O",["^P",[["~$qs","~$vs"]]],"^7",334,"^8",4,"^6","datascript/db.cljc","^R","~$datascript.db/case-tree","^T","^F","^U",true],"^I",["^ ","^O",["^P",[["~$name","~$fields","~$&","~$impls"]]],"^7",145,"^8",4,"^6","datascript/db.cljc","^R","~$datascript.db/defrecord-updatable","^T","^F","^U",true],"~$if-cljs",["^ ","^O",["^P",[["~$then","~$else"]]],"~:doc","Return then if we are generating cljs code and else for Clojure code.\n     https://groups.google.com/d/msg/clojurescript/iBY5HaQda4A/w1lAQi9_AwsJ","^7",92,"^8",4,"^6","datascript/db.cljc","^R","~$datascript.db/if-cljs","^T","^F","^U",true],"~$some-of",["^ ","^O",["^P",[[],["~$x"],["~$x","~$&","~$more"]]],"^7",57,"^8",1,"^6","datascript/db.cljc","^R","~$datascript.db/some-of","^T","^F","^U",true],"^H",["^ ","^O",["^P",[["~$&","~$fragments"]]],"^7",29,"^8",3,"^6","datascript/db.cljc","^R","~$datascript.db/raise","^T","^F","^U",true],"^G",["^ ","^O",["^P",[["~$&","~$comps"]]],"^7",311,"^8",3,"^6","datascript/db.cljc","^R","~$datascript.db/combine-cmp","^T","^F","^U",true]],"^R","^F","~:reader-aliases",["^ "],"~:op","^T","~:imports",null,"~:requires",["^ ","~$set","~$me.tonsky.persistent-sorted-set","~$arrays","~$me.tonsky.persistent-sorted-set.arrays","~$cljs.core","^1E","~$garray","~$goog.array","~$goog","^1H","~$lru","~$datascript.lru","^1J","^1J","^1B","^1B","^1D","^1D","~$clojure.data","^1K","~$clojure.walk","^1L","^1G","^1G"],"~:seen",["^L",["~:require","~:require-macros"]],"~:uses",null,"^1O",["^ ","^F","^F","^1E","^1E","^1C","^1D","^1D","^1D"],"~:form",["^P",["~$ns","^F",["^P",["^1N",["^1G","~:as","^1F"],["^1L"],["^1K"],["^1J","^1S","^1I"],["^1B","^1S","^1A"],["^1D","^1S","^1C"]]],["^P",["^1O",["^F","~:refer",["^E","^G","^H","^I","^J"]]]],["^P",["~:refer-clojure","~:exclude",["^M"]]]]],"~:flags",["^ ","^1N",["^L",[]],"^1O",["^L",[]]],"~:js-deps",["^ "],"~:deps",["^1H","^1E","^1G","^1L","^1K","^1J","^1B","^1D"]],"^T","^F","~:resource-id",["~:shadow.build.classpath/resource","datascript/db.cljc"],"~:compiled-at",1685712179170,"^1=",["^ ","^1A","^1B","^1C","^1D","^1E","^1E","^1F","^1G","^1H","^1H","^1I","^1J","^1J","^1J","^1B","^1B","^F","^F","^1D","^1D","^1K","^1K","^1L","^1L","^1G","^1G"],"~:resource-name","datascript/db.cljc","~:warnings",[],"~:source","(ns ^:no-doc ^:lean-ns datascript.db\n  (:require\n    #?(:cljs [goog.array :as garray])\n    [clojure.walk]\n    [clojure.data]\n    [datascript.lru :as lru]\n    [me.tonsky.persistent-sorted-set :as set]\n    [me.tonsky.persistent-sorted-set.arrays :as arrays])\n  #?(:cljs (:require-macros [datascript.db :refer [case-tree combine-cmp raise defrecord-updatable cond+]]))\n  (:refer-clojure :exclude [seqable?])) \n\n;; ----------------------------------------------------------------------------\n\n#?(:cljs\n   (do\n     (def Exception js/Error)\n     (def IllegalArgumentException js/Error)\n     (def UnsupportedOperationException js/Error)))\n\n(def ^:const e0    0)\n(def ^:const tx0   0x20000000)\n(def ^:const emax  0x7FFFFFFF)\n(def ^:const txmax 0x7FFFFFFF)\n(def ^:const implicit-schema {:db/ident {:db/unique :db.unique/identity}})\n\n;; ----------------------------------------------------------------------------\n\n#?(:clj\n  (defmacro raise [& fragments]\n    (let [msgs (butlast fragments)\n          data (last fragments)]\n      `(throw (ex-info (str ~@(map (fn [m#] (if (string? m#) m# (list 'pr-str m#))) msgs)) ~data)))))\n\n(defn #?@(:clj  [^Boolean seqable?]  \n          :cljs [^boolean seqable?])\n  [x]\n  (and (not (string? x))\n  #?(:cljs (or (cljs.core/seqable? x)\n               (arrays/array? x))\n     :clj  (or (seq? x)\n               (instance? clojure.lang.Seqable x)\n               (nil? x)\n               (instance? Iterable x)\n               (arrays/array? x)\n               (instance? java.util.Map x)))))\n\n#?(:clj\n  (defmacro cond+ [& clauses]\n    (when-some [[test expr & rest] clauses]\n      (case test\n        :do   `(do ~expr (cond+ ~@rest))\n        :let  `(let ~expr (cond+ ~@rest))\n        :some `(or ~expr (cond+ ~@rest))\n              `(if ~test ~expr (cond+ ~@rest))))))\n\n#?(:clj\n(defmacro some-of\n  ([] nil)\n  ([x] x)\n  ([x & more]\n    `(let [x# ~x] (if (nil? x#) (some-of ~@more) x#)))))\n\n(def conjv (fnil conj []))\n(def conjs (fnil conj #{}))\n\n(defn reduce-indexed\n  \"Same as reduce, but `f` takes [acc el idx]\"\n  [f init xs]\n  (first\n    (reduce\n      (fn [[acc idx] x]\n        (let [res (f acc x idx)]\n          (if (reduced? res)\n            (reduced [res idx])\n            [res (inc idx)])))\n      [init 0]\n      xs)))\n\n;; ----------------------------------------------------------------------------\n;; macros and funcs to support writing defrecords and updating\n;; (replacing) builtins, i.e., Object/hashCode, IHashEq hasheq, etc.\n;; code taken from prismatic:\n;;  https://github.com/Prismatic/schema/commit/e31c419c56555c83ef9ee834801e13ef3c112597\n;;\n\n(defn- cljs-env?\n  \"Take the &env from a macro, and tell whether we are expanding into cljs.\"\n  [env]\n  (boolean (:ns env)))\n\n#?(:clj\n   (defmacro if-cljs\n     \"Return then if we are generating cljs code and else for Clojure code.\n     https://groups.google.com/d/msg/clojurescript/iBY5HaQda4A/w1lAQi9_AwsJ\"\n     [then else]\n     (if (cljs-env? &env) then else)))\n\n(defn combine-hashes [x y]\n  #?(:clj  (clojure.lang.Util/hashCombine x y)\n     :cljs (hash-combine x y)))\n\n#?(:clj\n   (defn- get-sig [method]\n     ;; expects something like '(method-symbol [arg arg arg] ...)\n     ;; if the thing matches, returns [fully-qualified-symbol arity], otherwise nil\n     (and (sequential? method)\n          (symbol? (first method))\n          (vector? (second method))\n          (let [sym (first method)\n                ns  (or (some->> sym resolve meta :ns str) \"clojure.core\")]\n            [(symbol ns (name sym)) (-> method second count)]))))\n\n#?(:clj\n   (defn- dedupe-interfaces [deftype-form]\n     ;; get the interfaces list, remove any duplicates, similar to remove-nil-implements in potemkin\n     ;; verified w/ deftype impl in compiler:\n     ;; (deftype* tagname classname [fields] :implements [interfaces] :tag tagname methods*)\n     (let [[deftype* tagname classname fields implements interfaces & rest] deftype-form]\n       (when (or (not= deftype* 'deftype*) (not= implements :implements))\n         (throw (IllegalArgumentException. \"deftype-form mismatch\")))\n       (list* deftype* tagname classname fields implements (vec (distinct interfaces)) rest))))\n\n#?(:clj\n   (defn- make-record-updatable-clj [name fields & impls]\n     (let [impl-map (->> impls (map (juxt get-sig identity)) (filter first) (into {}))\n           body     (macroexpand-1 (list* 'defrecord name fields impls))]\n       (clojure.walk/postwalk\n        (fn [form]\n          (if (and (sequential? form) (= 'deftype* (first form)))\n            (->> form\n                 dedupe-interfaces\n                 (remove (fn [method]\n                           (when-some [impl (-> method get-sig impl-map)]\n                             (not= method impl)))))\n            form))\n        body))))\n\n#?(:clj\n   (defn- make-record-updatable-cljs [name fields & impls]\n     `(do\n        (defrecord ~name ~fields)\n        (extend-type ~name ~@impls))))\n\n#?(:clj\n   (defmacro defrecord-updatable [name fields & impls]\n     `(if-cljs\n       ~(apply make-record-updatable-cljs name fields impls)\n       ~(apply make-record-updatable-clj  name fields impls))))\n\n;; ----------------------------------------------------------------------------\n\n(declare hash-datom equiv-datom seq-datom nth-datom assoc-datom val-at-datom)\n\n(defprotocol IDatom\n  (datom-tx [this])\n  (datom-added [this])\n  (datom-get-idx [this])\n  (datom-set-idx [this value]))\n\n(deftype Datom #?(:clj [^int e a v ^int tx ^:unsynchronized-mutable ^int idx ^:unsynchronized-mutable ^int _hash]\n                  :cljs [^number e a v ^number tx ^:mutable ^number idx ^:mutable ^number _hash])\n  IDatom\n  (datom-tx [d] (if (pos? tx) tx (- tx)))\n  (datom-added [d] (pos? tx))\n  (datom-get-idx [_] idx)\n  (datom-set-idx [_ value] (set! idx (int value)))\n\n  #?@(:cljs\n       [IHash\n        (-hash [d] (if (zero? _hash)\n                     (set! _hash (hash-datom d))\n                     _hash))\n        IEquiv\n        (-equiv [d o] (and (instance? Datom o) (equiv-datom d o)))\n\n        ISeqable\n        (-seq [d] (seq-datom d))\n\n        ILookup\n        (-lookup [d k] (val-at-datom d k nil))\n        (-lookup [d k nf] (val-at-datom d k nf))\n\n        IIndexed\n        (-nth [this i] (nth-datom this i))\n        (-nth [this i not-found] (nth-datom this i not-found))\n        \n        IAssociative\n        (-assoc [d k v] (assoc-datom d k v))\n\n        IPrintWithWriter\n        (-pr-writer [d writer opts]\n                    (pr-sequential-writer writer pr-writer\n                                          \"#datascript/Datom [\" \" \" \"]\"\n                                          opts [(.-e d) (.-a d) (.-v d) (datom-tx d) (datom-added d)]))]\n      :clj\n       [Object\n        (hashCode [d]\n          (if (zero? _hash)\n            (let [h (int (hash-datom d))]\n              (set! _hash h)\n              h)\n            _hash))\n        (toString [d] (pr-str d))\n\n        clojure.lang.IHashEq\n        (hasheq [d] (.hashCode d))\n\n        clojure.lang.Seqable\n        (seq [d] (seq-datom d))\n\n        clojure.lang.IPersistentCollection\n        (equiv [d o] (and (instance? Datom o) (equiv-datom d o)))\n        (empty [d] (throw (UnsupportedOperationException. \"empty is not supported on Datom\")))\n        (count [d] 5)\n        (cons [d [k v]] (assoc-datom d k v))\n        \n        clojure.lang.Indexed\n        (nth [this i]           (nth-datom this i))\n        (nth [this i not-found] (nth-datom this i not-found))\n\n        clojure.lang.ILookup\n        (valAt [d k] (val-at-datom d k nil))\n        (valAt [d k nf] (val-at-datom d k nf))\n\n        clojure.lang.Associative\n        (entryAt [d k] (some->> (val-at-datom d k nil) (clojure.lang.MapEntry k)))\n        (containsKey [e k] (#{:e :a :v :tx :added} k))\n        (assoc [d k v] (assoc-datom d k v))]\n))\n\n#?(:cljs (goog/exportSymbol \"datascript.db.Datom\" Datom))\n\n(defn ^Datom datom\n  ([e a v] (Datom. e a v tx0 0 0))\n  ([e a v tx] (Datom. e a v tx 0 0))\n  ([e a v tx added] (Datom. e a v (if added tx (- tx)) 0 0)))\n\n(defn datom? [x] (instance? Datom x))\n\n(defn- hash-datom [^Datom d]\n  (-> (hash (.-e d))\n      (combine-hashes (hash (.-a d)))\n      (combine-hashes (hash (.-v d)))))\n\n(defn- equiv-datom [^Datom d ^Datom o]\n  (and (== (.-e d) (.-e o))\n       (= (.-a d) (.-a o))\n       (= (.-v d) (.-v o))))\n\n(defn- seq-datom [^Datom d]\n  (list (.-e d) (.-a d) (.-v d) (datom-tx d) (datom-added d)))\n\n;; keep it fast by duplicating for both keyword and string cases\n;; instead of using sets or some other matching func\n(defn- val-at-datom [^Datom d k not-found]\n  (case k\n    :e      (.-e d) \"e\"     (.-e d)\n    :a      (.-a d) \"a\"     (.-a d)\n    :v      (.-v d) \"v\"     (.-v d)\n    :tx     (datom-tx d)\n    \"tx\"    (datom-tx d)\n    :added  (datom-added d)\n    \"added\" (datom-added d)\n    not-found))\n\n(defn- nth-datom\n  ([^Datom d ^long i]\n    (case i\n      0 (.-e d)\n      1 (.-a d)\n      2 (.-v d)\n      3 (datom-tx d)\n      4 (datom-added d)\n        #?(:clj  (throw (IndexOutOfBoundsException.))\n           :cljs (throw (js/Error. (str \"Datom/-nth: Index out of bounds: \" i))))))\n  ([^Datom d ^long i not-found]\n    (case i\n      0 (.-e d)\n      1 (.-a d)\n      2 (.-v d)\n      3 (datom-tx d)\n      4 (datom-added d)\n        not-found)))\n\n(defn- ^Datom assoc-datom [^Datom d k v]\n  (case k\n    :e     (datom v       (.-a d) (.-v d) (datom-tx d) (datom-added d))\n    :a     (datom (.-e d) v       (.-v d) (datom-tx d) (datom-added d))\n    :v     (datom (.-e d) (.-a d) v       (datom-tx d) (datom-added d))\n    :tx    (datom (.-e d) (.-a d) (.-v d) v            (datom-added d))\n    :added (datom (.-e d) (.-a d) (.-v d) (datom-tx d) v)\n    (throw (IllegalArgumentException. (str \"invalid key for #datascript/Datom: \" k)))))\n\n;; printing and reading\n;; #datomic/DB {:schema <map>, :datoms <vector of [e a v tx]>}\n\n(defn ^Datom datom-from-reader [vec]\n  (apply datom vec))\n\n#?(:clj\n   (defmethod print-method Datom [^Datom d, ^java.io.Writer w]\n     (.write w (str \"#datascript/Datom \"))\n     (binding [*out* w]\n       (pr [(.-e d) (.-a d) (.-v d) (datom-tx d) (datom-added d)]))))\n\n;; ----------------------------------------------------------------------------\n;; datom cmp macros/funcs\n;;\n\n#?(:clj\n  (defmacro combine-cmp [& comps]\n    (loop [comps (reverse comps)\n           res   (num 0)]\n      (if (not-empty comps)\n        (recur\n          (next comps)\n          `(let [c# ~(first comps)]\n             (if (== 0 c#)\n               ~res\n               c#)))\n        res))))\n\n#?(:clj\n   (defn- -case-tree [queries variants]\n     (if queries\n       (let [v1 (take (/ (count variants) 2) variants)\n             v2 (drop (/ (count variants) 2) variants)]\n         (list 'if (first queries)\n               (-case-tree (next queries) v1)\n               (-case-tree (next queries) v2)))\n       (first variants))))\n\n#?(:clj\n   (defmacro case-tree [qs vs]\n     (-case-tree qs vs)))\n\n(defn cmp [x y]\n  (if (nil? x) 0\n    (if (nil? y) 0\n      (compare x y))))\n\n(defn class-identical? [x y]\n  #?(:clj  (identical? (class x) (class y))\n     :cljs (identical? (type x) (type y))))\n\n(defn class-compare [x y]\n  #?(:clj  (compare (.getName (class x)) (.getName (class y)))\n     :cljs (garray/defaultCompare (type->str (type x)) (type->str (type y)))))\n\n(defn value-compare [x y]\n  (try \n    (cond\n      (= x y) 0\n      #?@(:clj  [(instance? Number x)       (clojure.lang.Numbers/compare x y)])\n      #?@(:clj  [(instance? Comparable x)   (.compareTo ^Comparable x y)]\n          :cljs [(satisfies? IComparable x) (-compare x y)])\n      (not (class-identical? x y)) (class-compare x y)\n      #?@(:cljs [(or (number? x) (string? x) (array? x) (true? x) (false? x)) (garray/defaultCompare x y)])\n      :else (- (hash x) (hash y)))\n    (catch #?(:clj ClassCastException :cljs js/Error) e\n      (if (not (class-identical? x y))\n        (class-compare x y)\n        (throw e)))))\n\n(defn value-cmp [x y]\n  (cond \n    (nil? x) 0\n    (nil? y) 0\n    :else     (value-compare x y)))\n\n;; Slower cmp-* fns allows for datom fields to be nil.\n;; Such datoms come from slice method where they are used as boundary markers.\n\n(defn cmp-datoms-eavt [^Datom d1, ^Datom d2]\n  (combine-cmp\n    (#?(:clj Integer/compare :cljs -) (.-e d1) (.-e d2))\n    (cmp (.-a d1) (.-a d2))\n    (value-cmp (.-v d1) (.-v d2))\n    (#?(:clj Integer/compare :cljs -) (datom-tx d1) (datom-tx d2))))\n\n(defn cmp-datoms-aevt [^Datom d1, ^Datom d2]\n  (combine-cmp\n    (cmp (.-a d1) (.-a d2))\n    (#?(:clj Integer/compare :cljs -) (.-e d1) (.-e d2))\n    (value-cmp (.-v d1) (.-v d2))\n    (#?(:clj Integer/compare :cljs -) (datom-tx d1) (datom-tx d2))))\n\n(defn cmp-datoms-avet [^Datom d1, ^Datom d2]\n  (combine-cmp\n    (cmp (.-a d1) (.-a d2))\n    (value-cmp (.-v d1) (.-v d2))\n    (#?(:clj Integer/compare :cljs -) (.-e d1) (.-e d2))\n    (#?(:clj Integer/compare :cljs -) (datom-tx d1) (datom-tx d2))))\n\n;; fast versions without nil checks\n\n(defn- cmp-attr-quick [a1 a2]\n  ;; either both are keywords or both are strings\n  #?(:cljs\n     (if (keyword? a1)\n       (-compare a1 a2)\n       (garray/defaultCompare a1 a2))\n     :clj\n     (.compareTo ^Comparable a1 a2)))\n\n(defn cmp-datoms-eav-quick [^Datom d1, ^Datom d2]\n  (combine-cmp\n    (#?(:clj Integer/compare :cljs -) (.-e d1) (.-e d2))\n    (cmp-attr-quick (.-a d1) (.-a d2))\n    (value-compare (.-v d1) (.-v d2))))\n\n(defn cmp-datoms-eavt-quick [^Datom d1, ^Datom d2]\n  (combine-cmp\n    (#?(:clj Integer/compare :cljs -) (.-e d1) (.-e d2))\n    (cmp-attr-quick (.-a d1) (.-a d2))\n    (value-compare (.-v d1) (.-v d2))\n    (#?(:clj Integer/compare :cljs -) (datom-tx d1) (datom-tx d2))))\n\n(defn cmp-datoms-aevt-quick [^Datom d1, ^Datom d2]\n  (combine-cmp\n    (cmp-attr-quick (.-a d1) (.-a d2))\n    (#?(:clj Integer/compare :cljs -) (.-e d1) (.-e d2))\n    (value-compare (.-v d1) (.-v d2))\n    (#?(:clj Integer/compare :cljs -) (datom-tx d1) (datom-tx d2))))\n\n(defn cmp-datoms-avet-quick [^Datom d1, ^Datom d2]\n  (combine-cmp\n    (cmp-attr-quick (.-a d1) (.-a d2))\n    (value-compare (.-v d1) (.-v d2))\n    (#?(:clj Integer/compare :cljs -) (.-e d1) (.-e d2))\n    (#?(:clj Integer/compare :cljs -) (datom-tx d1) (datom-tx d2))))\n\n(defn- diff-sorted [a b cmp]\n  (loop [only-a []\n         only-b []\n         both   []\n         a      a\n         b      b]\n    (cond\n      (empty? a) [(not-empty only-a) (not-empty (into only-b b)) (not-empty both)]\n      (empty? b) [(not-empty (into only-a a)) (not-empty only-b) (not-empty both)]\n      :else\n      (let [first-a (first a)\n            first-b (first b)\n            diff (try\n                   (cmp first-a first-b)\n                   (catch #?(:clj ClassCastException :cljs js/Error) _\n                     :incomparable))]\n        (cond\n          (= diff :incomparable) (recur (conj only-a first-a) (conj only-b first-b) both                (next a) (next b))\n          (== diff 0)            (recur only-a                only-b                (conj both first-a) (next a) (next b))\n          (< diff 0)             (recur (conj only-a first-a) only-b                both                (next a) b)\n          (> diff 0)             (recur only-a                (conj only-b first-b) both                a        (next b)))))))\n\n;; ----------------------------------------------------------------------------\n\n(declare hash-db hash-fdb equiv-db empty-db resolve-datom validate-attr components->pattern indexing?)\n#?(:cljs (declare pr-db))\n\n;;;;;;;;;; Searching\n\n(defprotocol ISearch\n  (-search [data pattern]))\n\n(defn- ^Datom fsearch [data pattern]\n  (first (-search data pattern)))\n\n(defprotocol IIndexAccess\n  (-datoms [db index components])\n  (-seek-datoms [db index components])\n  (-rseek-datoms [db index components])\n  (-index-range [db attr start end]))\n\n(defn validate-indexed [db index components]\n  (when (= index :avet)\n    (when-some [attr (first components)]\n      (when-not (indexing? db attr)\n        (raise \"Attribute \" attr \" should be marked as :db/index true\"\n          {:error :index-access :index :avet :components components})))))\n\n(defprotocol IDB\n  (-schema [db])\n  (-attrs-by [db property]))\n\n;; ----------------------------------------------------------------------------\n\n(defn db-transient [db]\n  (-> db\n    (update :eavt transient)\n    (update :aevt transient)\n    (update :avet transient)))\n\n(defn db-persistent! [db]\n  (-> db\n    (update :eavt persistent!)\n    (update :aevt persistent!)\n    (update :avet persistent!)))\n\n(defrecord-updatable DB [schema eavt aevt avet max-eid max-tx rschema pull-patterns pull-attrs hash]\n  #?@(:cljs\n      [IHash                (-hash  [db]        (hash-db db))\n       IEquiv               (-equiv [db other]  (equiv-db db other))\n       IReversible          (-rseq  [db]        (-rseq (.-eavt db)))\n       ICounted             (-count [db]        (count (.-eavt db)))\n       IEmptyableCollection (-empty [db]        (with-meta (empty-db (.-schema db)) (meta db)))\n       IPrintWithWriter     (-pr-writer [db w opts] (pr-db db w opts))\n       IEditableCollection  (-as-transient [db] (db-transient db))\n       ITransientCollection (-conj! [db key] (throw (ex-info \"datascript.DB/conj! is not supported\" {})))\n                            (-persistent! [db] (db-persistent! db))]\n\n      :clj\n      [Object               (hashCode [db]      (hash-db db))\n       clojure.lang.IHashEq (hasheq [db]        (hash-db db))\n       clojure.lang.IPersistentCollection\n                            (count [db]         (count eavt))\n                            (equiv [db other]   (equiv-db db other))\n       clojure.lang.IEditableCollection \n                            (empty [db]         (with-meta (empty-db schema) (meta db)))\n                            (asTransient [db] (db-transient db))\n       clojure.lang.ITransientCollection\n                            (conj [db key] (throw (ex-info \"datascript.DB/conj! is not supported\" {})))\n                            (persistent [db] (db-persistent! db))])\n\n  IDB\n  (-schema [db] (.-schema db))\n  (-attrs-by [db property] ((.-rschema db) property))\n\n  ISearch\n  (-search [db pattern]\n    (let [[e a v tx] pattern\n          eavt       (.-eavt db)\n          aevt       (.-aevt db)\n          avet       (.-avet db)\n          multival?  (contains? (-attrs-by db :db.cardinality/many) a)]\n      (case-tree [e a (some? v) tx]\n        [(set/slice eavt (datom e a v tx) (datom e a v tx))                   ;; e a v tx\n         (set/slice eavt (datom e a v tx0) (datom e a v txmax))               ;; e a v _\n         (->> (set/slice eavt (datom e a nil tx0) (datom e a nil txmax))      ;; e a _ tx\n              (filter (fn [^Datom d] (= tx (datom-tx d)))))\n         (set/slice eavt (datom e a nil tx0) (datom e a nil txmax))           ;; e a _ _\n         (->> (set/slice eavt (datom e nil nil tx0) (datom e nil nil txmax))  ;; e _ v tx\n              (filter (fn [^Datom d] (and (= v (.-v d))\n                                          (= tx (datom-tx d))))))\n         (->> (set/slice eavt (datom e nil nil tx0) (datom e nil nil txmax))  ;; e _ v _\n              (filter (fn [^Datom d] (= v (.-v d)))))\n         (->> (set/slice eavt (datom e nil nil tx0) (datom e nil nil txmax))  ;; e _ _ tx\n              (filter (fn [^Datom d] (= tx (datom-tx d)))))\n         (set/slice eavt (datom e nil nil tx0) (datom e nil nil txmax))       ;; e _ _ _\n         (if (indexing? db a)                                                   ;; _ a v tx\n           (->> (set/slice avet (datom e0 a v tx0) (datom emax a v txmax))      \n                (filter (fn [^Datom d] (= tx (datom-tx d)))))\n           (->> (set/slice aevt (datom e0 a nil tx0) (datom emax a nil txmax))\n                (filter (fn [^Datom d] (and (= v (.-v d))\n                                            (= tx (datom-tx d)))))))\n         (if (indexing? db a)                                                   ;; _ a v _\n           (set/slice avet (datom e0 a v tx0) (datom emax a v txmax))\n           (->> (set/slice aevt (datom e0 a nil tx0) (datom emax a nil txmax))\n                (filter (fn [^Datom d] (= v (.-v d))))))\n         (->> (set/slice aevt (datom e0 a nil tx0) (datom emax a nil txmax))  ;; _ a _ tx\n              (filter (fn [^Datom d] (= tx (datom-tx d)))))\n         (set/slice aevt (datom e0 a nil tx0) (datom emax a nil txmax))       ;; _ a _ _\n         (filter (fn [^Datom d] (and (= v (.-v d))\n                                     (= tx (datom-tx d)))) eavt)                ;; _ _ v tx\n         (filter (fn [^Datom d] (= v (.-v d))) eavt)                            ;; _ _ v _\n         (filter (fn [^Datom d] (= tx (datom-tx d))) eavt)                      ;; _ _ _ tx\n         eavt])))                                                               ;; _ _ _ _\n\n  IIndexAccess\n  (-datoms [db index cs]\n    (validate-indexed db index cs)\n    (set/slice (get db index) (components->pattern db index cs e0 tx0) (components->pattern db index cs emax txmax)))\n\n  (-seek-datoms [db index cs]\n    (validate-indexed db index cs)\n    (set/slice (get db index) (components->pattern db index cs e0 tx0) (datom emax nil nil txmax)))\n\n  (-rseek-datoms [db index cs]\n    (validate-indexed db index cs)\n    (set/rslice (get db index) (components->pattern db index cs emax txmax) (datom e0 nil nil tx0)))\n\n  (-index-range [db attr start end]\n    (validate-indexed db :avet [attr])\n    (validate-attr attr (list '-index-range 'db attr start end))\n    (set/slice (.-avet db)\n      (resolve-datom db nil attr start nil e0 tx0)\n      (resolve-datom db nil attr end nil emax txmax)))\n                \n  clojure.data/EqualityPartition\n  (equality-partition [x] :datascript/db)\n\n  clojure.data/Diff\n  (diff-similar [a b]\n    (diff-sorted (:eavt a) (:eavt b) cmp-datoms-eav-quick)))\n\n(defn db? [x]\n  (and (satisfies? ISearch x)\n       (satisfies? IIndexAccess x)\n       (satisfies? IDB x)))\n\n;; ----------------------------------------------------------------------------\n(defrecord-updatable FilteredDB [unfiltered-db pred hash]\n  #?@(:cljs\n      [IHash                (-hash  [db]        (hash-fdb db))\n       IEquiv               (-equiv [db other]  (equiv-db db other))\n       ICounted             (-count [db]        (count (-datoms db :eavt [])))\n       IPrintWithWriter     (-pr-writer [db w opts] (pr-db db w opts))\n\n       IEmptyableCollection (-empty [_]         (throw (js/Error. \"-empty is not supported on FilteredDB\")))\n\n       ILookup              (-lookup ([_ _]     (throw (js/Error. \"-lookup is not supported on FilteredDB\")))\n                                     ([_ _ _]   (throw (js/Error. \"-lookup is not supported on FilteredDB\"))))\n\n\n       IAssociative         (-contains-key? [_ _] (throw (js/Error. \"-contains-key? is not supported on FilteredDB\")))\n                            (-assoc [_ _ _]       (throw (js/Error. \"-assoc is not supported on FilteredDB\")))]\n\n      :clj\n      [Object               (hashCode [db]      (hash-fdb db))\n\n       clojure.lang.IHashEq (hasheq [db]        (hash-fdb db))\n\n       clojure.lang.IPersistentCollection\n                            (count [db]         (count (-datoms db :eavt [])))\n                            (equiv [db o]       (equiv-db db o))\n                            (cons [db [k v]]    (throw (UnsupportedOperationException. \"cons is not supported on FilteredDB\")))\n                            (empty [db]         (throw (UnsupportedOperationException. \"empty is not supported on FilteredDB\")))\n\n       clojure.lang.ILookup (valAt [db k]       (throw (UnsupportedOperationException. \"valAt/2 is not supported on FilteredDB\")))\n                            (valAt [db k nf]    (throw (UnsupportedOperationException. \"valAt/3 is not supported on FilteredDB\")))\n       clojure.lang.IKeywordLookup (getLookupThunk [db k]\n                                                (throw (UnsupportedOperationException. \"getLookupThunk is not supported on FilteredDB\")))\n\n       clojure.lang.Associative\n                            (containsKey [e k]  (throw (UnsupportedOperationException. \"containsKey is not supported on FilteredDB\")))\n                            (entryAt [db k]     (throw (UnsupportedOperationException. \"entryAt is not supported on FilteredDB\")))\n                            (assoc [db k v]     (throw (UnsupportedOperationException. \"assoc is not supported on FilteredDB\")))])\n\n  IDB\n  (-schema [db]\n    (-schema (.-unfiltered-db db)))\n\n  (-attrs-by [db property]\n    (-attrs-by (.-unfiltered-db db) property))\n\n  ISearch\n  (-search [db pattern]\n    (filter (.-pred db) (-search (.-unfiltered-db db) pattern)))\n\n  IIndexAccess\n  (-datoms [db index cs]\n    (filter (.-pred db) (-datoms (.-unfiltered-db db) index cs)))\n\n  (-seek-datoms [db index cs]\n    (filter (.-pred db) (-seek-datoms (.-unfiltered-db db) index cs)))\n\n  (-rseek-datoms [db index cs]\n    (filter (.-pred db) (-rseek-datoms (.-unfiltered-db db) index cs)))\n\n  (-index-range [db attr start end]\n    (filter (.-pred db) (-index-range (.-unfiltered-db db) attr start end))))\n\n(defn unfiltered-db ^DB [db]\n  (if (instance? FilteredDB db)\n    (.-unfiltered-db ^FilteredDB db)\n    db))\n\n;; ----------------------------------------------------------------------------\n\n(defn attr->properties [k v]\n  (case v\n    :db.unique/identity  [:db/unique :db.unique/identity :db/index]\n    :db.unique/value     [:db/unique :db.unique/value :db/index]\n    :db.cardinality/many [:db.cardinality/many]\n    :db.type/ref         [:db.type/ref :db/index]\n    (cond\n      (and (= :db/isComponent k) (true? v)) [:db/isComponent]\n      (and (= :db/index k) (true? v))       [:db/index]\n      (= :db/tupleAttrs k)                  [:db.type/tuple :db/index]\n      :else [])))\n\n(defn attr-tuples\n  \"e.g. :reg/semester => #{:reg/semester+course+student ...}\"\n  [schema rschema]\n  (reduce\n    (fn [m tuple-attr] ;; e.g. :reg/semester+course+student\n      (reduce-indexed\n        (fn [m src-attr idx] ;; e.g. :reg/semester\n          (update m src-attr assoc tuple-attr idx))\n        m\n        (-> schema tuple-attr :db/tupleAttrs)))\n    {}\n    (:db.type/tuple rschema)))\n\n(defn- rschema\n  \":db/unique           => #{attr ...}\n   :db.unique/identity  => #{attr ...}\n   :db.unique/value     => #{attr ...}\n   :db/index            => #{attr ...}\n   :db.cardinality/many => #{attr ...}\n   :db.type/ref         => #{attr ...}\n   :db/isComponent      => #{attr ...}\n   :db.type/tuple       => #{attr ...}\n   :db/attrTuples       => {attr => {tuple-attr => idx}}\"\n  [schema]\n  (let [rschema (reduce-kv\n                  (fn [rschema attr attr-schema]\n                    (reduce-kv\n                      (fn [rschema key value]\n                        (reduce\n                          (fn [rschema prop]\n                            (update rschema prop conjs attr))\n                          rschema (attr->properties key value)))\n                      rschema attr-schema))\n                  {} schema)]\n    (assoc rschema :db/attrTuples (attr-tuples schema rschema))))\n\n(defn- validate-schema-key [a k v expected]\n  (when-not (or (nil? v)\n                (contains? expected v))\n    (throw (ex-info (str \"Bad attribute specification for \" (pr-str {a {k v}}) \", expected one of \" expected)\n                    {:error :schema/validation\n                     :attribute a\n                     :key k\n                     :value v}))))\n\n(defn- validate-schema [schema]\n  (doseq [[a kv] schema]\n\n    ;; isComponent\n    (let [comp? (:db/isComponent kv false)]\n      (validate-schema-key a :db/isComponent (:db/isComponent kv) #{true false})\n      (when (and comp? (not= (:db/valueType kv) :db.type/ref))\n        (raise \"Bad attribute specification for \" a \": {:db/isComponent true} should also have {:db/valueType :db.type/ref}\"\n          {:error     :schema/validation\n           :attribute a\n           :key       :db/isComponent})))\n\n    (validate-schema-key a :db/unique (:db/unique kv) #{:db.unique/value :db.unique/identity})\n    (validate-schema-key a :db/valueType (:db/valueType kv) #{:db.type/ref :db.type/tuple})\n    (validate-schema-key a :db/cardinality (:db/cardinality kv) #{:db.cardinality/one :db.cardinality/many})\n\n    ;; tuple should have tupleAttrs\n    (when (and (= :db.type/tuple (:db/valueType kv))\n               (not (contains? kv :db/tupleAttrs)))\n      (raise \"Bad attribute specification for \" a \": {:db/valueType :db.type/tuple} should also have :db/tupleAttrs\"\n             {:error :schema/validation\n              :attribute a\n              :key :db/valueType}))\n\n    ;; :db/tupleAttrs is a non-empty sequential coll\n    (when (contains? kv :db/tupleAttrs)\n      (let [ex-data {:error :schema/validation\n                     :attribute a\n                     :key :db/tupleAttrs}]\n        (when (= :db.cardinality/many (:db/cardinality kv))\n          (raise a \" has :db/tupleAttrs, must be :db.cardinality/one\" ex-data))\n\n        (let [attrs (:db/tupleAttrs kv)]\n          (when-not (sequential? attrs)\n            (raise a \" :db/tupleAttrs must be a sequential collection, got: \" attrs ex-data))\n\n          (when (empty? attrs)\n            (raise a \" :db/tupleAttrs can’t be empty\" ex-data))\n\n          (doseq [attr attrs\n                  :let [ex-data (assoc ex-data :value attr)]]\n            (when (contains? (get schema attr) :db/tupleAttrs)\n              (raise a \" :db/tupleAttrs can’t depend on another tuple attribute: \" attr ex-data))\n\n            (when (= :db.cardinality/many (:db/cardinality (get schema attr)))\n              (raise a \" :db/tupleAttrs can’t depend on :db.cardinality/many attribute: \" attr ex-data))))))))\n\n(defn ^DB empty-db\n  ([] (empty-db nil))\n  ([schema]\n    {:pre [(or (nil? schema) (map? schema))]}\n    (validate-schema schema)\n    (map->DB\n      {:schema        schema\n       :rschema       (rschema (merge implicit-schema schema))\n       :eavt          (set/sorted-set-by cmp-datoms-eavt)\n       :aevt          (set/sorted-set-by cmp-datoms-aevt)\n       :avet          (set/sorted-set-by cmp-datoms-avet)\n       :max-eid       e0\n       :max-tx        tx0\n       :pull-patterns (lru/cache 100)\n       :pull-attrs    (lru/cache 100)\n       :hash          (atom 0)})))\n\n(defn- init-max-eid [eavt]\n  (or (-> (set/rslice eavt (datom (dec tx0) nil nil txmax) (datom e0 nil nil tx0))\n        (first)\n        (:e))\n    e0))\n\n(defn ^DB init-db\n  ([datoms] (init-db datoms nil))\n  ([datoms schema]\n    (when-some [not-datom (first (drop-while datom? datoms))]\n      (raise \"init-db expects list of Datoms, got \" (type not-datom)\n        {:error :init-db}))\n    (validate-schema schema)\n    (let [rschema     (rschema (merge implicit-schema schema))\n          indexed     (:db/index rschema)\n          arr         (cond-> datoms\n                        (not (arrays/array? datoms)) (arrays/into-array))\n          _           (arrays/asort arr cmp-datoms-eavt-quick)\n          eavt        (set/from-sorted-array cmp-datoms-eavt arr)\n          _           (arrays/asort arr cmp-datoms-aevt-quick)\n          aevt        (set/from-sorted-array cmp-datoms-aevt arr)\n          avet-datoms (filter (fn [^Datom d] (contains? indexed (.-a d))) datoms)\n          avet-arr    (to-array avet-datoms)\n          _           (arrays/asort avet-arr cmp-datoms-avet-quick)\n          avet        (set/from-sorted-array cmp-datoms-avet avet-arr)\n          max-eid     (init-max-eid eavt)\n          max-tx      (transduce (map (fn [^Datom d] (datom-tx d))) max tx0 eavt)]\n      (map->DB {\n        :schema        schema\n        :rschema       rschema\n        :eavt          eavt\n        :aevt          aevt\n        :avet          avet\n        :max-eid       max-eid\n        :max-tx        max-tx\n        :pull-patterns (lru/cache 100)\n        :pull-attrs    (lru/cache 100)\n        :hash          (atom 0)}))))\n\n(defn- equiv-db-index [x y]\n  (loop [xs (seq x)\n         ys (seq y)]\n    (cond\n      (nil? xs) (nil? ys)\n      (= (first xs) (first ys)) (recur (next xs) (next ys))\n      :else false)))\n\n(defn- hash-db [^DB db]\n  (let [h @(.-hash db)]\n    (if (zero? h)\n      (reset! (.-hash db) (combine-hashes (hash (.-schema db))\n                                          (hash (.-eavt db))))\n      h)))\n\n(defn- hash-fdb [^FilteredDB db]\n  (let [h @(.-hash db)\n        datoms (or (-datoms db :eavt []) #{})]\n    (if (zero? h)\n      (let [datoms (or (-datoms db :eavt []) #{})]\n        (reset! (.-hash db) (combine-hashes (hash (-schema db))\n                                            (hash-unordered-coll datoms))))\n      h)))\n\n(defn- equiv-db [db other]\n  (and (or (instance? DB other) (instance? FilteredDB other))\n       (= (-schema db) (-schema other))\n       (equiv-db-index (-datoms db :eavt []) (-datoms other :eavt []))))\n\n#?(:cljs\n   (defn pr-db [db w opts]\n     (-write w \"#datascript/DB {\")\n     (-write w \":schema \")\n     (pr-writer (-schema db) w opts)\n     (-write w \", :datoms \")\n     (pr-sequential-writer w\n                           (fn [d w opts]\n                             (pr-sequential-writer w pr-writer \"[\" \" \" \"]\" opts [(.-e d) (.-a d) (.-v d) (datom-tx d)]))\n                           \"[\" \" \" \"]\" opts (-datoms db :eavt []))\n     (-write w \"}\")))\n\n#?(:clj\n   (do\n     (defn pr-db [db, ^java.io.Writer w]\n       (.write w (str \"#datascript/DB {\"))\n       (.write w \":schema \")\n       (binding [*out* w]\n         (pr (-schema db))\n         (.write w \", :datoms [\")\n         (apply pr (map (fn [^Datom d] [(.-e d) (.-a d) (.-v d) (datom-tx d)]) (-datoms db :eavt []))))\n       (.write w \"]}\"))\n\n     (defmethod print-method DB [db w] (pr-db db w))\n     (defmethod print-method FilteredDB [db w] (pr-db db w))     \n))\n\n(defn db-from-reader [{:keys [schema datoms]}]\n  (init-db (map (fn [[e a v tx]] (datom e a v tx)) datoms) schema))\n\n;; ----------------------------------------------------------------------------\n\n(declare entid-strict entid-some ref?)\n\n(defn- resolve-datom [db e a v t default-e default-tx]\n  (when a (validate-attr a (list 'resolve-datom 'db e a v t)))\n  (datom\n    (or (entid-some db e) default-e)  ;; e\n    a                                 ;; a\n    (if (and (some? v) (ref? db a))   ;; v\n      (entid-strict db v)\n      v)\n    (or (entid-some db t) default-tx))) ;; t\n\n(defn- components->pattern [db index [c0 c1 c2 c3] default-e default-tx]\n  (case index\n    :eavt (resolve-datom db c0 c1 c2 c3 default-e default-tx)\n    :aevt (resolve-datom db c1 c0 c2 c3 default-e default-tx)\n    :avet (resolve-datom db c2 c0 c1 c3 default-e default-tx)))\n\n;; ----------------------------------------------------------------------------\n\n(defrecord TxReport [db-before db-after tx-data tempids tx-meta])\n\n(defn #?@(:clj  [^Boolean is-attr?]\n          :cljs [^boolean is-attr?]) [db attr property]\n  (contains? (-attrs-by db property) attr))\n\n(defn #?@(:clj  [^Boolean multival?]\n          :cljs [^boolean multival?]) [db attr]\n  (is-attr? db attr :db.cardinality/many))\n\n(defn #?@(:clj  [^Boolean ref?]\n          :cljs [^boolean ref?]) [db attr]\n  (is-attr? db attr :db.type/ref))\n\n(defn #?@(:clj  [^Boolean component?]\n          :cljs [^boolean component?]) [db attr]\n  (is-attr? db attr :db/isComponent))\n\n(defn #?@(:clj  [^Boolean indexing?]\n          :cljs [^boolean indexing?]) [db attr]\n  (is-attr? db attr :db/index))\n\n(defn #?@(:clj  [^Boolean tuple?]\n          :cljs [^boolean tuple?]) [db attr]\n  (is-attr? db attr :db.type/tuple))\n\n(defn #?@(:clj  [^Boolean tuple-source?]\n          :cljs [^boolean tuple-source?]) [db attr]\n  (is-attr? db attr :db/attrTuples))\n\n(defn entid [db eid]\n  {:pre [(db? db)]}\n  (cond\n    (and (number? eid) (pos? eid))\n    (if (> eid emax)\n      (raise \"Highest supported entity id is \" emax \", got \" eid {:error :entity-id :value eid})\n      eid)\n    \n    (sequential? eid)\n    (let [[attr value] eid]\n      (cond\n        (not= (count eid) 2)\n          (raise \"Lookup ref should contain 2 elements: \" eid\n            {:error :lookup-ref/syntax, :entity-id eid})\n        (not (is-attr? db attr :db/unique))\n          (raise \"Lookup ref attribute should be marked as :db/unique: \" eid\n            {:error :lookup-ref/unique, :entity-id eid})\n        (nil? value)\n          nil\n        :else\n          (-> (-datoms db :avet eid) first :e)))\n    \n    #?@(:cljs [(array? eid) (recur db (array-seq eid))])\n    \n    (keyword? eid)\n    (-> (-datoms db :avet [:db/ident eid]) first :e)\n\n    :else\n    (raise \"Expected number or lookup ref for entity id, got \" eid\n      {:error :entity-id/syntax, :entity-id eid})))\n\n(defn entid-strict [db eid]\n  (or (entid db eid)\n      (raise \"Nothing found for entity id \" eid\n             {:error :entity-id/missing\n              :entity-id eid})))\n\n(defn entid-some [db eid]\n  (when eid\n    (entid-strict db eid)))\n\n;;;;;;;;;; Transacting\n\n(defn validate-datom [db ^Datom datom]\n  (when (and (datom-added datom)\n             (is-attr? db (.-a datom) :db/unique))\n    (when-some [found (not-empty (-datoms db :avet [(.-a datom) (.-v datom)]))]\n      (raise \"Cannot add \" datom \" because of unique constraint: \" found\n             {:error :transact/unique\n              :attribute (.-a datom)\n              :datom datom}))))\n\n(defn- validate-attr [attr at]\n  (when-not (or (keyword? attr) (string? attr))\n    (raise \"Bad entity attribute \" attr \" at \" at \", expected keyword or string\"\n           {:error :transact/syntax, :attribute attr, :context at})))\n\n(defn- validate-val [v at]\n  (when (nil? v)\n    (raise \"Cannot store nil as a value at \" at\n           {:error :transact/syntax, :value v, :context at})))\n\n(defn- current-tx [report]\n  (inc (get-in report [:db-before :max-tx])))\n\n(defn- next-eid [db]\n  (inc (:max-eid db)))\n\n(defn- #?@(:clj  [^Boolean tx-id?]\n           :cljs [^boolean tx-id?])\n  [e]\n  (or (= e :db/current-tx)\n      (= e \":db/current-tx\") ;; for datascript.js interop\n      (= e \"datomic.tx\")\n      (= e \"datascript.tx\")))\n\n(defn- #?@(:clj  [^Boolean tempid?]\n           :cljs [^boolean tempid?])\n  [x]\n  (or (and (number? x) (neg? x)) (string? x)))\n\n(defn- new-eid? [db eid]\n  (and (> eid (:max-eid db))\n       (< eid tx0))) ;; tx0 is max eid\n\n(defn- advance-max-eid [db eid]\n  (cond-> db\n    (new-eid? db eid)\n      (assoc :max-eid eid)))\n\n(defn- allocate-eid\n  ([report eid]\n    (update report :db-after advance-max-eid eid))\n  ([report e eid]\n    (cond-> report\n      (tx-id? e)\n      (update :tempids assoc e eid)\n\n      (tempid? e)\n      (update :tempids assoc e eid)\n\n      (and (not (tempid? e)) (new-eid? (:db-after report) eid))\n      (update :tempids assoc eid eid)\n\n      true\n      (update :db-after advance-max-eid eid))))\n\n;; In context of `with-datom` we can use faster comparators which\n;; do not check for nil (~10-15% performance gain in `transact`)\n\n(defn- with-datom [db ^Datom datom]\n  (validate-datom db datom)\n  (let [indexing? (indexing? db (.-a datom))]\n    (if (datom-added datom)\n      (cond-> db\n        true      (update :eavt set/conj datom cmp-datoms-eavt-quick)\n        true      (update :aevt set/conj datom cmp-datoms-aevt-quick)\n        indexing? (update :avet set/conj datom cmp-datoms-avet-quick)\n        true      (advance-max-eid (.-e datom))\n        true      (assoc :hash (atom 0)))\n      (if-some [removing (fsearch db [(.-e datom) (.-a datom) (.-v datom)])]\n        (cond-> db\n          true      (update :eavt set/disj removing cmp-datoms-eavt-quick)\n          true      (update :aevt set/disj removing cmp-datoms-aevt-quick)\n          indexing? (update :avet set/disj removing cmp-datoms-avet-quick)\n          true      (assoc :hash (atom 0)))\n        db))))\n\n(defn- queue-tuple [queue tuple idx db e a v]\n  (let [tuple-value  (or (get queue tuple)\n                       (:v (first (-datoms db :eavt [e tuple])))\n                       (vec (repeat (-> db (-schema) (get tuple) :db/tupleAttrs count) nil)))\n        tuple-value' (assoc tuple-value idx v)]\n    (assoc queue tuple tuple-value')))\n\n(defn- queue-tuples [queue tuples db e a v]\n  (reduce-kv\n    (fn [queue tuple idx]\n      (queue-tuple queue tuple idx db e a v))\n    queue\n    tuples))\n\n(defn- transact-report [report datom]\n  (let [db      (:db-after report)\n        a       (:a datom)\n        report' (-> report\n                  (assoc :db-after (with-datom db datom))\n                  (update :tx-data conj datom))]\n    (if (tuple-source? db a)\n      (let [e      (:e datom)\n            v      (if (datom-added datom) (:v datom) nil)\n            queue  (or (-> report' ::queued-tuples (get e)) {})\n            tuples (get (-attrs-by db :db/attrTuples) a)\n            queue' (queue-tuples queue tuples db e a v)]\n        (update report' ::queued-tuples assoc e queue'))\n      report')))\n\n(defn #?@(:clj  [^Boolean reverse-ref?]\n          :cljs [^boolean reverse-ref?]) [attr]\n  (cond\n    (keyword? attr)\n    (= \\_ (nth (name attr) 0))\n    \n    (string? attr)\n    (boolean (re-matches #\"(?:([^/]+)/)?_([^/]+)\" attr))\n   \n    :else\n    (raise \"Bad attribute type: \" attr \", expected keyword or string\"\n           {:error :transact/syntax, :attribute attr})))\n\n(defn reverse-ref [attr]\n  (cond\n    (keyword? attr)\n    (if (reverse-ref? attr)\n      (keyword (namespace attr) (subs (name attr) 1))\n      (keyword (namespace attr) (str \"_\" (name attr))))\n\n   (string? attr)\n   (let [[_ ns name] (re-matches #\"(?:([^/]+)/)?([^/]+)\" attr)]\n     (if (= \\_ (nth name 0))\n       (if ns (str ns \"/\" (subs name 1)) (subs name 1))\n       (if ns (str ns \"/_\" name) (str \"_\" name))))\n   \n   :else\n    (raise \"Bad attribute type: \" attr \", expected keyword or string\"\n           {:error :transact/syntax, :attribute attr})))\n\n(defn- resolve-upserts\n  \"Returns [entity' upserts]. Upsert attributes that resolve to existing entities\n   are removed from entity, rest are kept in entity for insertion. No validation is performed.\n\n   upserts :: {:name  {\\\"Ivan\\\"  1}\n               :email {\\\"ivan@\\\" 2}\n               :alias {\\\"abc\\\"   3\n                       \\\"def\\\"   4}}}\"\n  [db entity]\n  (if-some [idents (not-empty (-attrs-by db :db.unique/identity))]\n    (let [resolve (fn [a v]\n                    (:e (first (-datoms db :avet [a v]))))\n          split   (fn [a vs]\n                    (reduce\n                      (fn [acc v]\n                        (if-some [e (resolve a v)]\n                          (update acc 1 assoc v e)\n                          (update acc 0 conj v)))\n                      [[] {}] vs))]\n      (reduce-kv\n        (fn [[entity upserts] a v]\n          (cond\n            (not (contains? idents a))\n            [(assoc entity a v) upserts]\n\n            (and\n              (multival? db a)\n              (or\n                (arrays/array? v)\n                (and (coll? v) (not (map? v)))))\n            (let [[insert upsert] (split a v)]\n              [(cond-> entity\n                 (not (empty? insert)) (assoc a insert))\n               (cond-> upserts\n                 (not (empty? upsert)) (assoc a upsert))])\n\n            :else\n            (if-some [e (resolve a v)]\n              [entity (assoc upserts a {v e})]\n              [(assoc entity a v) upserts])))\n        [{} {}]\n        entity))\n    [entity nil]))\n\n(defn validate-upserts\n  \"Throws if not all upserts point to the same entity. \n   Returns single eid that all upserts point to, or null.\"\n  [entity upserts]\n  (let [upsert-ids (reduce-kv\n                     (fn [m a v->e]\n                       (reduce-kv\n                         (fn [m v e]\n                           (assoc m e [a v]))\n                         m v->e))\n                     {} upserts)]\n    (if (<= 2 (count upsert-ids))\n      (let [[e1 [a1 v1]] (first upsert-ids)\n            [e2 [a2 v2]] (second upsert-ids)]\n        (raise \"Conflicting upserts: \" [a1 v1] \" resolves to \" e1 \", but \" [a2 v2] \" resolves to \" e2\n          {:error     :transact/upsert\n           :assertion [e1 a1 v1]\n           :conflict  [e2 a2 v2]}))\n      (let [[upsert-id [a v]] (first upsert-ids)\n            eid (:db/id entity)]\n        (when (and\n                (some? upsert-id)\n                (some? eid)\n                (not (tempid? eid))\n                (not= upsert-id eid))\n          (raise \"Conflicting upsert: \" [a v] \" resolves to \" upsert-id \", but entity already has :db/id \" eid\n            {:error     :transact/upsert\n             :assertion [upsert-id a v]\n             :conflict  {:db/id eid}}))\n        upsert-id))))\n\n;; multivals/reverse can be specified as coll or as a single value, trying to guess\n(defn- maybe-wrap-multival [db a vs]\n  (cond\n    ;; not a multival context\n    (not (or (reverse-ref? a)\n             (multival? db a)))\n    [vs]\n\n    ;; not a collection at all, so definitely a single value\n    (not (or (arrays/array? vs)\n             (and (coll? vs) (not (map? vs)))))\n    [vs]\n    \n    ;; probably lookup ref\n    (and (= (count vs) 2)\n         (is-attr? db (first vs) :db.unique/identity))\n    [vs]\n    \n    :else vs))\n\n(defn- explode [db entity]\n  (let [eid  (:db/id entity)\n        ;; sort tuple attrs after non-tuple\n        a+vs (apply concat\n               (reduce\n                 (fn [acc [a vs]]\n                   (update acc (if (tuple? db a) 1 0) conj [a vs]))\n                 [[] []] entity))]\n    (for [[a vs] a+vs\n          :when  (not= a :db/id)\n          :let   [_          (validate-attr a {:db/id eid, a vs})\n                  reverse?   (reverse-ref? a)\n                  straight-a (if reverse? (reverse-ref a) a)\n                  _          (when (and reverse? (not (ref? db straight-a)))\n                               (raise \"Bad attribute \" a \": reverse attribute name requires {:db/valueType :db.type/ref} in schema\"\n                                      {:error :transact/syntax, :attribute a, :context {:db/id eid, a vs}}))]\n          v      (maybe-wrap-multival db a vs)]\n      (if (and (ref? db straight-a) (map? v)) ;; another entity specified as nested map\n        (assoc v (reverse-ref a) eid)\n        (if reverse?\n          [:db/add v   straight-a eid]\n          [:db/add eid straight-a v])))))\n\n(defn- transact-add [report [_ e a v tx :as ent]]\n  (validate-attr a ent)\n  (validate-val  v ent)\n  (let [tx        (or tx (current-tx report))\n        db        (:db-after report)\n        e         (entid-strict db e)\n        v         (if (ref? db a) (entid-strict db v) v)\n        new-datom (datom e a v tx)\n        multival? (multival? db a)\n        old-datom ^Datom (if multival?\n                           (fsearch db [e a v])\n                           (fsearch db [e a]))]\n      (cond\n        (nil? old-datom)\n        (transact-report report new-datom)\n\n        (= (.-v old-datom) v)\n        (update report ::tx-redundant conjv new-datom)\n\n        :else\n        (-> report\n          (transact-report (datom e a (.-v old-datom) tx false))\n          (transact-report new-datom)))))\n\n(defn- transact-retract-datom [report ^Datom d]\n  (let [tx (current-tx report)]\n    (transact-report report (datom (.-e d) (.-a d) (.-v d) tx false))))\n\n(defn- retract-components [db datoms]\n  (into #{} (comp\n              (filter (fn [^Datom d] (component? db (.-a d))))\n              (map (fn [^Datom d] [:db.fn/retractEntity (.-v d)]))) datoms))\n\n(declare transact-tx-data)\n\n(defn- retry-with-tempid [initial-report report es tempid upserted-eid]\n  (if (contains? (:tempids initial-report) tempid)\n    (raise \"Conflicting upsert: \" tempid \" resolves\"\n           \" both to \" upserted-eid \" and \" (get-in initial-report [:tempids tempid])\n      {:error :transact/upsert})\n    ;; try to re-run from the beginning\n    ;; but remembering that `tempid` will resolve to `upserted-eid`\n    (let [tempids' (-> (:tempids report)\n                     (assoc tempid upserted-eid))\n          report'  (assoc initial-report :tempids tempids')]\n      (transact-tx-data report' es))))\n\n(def builtin-fn?\n  #{:db.fn/call\n    :db.fn/cas\n    :db/cas\n    :db/add\n    :db/retract\n    :db.fn/retractAttribute\n    :db.fn/retractEntity\n    :db/retractEntity})\n\n(defn flush-tuples [report]\n  (let [db          (:db-after report)\n        schema      (-schema db)\n        attr-tuples (-attrs-by db :db/attrTuples)]\n    (reduce-kv\n      (fn [entities eid tuples+values]\n        (reduce-kv\n          (fn [entities tuple value]\n            (let [value   (if (every? nil? value) nil value)\n                  current (:v (first (-datoms db :eavt [eid tuple])))]\n              (cond\n                (= value current) entities\n                (nil? value)      (conj entities ^::internal [:db/retract eid tuple current])\n                :else             (conj entities ^::internal [:db/add eid tuple value]))))\n          entities\n          tuples+values))\n      []\n      (::queued-tuples report))))\n\n(defn check-value-tempids [report]\n  (let [all-tempids (::value-tempids report)\n        reduce-fn   (fn [tempids datom]\n                      (if (datom-added datom)\n                        (dissoc tempids (:e datom))\n                        tempids))\n        unused      (reduce reduce-fn all-tempids (concat (:tx-data report) (::tx-redundant report)))]\n    (if (empty? unused)\n      (dissoc report ::value-tempids ::tx-redundant)\n      (raise \"Tempids used only as value in transaction: \" (sort (vals unused))\n        {:error :transact/syntax, :tempids unused}))))\n\n(defn transact-tx-data [initial-report initial-es]\n  (when-not (or (nil? initial-es)\n                (sequential? initial-es))\n    (raise \"Bad transaction data \" initial-es \", expected sequential collection\"\n           {:error :transact/syntax, :tx-data initial-es}))\n  (let [initial-report' (-> initial-report\n                          #_(update :db-after transient))\n        has-tuples?     (not (empty? (-attrs-by (:db-after initial-report) :db.type/tuple)))\n        initial-es'     (if has-tuples?\n                          (interleave initial-es (repeat ::flush-tuples))\n                          initial-es)]\n    (loop [report initial-report'\n           es     initial-es']\n      (cond+\n        (empty? es)\n        (-> report\n          (check-value-tempids)\n          (update :tempids assoc :db/current-tx (current-tx report))\n          (update :db-after update :max-tx inc)\n          #_(update :db-after persistent!))\n\n        :let [[entity & entities] es]\n\n        (nil? entity)\n        (recur report entities)\n\n        (= ::flush-tuples entity)\n        (if (contains? report ::queued-tuples)\n          (recur\n            (dissoc report ::queued-tuples)\n            (concat (flush-tuples report) entities))\n          (recur report entities))\n\n        :let [db      (:db-after report)\n              tempids (:tempids report)]\n\n        (map? entity)\n        (let [old-eid (:db/id entity)]\n          (cond+\n            ;; trivial entity\n            ; (if (contains? entity :db/id)\n            ;   (= 1 (count entity))\n            ;   (= 0 (count entity)))\n            ; (recur report entities)\n\n            ;; :db/current-tx / \"datomic.tx\" => tx\n            (tx-id? old-eid)\n            (let [id (current-tx report)]\n              (recur (allocate-eid report old-eid id)\n                     (cons (assoc entity :db/id id) entities)))\n           \n            ;; lookup-ref => resolved | error\n            (sequential? old-eid)\n            (let [id (entid-strict db old-eid)]\n              (recur report\n                     (cons (assoc entity :db/id id) entities)))\n           \n            ;; upserted => explode | error\n            :let [[entity' upserts] (resolve-upserts db entity)\n                  upserted-eid      (validate-upserts entity' upserts)]\n\n            (some? upserted-eid)\n            (if (and (tempid? old-eid)\n                     (contains? tempids old-eid)\n                     (not= upserted-eid (get tempids old-eid)))\n              (retry-with-tempid initial-report report initial-es old-eid upserted-eid)\n              (recur\n                (-> report\n                  (allocate-eid old-eid upserted-eid)\n                  (update ::tx-redundant conjv (datom upserted-eid nil nil tx0)))\n                (concat (explode db (assoc entity' :db/id upserted-eid)) entities)))\n           \n            ;; resolved | allocated-tempid | tempid | nil => explode\n            (or (number? old-eid)\n                (nil?    old-eid)\n                (string? old-eid))\n            (let [new-eid (cond\n                            (nil? old-eid)    (next-eid db)\n                            (tempid? old-eid) (or (get tempids old-eid) (next-eid db))\n                            :else             old-eid)\n                  new-entity (assoc entity :db/id new-eid)]                \n              (recur (allocate-eid report old-eid new-eid)\n                     (concat (explode db new-entity) entities)))\n           \n            ;; trash => error\n            :else\n            (raise \"Expected number, string or lookup ref for :db/id, got \" old-eid\n              { :error :entity-id/syntax, :entity entity })))\n\n        (sequential? entity)\n        (let [[op e a v] entity]\n          (cond\n            (= op :db.fn/call)\n            (let [[_ f & args] entity]\n              (recur report (concat (apply f db args) entities)))\n            \n            (and (keyword? op)\n              (not (builtin-fn? op)))\n            (if-some [ident (entid db op)]\n              (let [fun  (:v (fsearch db [ident :db/fn]))\n                    args (next entity)]\n                (if (fn? fun)\n                  (recur report (concat (apply fun db args) entities))\n                  (raise \"Entity \" op \" expected to have :db/fn attribute with fn? value\"\n                         {:error :transact/syntax, :operation :db.fn/call, :tx-data entity})))\n              (raise \"Can’t find entity for transaction fn \" op\n                     {:error :transact/syntax, :operation :db.fn/call, :tx-data entity}))\n            \n            (and (tempid? e)\n              (not= op :db/add))\n            (raise \"Can't use tempid in '\" entity \"'. Tempids are allowed in :db/add only\"\n              { :error :transact/syntax, :op entity })\n\n            (or (= op :db.fn/cas)\n              (= op :db/cas))\n            (let [[_ e a ov nv] entity\n                  e (entid-strict db e)\n                  _ (validate-attr a entity)\n                  ov (if (ref? db a) (entid-strict db ov) ov)\n                  nv (if (ref? db a) (entid-strict db nv) nv)\n                  _ (validate-val nv entity)\n                  datoms (vec (-search db [e a]))]\n              (if (multival? db a)\n                (if (some (fn [^Datom d] (= (.-v d) ov)) datoms)\n                  (recur (transact-add report [:db/add e a nv]) entities)\n                  (raise \":db.fn/cas failed on datom [\" e \" \" a \" \" (map :v datoms) \"], expected \" ov\n                         {:error :transact/cas, :old datoms, :expected ov, :new nv}))\n                (let [v (:v (first datoms))]\n                  (if (= v ov)\n                    (recur (transact-add report [:db/add e a nv]) entities)\n                    (raise \":db.fn/cas failed on datom [\" e \" \" a \" \" v \"], expected \" ov\n                           {:error :transact/cas, :old (first datoms), :expected ov, :new nv })))))\n\n            (tx-id? e)\n            (recur (allocate-eid report e (current-tx report)) (cons [op (current-tx report) a v] entities))\n\n            (and (ref? db a) (tx-id? v))\n            (recur (allocate-eid report v (current-tx report)) (cons [op e a (current-tx report)] entities))\n\n            (and (ref? db a) (tempid? v))\n            (if-some [resolved (get tempids v)]\n              (let [report' (update report ::value-tempids assoc resolved v)]\n                (recur report' (cons [op e a resolved] entities)))\n              (let [resolved (next-eid db)\n                    report'  (-> report\n                               (allocate-eid v resolved)\n                               (update ::value-tempids assoc resolved v))]\n                (recur report' es)))\n\n            (tempid? e)\n            (let [upserted-eid  (when (is-attr? db a :db.unique/identity)\n                                  (:e (first (-datoms db :avet [a v]))))\n                  allocated-eid (get tempids e)]\n              (if (and upserted-eid allocated-eid (not= upserted-eid allocated-eid))\n                (retry-with-tempid initial-report report initial-es e upserted-eid)\n                (let [eid (or upserted-eid allocated-eid (next-eid db))]\n                  (recur (allocate-eid report e eid) (cons [op eid a v] entities)))))\n\n            (and (not (::internal (meta entity)))\n              (tuple? db a))\n            ;; allow transacting in tuples if they fully match already existing values\n            (let [tuple-attrs (get-in db [:schema a :db/tupleAttrs])]\n              (if (and\n                    (= (count tuple-attrs) (count v))\n                    (every? some? v)\n                    (every? \n                      (fn [[tuple-attr tuple-value]]\n                        (let [db-value (:v (first (-datoms db :eavt [e tuple-attr])))]\n                          (= tuple-value db-value)))\n                      (map vector tuple-attrs v)))\n                (recur report entities)\n                (raise \"Can’t modify tuple attrs directly: \" entity\n                  {:error :transact/syntax, :tx-data entity})))\n\n            (= op :db/add)\n            (recur (transact-add report entity) entities)\n\n            (and (= op :db/retract) (some? v))\n            (if-some [e (entid db e)]\n              (let [v (if (ref? db a) (entid-strict db v) v)]\n                (validate-attr a entity)\n                (validate-val v entity)\n                (if-some [old-datom (fsearch db [e a v])]\n                  (recur (transact-retract-datom report old-datom) entities)\n                  (recur report entities)))\n              (recur report entities))\n\n            (or (= op :db.fn/retractAttribute)\n                (= op :db/retract))\n            (if-some [e (entid db e)]\n              (let [_      (validate-attr a entity)\n                    datoms (vec (-search db [e a]))]\n                (recur (reduce transact-retract-datom report datoms)\n                       (concat (retract-components db datoms) entities)))\n              (recur report entities))\n\n            (or (= op :db.fn/retractEntity)\n                (= op :db/retractEntity))\n            (if-some [e (entid db e)]\n              (let [e-datoms (vec (-search db [e]))\n                    v-datoms (vec (mapcat (fn [a] (-search db [nil a e])) (-attrs-by db :db.type/ref)))]\n                (recur (reduce transact-retract-datom report (concat e-datoms v-datoms))\n                       (concat (retract-components db e-datoms) entities)))\n              (recur report entities))\n\n           :else\n           (raise \"Unknown operation at \" entity \", expected :db/add, :db/retract, :db.fn/call, :db.fn/retractAttribute, :db.fn/retractEntity or an ident corresponding to an installed transaction function (e.g. {:db/ident <keyword> :db/fn <Ifn>}, usage of :db/ident requires {:db/unique :db.unique/identity} in schema)\" {:error :transact/syntax, :operation op, :tx-data entity})))\n       \n       (datom? entity)\n       (let [[e a v tx added] entity]\n         (if added\n           (recur (transact-add report [:db/add e a v tx]) entities)\n           (recur report (cons [:db/retract e a v] entities))))\n\n       :else\n       (raise \"Bad entity type at \" entity \", expected map or vector\"\n              {:error :transact/syntax, :tx-data entity})))))\n","~:reader-features",["^L",["~:cljs"]],"~:cljc",true,"~:source-map-compact",["^ ","mappings",";;;;AAcG,AACE,AAAKA,0BAAUC;;AACf,AAAKC,yCAAyBD;;AAC9B,AAAKE,8CAA8BF;AAExC,mBAAA,nBAAaG;AACb,oBAAA,pBAAaC;AACb,qBAAA,rBAAaC;AACb,sBAAA,tBAAaC;AACb,gCAAA,2CAAA,uDAAA,2CAAA,2DAAA,xOAAaC;AAUb,+BAAA,/BAC0BC,sEACvBC;AAFH,AAGE,SAAK,GAAK,OAASA,sBACV,EAAI,AAACC,yBAAmBD,QACpB,AAACE,oDAAcF;;AAwB9B,AAAKG,sBAAM,4DAAA,5DAACC,6CAAKC;AACjB,AAAKC,sBAAM,4DAAA,5DAACF,6CAAKC;AAEjB;;;+BAAA,/BAAME,sEAEHC,EAAEC,KAAKC;AAFV,AAGE,OAACC,gBACC,AAACC,+CACC,WAAAC,SAAeb;AAAf,AAAA,IAAAc,aAAAD;UAAA,AAAAE,4CAAAD,WAAA,IAAA,jEAAME;UAAN,AAAAD,4CAAAD,WAAA,IAAA,jEAAUG;AAAV,AACE,IAAMC,MAAI,CAACV,kCAAAA,6CAAAA,bAAEQ,yBAAAA,rBAAIhB,yBAAAA,vBAAEiB,yBAAAA;AAAnB,AACE,GAAI,AAACE,yBAASD;AACZ,yBAAA,lBAACE,qGAASF,IAAID;;AADhB,0FAEGC,IAAI,OAAA,NAAKD;;GALlB,wFAAA,LAMGR,iBACDC;;AASN;;;gCAAA,hCAAOW,wEAEJC;AAFH,AAGE,OAACC,mBAAQ,AAAA,8EAAKD;;AAShB,+BAAA,/BAAME,sEAAgBxB,EAAEyB;AAAxB,AAEW,OAACC,uBAAa1B,EAAEyB;;AAoD3B,AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,AAEA,AAAA;AAAA;;;uBAAA,vBAAae;;AAAb,IAAAb,0CAAA,WACac;AADb,AAAA,IAAAb,kBAAA,EAAA,UAAA,OAAA,hBACaa,qBAAAA;IADbZ,kBAAA,CAAAC,uBAAA,AAAAC,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TACaY,mCAAAA;;AADb,IAAAT,kBAAA,CAAAF,uBAAA;AAAA,AAAA,GAAA,GAAA,CAAAE,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TACaS,mCAAAA;;AADb,MAAA,AAAAR,2BAAA,kBACaQ;;;;AADb,AAAA,yBAAA,zBACGX,0DAAUW;AADb,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,+CAAA,zEACaA,0BAAAA;AADb,OACaA,4CAAAA;;AADb,OAAAd,wCACac;;;;AADb,IAAAP,6CAAA,WAEgBO;AAFhB,AAAA,IAAAb,kBAAA,EAAA,UAAA,OAAA,hBAEgBa,qBAAAA;IAFhBZ,kBAAA,CAAAM,0BAAA,AAAAJ,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAEgBY,mCAAAA;;AAFhB,IAAAT,kBAAA,CAAAG,0BAAA;AAAA,AAAA,GAAA,GAAA,CAAAH,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAEgBS,mCAAAA;;AAFhB,MAAA,AAAAR,2BAAA,qBAEgBQ;;;;AAFhB,AAAA,4BAAA,5BAEGN,gEAAaM;AAFhB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,kDAAA,5EAEgBA,0BAAAA;AAFhB,OAEgBA,+CAAAA;;AAFhB,OAAAP,2CAEgBO;;;;AAFhB,IAAAL,+CAAA,WAGkBK;AAHlB,AAAA,IAAAb,kBAAA,EAAA,UAAA,OAAA,hBAGkBa,qBAAAA;IAHlBZ,kBAAA,CAAAQ,4BAAA,AAAAN,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAGkBY,mCAAAA;;AAHlB,IAAAT,kBAAA,CAAAK,4BAAA;AAAA,AAAA,GAAA,GAAA,CAAAL,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAGkBS,mCAAAA;;AAHlB,MAAA,AAAAR,2BAAA,uBAGkBQ;;;;AAHlB,AAAA,8BAAA,9BAGGJ,oEAAeI;AAHlB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,oDAAA,9EAGkBA,0BAAAA;AAHlB,OAGkBA,iDAAAA;;AAHlB,OAAAL,6CAGkBK;;;;AAHlB,IAAAH,+CAAA,WAIkBG,MAAKC;AAJvB,AAAA,IAAAd,kBAAA,EAAA,UAAA,OAAA,hBAIkBa,qBAAAA;IAJlBZ,kBAAA,CAAAU,4BAAA,AAAAR,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,6DAAAA,fAIkBY,yCAAAA,nCAAKC,yCAAAA;;AAJvB,IAAAV,kBAAA,CAAAO,4BAAA;AAAA,AAAA,GAAA,GAAA,CAAAP,mBAAA;AAAA,QAAAA,gDAAAA,6DAAAA,fAIkBS,yCAAAA,nCAAKC,yCAAAA;;AAJvB,MAAA,AAAAT,2BAAA,uBAIkBQ;;;;AAJlB,AAAA,8BAAA,9BAIGF,oEAAeE,MAAKC;AAJvB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,oDAAA,9EAIkBD,0BAAAA;AAJlB,OAIkBA,iDAAAA,MAAKC;;AAJvB,OAAAJ,6CAIkBG,MAAKC;;;;AAJvB,AAMA,AAAA;;;;;;;;;;;;;;;;;;;;;;AAAA,AAAA,CAAA,AAAA,sDAAAC,tDAASK;;AAAT,CAAA,AAAA,sEAAA,tEAASA,iFAGIO;;AAHb,AAAA,YAAA,RAGaA;AAHb,AAGgB,GAAI,aAAA,ZAAMF;AAAIA;;AAAG,UAAGA;;;;AAHpC,CAAA,AAAA,yEAAA,zEAASL,oFAIOO;;AAJhB,AAAA,YAAA,RAIgBA;AAJhB,AAImB,oBAAA,ZAAMF;;;AAJzB,CAAA,AAAA,2EAAA,3EAASL,sFAKSQ;;AALlB,AAAA,YAAA,RAKkBA;AALlB,AAKqBvC;;;AALrB,CAAA,AAAA,2EAAA,3EAAS+B,sFAMSQ,EAAEd;;AANpB,AAAA,YAAA,RAMkBc;AANlB,AAM2B,QAAMvC,aAAI,SAAA,RAAKyB;;;AAN1C,CAAA,AAAA,8DAAA,9DAASM,yEAUOO;;AAVhB,AAAA,YAAA,RAUgBA;AAVhB,AAUmB,GAAI,kBAAA,jBAAOD;AACT,QAAMA,eAAM,CAACG,yDAAAA,gEAAAA,TAAWF,4CAAAA;;AACxBD;;;;AAZrB,CAAA,AAAA,gEAAA,hEAASN,2EAcQO,EAAEG;;AAdnB,AAAA,YAAA,RAciBH;AAdjB,AAcsB,IAAAI,oBAAK,cAAWX,bAAMU;AAAtB,AAAA,GAAAC;AAAyB,QAACC,0DAAAA,mEAAAA,XAAYL,+CAAAA,zCAAEG,+CAAAA;;AAAxCC;;;;AAdtB,CAAA,AAAA,gEAAA,hEAASX,2EAiBMO;;AAjBf,AAAA,YAAA,RAiBeA;AAjBf,AAiBkB,QAACM,wDAAAA,+DAAAA,TAAUN,2CAAAA;;;AAjB7B,CAAA,AAAA,kEAAA,lEAASP,6EAoBSO,EAAEO;;AApBpB,AAAA,YAAA,RAoBkBP;AApBlB,AAoBuB,oIAAA,qDAAA,jLAACQ,2DAAAA,yEAAAA,hBAAaR,qDAAAA,/CAAEO,qDAAAA;;;AApBvC,CAAA,AAAA,kEAAA,lEAASd,6EAqBSO,EAAEO,EAAEE;;AArBtB,AAAA,YAAA,RAqBkBT;AArBlB,AAqB0B,QAACQ,2DAAAA,uEAAAA,dAAaR,mDAAAA,7CAAEO,mDAAAA,jDAAEE,mDAAAA;;;AArB5C,CAAA,AAAA,gEAAA,hEAAShB,2EAwBMP,MAAKwB;;AAxBpB,AAAA,gBAAA,ZAwBexB;AAxBf,AAwBuB,QAACyB,wDAAAA,qEAAAA,fAAUzB,iDAAAA,vCAAKwB,iDAAAA;;;AAxBvC,CAAA,AAAA,gEAAA,hEAASjB,2EAyBMP,MAAKwB,EAAEE;;AAzBtB,AAAA,gBAAA,ZAyBe1B;AAzBf,AAyBiC,QAACyB,wDAAAA,+EAAAA,zBAAUzB,2DAAAA,jDAAKwB,2DAAAA,zDAAEE,2DAAAA;;;AAzBnD,CAAA,AAAA,sEAAA,tEAASnB,iFA4BQO,EAAEO,EAAEV;;AA5BrB,AAAA,YAAA,RA4BiBG;AA5BjB,AA4BwB,QAACa,0DAAAA,yEAAAA,jBAAYb,qDAAAA,/CAAEO,qDAAAA,nDAAEV,qDAAAA;;;AA5BzC,CAAA,AAAA,8EAAA,9EAASJ,yFA+BYO,EAAEc,OAAOC;;AA/B9B,AAAA,YAAA,RA+BqBf;AA/BrB,AAgCoB,iEAAA,sBAAA,IAAA,SAAA,7FAACgB,+BAAqBF,OAAOG,kDAEPF,wFAAM,AAAKf,QAAG,AAAKA,QAAG,AAAKA,QAAG,AAAUA,kDAAG,AAAaA;;;AAlClG,CAAA,+BAAA,/BAASP;AAAT,AAAA,AAAA;;;AAAA,CAAA,qCAAA,rCAASA;;AAAT,CAAA,wCAAA,xCAASA;;AAAT,CAAA,6CAAA,WAAAJ,mBAAAC,qBAAAC,hGAASE;AAAT,AAAA,OAAAD,iBAAAF,qBAAA;;;AAAA;;;2BAAA,3BAASI,8DACwBC,EAAEC,EAAEC,EAAUC,GAAqBpC,IAAsBqC;AAD1F,AAAA,YAAAN,oBACiCE,EAAEC,EAAEC,EAAUC,GAAqBpC,IAAsBqC;;;AADjFN,AAuEA,kBAAA,lBAACyB,wCAAwCzB;AAElD,AAAA,sBAAA,8BAAA0B,pDAAaE;AAAb,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,kDAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,kDAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,kDAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAArF,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,oDAAA,pDAAaqF,+DACT1B,EAAEC,EAAEC;AADR,AACW,YAAAJ,sCAAA,IAAA,tBAAQE,EAAEC,EAAEC,EAAEzD,AAAA;;;AADzB,CAAA,oDAAA,pDAAaiF,+DAET1B,EAAEC,EAAEC,EAAEC;AAFV,AAEc,YAAAL,6BAAA,IAAA,bAAQE,EAAEC,EAAEC,EAAEC;;;AAF5B,CAAA,oDAAA,pDAAauB,+DAGT1B,EAAEC,EAAEC,EAAEC,GAAGwB;AAHb,AAGoB,YAAA7B,8DAAA,IAAA,9CAAQE,EAAEC,EAAEC,EAAE,kBAAIyB,OAAMxB,GAAG,GAAGA;;;AAHlD,CAAA,8CAAA,9CAAauB;;AAAb,AAKA,6BAAA,7BAAME,kEAAQ9E;AAAd,AAAiB,qBAAWgD,bAAMhD;;AAElC,2BAAA,3BAAOyD,8DAAmBF;AAA1B,iEACM,AAACwB,eAAK,AAAKxB,5CACX,AAAC/B,iDAAe,AAACuD,eAAK,AAAKxB,pGAC3B,OAAC/B,mGAAe,AAACuD,eAAK,AAAKxB;;AAEjC,4BAAA,5BAAOK,gEAAoBL,EAASG;AAApC,AACE,4BAAA,nBAAK,CAAI,AAAKH,QAAG,AAAKG,YACjB,AAACsB,6CAAE,AAAKzB,IAAG,AAAKG,UAChB,AAACsB,6CAAE,AAAKzB,IAAG,AAAKG;;AAEvB,0BAAA,1BAAOG,4DAAkBN;AAAzB,AACE,YAAA0B,eAAA,SAAA,KAAAA,eAAA,SAAA,KAAAA,eAAA,SAAA,KAAAA,eAAA,mDAAA,KAAAA,eAAA,sDAAA,KAAA,IAAA,OAAA,IAAA,OAAA,IAAA,OAAA,IAAA,OAAA,IAAA,pQAAM,AAAK1B,6BAAG,AAAKA,6BAAG,AAAKA,6BAAG,AAAUA,uEAAG,AAAaA;;AAI1D,6BAAA,7BAAOQ,kEAAqBR,EAAEO,EAAEK;AAAhC,AACE,IAAAe,WAAMpB;AAAN,AAAA,GAAA,AAAAkB,6CAAA,6CAAAE;AAGU,OAAK3B;;AAHf,GAAA,AAAAyB,6CAAA,IAAAE;AAC0B,OAAK3B;;AAD/B,GAAA,AAAAyB,6CAAA,uDAAAE;AAMU,OAAa3B;;AANvB,GAAA,AAAAyB,6CAAA,IAAAE;AAG0B,OAAK3B;;AAH/B,GAAA,AAAAyB,6CAAA,+CAAAE;AACU,OAAK3B;;AADf,GAAA,AAAAyB,6CAAA,IAAAE;AAE0B,OAAK3B;;AAF/B,GAAA,AAAAyB,6CAAA,gDAAAE;AAIU,OAAU3B;;AAJpB,GAAA,AAAAyB,6CAAA,QAAAE;AAOU,OAAa3B;;AAPvB,GAAA,AAAAyB,6CAAA,KAAAE;AAKU,OAAU3B;;AALpB,GAAA,AAAAyB,6CAAA,gDAAAE;AAEU,OAAK3B;;AAFf,AAQEY;;;;;;;;;;;;;AAEJ,AAAA,0BAAA,kCAAAO,5DAAOR;AAAP,AAAA,IAAAiB,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAjB,sDAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,sDAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAA3E,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,wDAAA,xDAAO2E,mEACIX,EAAQU;AADnB,AAEI,IAAAmB,WAAMnB;AAAN,AAAA,QAAAmB;KAAA;AACI,OAAK7B;;;KADT;AAEI,OAAKA;;;KAFT;AAGI,OAAKA;;;KAHT;AAII,OAAUA;;;KAJd;AAKI,OAAaA;;;;AAEJ,MAAO,KAAAhE,MAAW,CAAA,gFAAyC0E;;;;;AAT5E,CAAA,wDAAA,xDAAOC,mEAUIX,EAAQU,EAAEE;AAVrB,AAWI,IAAAkB,WAAMpB;AAAN,AAAA,QAAAoB;KAAA;AACI,OAAK9B;;;KADT;AAEI,OAAKA;;;KAFT;AAGI,OAAKA;;;KAHT;AAII,OAAUA;;;KAJd;AAKI,OAAaA;;;;AACbY;;;;;AAjBR,CAAA,kDAAA,lDAAOD;;AAAP,AAmBA,4BAAA,5BAAcE,gEAAoBb,EAAEO,EAAEV;AAAtC,AACE,IAAAkC,WAAMxB;IAANwB,eAAA,EAAA,CAAAA,oBAAAC,oBAAA,AAAAD,aAAA;AAAA,AAAA,QAAAA;KAAA;AACS,OAACE,kDAAMpC,EAAQ,AAAKG,IAAG,AAAKA,IAAG,AAAUA,8CAAG,AAAaA;;;KADlE;AAES,OAACiC,kDAAM,AAAKjC,IAAGH,EAAQ,AAAKG,IAAG,AAAUA,8CAAG,AAAaA;;;KAFlE;AAGS,OAACiC,kDAAM,AAAKjC,IAAG,AAAKA,IAAGH,EAAQ,AAAUG,8CAAG,AAAaA;;;KAHlE;AAIS,OAACiC,kDAAM,AAAKjC,IAAG,AAAKA,IAAG,AAAKA,IAAGH,EAAa,AAAaG;;;KAJlE;AAKS,OAACiC,kDAAM,AAAKjC,IAAG,AAAKA,IAAG,AAAKA,IAAG,AAAUA,8CAAGH;;;;AACnD,MAAO,KAAA5D,uCAA2B,CAAA,kFAA2CsE;;;;AAKjF,kCAAA,lCAAa2B,4EAAmBC;AAAhC,AACE,OAACC,8CAAMf,oBAAMc;;AAuCf,oBAAA,pBAAME,gDAAK5F,EAAEyB;AAAb,AACE,GAAI,MAAA,LAAMzB;AAAV;;AACE,GAAI,MAAA,LAAMyB;AAAV;;AACE,OAACoE,kBAAQ7F,EAAEyB;;;;AAEjB,uCAAA,vCAAMqE,sFAAkB9F,EAAEyB;AAA1B,AAEW,QAAY,AAACsE,eAAK/F,OAAG,AAAC+F,eAAKtE;;AAEtC,8BAAA,9BAAMuE,oEAAehG,EAAEyB;AAAvB,AAEW,OAACwE,oDAAsB,AAACC,uBAAU,AAACH,eAAK/F,IAAI,AAACkG,uBAAU,AAACH,eAAKtE;;AAExE,8BAAA,9BAAM0E,oEAAenG,EAAEyB;AAAvB,AACE,IAAA,AACE,GACE,AAACuD,6CAAEhF,EAAEyB;AADP;;AAAA,GAIa,EAAA,GAAA,MAAA,SAAA,EAAA,EAAA,CAAA,wCAAA,aAAA,CAAAkB,gCAAA,6BAAA,KAAA,EAAA,EAAA,wCAAA,AAAA0D,2DAAA,QAAA,AAAAA,jCAAYC,mEAAAA,5RAAYtG,mBAAAA,sFAAAA,sCAAAA,gGAAAA,mEAAAA;AAAG,OAACuG,mBAASvG,EAAEyB;;AAJpD,GAKE,GAAK,AAACqE,qCAAiB9F,EAAEyB;AAAI,OAACuE,4BAAchG,EAAEyB;;AALhD,GAMa,6BAAA,6BAAA,iCAAA,zFAAI,OAASzB,sBAAG,OAASA,sBAAG,AAACwG,uBAAOxG,UAAG,AAAOA,gBAAG,AAAQA;AAAI,OAACiG,oDAAsBjG,EAAEyB;;AANnG,AAOQ,QAAG,AAACsD,eAAK/E,KAAG,AAAC+E,eAAKtD;;;;;;gBAR5B,GAAA,CAAA2E,kBAS0C7G;AAT1C,QAAA6G,JASoDlD;AATpD,AAUI,GAAI,GAAK,AAAC4C,qCAAiB9F,EAAEyB;AAC3B,OAACuE,4BAAchG,EAAEyB;;AACjB,MAAOyB;;;AAZb,AAAA,MAAAkD;;;;AAcF,0BAAA,1BAAMK,4DAAWzG,EAAEyB;AAAnB,AACE,GACE,MAAA,LAAMzB;AADR;;AAAA,GAEE,MAAA,LAAMyB;AAFR;;AAAA,AAGY,OAAC0E,4BAAcnG,EAAEyB;;;;;AAK/B,gCAAA,hCAAMiF,wEAAwBC,GAAWC;AAAzC,AACE,IAAAC,mBACE,CAAkC,AAAKF,OAAI,AAAKC;AADlD,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAEE,AAACjB,kBAAI,AAAKe,KAAI,AAAKC;AAFrB,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAGE,AAACJ,wBAAU,AAAKE,KAAI,AAAKC;AAH3B,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAIE,CAAkC,AAAUF,iDAAI,AAAUC;AAJ5D,AAAA,GAAA,CAAA,QAAAC;AAAA;;AAAAA;;;AAAAA;;;AAAAA;;;AAAAA;;;AAMF,gCAAA,hCAAMC,wEAAwBH,GAAWC;AAAzC,AACE,IAAAC,mBACE,AAACjB,kBAAI,AAAKe,KAAI,AAAKC;AADrB,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAEE,CAAkC,AAAKF,OAAI,AAAKC;AAFlD,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAGE,AAACJ,wBAAU,AAAKE,KAAI,AAAKC;AAH3B,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAIE,CAAkC,AAAUF,iDAAI,AAAUC;AAJ5D,AAAA,GAAA,CAAA,QAAAC;AAAA;;AAAAA;;;AAAAA;;;AAAAA;;;AAAAA;;;AAMF,gCAAA,hCAAME,wEAAwBJ,GAAWC;AAAzC,AACE,IAAAC,mBACE,AAACjB,kBAAI,AAAKe,KAAI,AAAKC;AADrB,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAEE,AAACJ,wBAAU,AAAKE,KAAI,AAAKC;AAF3B,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAGE,CAAkC,AAAKF,OAAI,AAAKC;AAHlD,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAIE,CAAkC,AAAUF,iDAAI,AAAUC;AAJ5D,AAAA,GAAA,CAAA,QAAAC;AAAA;;AAAAA;;;AAAAA;;;AAAAA;;;AAAAA;;;AAQF,+BAAA,/BAAOG,sEAAgBC,GAAGC;AAA1B,AAGK,GAAI,eAAA3B,dAAU0B;AACZ,OAACV,mBAASU,GAAGC;;AACb,OAACjB,oDAAsBgB,GAAGC;;;AAIjC,qCAAA,rCAAMC,kFAA6BR,GAAWC;AAA9C,AACE,IAAAC,mBACE,CAAkC,AAAKF,OAAI,AAAKC;AADlD,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAEE,AAACG,6BAAe,AAAKL,KAAI,AAAKC;AAFhC,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAGE,AAACV,4BAAc,AAAKQ,KAAI,AAAKC;AAH/B,AAAA,GAAA,CAAA,QAAAC;AAAA;;AAAAA;;;AAAAA;;;AAAAA;;;AAKF,sCAAA,tCAAMO,oFAA8BT,GAAWC;AAA/C,AACE,IAAAC,mBACE,CAAkC,AAAKF,OAAI,AAAKC;AADlD,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAEE,AAACG,6BAAe,AAAKL,KAAI,AAAKC;AAFhC,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAGE,AAACV,4BAAc,AAAKQ,KAAI,AAAKC;AAH/B,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAIE,CAAkC,AAAUF,iDAAI,AAAUC;AAJ5D,AAAA,GAAA,CAAA,QAAAC;AAAA;;AAAAA;;;AAAAA;;;AAAAA;;;AAAAA;;;AAMF,sCAAA,tCAAMQ,oFAA8BV,GAAWC;AAA/C,AACE,IAAAC,mBACE,AAACG,6BAAe,AAAKL,KAAI,AAAKC;AADhC,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAEE,CAAkC,AAAKF,OAAI,AAAKC;AAFlD,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAGE,AAACV,4BAAc,AAAKQ,KAAI,AAAKC;AAH/B,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAIE,CAAkC,AAAUF,iDAAI,AAAUC;AAJ5D,AAAA,GAAA,CAAA,QAAAC;AAAA;;AAAAA;;;AAAAA;;;AAAAA;;;AAAAA;;;AAMF,sCAAA,tCAAMS,oFAA8BX,GAAWC;AAA/C,AACE,IAAAC,mBACE,AAACG,6BAAe,AAAKL,KAAI,AAAKC;AADhC,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAEE,AAACV,4BAAc,AAAKQ,KAAI,AAAKC;AAF/B,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAGE,CAAkC,AAAKF,OAAI,AAAKC;AAHlD,AAAA,GAAA,CAAA,QAAAC;AAAA,IAAAA,uBAIE,CAAkC,AAAUF,iDAAI,AAAUC;AAJ5D,AAAA,GAAA,CAAA,QAAAC;AAAA;;AAAAA;;;AAAAA;;;AAAAA;;;AAAAA;;;AAMF,4BAAA,5BAAOU,gEAAapE,EAAEqE,EAAEC;AAAxB,AACE,aAAA,TAAOC;aAAP,TACOC;WADP,PAEOC;IACAzE,QAAOA;IACPqE,QAAOA;;AAJd,AAKE,GACE,AAACK,uBAAO1E;AADV,0FACc,AAAC2E,oBAAUJ,QAAQ,AAACI,oBAAU,AAACC,6CAAKJ,OAAOH,QAAI,AAACM,oBAAUF;;AADxE,GAEE,AAACC,uBAAOL;AAFV,0FAEc,AAACM,oBAAU,AAACC,6CAAKL,OAAOvE,QAAI,AAAC2E,oBAAUH,QAAQ,AAACG,oBAAUF;;AAFxE,AAIE,IAAMI,UAAQ,AAACrH,gBAAMwC;IACf8E,UAAQ,AAACtH,gBAAM6G;IACfU,OAAK,iBAAA,AACE,QAACT,oCAAAA,qDAAAA,nBAAIO,iCAAAA,zBAAQC,iCAAAA;gBADf,GAAA,CAAAE,kBAE0C5I;AAF1C,QAAA4I,JAEoD3E;AAFpD,AAAA;;AAAA,AAAA,MAAA2E;;;;AAFX,AAME,GACE,kDAAA,lDAACnD,6CAAEkD;AAAoB,eAAO,AAACE,6CAAKV,OAAOM;eAAS,AAACI,6CAAKT,OAAOM;eAASL;eAAoB,AAACS,eAAKlF;eAAG,AAACkF,eAAKb;;;;;;;;AAD/G,GAEE,UAAA,TAAIU;AAAmB,eAAOR;eAAsBC;eAAsB,AAACS,6CAAKR,KAAKI;eAAS,AAACK,eAAKlF;eAAG,AAACkF,eAAKb;;;;;;;;AAF/G,GAGE,QAAA,PAAGU;AAAoB,eAAO,AAACE,6CAAKV,OAAOM;eAASL;eAAsBC;eAAoB,AAACS,eAAKlF;eAAGqE;;;;;;;;AAHzG,GAIE,QAAA,PAAGU;AAAoB,eAAOR;eAAsB,AAACU,6CAAKT,OAAOM;eAASL;eAAoBzE;eAAS,AAACkF,eAAKb;;;;;;;;AAJ/G;;;;;;;;;;;AAQR,AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,AACS,AAAA,AAIT,AAAA;AAAA;;;wBAAA,xBAAagB;;AAAb,IAAAF,0CAAA,WACYG,KAAKC;AADjB,AAAA,IAAA9G,kBAAA,EAAA,SAAA,OAAA,fACY6G,oBAAAA;IADZ5G,kBAAA,CAAA0G,sBAAA,AAAAxG,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,8DAAAA,hBACY4G,0CAAAA,rCAAKC,0CAAAA;;AADjB,IAAA1G,kBAAA,CAAAuG,sBAAA;AAAA,AAAA,GAAA,GAAA,CAAAvG,mBAAA;AAAA,QAAAA,gDAAAA,8DAAAA,hBACYyG,0CAAAA,rCAAKC,0CAAAA;;AADjB,MAAA,AAAAzG,2BAAA,kBACYwG;;;;AADZ,AAAA,wBAAA,xBACGF,wDAASE,KAAKC;AADjB,AAAA,GAAA,EAAA,GAAA,SAAA,aAAA,GAAA,CAAA,8CAAA,vEACYD,yBAAAA;AADZ,OACYA,2CAAAA,KAAKC;;AADjB,OAAAJ,wCACYG,KAAKC;;;;AADjB,AAGA,wBAAA,xBAAcC,wDAASF,KAAKC;AAA5B,AACE,OAAC/H,gBAAM,AAAC4H,sBAAQE,KAAKC;;AAEvB,AAAA;AAAA;;;6BAAA,7BAAaU;;AAAb,IAAAR,+CAAA,WACYS,GAAGC,MAAMC;AADrB,AAAA,IAAA3H,kBAAA,EAAA,OAAA,OAAA,bACYyH,kBAAAA;IADZxH,kBAAA,CAAAgH,sBAAA,AAAA9G,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,qEAAAA,vBACYwH,iDAAAA,9CAAGC,iDAAAA,3CAAMC,iDAAAA;;AADrB,IAAAvH,kBAAA,CAAA6G,sBAAA;AAAA,AAAA,GAAA,GAAA,CAAA7G,mBAAA;AAAA,QAAAA,gDAAAA,qEAAAA,vBACYqH,iDAAAA,9CAAGC,iDAAAA,3CAAMC,iDAAAA;;AADrB,MAAA,AAAAtH,2BAAA,uBACYoH;;;;AADZ,AAAA,wBAAA,xBACGR,wDAASQ,GAAGC,MAAMC;AADrB,AAAA,GAAA,EAAA,GAAA,OAAA,aAAA,GAAA,CAAA,iDAAA,xEACYF,uBAAAA;AADZ,OACYA,8CAAAA,GAAGC,MAAMC;;AADrB,OAAAX,6CACYS,GAAGC,MAAMC;;;;AADrB,IAAAT,oDAAA,WAEiBO,GAAGC,MAAMC;AAF1B,AAAA,IAAA3H,kBAAA,EAAA,OAAA,OAAA,bAEiByH,kBAAAA;IAFjBxH,kBAAA,CAAAkH,2BAAA,AAAAhH,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,qEAAAA,vBAEiBwH,iDAAAA,9CAAGC,iDAAAA,3CAAMC,iDAAAA;;AAF1B,IAAAvH,kBAAA,CAAA+G,2BAAA;AAAA,AAAA,GAAA,GAAA,CAAA/G,mBAAA;AAAA,QAAAA,gDAAAA,qEAAAA,vBAEiBqH,iDAAAA,9CAAGC,iDAAAA,3CAAMC,iDAAAA;;AAF1B,MAAA,AAAAtH,2BAAA,4BAEiBoH;;;;AAFjB,AAAA,6BAAA,7BAEGN,kEAAcM,GAAGC,MAAMC;AAF1B,AAAA,GAAA,EAAA,GAAA,OAAA,aAAA,GAAA,CAAA,sDAAA,7EAEiBF,uBAAAA;AAFjB,OAEiBA,mDAAAA,GAAGC,MAAMC;;AAF1B,OAAAT,kDAEiBO,GAAGC,MAAMC;;;;AAF1B,IAAAP,qDAAA,WAGkBK,GAAGC,MAAMC;AAH3B,AAAA,IAAA3H,kBAAA,EAAA,OAAA,OAAA,bAGkByH,kBAAAA;IAHlBxH,kBAAA,CAAAoH,4BAAA,AAAAlH,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,qEAAAA,vBAGkBwH,iDAAAA,9CAAGC,iDAAAA,3CAAMC,iDAAAA;;AAH3B,IAAAvH,kBAAA,CAAAiH,4BAAA;AAAA,AAAA,GAAA,GAAA,CAAAjH,mBAAA;AAAA,QAAAA,gDAAAA,qEAAAA,vBAGkBqH,iDAAAA,9CAAGC,iDAAAA,3CAAMC,iDAAAA;;AAH3B,MAAA,AAAAtH,2BAAA,6BAGkBoH;;;;AAHlB,AAAA,8BAAA,9BAGGJ,oEAAeI,GAAGC,MAAMC;AAH3B,AAAA,GAAA,EAAA,GAAA,OAAA,aAAA,GAAA,CAAA,uDAAA,9EAGkBF,uBAAAA;AAHlB,OAGkBA,oDAAAA,GAAGC,MAAMC;;AAH3B,OAAAP,mDAGkBK,GAAGC,MAAMC;;;;AAH3B,IAAAL,oDAAA,WAIiBG,GAAGG,KAAKC,MAAMC;AAJ/B,AAAA,IAAA9H,kBAAA,EAAA,OAAA,OAAA,bAIiByH,kBAAAA;IAJjBxH,kBAAA,CAAAsH,2BAAA,AAAApH,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,mEAAAA,rBAIiBwH,+CAAAA,5CAAGG,+CAAAA,1CAAKC,+CAAAA,zCAAMC,+CAAAA;;AAJ/B,IAAA1H,kBAAA,CAAAmH,2BAAA;AAAA,AAAA,GAAA,GAAA,CAAAnH,mBAAA;AAAA,QAAAA,gDAAAA,mEAAAA,rBAIiBqH,+CAAAA,5CAAGG,+CAAAA,1CAAKC,+CAAAA,zCAAMC,+CAAAA;;AAJ/B,MAAA,AAAAzH,2BAAA,4BAIiBoH;;;;AAJjB,AAAA,6BAAA,7BAIGF,kEAAcE,GAAGG,KAAKC,MAAMC;AAJ/B,AAAA,GAAA,EAAA,GAAA,OAAA,aAAA,GAAA,CAAA,sDAAA,7EAIiBL,uBAAAA;AAJjB,OAIiBA,mDAAAA,GAAGG,KAAKC,MAAMC;;AAJ/B,OAAAR,kDAIiBG,GAAGG,KAAKC,MAAMC;;;;AAJ/B,AAMA,iCAAA,jCAAMC,0EAAkBN,GAAGC,MAAMC;AAAjC,AACE,GAAM,mDAAA,nDAACvE,6CAAEsE;AAAT,AACE,IAAAM,qBAAiB,AAACjJ,gBAAM4I;AAAxB,AAAA,GAAA,CAAAK,sBAAA;AAAA;;AAAA,WAAAA,PAAYJ;AAAZ,AACE,oBAAU,CAACK,8DAAAA,uEAAAA,XAAUR,mDAAAA,hDAAGG,mDAAAA;AAAxB;;AAAA,AACE,MAAA,AAAAM,gDAAA,CAAA,aAAA,AAAAC,mHAAA,gDAAA,2CAAA,uDAAA,sEAAA,wDAAA,qDAAA,hVAAoBP,kZAC6BD;;;;AAJvD;;;AAMF,AAAA;AAAA;;;oBAAA,pBAAaa;;AAAb,IAAAJ,sCAAA,WACYX;AADZ,AAAA,IAAAzH,kBAAA,EAAA,OAAA,OAAA,bACYyH,kBAAAA;IADZxH,kBAAA,CAAAoI,sBAAA,AAAAlI,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,oDAAAA,NACYwH,gCAAAA;;AADZ,IAAArH,kBAAA,CAAAiI,sBAAA;AAAA,AAAA,GAAA,GAAA,CAAAjI,mBAAA;AAAA,QAAAA,gDAAAA,oDAAAA,NACYqH,gCAAAA;;AADZ,MAAA,AAAApH,2BAAA,cACYoH;;;;AADZ,AAAA,wBAAA,xBACGY,wDAASZ;AADZ,AAAA,GAAA,EAAA,GAAA,OAAA,aAAA,GAAA,CAAA,wCAAA,/DACYA,uBAAAA;AADZ,OACYA,qCAAAA;;AADZ,OAAAW,oCACYX;;;;AADZ,IAAAa,wCAAA,WAEcb,GAAGgB;AAFjB,AAAA,IAAAzI,kBAAA,EAAA,OAAA,OAAA,bAEcyH,kBAAAA;IAFdxH,kBAAA,CAAAsI,wBAAA,AAAApI,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,6DAAAA,fAEcwH,yCAAAA,tCAAGgB,yCAAAA;;AAFjB,IAAArI,kBAAA,CAAAmI,wBAAA;AAAA,AAAA,GAAA,GAAA,CAAAnI,mBAAA;AAAA,QAAAA,gDAAAA,6DAAAA,fAEcqH,yCAAAA,tCAAGgB,yCAAAA;;AAFjB,MAAA,AAAApI,2BAAA,gBAEcoH;;;;AAFd,AAAA,0BAAA,1BAEGc,4DAAWd,GAAGgB;AAFjB,AAAA,GAAA,EAAA,GAAA,OAAA,aAAA,GAAA,CAAA,0CAAA,jEAEchB,uBAAAA;AAFd,OAEcA,uCAAAA,GAAGgB;;AAFjB,OAAAH,sCAEcb,GAAGgB;;;;AAFjB,AAMA,6BAAA,7BAAMC,kEAAcjB;AAApB,oJACMA,/CACF,kDAAA,lDAACkB,uGAAaC,tJACd,4KAAA,5KAACD,iOAAaC,vRACd,6SAAA,tSAACD,2VAAaC;;AAElB,oCAAA,pCAAMC,gFAAgBpB;AAAtB,oJACMA,/CACF,kDAAA,lDAACkB,uGAAaG,tJACd,kLAAA,lLAACH,uOAAaG,7RACd,yTAAA,lTAACH,uWAAaG;;AAElB,AAAA,AAAA,AAAA,AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,AAAA,CAAA,AAAA,+DAAA,WAAAC,mBAAAC,7FAAqBsE;;AAArB,AAAA,IAAAvE,yBAAA;AAAA,AAAA,OAAAA,8DAAAC,gBAAA;;;AAAA,CAAA,AAAA,+DAAA,WAAAC,mBAAAC,OAAAC,pGAAqBmE;;AAArB,AAAA,IAAArE,yBAAA;AAAA,AAAA,IAAAG,WAAAF;IAAAE,eAAA,EAAA,CAAAA,oBAAAzF,oBAAA,AAAAyF,aAAA;AAAA,AAAA,QAAAA;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;;AAAA,OAAAC,4CAAAC,gBAAAd,OAAAC;;;;;AAAA,CAAA,AAAA,oEAAA,WAAAc,mBAAAC,gBAAAC,lHAAqBmD;;AAArB,AAAA,IAAArD,yBAAA;AAAA,AAAA,OAAAjL,+CAAA,WAAAoL,kBAAAC;AAAA,AAAA,IAAAC,aAAAD;IAAAE,kBAAA,AAAApL,4CAAAmL,WAAA,IAAA;IAAAE,kBAAA,AAAArL,4CAAAmL,WAAA,IAAA;AAAA,AAAA,QAAAJ,gDAAAA,8CAAAE,kBAAAG,gBAAAC,mBAAAN,0BAAAE,kBAAAG,gBAAAC;GAAAL,mBAAAF;;;AAAA,CAAA,AAAA,2EAAA,WAAAQ,mBAAAC,qBAAAC,9HAAqB2C;;AAArB,AAAA,IAAA7C,yBAAA;AAAA,AAAA,IAAAG,wBAAA,WAAAC;AAAA,AAAA,OAAAlI,+BAAA+H,qBAAA,oBAAA,GAAA,IAAA,GAAAC,mBAAAE;;AAAA,AAAA,OAAAlI,+BAAA+H,qBAAAE,sBAAA,qBAAA,KAAA,IAAAD,mBAAA,AAAAG,+CAAA,oFAAA,KAAAC,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,0DAAA1B,eAAA,OAAA,KAAA0B,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,qDAAAzB,aAAA,OAAA,KAAAyB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,qDAAAxB,aAAA,OAAA,KAAAwB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,qDAAAvB,aAAA,OAAA,KAAAuB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,2DAAAtB,gBAAA,OAAA,KAAAsB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,yDAAArB,eAAA,OAAA,KAAAqB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,4DAAApB,gBAAA,OAAA,KAAAoB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,uEAAAnB,sBAAA,OAAA,KAAAmB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,iEAAAlB,mBAAA,OAAA,KAAAkB,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,oDAAAjB,aAAA,eAAAE;;;AAAA,CAAA,AAAA,mEAAA,WAAAgB,9EAAqBsC;;AAArB,AAAA,IAAAtC,eAAA;AAAA,AAAA,YAAAC,qBAAA,IAAAD,aAAA,GAAA,oFAAA,0DAAA,qDAAA,qDAAA,qDAAA,2DAAA,yDAAA,4DAAA,uEAAA,iEAAA,4DAAA,kBAAAhB,iBAAA,AAAAkB,oBAAAlB,iBAAA,AAAAmB;;;AAAA,CAAA,AAAA,2DAAA,WAAAC,tEAAqBkC;;AAArB,AAAA,IAAAlC,yBAAA;AAAA,AAAAC;;;AAAA,CAAA,AAAA,iEAAA,WAAAC,5EAAqBgC;;AAArB,AAAA,IAAAhC,yBAAA;AAAA,AAAA,6BAAAjC,cAAAC,YAAAC,YAAAC,YAAAC,eAAAC,cAAAC,eAAAC,qBAAAC,kBAAAC,YAAAuB,cAAArB,gBAAAuB,hMAAqB+B;;;AAArB,CAAA,AAAA,+DAAA,WAAA9B,1EAAqB8B;;AAArB,AAAA,IAAA9B,yBAAA;AAAA,AAAA,QAAA,KAAA,AAAAC,gBAAAzB;;;AAAA,CAAA,AAAA,2DAAA,WAAA0B,tEAAqB4B;;AAArB,AAAA,IAAA5B,yBAAA;AAAA,AAAA,IAAAC,kBAAAJ;AAAA,AAAA,GAAA,GAAA,CAAAI,mBAAA;AAAAA;;AAAA,IAAAA,sBAAA,AAAA,WAAAC;AAAA,AAAA,QAAA,cAAA,AAAAC,8BAAAD;GAAAF;AAAA,AAAA,CAAAH,gBAAAI;;AAAAA;;;;AAAA,CAAA,AAAA,6DAAA,WAAAG,UAAAC,lFAAqBuB;;AAArB,AAAA,IAAAxB,gBAAA;AAAA,AAAA,SAAA,GAAA,CAAAC,cAAA,aAAA,EAAA,CAAA,AAAAD,8BAAA,AAAAC,6BAAA,EAAA,AAAA3I,6CAAA,AAAA0I,qBAAA,AAAAC,wBAAA,EAAA,AAAA3I,6CAAA,AAAA0I,mBAAA,AAAAC,sBAAA,EAAA,AAAA3I,6CAAA,AAAA0I,mBAAA,AAAAC,sBAAA,EAAA,AAAA3I,6CAAA,AAAA0I,mBAAA,AAAAC,sBAAA,EAAA,AAAA3I,6CAAA,AAAA0I,sBAAA,AAAAC,yBAAA,EAAA,AAAA3I,6CAAA,AAAA0I,qBAAA,AAAAC,wBAAA,EAAA,AAAA3I,6CAAA,AAAA0I,sBAAA,AAAAC,yBAAA,EAAA,AAAA3I,6CAAA,AAAA0I,4BAAA,AAAAC,+BAAA,EAAA,AAAA3I,6CAAA,AAAA0I,yBAAA,AAAAC,4BAAA,EAAA,AAAA3I,6CAAA,AAAA0I,mBAAA,AAAAC,sBAAA,AAAA3I,6CAAA,AAAA0I,uBAAA,AAAAC;;;AAAA,CAAA,AAAA,4DAAA,WAAAC,mBAAAC,1FAAqBqB;;AAArB,AAAA,IAAAtB,yBAAA;AAAA,AAAA,GAAA,AAAAE,0BAAA,kFAAA,+DAAA,8DAAA,yDAAA,0DAAA,0DAAA,gEAAA,0DAAA,sEAAA,4EAAA,gFAAAD;AAAA,OAAAE,+CAAA,AAAAC,qBAAA,AAAAjG,6CAAA,mCAAA6F,wBAAAX,eAAAY;;AAAA,6BAAA5C,cAAAC,YAAAC,YAAAC,YAAAC,eAAAC,cAAAC,eAAAC,qBAAAC,kBAAAC,YAAAuB,cAAA,AAAAnF,oBAAA,AAAAiG,+CAAAnC,gBAAAiC,kBAAA,rRAAqBqB;;;;AAArB,CAAA,AAAA,iFAAA,WAAAjB,mBAAAnD,/GAAqBoE;;AAArB,AAAA,IAAAjB,yBAAA;AAAA,AAAA,IAAAC,WAAApD;IAAAoD,eAAA,EAAA,CAAAA,oBAAA3I,oBAAA,AAAA2I,aAAA;AAAA,AAAA,QAAAA;KAAA;KAAA;KAAA;KAAA;KAAA;KAAA;KAAA;KAAA;KAAA;KAAA;AAAA;;;;AAAA,OAAAJ,0BAAAlC,gBAAAd;;;;;AAAA,CAAA,AAAA,mEAAA,WAAAqD,mBAAAC,gBAAAxB,jHAAqBsC;;AAArB,AAAA,IAAAf,yBAAA;AAAA,AAAA,IAAAE,cAAAC;IAAAC,cAAAH;AAAA,AAAA,oBAAA,CAAAC,4CAAAA,0CAAA,0DAAAE,eAAAF,sBAAA,0DAAAE;AAAA,6BAAA3B,SAAA1B,YAAAC,YAAAC,YAAAC,eAAAC,cAAAC,eAAAC,qBAAAC,kBAAAC,YAAAuB,cAAArB,gBAAA,3LAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,qDAAAE,eAAAF,sBAAA,qDAAAE;AAAA,6BAAAtD,cAAA2B,SAAAzB,YAAAC,YAAAC,eAAAC,cAAAC,eAAAC,qBAAAC,kBAAAC,YAAAuB,cAAArB,gBAAA,7LAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,qDAAAE,eAAAF,sBAAA,qDAAAE;AAAA,6BAAAtD,cAAAC,YAAA0B,SAAAxB,YAAAC,eAAAC,cAAAC,eAAAC,qBAAAC,kBAAAC,YAAAuB,cAAArB,gBAAA,7LAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,qDAAAE,eAAAF,sBAAA,qDAAAE;AAAA,6BAAAtD,cAAAC,YAAAC,YAAAyB,SAAAvB,eAAAC,cAAAC,eAAAC,qBAAAC,kBAAAC,YAAAuB,cAAArB,gBAAA,7LAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,2DAAAE,eAAAF,sBAAA,2DAAAE;AAAA,6BAAAtD,cAAAC,YAAAC,YAAAC,YAAAwB,SAAAtB,cAAAC,eAAAC,qBAAAC,kBAAAC,YAAAuB,cAAArB,gBAAA,1LAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,yDAAAE,eAAAF,sBAAA,yDAAAE;AAAA,6BAAAtD,cAAAC,YAAAC,YAAAC,YAAAC,eAAAuB,SAAArB,eAAAC,qBAAAC,kBAAAC,YAAAuB,cAAArB,gBAAA,3LAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,4DAAAE,eAAAF,sBAAA,4DAAAE;AAAA,6BAAAtD,cAAAC,YAAAC,YAAAC,YAAAC,eAAAC,cAAAsB,SAAApB,qBAAAC,kBAAAC,YAAAuB,cAAArB,gBAAA,1LAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,uEAAAE,eAAAF,sBAAA,uEAAAE;AAAA,6BAAAtD,cAAAC,YAAAC,YAAAC,YAAAC,eAAAC,cAAAC,eAAAqB,SAAAnB,kBAAAC,YAAAuB,cAAArB,gBAAA,pLAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,iEAAAE,eAAAF,sBAAA,iEAAAE;AAAA,6BAAAtD,cAAAC,YAAAC,YAAAC,YAAAC,eAAAC,cAAAC,eAAAC,qBAAAoB,SAAAlB,YAAAuB,cAAArB,gBAAA,vLAAqBsD;;AAArB,oBAAA,CAAAb,4CAAAA,0CAAA,oDAAAE,eAAAF,sBAAA,oDAAAE;AAAA,6BAAAtD,cAAAC,YAAAC,YAAAC,YAAAC,eAAAC,cAAAC,eAAAC,qBAAAC,kBAAAmB,SAAAK,cAAArB,gBAAA,7LAAqBsD;;AAArB,6BAAAjE,cAAAC,YAAAC,YAAAC,YAAAC,eAAAC,cAAAC,eAAAC,qBAAAC,kBAAAC,YAAAuB,cAAA,AAAAuB,8CAAA5C,gBAAAwC,gBAAAxB,UAAA,xQAAqBsC;;;;;;;;;;;;;AAArB,CAAA,AAAA,6DAAA,WAAAT,xEAAqBS;;AAArB,AAAA,IAAAT,yBAAA;AAAA,AAAA,OAAAC,cAAA,AAAAhC,+CAAA,oFAAA,KAAAiC,mBAAA,0DAAA1D,cAAA,OAAA,KAAA0D,mBAAA,qDAAAzD,YAAA,OAAA,KAAAyD,mBAAA,qDAAAxD,YAAA,OAAA,KAAAwD,mBAAA,qDAAAvD,YAAA,OAAA,KAAAuD,mBAAA,2DAAAtD,eAAA,OAAA,KAAAsD,mBAAA,yDAAArD,cAAA,OAAA,KAAAqD,mBAAA,4DAAApD,eAAA,OAAA,KAAAoD,mBAAA,uEAAAnD,qBAAA,OAAA,KAAAmD,mBAAA,iEAAAlD,kBAAA,OAAA,KAAAkD,mBAAA,oDAAAjD,YAAA,eAAAE;;;AAAA,CAAA,AAAA,oEAAA,WAAAgD,mBAAAhC,lGAAqBsC;;AAArB,AAAA,IAAAN,yBAAA;AAAA,AAAA,6BAAA3D,cAAAC,YAAAC,YAAAC,YAAAC,eAAAC,cAAAC,eAAAC,qBAAAC,kBAAAC,YAAAkB,SAAAhB,gBAAAuB,3LAAqB+B;;;AAArB,CAAA,AAAA,iEAAA,WAAAL,mBAAAC,/FAAqBI;;AAArB,AAAA,IAAAL,yBAAA;AAAA,AAAA,GAAA,AAAAE,wBAAAD;AAAA,OAAAD,kEAAA,AAAAG,eAAAF,oBAAA,KAAA,AAAAE,eAAAF,oBAAA;;AAAA,OAAAlO,+CAAAqO,gBAAAJ,uBAAAC;;;;AAAA,CAAA,AAAAI,4BAAA;AAAA,AAAA,AAAA;;;AAAA,CAAA,AAAAA,kCAAA;;AAAA,CAAA,AAAAA,uCAAA,WAAAC;AAAA,AAAA,YAAAlK,eAAA,KAAA,mBAAA,KAAA,IAAA;;;AAAA,CAAA,AAAAiK,0CAAA,WAAAC,mBAAAC;AAAA,AAAA,OAAArM,iBAAAqM,qBAAA;;;AAAA;;;wBAAA,xBAAqBK,wDAAIxE,OAAOC,KAAKC,KAAKC,KAAKC,QAAQC,OAAOC,QAAQC,cAAcC,WAAWC;AAA/F,AAAA,YAAAwD,4FAAA,KAAA,KAAA,rFAAyBjE,OAAOC,KAAKC,KAAKC,KAAKC,QAAQC,OAAOC,QAAQC,cAAcC,WAAWC;;;AAA/F;;;2BAAA,mCAAA2D,9DAAqBK;AAArB,AAAA,IAAAJ,uBAAA,iBAAAC,WAAA,AAAAxB,sDAAAsB,SAAA,4GAAA,qDAAA,qDAAA,qDAAA,2DAAA,yDAAA,4DAAA,uEAAA,iEAAA;AAAA,AAAA,GAAA,AAAAG,wBAAAH;AAAA,OAAAtH,6CAAA,mCAAAwH;;AAAAA;;;AAAA,AAAA,YAAAL,iBAAA,AAAA,wFAAAG,UAAA,AAAA,mFAAAA,UAAA,AAAA,mFAAAA,UAAA,AAAA,mFAAAA,UAAA,AAAA,yFAAAA,UAAA,AAAA,uFAAAA,UAAA,AAAA,0FAAAA,UAAA,AAAA,qGAAAA,UAAA,AAAA,+FAAAA,UAAA,AAAA,kFAAAA,UAAA,KAAA,AAAAvH,oBAAAwH,sBAAA;;;AAAAJ;AAAA,AAAA,CAAA,AAAA,gDAAAvM,hDAAqBuM;;AAArB,CAAA,AAAA,AAAqBA,oEA6FnB,WAAe/L,EAAEqE;AAAjB,AAAA,YAAA,RAAerE;AAAf,AACE,OAACoE,0BAAY,AAAOpE,WAAG,AAAA,mFAAOqE,GAAGL;;;AA9FrC,CAAA,AAAA,yDAAAxE,zDAAqBuM;;AAArB,CAAA,AAAA,AAAqBA,2EAOO,WAAa7F,GAAG8G,EAAE7L;AAAlB,AAAA,aAAA,TAAa+E;AAAb,AAAwB,QAAC+G,oDAAAA,mEAAAA,jBAAM/G,+CAAAA,xCAAG8G,+CAAAA,7CAAE7L,+CAAAA;;;AAPhE,CAAA,AAAA,iDAAA3B,jDAAqBuM;;AAArB,CAAA,AAAA,AAAqBA,+DAKO,WAAS7F;AAAT,AAAA,aAAA,TAASA;AAAT,AAAoB,OAACgE,gBAAM,AAAQhE;;;AAL/D,CAAA,AAAA,oDAAA1G,pDAAqBuM;;AAArB,CAAA,AAAA,AAAqBA,iEAIO,WAAS7F;AAAT,AAAA,aAAA,TAASA;AAAT,AAAoB,OAACyG,gBAAM,AAAQzG;;;AAJ/D,CAAA,AAAA,8CAAA1G,9CAAqBuM;;AAArB,CAAA,AAAA,AAAqBA,2DAEO,WAAS7F;AAAT,AAAA,aAAA,TAASA;AAAT,AAAoB,QAACsG,sDAAAA,8DAAAA,VAAQtG,0CAAAA;;;AAFzD,CAAA,AAAA,+CAAA1G,/CAAqBuM;;AAArB,CAAA,AAAA,AAAqBA,6DAGO,WAAS7F,GAAGuG;AAAZ,AAAA,aAAA,TAASvG;AAAT,AAAoB,QAACwG,uDAAAA,qEAAAA,hBAASxG,iDAAAA,1CAAGuG,iDAAAA;;;AAH7D,CAAA,AAAA,4DAAAjN,5DAAqBuM;;AAArB,CAAA,AAAA,AAAqBA,iFAQO,WAAgB7F;AAAhB,AAAA,aAAA,TAAgBA;AAAhB,AAAoB,OAACiB,2BAAajB;;;AAR9D,CAAA,AAAA,6DAAA1G,7DAAqBuM;;AAArB,CAAA,AAAA,AAAqBA,2EAMO,WAAS7F;AAAT,AAAA,aAAA,TAASA;AAAT,AAAoB,OAAC0G,oBAAU,iBAAAC,WAAU,AAAU3G;AAApB,AAAA,oHAAA2G,6CAAAA,zJAACC,uDAAAA,iEAAAA;KAAwB,AAACC,eAAK7G;;;AAN1F,CAAA,AAAA,6DAAA1G,7DAAqBuM;;AAArB,CAAA,AAAA,AAAqBA,gFASO,WAAS7F,GAAGgH;AAAZ,AAAA,aAAA,TAAShH;AAAT,AAAiB,MAAO,gDAAA,uCAAA,vFAACS;;;AATrD,CAAA,AAAA,AAAqBoF,sFAUO,WAAe7F;AAAf,AAAA,aAAA,TAAeA;AAAf,AAAmB,OAACoB,kCAAepB;;;AAV/D,CAAA,AAAA,6DAAA1G,7DAAqBuM;;AAArB,CAAA,AAAA,AAAqBA,uFA0FnB,WAAqBlP;AAArB,AAAA,YAAA,RAAqBA;AAArB,AAAA;;;AA1FF,CAAA,AAAA,yDAAA2C,zDAAqBuM;;AAArB,CAAA,AAAA,AAAqBA,wEAsEnB,WAAU7F,GAAGC,MAAMqH;AAAnB,AAAA,aAAA,TAAUtH;AAAV,AACE,AAACM,+BAAiBN,OAAGC,MAAMqH;;AAC3B,OAACF,oEAAU,AAAC9E,4CAAItC,OAAGC,OAAO,CAACsH,qEAAAA,sGAAAA,nCAAoBvH,kFAAAA,3EAAGC,kFAAAA,5EAAMqH,kFAAAA,/EAAGjR,AAAA,kFAAAA,AAAA,9EAAGC,AAAA,kFAAAA,AAAA,cAAK,CAACiR,qEAAAA,gHAAAA,7CAAoBvH,4FAAAA,rFAAGC,4FAAAA,tFAAMqH,4FAAAA,zFAAG/Q,AAAA,4FAAAA,AAAA,/EAAKC,AAAA,4FAAAA,AAAA;;;AAxE7G,CAAA,AAAA,AAAqBqP,6EA0EnB,WAAe7F,GAAGC,MAAMqH;AAAxB,AAAA,aAAA,TAAetH;AAAf,AACE,AAACM,+BAAiBN,OAAGC,MAAMqH;;AAC3B,OAACF,oEAAU,AAAC9E,4CAAItC,OAAGC,OAAO,CAACsH,qEAAAA,sGAAAA,nCAAoBvH,kFAAAA,3EAAGC,kFAAAA,5EAAMqH,kFAAAA,/EAAGjR,AAAA,kFAAAA,AAAA,9EAAGC,AAAA,kFAAAA,AAAA,cAAK,+DAAA,KAAA,pEAAC6F,kDAAM5F,AAAA,uBAAaC,AAAA;;;AA5E3F,CAAA,AAAA,AAAqBqP,8EA8EnB,WAAgB7F,GAAGC,MAAMqH;AAAzB,AAAA,aAAA,TAAgBtH;AAAhB,AACE,AAACM,+BAAiBN,OAAGC,MAAMqH;;AAC3B,OAACE,qEAAW,AAAClF,4CAAItC,OAAGC,OAAO,CAACsH,qEAAAA,gHAAAA,7CAAoBvH,4FAAAA,rFAAGC,4FAAAA,tFAAMqH,4FAAAA,zFAAG/Q,AAAA,4FAAAA,AAAA,/EAAKC,AAAA,4FAAAA,AAAA,eAAO,sDAAA,KAAA,3DAAC2F,kDAAM9F,AAAA,cAAWC,AAAA;;;AAhF9F,CAAA,AAAA,AAAqBuP,6EAkFnB,WAAe7F,GAAGG,KAAKC,MAAMC;AAA7B,AAAA,aAAA,TAAeL;AAAf,AACE,sCAAA,qDAAA,3FAACM,+BAAiBN,+IAAUG;;AAC5B,IAAAsH,iBAAetH;IAAfuH,iBAAoB,KAAA9L,eAAA,KAAA,AAAA,wEAAA,KAAAA,eAAA,KAAA,AAAA,sDAAA,KAAAA,eAAA,UAAA,KAAAA,eAAA,WAAA,KAAAA,eAAA,SAAA,KAAA,IAAA,OAAA,IAAA,OAAA,IAAA,OAAA,IAAA,OAAA,IAAA,tHAAwBuE,8BAAKC,+BAAMC;AAAvD,AAAA,uHAAAoH,eAAAC,wDAAAD,eAAAC,5MAACC,4DAAAA,2FAAAA;;AACD,OAACP,oEAAU,AAAQpH,YACjB,8HAAA,gBAAA,qEAAA,gBAAA,lOAAC4H,4DAAAA,yGAAAA,/CAAc5H,qFAAAA,zEAAOG,qFAAAA,hFAAKC,qFAAAA,1EAAU/J,AAAA,qFAAAA,AAAA,jFAAGC,AAAA,qFAAAA,AAAA,cACxC,8HAAA,cAAA,+EAAA,cAAA,xOAACsR,4DAAAA,iHAAAA,vDAAc5H,6FAAAA,jFAAOG,6FAAAA,xFAAKE,6FAAAA,pFAAQ9J,AAAA,6FAAAA,AAAA,hFAAKC,AAAA,6FAAAA,AAAA;;;AAvF9C,CAAA,AAAA,gDAAA8C,hDAAqBuM;;AAArB,CAAA,AAAA,AAAqBA,+DA0BnB,WAAU7F;AAAV,AAAA,aAAA,TAAUA;AAAV,AAAc,OAAUA;;;AA1B1B,CAAA,AAAA,AAAqB6F,iEA2BnB,WAAY7F,GAAGgB;AAAf,AAAA,aAAA,TAAYhB;AAAZ,AAAyB,IAAAiH,eAAC,AAAWjH;AAAZ,AAAA,QAAAiH,6CAAAA,uDAAAA,ZAAgBjG,mCAAAA;;;AA3B3C,CAAA,AAAA,oDAAA1H,pDAAqBuM;;AAArB,CAAA,AAAA,AAAqBA,mEA8BnB,WAAU7F,GAAGX;AAAb,AAAA,aAAA,TAAUW;AAAV,AACE,IAAAkH,aAAiB7H;QAAjB,AAAA3H,4CAAAwP,WAAA,IAAA,/DAAOrN;QAAP,AAAAnC,4CAAAwP,WAAA,IAAA,/DAASpN;QAAT,AAAApC,4CAAAwP,WAAA,IAAA,/DAAWnN;SAAX,AAAArC,4CAAAwP,WAAA,IAAA,hEAAalN;IACP6H,OAAW,AAAQ7B;IACnB8B,OAAW,AAAQ9B;IACnB+B,OAAW,AAAQ/B;IACnBmH,kBAAW,AAAC1C,0BAAU,+BAAA,/BAAC3D,wBAAUd,uFAAyBlG;AAJhE,AAKE,oBAAYD;AAAZ,oBAAcC;AAAd,GAAgB,GAAA,MAAA,LAAOC;AAAvB,oBAA0BC;AACvB,OAACoN,oEAAUvF,KAAK,AAAC1F,kDAAMtC,EAAEC,EAAEC,EAAEC,IAAI,AAACmC,kDAAMtC,EAAEC,EAAEC,EAAEC;;AAC9C,OAACoN,oEAAUvF,KAAK,AAAC1F,kDAAMtC,EAAEC,EAAEC,EAAEzD,AAAA,aAAK,AAAC6F,kDAAMtC,EAAEC,EAAEC,EAAEvD,AAAA;;;AAFlD,oBAA0BwD;AAIlB,OAACqN,+CAAO,WAAYnN;AAAZ,AAAe,OAACyB,6CAAE3B,GAAG,AAAUE;GADvC,AAACkN,oEAAUvF,KAAK,sDAAA,tDAAC1F,kDAAMtC,EAAEC,OAAMxD,AAAA,aAAK,sDAAA,tDAAC6F,kDAAMtC,EAAEC,OAAMtD,AAAA;;AAExD,OAAC4Q,oEAAUvF,KAAK,sDAAA,tDAAC1F,kDAAMtC,EAAEC,OAAMxD,AAAA,aAAK,sDAAA,tDAAC6F,kDAAMtC,EAAEC,OAAMtD,AAAA;;;;AALtD,GAAgB,GAAA,MAAA,LAAOuD;AAAvB,oBAA0BC;AAOlB,OAACqN,+CAAO,WAAYnN;AAAZ,AAAe,SAAK,AAACyB,6CAAE5B,EAAE,AAAKG,UACV,AAACyB,6CAAE3B,GAAG,AAAUE;GAF5C,AAACkN,oEAAUvF,KAAK,oDAAA,KAAA,zDAAC1F,kDAAMtC,YAAUvD,AAAA,aAAK,oDAAA,KAAA,zDAAC6F,kDAAMtC,YAAUrD,AAAA;;AAIvD,OAAC6Q,+CAAO,WAAYnN;AAAZ,AAAe,OAACyB,6CAAE5B,EAAE,AAAKG;GADjC,AAACkN,oEAAUvF,KAAK,oDAAA,KAAA,zDAAC1F,kDAAMtC,YAAUvD,AAAA,aAAK,oDAAA,KAAA,zDAAC6F,kDAAMtC,YAAUrD,AAAA;;;AAT/D,oBAA0BwD;AAYlB,OAACqN,+CAAO,WAAYnN;AAAZ,AAAe,OAACyB,6CAAE3B,GAAG,AAAUE;GADvC,AAACkN,oEAAUvF,KAAK,oDAAA,KAAA,zDAAC1F,kDAAMtC,YAAUvD,AAAA,aAAK,oDAAA,KAAA,zDAAC6F,kDAAMtC,YAAUrD,AAAA;;AAE5D,OAAC4Q,oEAAUvF,KAAK,oDAAA,KAAA,zDAAC1F,kDAAMtC,YAAUvD,AAAA,aAAK,oDAAA,KAAA,zDAAC6F,kDAAMtC,YAAUrD,AAAA;;;;;AAb1D,oBAAcsD;AAAd,GAAgB,GAAA,MAAA,LAAOC;AAAvB,oBAA0BC;AAcvB,oBAAI,CAACwG,8DAAAA,wEAAAA,ZAAUR,oDAAAA,7CAAGlG,oDAAAA;AAEX,OAACuN,+CAAO,WAAYnN;AAAZ,AAAe,OAACyB,6CAAE3B,GAAG,AAAUE;GADvC,AAACkN,oEAAUrF,KAAK,AAAC5F,kDAAM9F,AAAA,IAAGyD,EAAEC,EAAEzD,AAAA,aAAK,AAAC6F,kDAAM5F,AAAA,aAAKuD,EAAEC,EAAEvD,AAAA;;AAGnD,OAAC6Q,+CAAO,WAAYnN;AAAZ,AAAe,SAAK,AAACyB,6CAAE5B,EAAE,AAAKG,UACV,AAACyB,6CAAE3B,GAAG,AAAUE;GAF5C,AAACkN,oEAAUtF,KAAK,wDAAA,xDAAC3F,kDAAM9F,AAAA,IAAGyD,OAAMxD,AAAA,aAAK,iEAAA,jEAAC6F,kDAAM5F,AAAA,aAAKuD,OAAMtD,AAAA;;;AAG9D,oBAAI,CAACgK,8DAAAA,wEAAAA,ZAAUR,oDAAAA,7CAAGlG,oDAAAA;AAChB,OAACsN,oEAAUrF,KAAK,AAAC5F,kDAAM9F,AAAA,IAAGyD,EAAEC,EAAEzD,AAAA,aAAK,AAAC6F,kDAAM5F,AAAA,aAAKuD,EAAEC,EAAEvD,AAAA;;AAE9C,OAAC6Q,+CAAO,WAAYnN;AAAZ,AAAe,OAACyB,6CAAE5B,EAAE,AAAKG;GADjC,AAACkN,oEAAUtF,KAAK,wDAAA,xDAAC3F,kDAAM9F,AAAA,IAAGyD,OAAMxD,AAAA,aAAK,iEAAA,jEAAC6F,kDAAM5F,AAAA,aAAKuD,OAAMtD,AAAA;;;;AAtBjE,oBAA0BwD;AAyBlB,OAACqN,+CAAO,WAAYnN;AAAZ,AAAe,OAACyB,6CAAE3B,GAAG,AAAUE;GADvC,AAACkN,oEAAUtF,KAAK,wDAAA,xDAAC3F,kDAAM9F,AAAA,IAAGyD,OAAMxD,AAAA,aAAK,iEAAA,jEAAC6F,kDAAM5F,AAAA,aAAKuD,OAAMtD,AAAA;;AAE5D,OAAC4Q,oEAAUtF,KAAK,wDAAA,xDAAC3F,kDAAM9F,AAAA,IAAGyD,OAAMxD,AAAA,aAAK,iEAAA,jEAAC6F,kDAAM5F,AAAA,aAAKuD,OAAMtD,AAAA;;;;AA1B1D,GAAgB,GAAA,MAAA,LAAOuD;AAAvB,oBAA0BC;AA2BvB,OAACqN,+CAAO,WAAYnN;AAAZ,AAAe,SAAK,AAACyB,6CAAE5B,EAAE,AAAKG,UACV,AAACyB,6CAAE3B,GAAG,AAAUE;GAAM2H;;AAClD,OAACwF,+CAAO,WAAYnN;AAAZ,AAAe,OAACyB,6CAAE5B,EAAE,AAAKG;GAAK2H;;;AA7BzC,oBAA0B7H;AA8BvB,OAACqN,+CAAO,WAAYnN;AAAZ,AAAe,OAACyB,6CAAE3B,GAAG,AAAUE;GAAK2H;;AAC5CA;;;;;;AA6BT,0BAAA,1BAAMgG,4DAAKlR;AAAX,AACE,IAAA2D,oBAAK,EAAA,GAAA,MAAA,SAAA,EAAA,EAAA,WAAA,CAAAhB,gCAAA,6BAAA,KAAA,EAAA,EAAA,uCAAA,AAAA0D,2DAAA,QAAA,AAAAA,jCAAYmC,mEAAAA,hPAAQxI,8DAAAA,sCAAAA,+FAAAA,mEAAAA;AAAzB,AAAA,GAAA2D;AAAA,IAAAA,wBACK,EAAA,GAAA,MAAA,SAAA,EAAA,EAAA,WAAA,CAAAhB,gCAAA,kCAAA,KAAA,EAAA,EAAA,uCAAA,AAAA0D,gEAAA,QAAA,AAAAA,tCAAY+C,wEAAAA,1PAAapJ,8DAAAA,2CAAAA,oGAAAA,wEAAAA;AAD9B,AAAA,GAAA2D;AAEK,GAAA,GAAA,MAAA,LAAgB3D;AAAhB,GAAA,EAAA,WAAA,CAAA2C,gCAAA,AAAgB3C;AAAhB;;AAAA,GAAA,EAAA,AAAgBA;AAAhB,OAAAqG,kCAAY+D,kBAAIpK;;AAAhB;;;;AAAA,OAAAqG,kCAAY+D,kBAAIpK;;;AAFrB2D;;;AAAAA;;;AAKF,AAAA,AAAA,AAAA,AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,AAAA,CAAA,AAAA,uEAAA,WAAAgH,mBAAAC,rGAAqBmH;;AAArB,AAAA,IAAApH,yBAAA;AAAA,AAAA,OAAAA,8DAAAC,gBAAA;;;AAAA,CAAA,AAAA,uEAAA,WAAAC,mBAAAsG,OAAApG,5GAAqBgH;;AAArB,AAAA,IAAAlH,yBAAA;AAAA,AAAA,IAAAuG,WAAAD;IAAAC,eAAA,EAAA,CAAAA,oBAAA7L,oBAAA,AAAA6L,aAAA;AAAA,AAAA,QAAAA;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAA5F;;;;AAAA,OAAAC,4CAAAC,gBAAAuF,OAAApG;;;;;AAAA,CAAA,AAAA,4EAAA,WAAAc,mBAAAC,gBAAAC,1HAAqBgG;;AAArB,AAAA,IAAAlG,yBAAA;AAAA,AAAA,OAAAjL,+CAAA,WAAAoL,kBAAAuF;AAAA,AAAA,IAAAC,aAAAD;IAAApF,kBAAA,AAAApL,4CAAAyQ,WAAA,IAAA;IAAApF,kBAAA,AAAArL,4CAAAyQ,WAAA,IAAA;AAAA,AAAA,QAAA1F,gDAAAA,8CAAAE,kBAAAG,gBAAAC,mBAAAN,0BAAAE,kBAAAG,gBAAAC;GAAAL,mBAAAF;;;AAAA,CAAA,AAAA,mFAAA,WAAAQ,mBAAAC,qBAAAC,tIAAqBwF;;AAArB,AAAA,IAAA1F,yBAAA;AAAA,AAAA,IAAAG,wBAAA,WAAAC;AAAA,AAAA,OAAAlI,+BAAA+H,qBAAA,oBAAA,GAAA,IAAA,GAAAC,mBAAAE;;AAAA,AAAA,OAAAlI,+BAAA+H,qBAAAE,sBAAA,6BAAA,KAAA,IAAAD,mBAAA,AAAAG,+CAAA,mFAAA,KAAAC,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,wEAAA0E,sBAAA,OAAA,KAAA1E,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,qDAAA2E,aAAA,OAAA,KAAA3E,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,oDAAAjB,aAAA,eAAAE;;;AAAA,CAAA,AAAA,2EAAA,WAAA6F,tFAAqBM;;AAArB,AAAA,IAAAN,eAAA;AAAA,AAAA,YAAA5E,qBAAA,IAAA4E,aAAA,EAAA,mFAAA,wEAAA,qDAAA,4DAAA,kBAAA7F,iBAAA,AAAAkB,oBAAAlB,iBAAA,AAAAmB;;;AAAA,CAAA,AAAA,mEAAA,WAAAC,9EAAqB+E;;AAArB,AAAA,IAAA/E,yBAAA;AAAA,AAAAC;;;AAAA,CAAA,AAAA,yEAAA,WAAAC,pFAAqB6E;;AAArB,AAAA,IAAA7E,yBAAA;AAAA,AAAA,qCAAAmE,qBAAAC,YAAA5F,YAAAuB,cAAArB,gBAAAuB,pGAAqB4E;;;AAArB,CAAA,AAAA,uEAAA,WAAA3E,lFAAqB2E;;AAArB,AAAA,IAAA3E,yBAAA;AAAA,AAAA,QAAA,IAAA,AAAAC,gBAAAzB;;;AAAA,CAAA,AAAA,mEAAA,WAAA0B,9EAAqByE;;AAArB,AAAA,IAAAzE,yBAAA;AAAA,AAAA,IAAAC,kBAAAJ;AAAA,AAAA,GAAA,GAAA,CAAAI,mBAAA;AAAAA;;AAAA,IAAAA,sBAAA,AAAA,WAAAC;AAAA,AAAA,QAAA,aAAA,AAAAC,8BAAAD;GAAAF;AAAA,AAAA,CAAAH,gBAAAI;;AAAAA;;;;AAAA,CAAA,AAAA,qEAAA,WAAAmE,UAAAC,1FAAqBI;;AAArB,AAAA,IAAAL,gBAAA;AAAA,AAAA,SAAA,GAAA,CAAAC,cAAA,aAAA,EAAA,CAAA,AAAAD,8BAAA,AAAAC,6BAAA,EAAA,AAAA3M,6CAAA,AAAA0M,4BAAA,AAAAC,+BAAA,EAAA,AAAA3M,6CAAA,AAAA0M,mBAAA,AAAAC,sBAAA,EAAA,AAAA3M,6CAAA,AAAA0M,mBAAA,AAAAC,sBAAA,AAAA3M,6CAAA,AAAA0M,uBAAA,AAAAC;;;AAAA,CAAA,AAAA,oEAAA,WAAA/D,mBAAAC,lGAAqBkE;;AAArB,AAAA,IAAAnE,yBAAA;AAAA,AAAA,GAAA,AAAAE,0BAAA,iFAAA,yDAAA,0DAAA,4FAAAD;AAAA,OAAAE,+CAAA,AAAAC,qBAAA,AAAAjG,6CAAA,mCAAA6F,wBAAAX,eAAAY;;AAAA,qCAAAwD,qBAAAC,YAAA5F,YAAAuB,cAAA,AAAAnF,oBAAA,AAAAiG,+CAAAnC,gBAAAiC,kBAAA,zLAAqBkE;;;;AAArB,CAAA,AAAA,yFAAA,WAAA9D,mBAAAkD,vHAAqBY;;AAArB,AAAA,IAAA9D,yBAAA;AAAA,AAAA,IAAA2D,WAAAT;IAAAS,eAAA,EAAA,CAAAA,oBAAArM,oBAAA,AAAAqM,aAAA;AAAA,AAAA,QAAAA;KAAA;KAAA;KAAA;AAAA;;;;AAAA,OAAA9D,0BAAAlC,gBAAAuF;;;;;AAAA,CAAA,AAAA,2EAAA,WAAAhD,mBAAAC,gBAAAqD,zHAAqBM;;AAArB,AAAA,IAAA5D,yBAAA;AAAA,AAAA,IAAA0D,cAAAvD;IAAAwD,cAAA1D;AAAA,AAAA,oBAAA,CAAAyD,4CAAAA,0CAAA,wEAAAC,eAAAD,sBAAA,wEAAAC;AAAA,qCAAAL,SAAAH,YAAA5F,YAAAuB,cAAArB,gBAAA,xFAAqBmG;;AAArB,oBAAA,CAAAF,4CAAAA,0CAAA,qDAAAC,eAAAD,sBAAA,qDAAAC;AAAA,qCAAAT,qBAAAI,SAAA/F,YAAAuB,cAAArB,gBAAA,jGAAqBmG;;AAArB,oBAAA,CAAAF,4CAAAA,0CAAA,oDAAAC,eAAAD,sBAAA,oDAAAC;AAAA,qCAAAT,qBAAAC,YAAAG,SAAAxE,cAAArB,gBAAA,jGAAqBmG;;AAArB,qCAAAV,qBAAAC,YAAA5F,YAAAuB,cAAA,AAAAuB,8CAAA5C,gBAAAwC,gBAAAqD,UAAA,5KAAqBM;;;;;;AAArB,CAAA,AAAA,qEAAA,WAAAtD,hFAAqBsD;;AAArB,AAAA,IAAAtD,yBAAA;AAAA,AAAA,OAAAC,cAAA,AAAAhC,+CAAA,mFAAA,KAAAiC,mBAAA,wEAAA0C,qBAAA,OAAA,KAAA1C,mBAAA,qDAAA2C,YAAA,OAAA,KAAA3C,mBAAA,oDAAAjD,YAAA,eAAAE;;;AAAA,CAAA,AAAA,4EAAA,WAAAgD,mBAAA6C,1GAAqBM;;AAArB,AAAA,IAAAnD,yBAAA;AAAA,AAAA,qCAAAyC,qBAAAC,YAAA5F,YAAA+F,SAAA7F,gBAAAuB,/FAAqB4E;;;AAArB,CAAA,AAAA,yEAAA,WAAAlD,mBAAAC,vGAAqBiD;;AAArB,AAAA,IAAAlD,yBAAA;AAAA,AAAA,GAAA,AAAAE,wBAAAD;AAAA,OAAAD,kEAAA,AAAAG,eAAAF,oBAAA,KAAA,AAAAE,eAAAF,oBAAA;;AAAA,OAAAlO,+CAAAqO,gBAAAJ,uBAAAC;;;;AAAA,CAAA,AAAAiD,oCAAA;AAAA,AAAA,AAAA;;;AAAA,CAAA,AAAAA,0CAAA;;AAAA,CAAA,AAAAA,+CAAA,WAAA5C;AAAA,AAAA,YAAAlK,eAAA,KAAA,2BAAA,KAAA,IAAA;;;AAAA,CAAA,AAAA8M,kDAAA,WAAA5C,mBAAAC;AAAA,AAAA,OAAArM,iBAAAqM,qBAAA;;;AAAA;;;gCAAA,hCAAqB8C,wEAAYb,cAAcC,KAAK5F;AAApD,AAAA,YAAAqG,iDAAA,KAAA,KAAA,lCAAiCV,cAAcC,KAAK5F;;;AAApD;;;mCAAA,2CAAAsG,9EAAqBG;AAArB,AAAA,IAAA7C,uBAAA,iBAAA2C,WAAA,AAAAlE,sDAAAiE,SAAA,0HAAA,qDAAA;AAAA,AAAA,GAAA,AAAAxC,wBAAAwC;AAAA,OAAAjK,6CAAA,mCAAAkK;;AAAAA;;;AAAA,AAAA,YAAAF,yBAAA,AAAA,sGAAAC,UAAA,AAAA,mFAAAA,UAAA,AAAA,kFAAAA,UAAA,KAAA,AAAAlK,oBAAAwH,sBAAA;;;AAAAyC;AAAA,AAAA,CAAA,AAAA,wDAAApP,xDAAqBoP;;AAArB,CAAA,AAAA,AAAqBA,uEASO,WAAWvO,EAAEA;AAAb,AAAA,YAAA,RAAWA;AAAX,AAAoB,MAAO,KAAAjE,MAAA;;;AATvD,CAAA,AAAA,AAAqBwS,uEASO,WACWvO,EAAEA,MAAEA;AADf,AAAA,YAAA,RACWA;AADX,AACoB,MAAO,KAAAjE,MAAA;;;AAVvD,CAAA,AAAA,iEAAAoD,jEAAqBoP;;AAArB,CAAA,AAAA,AAAqBA,mFAKO,WAAa1I,GAAG8G,EAAE7L;AAAlB,AAAA,aAAA,TAAa+E;AAAb,AAAwB,QAAC+G,oDAAAA,mEAAAA,jBAAM/G,+CAAAA,xCAAG8G,+CAAAA,7CAAE7L,+CAAAA;;;AALhE,CAAA,AAAA,yDAAA3B,zDAAqBoP;;AAArB,CAAA,AAAA,AAAqBA,uEAIO,WAAS1I;AAAT,AAAA,aAAA,TAASA;AAAT,AAAoB,OAACgE,gBAAM,6BAAA,qDAAA,lFAACxE,sBAAQQ;;;AAJhE,CAAA,AAAA,sDAAA1G,tDAAqBoP;;AAArB,CAAA,AAAA,AAAqBA,mEAEO,WAAS1I;AAAT,AAAA,aAAA,TAASA;AAAT,AAAoB,QAAC+I,uDAAAA,+DAAAA,VAAS/I,2CAAAA;;;AAF1D,CAAA,AAAA,uDAAA1G,vDAAqBoP;;AAArB,CAAA,AAAA,AAAqBA,qEAGO,WAAS1I,GAAGuG;AAAZ,AAAA,aAAA,TAASvG;AAAT,AAAoB,QAACwG,uDAAAA,qEAAAA,hBAASxG,iDAAAA,1CAAGuG,iDAAAA;;;AAH7D,CAAA,AAAA,qEAAAjN,rEAAqBoP;;AAArB,CAAA,AAAA,AAAqBA,mFAOO,WAASvO;AAAT,AAAA,YAAA,RAASA;AAAT,AAAoB,MAAO,KAAAjE,MAAA;;;AAPvD,CAAA,AAAA,6DAAAoD,7DAAqBoP;;AAArB,CAAA,AAAA,AAAqBA,yFAaO,WAAiBvO,EAAEA;AAAnB,AAAA,YAAA,RAAiBA;AAAjB,AAAsB,MAAO,KAAAjE,MAAA;;;AAbzD,CAAA,AAAA,AAAqBwS,2EAcO,WAASvO,EAAEA,MAAEA;AAAb,AAAA,YAAA,RAASA;AAAT,AAAsB,MAAO,KAAAjE,MAAA;;;AAdzD,CAAA,AAAA,iEAAAoD,jEAAqBoP;;AAArB,CAAA,AAAA,AAAqBA,gFAiDnB,WAAU1I,GAAGC,MAAMqH;AAAnB,AAAA,aAAA,TAAUtH;AAAV,AACE,OAACqH,+CAAO,AAAQrH,YAAI,AAACR,sBAAQ,AAAiBQ,qBAAIC,MAAMqH;;;AAlD5D,CAAA,AAAA,AAAqBoB,qFAoDnB,WAAe1I,GAAGC,MAAMqH;AAAxB,AAAA,aAAA,TAAetH;AAAf,AACE,OAACqH,+CAAO,AAAQrH,YAAI,AAACN,2BAAa,AAAiBM,qBAAIC,MAAMqH;;;AArDjE,CAAA,AAAA,AAAqBoB,sFAuDnB,WAAgB1I,GAAGC,MAAMqH;AAAzB,AAAA,aAAA,TAAgBtH;AAAhB,AACE,OAACqH,+CAAO,AAAQrH,YAAI,AAACJ,4BAAc,AAAiBI,qBAAIC,MAAMqH;;;AAxDlE,CAAA,AAAA,AAAqBoB,qFA0DnB,WAAe1I,GAAGG,KAAKC,MAAMC;AAA7B,AAAA,aAAA,TAAeL;AAAf,AACE,OAACqH,+CAAO,AAAQrH,YAAI,AAACF,2BAAa,AAAiBE,qBAAIG,KAAKC,MAAMC;;;AA3DtE,CAAA,AAAA,wDAAA/G,xDAAqBoP;;AAArB,CAAA,AAAA,AAAqBA,uEAsCnB,WAAU1I;AAAV,AAAA,aAAA,TAAUA;AAAV,AACE,OAACY,sBAAQ,AAAiBZ;;;AAvC9B,CAAA,AAAA,AAAqB0I,yEAyCnB,WAAY1I,GAAGgB;AAAf,AAAA,aAAA,TAAYhB;AAAZ,AACE,OAACc,wBAAU,AAAiBd,qBAAIgB;;;AA1CpC,CAAA,AAAA,4DAAA1H,5DAAqBoP;;AAArB,CAAA,AAAA,AAAqBA,2EA6CnB,WAAU1I,GAAGX;AAAb,AAAA,aAAA,TAAUW;AAAV,AACE,OAACqH,+CAAO,AAAQrH,YAAI,AAACd,sBAAQ,AAAiBc,qBAAIX;;AAetD,8BAAA,9BAAM2J,oEAAmBhJ;AAAzB,AACE,GAAI,eAAW0I,dAAW1I;AACxB,OAA6BA;;AAC7BA;;;AAIJ,oCAAA,pCAAMiJ,gFAAkBxO,EAAEV;AAA1B,AACE,IAAAmP,WAAMnP;IAANmP,eAAA,EAAA,CAAAA,oBAAAhN,oBAAA,AAAAgN,aAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,0FAAA,2DAAA,8EAAA;;;KAAA;AAAA,0FAAA,2DAAA,uEAAA;;;KAAA;AAAA,0FAAA;;;KAAA;AAAA,0FAAA,iEAAA;;;;AAKE,GACE,EAAK,6CAAA,7CAACvN,kHAAkBlB,QAAG,AAAOV;AADpC,0FAAA;;AAAA,GAEE,EAAK,6CAAA,7CAAC4B,wGAAYlB,QAAG,AAAOV;AAF9B,0FAAA;;AAAA,GAGE,6CAAA,7CAAC4B,gHAAiBlB;AAHpB,0FAAA,mEAAA;;AAAA,AAAA;;;;;;;;AAMJ;;;4BAAA,5BAAM0O,gEAEHvH,OAAOM;AAFV,AAGE,OAAC3K,+CACC,WAAK6R,EAAEC;AAAP,AACE,OAACnS,6BACC,WAAKkS,MAAEE,SAAS1R;AAAhB,AACE,OAACsJ,+CAAOkI,MAAEE,SAASC,gBAAMF,WAAWzR;GACtCwR,EACA,AAAA,iGAAA,qFAAIxH,+BAAAA,nHAAOyH,2CAAAA,mDAAAA;GANjB,mCAQE,AAAA,iGAAgBnH;;AAEpB;;;;;;;;;;;wBAAA,xBAAOsH,wDAUJ5H;AAVH,AAWE,IAAMM,UAAQ,AAACuH,oBACC,WAAKvH,QAAQ/B,KAAKuJ;AAAlB,AACE,OAACD,oBACC,WAAKvH,YAAQ8E,IAAI3N;AAAjB,AACE,OAAC9B,+CACC,WAAK2K,YAAQyH;AAAb,AACE,OAACzI,+CAAOgB,YAAQyH,KAAK1S,oBAAMkJ;GAC7B+B,YAAQ,AAAC+G,kCAAiBjC,IAAI3N;GAClC6I,QAAQwH;GARd,mCASK9H;AATnB,AAUE,6DAAA,tDAACuD,8CAAMjD,2EAAuB,AAACiH,0BAAYvH,OAAOM;;AAEtD,oCAAA,pCAAO0H,gFAAqB9P,EAAEW,EAAEV,EAAE8P;AAAlC,AACE,GAAU,EAAI,MAAA,LAAM9P,gBACN,AAAC0K,0BAAUoF,SAAS9P;AADlC;;AAAA,AAEE,MAAO,iYAAA,2CAAA,uDAAA,4EAAA,kEAAA,sDAAA,vqBAAC0G,gDAAQ,CAAA,2PAAA,xNAAwC,wGAAA,kDAAA,1JAACC,wJAAQ5G,kDAAGW,EAAEV,6EAA0B8P,kQAEpE/P,sDACNW,wDACEV;;;AAE5B,gCAAA,hCAAO+P,wEAAiBlI;AAAxB,AACE,IAAAmI,aAAA,AAAA1E,cAAezD;IAAfoI,eAAA;IAAAC,eAAA;IAAAC,WAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,WAAAD;AAAA,IAAAE,aAAA,AAAAH,kDAAAE;QAAA,AAAAxS,4CAAAyS,WAAA,IAAA,/DAASrQ;SAAT,AAAApC,4CAAAyS,WAAA,IAAA,hEAAWO;AAAX,AAAA,AAGE,IAAMC,oBAAM,AAAA,sGAAA,HAAiBD;AAA7B,AACE,oCAAA,4KAAA,iFAAA,UAAA,3SAACd,kCAAoB9P,uEAAkB,AAAA,mGAAiB4Q;;AACxD,oBAAM,iBAAApQ,oBAAKqQ;AAAL,AAAA,oBAAArQ;AAAW,2JAAA,pJAACsQ,gDAAK,AAAA,gGAAeF;;AAAhCpQ;;;AAAN,AACE,MAAA,AAAAmG,gDAAA,CAAA,mCAAA,AAAAC,gHAAA,mFAAA,2CAAA,uDAAA,4EAAA,kEAAA,oDAAA,/XAA0C5G,yUAE5BA;;AAHhB;;AAMF,oCAAA,wJAAA,iFAAA,mFAAA,hWAAC8P,kCAAoB9P,6DAAa,AAAA,yFAAY4Q;;AAC9C,oCAAA,sKAAA,iFAAA,wEAAA,nWAACd,kCAAoB9P,oEAAgB,AAAA,gGAAe4Q;;AACpD,oCAAA,8KAAA,iFAAA,oFAAA,vXAACd,kCAAoB9P,wEAAkB,AAAA,oGAAiB4Q;;AAGxD,GAAM,EAAK,6CAAA,7CAAC/O,gHAAiB,AAAA,gGAAe+O,UACjC,GAAK,6BAAA,7BAACjG,0BAAUiG;AAD3B,AAEE,MAAA,AAAAjK,gDAAA,CAAA,mCAAA,AAAAC,gHAAA,6EAAA,2CAAA,uDAAA,4EAAA,kEAAA,oDAAA,zXAA0C5G,mUAEvBA;;AAJrB;;AAQA,GAAM,6BAAA,7BAAC2K,0BAAUiG;AAAjB,AACE,oBAAA,2CAAA,uDAAA,4EAAA,kEAAA,oDAAA,pTAAMG,8PACoB/Q;AAD1B,AAGE,GAAM,6CAAA,7CAAC6B,4HAAuB,AAAA,oGAAiB+O;AAA/C,AACE,MAAA,AAAAjK,gDAAA,CAAA,AAAAC,gHAAA,RAAO5G,qEAAqD+Q;;AAD9D;;AAGA,IAAMC,cAAM,AAAA,iGAAgBJ;AAA5B,AACE,GAAU,AAACK,4BAAYD;AAAvB;AAAA,AACE,MAAA,AAAArK,gDAAA,CAAA,AAAAC,gHAAA,yDAAA,AAAAA,jEAAO5G,yKAA2DgR,4BAAMD;;;AAE1E,GAAM,AAACrM,uBAAOsM;AAAd,AACE,MAAA,AAAArK,gDAAA,CAAA,AAAAC,gHAAA,RAAO5G,wDAAmC+Q;;AAD5C;;AAGA,IAAAG,mBAAA,AAAA3F,cAAayF;IAAbG,qBAAA;IAAAC,qBAAA;IAAAC,iBAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,iBAAAD;AAAA,iBAAA,AAAAD,wDAAAE,rEAAQhL;AAAR,AAAA,IACc0K,oBAAQ,4DAAA,5DAAC1F,8CAAM0F,oEAAe1K;AAD5C,AAAA,AAEE,GAAM,yFAAA,zFAACsE,0BAAU,AAACnC,4CAAIV,OAAOzB;AAA7B,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,iEAAA,AAAAA,zEAAO5G,iLAA8DqG,2BAAK0K;;AAD5E;;AAGA,GAAM,6CAAA,7CAAClP,4HAAuB,AAAA,oGAAiB,AAAC2G,4CAAIV,OAAOzB;AAA3D,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,wEAAA,AAAAA,hFAAO5G,wLAAqEqG,2BAAK0K;;AADnF;;AALF;AAAA,eAAAG;eAAAC;eAAAC;eAAA,CAAAC,iBAAA;;;;;;;AAAA,IAAAf,2BAAA,AAAA/E,cAAA2F;AAAA,AAAA,GAAAZ;AAAA,AAAA,IAAAY,uBAAAZ;AAAA,AAAA,GAAA,AAAAC,6BAAAW;AAAA,IAAAV,wBAAA,AAAAC,sBAAAS;AAAA,AAAA,eAAA,AAAAR,qBAAAQ;eAAAV;eAAA,AAAAtG,gBAAAsG;eAAA;;;;;;;AAAA,iBAAA,AAAAhT,gBAAA0T,7BAAQ7K;AAAR,AAAA,IACc0K,oBAAQ,4DAAA,5DAAC1F,8CAAM0F,oEAAe1K;AAD5C,AAAA,AAEE,GAAM,yFAAA,zFAACsE,0BAAU,AAACnC,4CAAIV,OAAOzB;AAA7B,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,iEAAA,AAAAA,zEAAO5G,iLAA8DqG,2BAAK0K;;AAD5E;;AAGA,GAAM,6CAAA,7CAAClP,4HAAuB,AAAA,oGAAiB,AAAC2G,4CAAIV,OAAOzB;AAA3D,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,wEAAA,AAAAA,hFAAO5G,wLAAqEqG,2BAAK0K;;AADnF;;AALF;AAAA,eAAA,AAAA7L,eAAAgM;eAAA;eAAA;eAAA;;;;;;;;AAAA;;;;;AAdN;;AAxBF;AAAA,eAAAjB;eAAAC;eAAAC;eAAA,CAAAC,WAAA;;;;;;;AAAA,IAAAE,qBAAA,AAAA/E,cAAA0E;AAAA,AAAA,GAAAK;AAAA,AAAA,IAAAL,iBAAAK;AAAA,AAAA,GAAA,AAAAC,6BAAAN;AAAA,IAAAO,kBAAA,AAAAC,sBAAAR;AAAA,AAAA,eAAA,AAAAS,qBAAAT;eAAAO;eAAA,AAAAtG,gBAAAsG;eAAA;;;;;;;AAAA,IAAAG,aAAA,AAAAnT,gBAAAyS;QAAA,AAAArS,4CAAA+S,WAAA,IAAA,/DAAS3Q;SAAT,AAAApC,4CAAA+S,WAAA,IAAA,hEAAWC;AAAX,AAAA,AAGE,IAAMC,oBAAM,AAAA,sGAAA,HAAiBD;AAA7B,AACE,oCAAA,4KAAA,iFAAA,UAAA,3SAACd,kCAAoB9P,uEAAkB,AAAA,mGAAiB4Q;;AACxD,oBAAM,iBAAApQ,oBAAKqQ;AAAL,AAAA,oBAAArQ;AAAW,2JAAA,pJAACsQ,gDAAK,AAAA,gGAAeF;;AAAhCpQ;;;AAAN,AACE,MAAA,AAAAmG,gDAAA,CAAA,mCAAA,AAAAC,gHAAA,mFAAA,2CAAA,uDAAA,4EAAA,kEAAA,oDAAA,/XAA0C5G,yUAE5BA;;AAHhB;;AAMF,oCAAA,wJAAA,iFAAA,mFAAA,hWAAC8P,kCAAoB9P,6DAAa,AAAA,yFAAY4Q;;AAC9C,oCAAA,sKAAA,iFAAA,wEAAA,nWAACd,kCAAoB9P,oEAAgB,AAAA,gGAAe4Q;;AACpD,oCAAA,8KAAA,iFAAA,oFAAA,vXAACd,kCAAoB9P,wEAAkB,AAAA,oGAAiB4Q;;AAGxD,GAAM,EAAK,6CAAA,7CAAC/O,gHAAiB,AAAA,gGAAe+O,UACjC,GAAK,6BAAA,7BAACjG,0BAAUiG;AAD3B,AAEE,MAAA,AAAAjK,gDAAA,CAAA,mCAAA,AAAAC,gHAAA,6EAAA,2CAAA,uDAAA,4EAAA,kEAAA,oDAAA,zXAA0C5G,mUAEvBA;;AAJrB;;AAQA,GAAM,6BAAA,7BAAC2K,0BAAUiG;AAAjB,AACE,oBAAA,2CAAA,uDAAA,4EAAA,kEAAA,oDAAA,pTAAMG,8PACoB/Q;AAD1B,AAGE,GAAM,6CAAA,7CAAC6B,4HAAuB,AAAA,oGAAiB+O;AAA/C,AACE,MAAA,AAAAjK,gDAAA,CAAA,AAAAC,gHAAA,RAAO5G,qEAAqD+Q;;AAD9D;;AAGA,IAAMC,cAAM,AAAA,iGAAgBJ;AAA5B,AACE,GAAU,AAACK,4BAAYD;AAAvB;AAAA,AACE,MAAA,AAAArK,gDAAA,CAAA,AAAAC,gHAAA,yDAAA,AAAAA,jEAAO5G,yKAA2DgR,4BAAMD;;;AAE1E,GAAM,AAACrM,uBAAOsM;AAAd,AACE,MAAA,AAAArK,gDAAA,CAAA,AAAAC,gHAAA,RAAO5G,wDAAmC+Q;;AAD5C;;AAGA,IAAAO,mBAAA,AAAA/F,cAAayF;IAAbO,qBAAA;IAAAC,qBAAA;IAAAC,iBAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,iBAAAD;AAAA,iBAAA,AAAAD,wDAAAE,rEAAQpL;AAAR,AAAA,IACc0K,oBAAQ,4DAAA,5DAAC1F,8CAAM0F,oEAAe1K;AAD5C,AAAA,AAEE,GAAM,yFAAA,zFAACsE,0BAAU,AAACnC,4CAAIV,OAAOzB;AAA7B,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,iEAAA,AAAAA,zEAAO5G,iLAA8DqG,2BAAK0K;;AAD5E;;AAGA,GAAM,6CAAA,7CAAClP,4HAAuB,AAAA,oGAAiB,AAAC2G,4CAAIV,OAAOzB;AAA3D,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,wEAAA,AAAAA,hFAAO5G,wLAAqEqG,2BAAK0K;;AADnF;;AALF;AAAA,eAAAO;eAAAC;eAAAC;eAAA,CAAAC,iBAAA;;;;;;;AAAA,IAAAnB,+BAAA,AAAA/E,cAAA+F;AAAA,AAAA,GAAAhB;AAAA,AAAA,IAAAgB,uBAAAhB;AAAA,AAAA,GAAA,AAAAC,6BAAAe;AAAA,IAAAd,wBAAA,AAAAC,sBAAAa;AAAA,AAAA,eAAA,AAAAZ,qBAAAY;eAAAd;eAAA,AAAAtG,gBAAAsG;eAAA;;;;;;;AAAA,iBAAA,AAAAhT,gBAAA8T,7BAAQjL;AAAR,AAAA,IACc0K,oBAAQ,4DAAA,5DAAC1F,8CAAM0F,oEAAe1K;AAD5C,AAAA,AAEE,GAAM,yFAAA,zFAACsE,0BAAU,AAACnC,4CAAIV,OAAOzB;AAA7B,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,iEAAA,AAAAA,zEAAO5G,iLAA8DqG,2BAAK0K;;AAD5E;;AAGA,GAAM,6CAAA,7CAAClP,4HAAuB,AAAA,oGAAiB,AAAC2G,4CAAIV,OAAOzB;AAA3D,AACE,MAAA,AAAAM,gDAAA,CAAA,AAAAC,gHAAA,wEAAA,AAAAA,hFAAO5G,wLAAqEqG,2BAAK0K;;AADnF;;AALF;AAAA,eAAA,AAAA7L,eAAAoM;eAAA;eAAA;eAAA;;;;;;;;AAAA;;;;;AAdN;;AAxBF;AAAA,eAAA,AAAApM,eAAA+K;eAAA;eAAA;eAAA;;;;;;;;AAAA;;;;;;AA8CF,AAAA,yBAAA,iCAAA1O,1DAAUuL;AAAV,AAAA,IAAA4E,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAA5E;;;KAAA;AAAA,OAAAA,qDAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAA1Q,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,uDAAA,vDAAU0Q;AAAV,AACM,4DAAA,rDAAC6E;;;AADP,CAAA,uDAAA,vDAAU7E,kEAENhF;AAFJ,AAAA,GAGW,EAAI,WAAA,VAAMA,qBAAQ,AAAC8J,qBAAK9J;AAHnC;AAAA,AAAA,MAAA,KAAA1L,MAAA;;;AAII,AAAC4T,8BAAgBlI;;AACjB,gCAAA,wCAAA,0DAAA,yDAAA,oDAAA,qDAAA,qDAAA,2DAAA,qDAAA,iEAAA,uEAAA,1kBAACyE,woBACiBzE,kcACA,AAAC4H,sBAAQ,AAACmC,uGAAMlV,AAAA,sSAAgBmL,tkBAChC,AAACgK,4EAAkBvO,tSACnB,AAACuO,4EAAkBnO,+BACnB,AAACmO,4EAAkBlO,+BACnBrH,AAAA,pRACAC,AAAA,+ZACA,qBAAA,rBAACuV,5BACD,qBAAA,rBAACA,vXACD,6CAAA,7CAACC;;;AAfvB,CAAA,iDAAA,jDAAUlF;;AAAV,AAiBA,6BAAA,7BAAOmF,kEAAclK;AAArB,AACE,IAAAmK,gHAAQ,AAACxE,qEAAW3F,KAAK,sEAAA,KAAA,3EAAC1F,kDAAM,eAAA,dAAK7F,AAAA,6BAAaE,AAAA,cAAO,sDAAA,KAAA,3DAAC2F,kDAAM9F,AAAA,cAAWC,AAAA,xPACrE,AAACgB,7EACD,AAAA;AAFN,AAAA,oBAAA0U;AAAAA;;AAGE3V,AAAA;;;AAEJ,AAAA,wBAAA,gCAAAgF,xDAAU6Q;AAAV,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,oDAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,oDAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAhW,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,sDAAA,tDAAUgW,iEACNC;AADJ,AACY,kEAAA,3DAACC,oDAAQD;;;AADrB,CAAA,sDAAA,tDAAUD,iEAENC,OAAOvK;AAFX,AAGI,IAAArB,2BAAsB,AAACjJ,gBAAM,AAACgV,mDAAW7Q,2BAAO0Q;AAAhD,AAAA,GAAA,CAAA5L,4BAAA;AAAA;AAAA,sBAAAA,lBAAY8L;AAAZ,AACE,MAAA,AAAA5L,gDAAA,CAAA,uCAAA,AAAAC,wJAAA,2CAAA,uDAAA,lJAA8C,AAAChE,eAAK2P;;;AAEtD,AAACvC,8BAAgBlI;;AACjB,IAAMM,UAAY,AAACsH,sBAAQ,AAACmC,uGAAMlV,AAAA,sSAAgBmL;IAC5C2K,UAAY,AAAA,yFAAWrK;IACvBsK,MAAY,iBAAAC,WAAQN;AAAR,AAAA,GACE,GAAK,AAACtV,oDAAcsV;AAAS,yDAAAM,lDAACC;;AADhCD;;;IAEZtS,IAAY,AAACwS,6CAAaH,IAAIzO;IAC9B8D,OAAY,AAAC+K,kDAAsBvP,8BAAgBmP;IACnDrS,QAAY,AAACwS,6CAAaH,IAAIxO;IAC9B8D,OAAY,AAAC8K,kDAAsBnP,8BAAgB+O;IACnDK,cAAY,AAACxF,+CAAO,WAAYnN;AAAZ,AAAe,OAACuK,0BAAU8H,QAAQ,AAAKrS;GAAKiS;IAChEW,WAAY,AAACC,mBAASF;IACtB1S,QAAY,AAACwS,6CAAaG,SAAS7O;IACnC8D,OAAY,AAAC6K,kDAAsBlP,8BAAgBoP;IACnD9K,UAAY,AAAC+J,2BAAalK;IAC1BI,SAAY,AAAC+K,kDAAU,AAACC,4CAAI,WAAY/S;AAAZ,AAAe,OAAUA;IAAKgT,cAAI5W,AAAA,YAAIuL;AAbxE,AAcE,gCAAA,wCAAA,0DAAA,yDAAA,oDAAA,qDAAA,qDAAA,2DAAA,qDAAA,iEAAA,uEAAA,1kBAACwE,woBACgBzE,+IACAM,7DACAL,lBACAC,KACAC,KACAC,nEACAC,4GACA,qBAAA,rBAAC4J,5BACD,qBAAA,rBAACA,zEACD,6CAAA,7CAACC;;;AA/BxB,CAAA,gDAAA,hDAAUI;;AAAV,AAiCA,+BAAA,/BAAOiB,sEAAgBxW,EAAEyB;AAAzB,AACE,IAAOf,KAAG,AAACgO,cAAI1O;IACRyW,KAAG,AAAC/H,cAAIjN;;AADf,AAEE,GACE,OAAA,NAAMf;AAAI,cAAA,NAAM+V;;AADlB,GAEE,AAACzR,6CAAE,AAACrE,gBAAMD,IAAI,AAACC,gBAAM8V;AAAK,eAAO,AAACpO,eAAK3H;eAAI,AAAC2H,eAAKoO;;;;;AAFnD,AAAA;;;;;;;AAKJ,wBAAA,xBAAO9G,wDAAatG;AAApB,AACE,QAAA,AAAAqN,JAAMC,oBAAG,AAAQtN;AAAjB,AACE,GAAI,OAAA,NAAOsN;AACT,OAACC,sBAAO,AAAQvN,QAAI,AAAC7H,6BAAe,AAACuD,eAAK,AAAUsE,WAChB,AAACtE,eAAK,AAAQsE;;AAClDsN;;;AAEN,yBAAA,zBAAOvE,0DAAsB/I;AAA7B,AACE,QAAA,AAAAqN,JAAMC,oBAAG,AAAQtN;IACXmM,SAAO,iBAAAH,mBAAI,yBAAA,qDAAA,9EAACxM,sBAAQQ;AAAb,AAAA,oBAAAgM;AAAAA;;AAAA;;;AADb,AAEE,GAAI,OAAA,NAAOsB;AACT,IAAMnB,aAAO,iBAAAH,mBAAI,yBAAA,qDAAA,9EAACxM,sBAAQQ;AAAb,AAAA,oBAAAgM;AAAAA;;AAAA;;;AAAb,AACE,OAACuB,sBAAO,AAAQvN,QAAI,AAAC7H,6BAAe,AAACuD,eAAK,AAACkF,sBAAQZ,KACf,AAACoE,8BAAoB+H;;AAC3DmB;;;AAEN,yBAAA,zBAAO9G,0DAAUxG,GAAGuG;AAApB,AACE,uGAAA,9FAAK,EAAI,kBAAWV,jBAAGU,wCAAO,kBAAWmC,jBAAWnC,oDAC/C,AAAC5K,6CAAE,AAACiF,sBAAQZ,IAAI,AAACY,sBAAQ2F,aACzB,AAAC4G,6BAAe,yBAAA,qDAAA,9EAAC3N,sBAAQQ,0FAAa,4BAAA,qDAAA,jFAACR,sBAAQ+G;;AAGnD,sBAAA,tBAAMQ,oDAAO/G,GAAG8G,EAAE7L;AAAlB,AACE,mBAAA,nBAACvB,iBAAOoN;;AACR,mBAAA,nBAACpN,iBAAOoN;;AACR,AAAC3L,oBAAU,AAACyF,sBAAQZ,IAAI8G,EAAE7L;;AAC1B,mBAAA,nBAACvB,iBAAOoN;;AACR,AAAC5L,+BAAqB4L,EACA,WAAK5M,EAAE4M,MAAE7L;AAAT,AACE,gEAAA,IAAA,IAAA,aAAA,9EAACC,+BAAqB4L,MAAE3L,gCAAsBF,4FAAM,AAAKf,IAAG,AAAKA,IAAG,AAAKA,IAAG,AAACzB,uBAASyB;GAF9G,IAAA,IAAA,IAGkCe,KAAK,yBAAA,qDAAA,9EAACuE,sBAAQQ;;AAChD,0BAAA,nBAACtG,iBAAOoN;;AAiBb,+BAAA,uCAAA0G,tEAAMG;AAAN,AAAA,IAAAF,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;aAAA,AAAAnL,4CAAAmL,eAAA,pEAA8B7L;aAA9B,AAAAU,4CAAAmL,eAAA,pEAAqCtB;AAArC,AACE,OAACC,oDAAQ,AAACa,4CAAI,WAAAW;AAAA,AAAA,IAAAC,aAAAD;QAAA,AAAAlW,4CAAAmW,WAAA,IAAA,/DAAMhU;QAAN,AAAAnC,4CAAAmW,WAAA,IAAA,/DAAQ/T;QAAR,AAAApC,4CAAAmW,WAAA,IAAA,/DAAU9T;SAAV,AAAArC,4CAAAmW,WAAA,IAAA,hEAAY7T;AAAZ,AAAiB,OAACmC,kDAAMtC,EAAEC,EAAEC,EAAEC;GAAKmS,QAAQvK;;AAI3D,AAAA;AAAA;AAAA,AAEA,8BAAA,9BAAOgG,oEAAe5H,GAAGnG,EAAEC,EAAEC,EAAE+T,EAAEC,UAAUC;AAA3C,AACE,oBAAMlU;AAAN,AAAQ,IAAAmU,iBAAenU;IAAfoU,iBAAiB,KAAAtS,eAAA,KAAA,AAAA,2EAAA,KAAAA,eAAA,KAAA,AAAA,sDAAA,KAAAA,eAAA,OAAA,KAAAA,eAAA,OAAA,KAAAA,eAAA,OAAA,KAAAA,eAAA,OAAA,KAAA,IAAA,OAAA,IAAA,OAAA,IAAA,OAAA,IAAA,OAAA,IAAA,OAAA,IAAA,nJAAyB/B,2BAAEC,2BAAEC,2BAAE+T;AAAhD,AAAA,uHAAAG,eAAAC,wDAAAD,eAAAC,5MAACvG,4DAAAA,2FAAAA;;AAAT;;AACA,OAACxL,kDACC,iBAAA6P,mBAAI,CAACmC,yDAAAA,+DAAAA,RAAWnO,2CAAAA,xCAAGnG,2CAAAA;AAAnB,AAAA,oBAAAmS;AAAAA;;AAAsB+B;;KACtBjU,EACA,kBAAI,iBAAAQ,oBAAK,GAAA,MAAA,LAAOP;AAAZ,AAAA,GAAAO;AAAe,QAAC8T,yDAAAA,+DAAAA,RAAKpO,2CAAAA,xCAAGlG,2CAAAA;;AAAxBQ;;MACF,CAAC+T,2DAAAA,iEAAAA,RAAarO,6CAAAA,1CAAGjG,6CAAAA,IACjBA,GACF,iBAAAiS,mBAAI,CAACmC,yDAAAA,+DAAAA,RAAWnO,2CAAAA,xCAAG8N,2CAAAA;AAAnB,AAAA,oBAAA9B;AAAAA;;AAAsBgC;;;;AAE1B,uCAAA,wDAAAM,/FAAO/G,sFAAqBvH,GAAGC,eAAoB8N,UAAUC;AAA7D,AAAA,IAAAO,aAAAD;SAAA,AAAA5W,4CAAA6W,WAAA,IAAA,hEAAsCC;SAAtC,AAAA9W,4CAAA6W,WAAA,IAAA,hEAAyCE;SAAzC,AAAA/W,4CAAA6W,WAAA,IAAA,hEAA4CG;SAA5C,AAAAhX,4CAAA6W,WAAA,IAAA,hEAA+CI;AAA/C,AACE,IAAAC,WAAM3O;IAAN2O,eAAA,EAAA,CAAAA,oBAAA1S,oBAAA,AAAA0S,aAAA;AAAA,AAAA,QAAAA;KAAA;AACQ,OAAChH,4BAAc5H,GAAGwO,GAAGC,GAAGC,GAAGC,GAAGZ,UAAUC;;;KADhD;AAEQ,OAACpG,4BAAc5H,GAAGyO,GAAGD,GAAGE,GAAGC,GAAGZ,UAAUC;;;KAFhD;AAGQ,OAACpG,4BAAc5H,GAAG0O,GAAGF,GAAGC,GAAGE,GAAGZ,UAAUC;;;;AAHhD,MAAA,KAAA9X,MAAA,CAAA,mEAAA0Y;;;;AAOF,AAAA,AAAA,AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,AAAA,CAAA,AAAA,qEAAA,WAAAtN,mBAAAC,nGAAWqO;;AAAX,AAAA,IAAAtO,yBAAA;AAAA,AAAA,OAAAA,8DAAAC,gBAAA;;;AAAA,CAAA,AAAA,qEAAA,WAAAC,mBAAAqN,OAAAnN,1GAAWkO;;AAAX,AAAA,IAAApO,yBAAA;AAAA,AAAA,IAAAsN,WAAAD;IAAAC,eAAA,EAAA,CAAAA,oBAAA5S,oBAAA,AAAA4S,aAAA;AAAA,AAAA,QAAAA;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;KAAA;AAAAC;;;;AAAA,OAAA7M,4CAAAC,gBAAAsM,OAAAnN;;;;;AAAA,CAAA,AAAA,0EAAA,WAAAc,mBAAAC,gBAAAC,xHAAWkN;;AAAX,AAAA,IAAApN,yBAAA;AAAA,AAAA,OAAAjL,+CAAA,WAAAoL,kBAAAyM;AAAA,AAAA,IAAAC,aAAAD;IAAAtM,kBAAA,AAAApL,4CAAA2X,WAAA,IAAA;IAAAtM,kBAAA,AAAArL,4CAAA2X,WAAA,IAAA;AAAA,AAAA,QAAA5M,gDAAAA,8CAAAE,kBAAAG,gBAAAC,mBAAAN,0BAAAE,kBAAAG,gBAAAC;GAAAL,mBAAAF;;;AAAA,CAAA,AAAA,iFAAA,WAAAQ,mBAAAC,qBAAAC,pIAAW0M;;AAAX,AAAA,IAAA5M,yBAAA;AAAA,AAAA,IAAAG,wBAAA,WAAAC;AAAA,AAAA,OAAAlI,+BAAA+H,qBAAA,oBAAA,GAAA,IAAA,GAAAC,mBAAAE;;AAAA,AAAA,OAAAlI,+BAAA+H,qBAAAE,sBAAA,2BAAA,KAAA,IAAAD,mBAAA,AAAAG,+CAAA,mFAAA,KAAAC,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,+DAAAyL,kBAAA,OAAA,KAAAzL,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,6DAAA0L,iBAAA,OAAA,KAAA1L,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,0DAAA2L,gBAAA,OAAA,KAAA3L,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,2DAAA4L,gBAAA,OAAA,KAAA5L,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,2DAAA6L,gBAAA,eAAA5M;;;AAAA,CAAA,AAAA,yEAAA,WAAA+M,pFAAWM;;AAAX,AAAA,IAAAN,eAAA;AAAA,AAAA,YAAA9L,qBAAA,IAAA8L,aAAA,EAAA,mFAAA,+DAAA,6DAAA,0DAAA,2DAAA,mEAAA,kBAAA/M,iBAAA,AAAAkB,oBAAAlB,iBAAA,AAAAmB;;;AAAA,CAAA,AAAA,iEAAA,WAAAC,5EAAWiM;;AAAX,AAAA,IAAAjM,yBAAA;AAAA,AAAAC;;;AAAA,CAAA,AAAA,uEAAA,WAAAC,lFAAW+L;;AAAX,AAAA,IAAA/L,yBAAA;AAAA,AAAA,mCAAAkL,iBAAAC,gBAAAC,eAAAC,eAAAC,eAAAvL,cAAArB,gBAAAuB,nIAAW8L;;;AAAX,CAAA,AAAA,qEAAA,WAAA7L,hFAAW6L;;AAAX,AAAA,IAAA7L,yBAAA;AAAA,AAAA,QAAA,IAAA,AAAAC,gBAAAzB;;;AAAA,CAAA,AAAA,iEAAA,WAAA0B,5EAAW2L;;AAAX,AAAA,IAAA3L,yBAAA;AAAA,AAAA,IAAAC,kBAAAJ;AAAA,AAAA,GAAA,GAAA,CAAAI,mBAAA;AAAAA;;AAAA,IAAAA,sBAAA,AAAA,WAAAC;AAAA,AAAA,QAAA,cAAA,AAAAC,8BAAAD;GAAAF;AAAA,AAAA,CAAAH,gBAAAI;;AAAAA;;;;AAAA,CAAA,AAAA,mEAAA,WAAAqL,UAAAC,xFAAWI;;AAAX,AAAA,IAAAL,gBAAA;AAAA,AAAA,SAAA,GAAA,CAAAC,cAAA,aAAA,EAAA,CAAA,AAAAD,8BAAA,AAAAC,6BAAA,EAAA,AAAA7T,6CAAA,AAAA4T,wBAAA,AAAAC,2BAAA,EAAA,AAAA7T,6CAAA,AAAA4T,uBAAA,AAAAC,0BAAA,EAAA,AAAA7T,6CAAA,AAAA4T,sBAAA,AAAAC,yBAAA,EAAA,AAAA7T,6CAAA,AAAA4T,sBAAA,AAAAC,yBAAA,EAAA,AAAA7T,6CAAA,AAAA4T,sBAAA,AAAAC,yBAAA,AAAA7T,6CAAA,AAAA4T,uBAAA,AAAAC;;;AAAA,CAAA,AAAA,kEAAA,WAAAjL,mBAAAC,hGAAWoL;;AAAX,AAAA,IAAArL,yBAAA;AAAA,AAAA,GAAA,AAAAE,0BAAA,iFAAA,gEAAA,kEAAA,oEAAA,+DAAA,+EAAAD;AAAA,OAAAE,+CAAA,AAAAC,qBAAA,AAAAjG,6CAAA,mCAAA6F,wBAAAX,eAAAY;;AAAA,mCAAAuK,iBAAAC,gBAAAC,eAAAC,eAAAC,eAAAvL,cAAA,AAAAnF,oBAAA,AAAAiG,+CAAAnC,gBAAAiC,kBAAA,xNAAWoL;;;;AAAX,CAAA,AAAA,uFAAA,WAAAhL,mBAAAiK,rHAAWe;;AAAX,AAAA,IAAAhL,yBAAA;AAAA,AAAA,IAAA6K,WAAAZ;IAAAY,eAAA,EAAA,CAAAA,oBAAAvT,oBAAA,AAAAuT,aAAA;AAAA,AAAA,QAAAA;KAAA;KAAA;KAAA;KAAA;KAAA;AAAA;;;;AAAA,OAAAhL,0BAAAlC,gBAAAsM;;;;;AAAA,CAAA,AAAA,yEAAA,WAAA/J,mBAAAC,gBAAAuK,vHAAWM;;AAAX,AAAA,IAAA9K,yBAAA;AAAA,AAAA,IAAA4K,cAAAzK;IAAA0K,cAAA5K;AAAA,AAAA,oBAAA,CAAA2K,4CAAAA,0CAAA,+DAAAC,eAAAD,sBAAA,+DAAAC;AAAA,mCAAAL,SAAAN,gBAAAC,eAAAC,eAAAC,eAAAvL,cAAArB,gBAAA,3HAAWqN;;AAAX,oBAAA,CAAAF,4CAAAA,0CAAA,6DAAAC,eAAAD,sBAAA,6DAAAC;AAAA,mCAAAZ,iBAAAO,SAAAL,eAAAC,eAAAC,eAAAvL,cAAArB,gBAAA,5HAAWqN;;AAAX,oBAAA,CAAAF,4CAAAA,0CAAA,0DAAAC,eAAAD,sBAAA,0DAAAC;AAAA,mCAAAZ,iBAAAC,gBAAAM,SAAAJ,eAAAC,eAAAvL,cAAArB,gBAAA,7HAAWqN;;AAAX,oBAAA,CAAAF,4CAAAA,0CAAA,2DAAAC,eAAAD,sBAAA,2DAAAC;AAAA,mCAAAZ,iBAAAC,gBAAAC,eAAAK,SAAAH,eAAAvL,cAAArB,gBAAA,7HAAWqN;;AAAX,oBAAA,CAAAF,4CAAAA,0CAAA,2DAAAC,eAAAD,sBAAA,2DAAAC;AAAA,mCAAAZ,iBAAAC,gBAAAC,eAAAC,eAAAI,SAAA1L,cAAArB,gBAAA,7HAAWqN;;AAAX,mCAAAb,iBAAAC,gBAAAC,eAAAC,eAAAC,eAAAvL,cAAA,AAAAuB,8CAAA5C,gBAAAwC,gBAAAuK,UAAA,3MAAWM;;;;;;;;AAAX,CAAA,AAAA,mEAAA,WAAAxK,9EAAWwK;;AAAX,AAAA,IAAAxK,yBAAA;AAAA,AAAA,OAAAC,cAAA,AAAAhC,+CAAA,mFAAA,KAAAiC,mBAAA,+DAAAyJ,iBAAA,OAAA,KAAAzJ,mBAAA,6DAAA0J,gBAAA,OAAA,KAAA1J,mBAAA,0DAAA2J,eAAA,OAAA,KAAA3J,mBAAA,2DAAA4J,eAAA,OAAA,KAAA5J,mBAAA,2DAAA6J,eAAA,eAAA5M;;;AAAA,CAAA,AAAA,0EAAA,WAAAgD,mBAAA+J,xGAAWM;;AAAX,AAAA,IAAArK,yBAAA;AAAA,AAAA,mCAAAwJ,iBAAAC,gBAAAC,eAAAC,eAAAC,eAAAG,SAAA/M,gBAAAuB,9HAAW8L;;;AAAX,CAAA,AAAA,uEAAA,WAAApK,mBAAAC,rGAAWmK;;AAAX,AAAA,IAAApK,yBAAA;AAAA,AAAA,GAAA,AAAAE,wBAAAD;AAAA,OAAAD,kEAAA,AAAAG,eAAAF,oBAAA,KAAA,AAAAE,eAAAF,oBAAA;;AAAA,OAAAlO,+CAAAqO,gBAAAJ,uBAAAC;;;;AAAA,CAAA,AAAAmK,kCAAA;AAAA,AAAA,AAAA;;;AAAA,CAAA,AAAAA,wCAAA;;AAAA,CAAA,AAAAA,6CAAA,WAAA9J;AAAA,AAAA,YAAAlK,eAAA,KAAA,yBAAA,KAAA,IAAA;;;AAAA,CAAA,AAAAgU,gDAAA,WAAA9J,mBAAAC;AAAA,AAAA,OAAArM,iBAAAqM,qBAAA;;;AAAA;;;8BAAA,9BAAWgK,oEAAUhB,UAAUC,SAASC,QAAQC,QAAQC;AAAxD,AAAA,YAAAS,kEAAA,KAAA,KAAA,rDAAqBb,UAAUC,SAASC,QAAQC,QAAQC;;;AAAxD;;;iCAAA,yCAAAU,1EAAWG;AAAX,AAAA,IAAA/J,uBAAA,iBAAA6J,WAAA,AAAApL,sDAAAmL,SAAA,iHAAA,6DAAA,0DAAA,2DAAA;AAAA,AAAA,GAAA,AAAA1J,wBAAA0J;AAAA,OAAAnR,6CAAA,mCAAAoR;;AAAAA;;;AAAA,AAAA,YAAAF,uBAAA,AAAA,6FAAAC,UAAA,AAAA,2FAAAA,UAAA,AAAA,wFAAAA,UAAA,AAAA,yFAAAA,UAAA,AAAA,yFAAAA,UAAA,KAAA,AAAApR,oBAAAwH,sBAAA;;;AAAA2J,AAEA,+BAAA,/BAC0BK,sEAAYjQ,GAAGG,KAAKa;AAD9C,AAEE,OAACyD,0BAAU,AAAC3D,wBAAUd,GAAGgB,UAAUb;;AAErC,gCAAA,hCAC0B+P,wEAAalQ,GAAGG;AAD1C,AAEE,4CAAA,rCAAC8P,6BAASjQ,GAAGG;;AAEf,2BAAA,3BAC0BiO,8DAAQpO,GAAGG;AADrC,AAEE,4CAAA,rCAAC8P,6BAASjQ,GAAGG;;AAEf,iCAAA,jCAC0BgQ,0EAAcnQ,GAAGG;AAD3C,AAEE,4CAAA,rCAAC8P,6BAASjQ,GAAGG;;AAEf,gCAAA,hCAC0BK,wEAAaR,GAAGG;AAD1C,AAEE,4CAAA,rCAAC8P,6BAASjQ,GAAGG;;AAEf,6BAAA,7BAC0BiQ,kEAAUpQ,GAAGG;AADvC,AAEE,4CAAA,rCAAC8P,6BAASjQ,GAAGG;;AAEf,oCAAA,pCAC0BkQ,gFAAiBrQ,GAAGG;AAD9C,AAEE,4CAAA,rCAAC8P,6BAASjQ,GAAGG;;AAEf,sBAAA,tBAAMmQ,oDAAOtQ,GAAGuQ;;AAAhB,AAAA,GACS,AAAC1I,wBAAI7H;AADd;AAAA,AAAA,MAAA,KAAA9J,MAAA;;;AAEE,GACE,EAAK,OAASqa,sBAAK,OAAA,NAAMA;AACzB,GAAI,CAAGA,MAAIha,AAAA;AACT,MAAA,AAAAkK,gDAAA,CAAA,kCAAA,AAAAC,2HAAA,SAAA,AAAAA,4HAAA,2CAAA,uDAAA,+DAAA,zTAAyCnK,AAAA,oIAAcga,2OAA8BA;;AACrFA;;;AAJJ,GAME,AAACxF,4BAAYwF;AACb,IAAAC,aAAmBD;WAAnB,AAAA7Y,4CAAA8Y,WAAA,IAAA,lEAAOrQ;YAAP,AAAAzI,4CAAA8Y,WAAA,IAAA,nEAAYnX;AAAZ,AACE,GACE,qEAAA,rEAACuR,gDAAK,AAAC5G,gBAAMuM;AACX,MAAA,AAAA9P,gDAAA,CAAA,yCAAA,AAAAC,4HAAA,2CAAA,uDAAA,4EAAA,lMAAgD6P,iQACPA;;AAH7C,GAIE,GAAK,qCAAA,rCAACN,6BAASjQ,GAAGG;AAChB,MAAA,AAAAM,gDAAA,CAAA,wDAAA,AAAAC,4HAAA,2CAAA,uDAAA,4EAAA,lMAA+D6P,iQACtBA;;AAN7C,GAOE,UAAA,TAAMlX;AAPR;;AAAA,AAUI,OAAA,6EAAA,gBAAI,yBAAA,zBAACmG,sBAAQQ,wDAASuQ,9FAAKjZ;;;;;;AAlBnC,GAoBa,AAAC6F,uBAAOoT;AAAK,eAAOvQ;eAAG,AAACyQ,kDAAUF;;;;;AApB/C,GAsBE,gBAAArU,fAAUqU;AACV,OAAA,6EAAA,gBAAI,yBAAA,qDAAA,mFAAA,jKAAC/Q,sBAAQQ,kMAAoBuQ,xOAAMjZ;;AAvBzC,AA0BE,MAAA,AAAAmJ,gDAAA,CAAA,oDAAA,AAAAC,4HAAA,2CAAA,uDAAA,0EAAA,hMAA2D6P,+PACnBA;;;;;;;;;AAE5C,6BAAA,7BAAMlC,kEAAcrO,GAAGuQ;AAAvB,AACE,IAAAvE,mBAAI,AAACsE,oBAAMtQ,GAAGuQ;AAAd,AAAA,oBAAAvE;AAAAA;;AACI,MAAA,AAAAvL,gDAAA,CAAA,+BAAA,AAAAC,4HAAA,2CAAA,uDAAA,4EAAA,lMAAsC6P,iQAEnBA;;;AAEzB,2BAAA,3BAAMpC,8DAAYnO,GAAGuQ;AAArB,AACE,oBAAMA;AAAN,AACE,OAAClC,2BAAarO,GAAGuQ;;AADnB;;;AAKF,+BAAA,/BAAMG,sEAAgB1Q,GAAU2Q;AAAhC,AACE,oBAAM,iBAAArW,oBAAK,AAAaqW;AAAlB,AAAA,oBAAArW;AACK,+CAAA,xCAAC2V,6BAASjQ,GAAG,AAAK2Q;;AADvBrW;;;AAAN,AAEE,IAAAiG,qBAAkB,AAAC9B,oBAAU,yBAAA,qDAAA,9EAACe,sBAAQQ,2IAAU,AAAK2Q,QAAO,AAAKA;AAAjE,AAAA,GAAA,CAAApQ,sBAAA;AAAA;;AAAA,YAAAA,RAAYqQ;AAAZ,AACE,MAAA,AAAAnQ,gDAAA,CAAA,cAAA,AAAAC,oHAAA,kCAAA,AAAAA,8HAAA,2CAAA,uDAAA,wEAAA,wEAAA,9ZAAqBiQ,sJAAwCC,gQAE1C,AAAKD,+DACTA;;;AANnB;;;AAQF,8BAAA,9BAAOhJ,oEAAexH,KAAK0Q;AAA3B,AACE,GAAU,EAAI,iBAAA3U,hBAAUiE,wCAAM,OAASA;AAAvC;;AAAA,AACE,MAAA,AAAAM,gDAAA,CAAA,wBAAA,AAAAC,mHAAA,OAAA,AAAAA,iHAAA,yCAAA,2CAAA,uDAAA,wEAAA,qEAAA,3ZAA+BP,0HAAY0Q,4RACC1Q,gEAAe0Q;;;AAE/D,6BAAA,7BAAOC,kEAAc/W,EAAE8W;AAAvB,AACE,GAAM,MAAA,LAAM9W;AAAZ,AACE,MAAA,AAAA0G,gDAAA,CAAA,kCAAA,AAAAC,2HAAA,2CAAA,uDAAA,wEAAA,wDAAA,rPAAyCmQ,mPACD9W,6DAAY8W;;AAFtD;;;AAIF,2BAAA,3BAAOE,8DAAYC;AAAnB,AACE,oRAAA,5QAAK,sDAAA,mFAAA,+DAAA,xMAACC,+CAAOD;;AAEf,yBAAA,zBAAOE,0DAAUlR;AAAjB,AACE,uGAAA,/FAAK,AAAA,yFAAUA;;AAEjB,6BAAA,7BAC2BmR,kEACxBtX;AAFH,AAGE,kIAAA,wEAAA,jMAAI,+CAAA,/CAAC8B,6CAAE9B,8EACH,+CAAA,/CAAC8B,6CAAE9B,2BACH,+CAAA,/CAAC8B,6CAAE9B,qBACH,+CAAA,/CAAC8B,6CAAE9B;;AAET,8BAAA,9BAC2BuX,oEACxBza;AAFH,AAGE,SAAI,EAAK,OAASA,oBAAG,KAAA,JAAMA,gBAAI,OAASA;;AAE1C,+BAAA,/BAAO0a,sEAAUrR,GAAGuQ;AAApB,AACE,SAAK,CAAGA,MAAI,AAAA,yFAAUvQ,UACjB,CAAGuQ,MAAIja,AAAA;;AAEd,gCAAA,hCAAOgb,wEAAiBtR,GAAGuQ;AAA3B,AACE,IAAAgB,WAAQvR;AAAR,AAAA,GACE,AAACqR,6BAASrR,GAAGuQ;AACX,qDAAAgB,SAAA,vDAACpM,kHAAeoL;;AAFpBgB;;;AAIF,AAAA,6BAAA,qCAAAlW,lEAAOoW;AAAP,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,yDAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,yDAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAvb,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,2DAAA,3DAAOub,sEACHT,OAAOT;AADX,AAEI,6DAAA,tDAACrP,+CAAO8P,oEAAiBM,8BAAgBf;;;AAF7C,CAAA,2DAAA,3DAAOkB,sEAGHT,OAAOnX,EAAE0W;AAHb,AAII,IAAAmB,WAAQV;IAARU,eAAA,2KAAAA,zKACE,AAACP,2BAAOtX,IACR,+CAAA6X,SAAA,xDAACxQ,mHAAgBqI,gBAAM1P,EAAE0W;IAF3BmB,eAAA,gLAAAA,9KAIE,AAACN,4BAAQvX,IACT,+CAAA6X,aAAA,5DAACxQ,uHAAgBqI,gBAAM1P,EAAE0W;IAL3BmB,eAAA,qUAAAA,nUAOE,EAAK,GAAK,AAACN,4BAAQvX,UAAI,AAACwX,6BAAS,AAAA,2FAAWL,QAAQT,QACpD,+CAAAmB,aAAA,5DAACxQ,uHAAgBqI,gBAAMgH,IAAIA;AAR7B,AAAA,AAWE,sDAAAmB,aAAA,5DAACxQ,yHAAiBoQ,8BAAgBf;;;;AAfxC,CAAA,qDAAA,rDAAOkB;;AAAP,AAoBA,2BAAA,3BAAOE,8DAAY3R,GAAU2Q;AAA7B,AACE,AAACD,6BAAe1Q,GAAG2Q;;AACnB,IAAMiB,kBAAU,AAACpR,8BAAUR,GAAG,AAAK2Q;AAAnC,AACE,oBAAI,AAAaA;AACf,IAAAkB,WAAQ7R;IAAR6R,eAAA,AACY,+CAAAA,SAAA,xDAAC3Q,6GAAa4Q,qCAASnB,MAAM5S;;IADzC8T,eAAA,AAEY,+CAAAA,aAAA,5DAAC3Q,iHAAa4Q,qCAASnB,MAAM3S;;IAFzC6T,eAAA,oNAAAA,lNAGED,iBAAU,+CAAAC,aAAA,5DAAC3Q,iHAAa4Q,qCAASnB,MAAM1S;IAHzC4T,eAAA,AAIY,8BAAAA,9BAACP,2CAAgB,AAAKX;;AAJlC,AAAA,AAKY,qDAAAkB,aAAA,3DAAC1M,+GAAY,6CAAA,7CAAC2G;;;AAC1B,IAAAiG,qBAAmB,yBAAA,zBAACzS,sBAAQU,sFAAI,AAAK2Q,QAAO,AAAKA,QAAO,AAAKA;AAA7D,AAAA,GAAA,CAAAoB,sBAAA;AAME/R;;AANF,eAAA+R,XAAUC;AAAV,AACE,IAAAC,WAAQjS;IAARiS,eAAA,AACY,+CAAAA,SAAA,xDAAC/Q,6GAAagR,qCAASF,SAASjU;;IAD5CkU,eAAA,AAEY,+CAAAA,aAAA,5DAAC/Q,iHAAagR,qCAASF,SAAShU;;IAF5CiU,eAAA,uNAAAA,rNAGEL,iBAAU,+CAAAK,aAAA,5DAAC/Q,iHAAagR,qCAASF,SAAS/T;AAH5C,AAAA,AAIY,qDAAAgU,aAAA,3DAAC9M,+GAAY,6CAAA,7CAAC2G;;;;;AAGlC,4BAAA,5BAAOqG,gEAAaC,MAAMC,MAAMza,IAAIoI,GAAGnG,EAAEC,EAAEC;AAA3C,AACE,IAAMuY,cAAa,iBAAAtG,mBAAI,AAAC1J,4CAAI8P,MAAMC;AAAf,AAAA,oBAAArG;AAAAA;;AAAA,IAAAA,uBACE,AAAA,2EAAI,AAAC1U,gBAAM,yBAAA,qDAAA,9EAACkI,sBAAQQ,2IAAUnG,EAAEwY;AADlC,AAAA,oBAAArG;AAAAA;;AAEE,OAACuG,cAAI,+OAAA,/OAACC,+CAAO,gBAAA,AAAA,mKAAIxS,tBAAG,AAACY,5CAAS,AAAC0B,sEAAI+P,vLAAsBrO;;;;IACxEyO,2BAAa,AAACtN,8CAAMmN,YAAY1a,IAAImC;AAH1C,AAIE,OAACoL,8CAAMiN,MAAMC,MAAMI;;AAEvB,6BAAA,7BAAOC,kEAAcN,MAAMO,OAAO3S,GAAGnG,EAAEC,EAAEC;AAAzC,AACE,OAAC0P,oBACC,WAAK2I,UAAMC,MAAMza;AAAjB,AACE,OAACua,0BAAYC,UAAMC,MAAMza,IAAIoI,GAAGnG,EAAEC,EAAEC;GACtCqY,MACAO;;AAEJ,gCAAA,hCAAOC,wEAAiB5B,OAAOL;AAA/B,AACE,IAAM3Q,KAAQ,AAAA,2FAAWgR;IACnBlX,IAAQ,AAAA,8EAAI6W;IACZkC,mHAAY7B,9CACF,qDAAA,rDAAC7L,kHAAgB,AAACwM,yBAAW3R,GAAG2Q,7LAChC,qMAAA,rMAACzP,+PAAgBlK,eAAK2Z;AAJtC,AAKE,GAAI,AAACN,kCAAcrQ,GAAGlG;AACpB,IAAMD,IAAO,AAAA,6EAAI8W;IACX5W,IAAO,sIAAA,pHAAI,AAACjB,0BAAY6X,QAAO,AAAA,2EAAIA;IACnCyB,QAAO,iBAAApG,6LAAQ6G,1KAAwB,4CAAA,AAAA,5CAACvQ,+LAAIzI;AAArC,AAAA,oBAAAmS;AAAAA;;AAAA;;;IACP2G,SAAO,AAACrQ,4CAAI,2BAAA,3BAACxB,wBAAUd,uEAAmBlG;IAC1CgZ,qBAAO,AAACJ,2BAAaN,MAAMO,OAAO3S,GAAGnG,EAAEC,EAAEC;AAJ/C,AAKE,0EAAA,nEAACmH,+CAAO2R,oHAAwBtJ,gBAAM1P,EAAEiZ;;AAC1CD;;;AAEN,mCAAA,nCAC0BE,8EAAgB5S;AAD1C,AAEE,GACE,iBAAAjE,hBAAUiE;AACV,oDAAA,7CAACxE,iDAAK,iEAAA,jEAACjE,4CAAI,AAACsb,eAAK7S;;AAFnB,GAIE,OAASA;AACT,OAACjI,mBAAQ,qBAAA,rBAAC+a,gDAAoC9S;;AALhD,AAQE,MAAA,AAAAM,gDAAA,CAAA,uBAAA,AAAAC,mHAAA,yCAAA,2CAAA,uDAAA,wEAAA,9NAA8BP,8RACcA;;;;;AAEhD,4BAAA,5BAAM+S,gEAAa/S;AAAnB,AACE,GACE,iBAAAjE,hBAAUiE;AACV,GAAI,AAAC4S,iCAAa5S;AAChB,OAACgT,gDAAQ,AAACC,oBAAUjT,MAAM,kEAAA,lEAACkT,6CAAK,AAACL,eAAK7S;;AACtC,OAACgT,gDAAQ,AAACC,oBAAUjT,MAAM,CAAA,IAAS,AAAC6S,eAAK7S;;;AAJ7C,GAMC,OAASA;AACT,IAAAmT,aAAkB,qBAAA,rBAACL,+CAAmC9S;QAAtD,AAAAzI,4CAAA4b,WAAA,IAAA,/DAAOnZ;SAAP,AAAAzC,4CAAA4b,WAAA,IAAA,hEAASC;WAAT,AAAA7b,4CAAA4b,WAAA,IAAA,lEAAYE;AAAZ,AACE,GAAI,6CAAA,7CAAC7X,iDAAK,iDAAA,jDAACjE,4CAAI8b;AACb,oBAAID;AAAG,wDAAA,JAAKA,QAAO,kDAAA,lDAACF,6CAAKG;;AAAS,yDAAA,lDAACH,6CAAKG;;;AACxC,oBAAID;AAAG,wDAAA,JAAKA,qDAAQC;;AAAM,QAAA,gDAASA;;;;AAVxC,AAaE,MAAA,AAAA/S,gDAAA,CAAA,uBAAA,AAAAC,mHAAA,yCAAA,2CAAA,uDAAA,wEAAA,9NAA8BP,8RACcA;;;;;AAEhD;;;;;;;;;gCAAA,hCAAOsT,wEAQJzT,GAAG0T;AARN,AASE,IAAA3B,qBAAiB,AAACtT,oBAAU,2BAAA,3BAACqC,wBAAUd;AAAvC,AAAA,GAAA,CAAA+R,sBAAA;AAAA,iGAAA,PAiCG2B;;AAjCH,aAAA3B,TAAU4B;AAAV,AACE,IAAMC,UAAQ,WAAK9Z,EAAEC;AAAP,AACE,OAAA,6EAAI,AAACzC,gBAAM,yBAAA,qDAAA,9EAACkI,sBAAQQ,2IAAUlG,EAAEC;;IAC1C8Z,QAAQ,WAAK/Z,EAAEga;AAAP,AACE,OAACvc,+CACC,WAAKI,IAAIoC;AAAT,AACE,IAAAgY,yBAAY,AAAC6B,QAAQ9Z,EAAEC;AAAvB,AAAA,GAAA,CAAAgY,0BAAA;AAEE,0DAAA,nDAAC7Q,+CAAOvJ,QAAMX,eAAK+C;;AAFrB,QAAAgY,JAAUlY;AAAV,AACE,0DAAA,nDAACqH,+CAAOvJ,QAAM4R,gBAAMxP,EAAEF;;GAH5B,mFAAA,iCAAA,2CAKUia;;AAR1B,AASE,OAACrK,oBACC,WAAAsK,SAAsBja,EAAEC;AAAxB,AAAA,IAAAia,aAAAD;iBAAA,AAAArc,4CAAAsc,WAAA,IAAA,xEAAMN;cAAN,AAAAhc,4CAAAsc,WAAA,IAAA,rEAAaC;AAAb,AACE,GACE,GAAK,AAACxP,0BAAUkP,OAAO7Z;AADzB,0FAEG,AAACqL,8CAAMuO,WAAO5Z,EAAEC,GAAGka;;AAFtB,GAIE,EACE,AAAC/D,8BAAUlQ,GAAGlG,QACd,EACE,AAACjD,oDAAckD,QACf,EAAK,AAACma,sBAAMna,QAAG,GAAK,AAAC2R,qBAAK3R;AAC9B,IAAAoa,aAAsB,AAACN,MAAM/Z,EAAEC;aAA/B,AAAArC,4CAAAyc,WAAA,IAAA,pEAAOC;aAAP,AAAA1c,4CAAAyc,WAAA,IAAA,pEAAcE;AAAd,AAAA,0FACG,iBAAAC,WAAQZ;AAAR,AAAA,GACE,GAAK,AAAClV,uBAAO4V;AAAS,qDAAAE,9CAACnP,uDAAMrL,EAAEsa;;AADjCE;;KAEA,iBAAAC,WAAQN;AAAR,AAAA,GACE,GAAK,AAACzV,uBAAO6V;AAAS,qDAAAE,9CAACpP,uDAAMrL,EAAEua;;AADjCE;;;;AAZL,AAgBE,IAAAxC,yBAAY,AAAC6B,QAAQ9Z,EAAEC;AAAvB,AAAA,GAAA,CAAAgY,0BAAA;AAAA,0FAEG,AAAC5M,8CAAMuO,WAAO5Z,EAAEC,GAAGka;;AAFtB,QAAAlC,JAAUlY;AAAV,AAAA,0FACG6Z,WAAO,wDAAA,xDAACvO,8CAAM8O,QAAQna,kDAAGC,EAAEF;;;;;GAnBpC,mFAAA,mCAAA,2CAsBE6Z;;;AAGR;;;;iCAAA,jCAAMc,0EAGHd,OAAOO;AAHV,AAIE,IAAMQ,aAAW,AAAChL,oBACC,WAAKL,EAAEtP,EAAE4a;AAAT,AACE,OAACjL,oBACC,WAAKL,MAAErP,EAAEF;AAAT,AACE,6DAAA,tDAACsL,8CAAMiE,MAAEvP,qFAAGC,EAAEC;GAChBqP,EAAEsL;GALR,mCAMKT;AANtB,AAOE,GAAI,CAAA,OAAM,AAACjQ,gBAAMyQ;AACf,IAAAE,aAAmB,AAACrd,gBAAMmd;SAA1B,AAAA/c,4CAAAid,WAAA,IAAA,hEAAOI;IAAPH,aAAA,AAAAld,4CAAAid,WAAA,IAAA;SAAA,AAAAjd,4CAAAkd,WAAA,IAAA,hEAAWhX;SAAX,AAAAlG,4CAAAkd,WAAA,IAAA,hEAAcI;IAAdH,aACmB,AAACM,iBAAOV;SAD3B,AAAA/c,4CAAAmd,WAAA,IAAA,hEACOI;IADPH,aAAA,AAAApd,4CAAAmd,WAAA,IAAA;SAAA,AAAAnd,4CAAAod,WAAA,IAAA,hEACWjX;SADX,AAAAnG,4CAAAod,WAAA,IAAA,hEACcI;AADd,AAEE,MAAA,AAAAzU,gDAAA,CAAA,wBAAA,AAAAC,wGAAA,uGAAA,gBAAA,AAAAA,iHAAA,SAAA,AAAAA,wGAAA,uGAAA,gBAAA,AAAAA,2HAAA,2CAAA,uDAAA,uEAAA,gEAAA,oGAAA,6DAAA,l4BAAgC9C,GAAGoX,yIAAoBD,6MAAalX,GAAGqX,yIAAoBD,+UAE5EF,GAAGnX,GAAGoX,2JACNC,GAAGpX,GAAGqX;;AACvB,IAAAE,aAAwB,AAAC9d,gBAAMmd;gBAA/B,AAAA/c,4CAAA0d,WAAA,IAAA,vEAAOE;IAAPD,aAAA,AAAA3d,4CAAA0d,WAAA,IAAA;QAAA,AAAA1d,4CAAA2d,WAAA,IAAA,/DAAkBvb;QAAlB,AAAApC,4CAAA2d,WAAA,IAAA,/DAAoBtb;IACdwW,MAAI,AAAA,mFAAQmD;AADlB,AAEE,GAAM,gCAAA,0BAAA,xDACE,GAAA,cAAA,bAAO4B,4BACP,GAAA,QAAA,PAAO/E,sBACP,GAAK,AAACa,4BAAQb,YACd,AAAC3F,gDAAK0K,UAAU/E;AAJxB,AAKE,MAAA,AAAA9P,gDAAA,CAAA,uBAAA,AAAAC,wGAAA,qGAAA,gBAAA,AAAAA,wHAAA,mCAAA,AAAAA,4HAAA,2CAAA,uDAAA,uEAAA,gEAAA,yGAAA,6DAAA,2CAAA,nvBAA+B5G,EAAEC,wIAAmBub,2JAA6C/E,gVAElF+E,UAAUxb,EAAEC,uKACLwW;;AARxB;;AASA+E;;;AAGR,oCAAA,pCAAOC,gFAAqBvV,GAAGlG,EAAEga;AAAjC,AACE,GAEE,GAAK,EAAI,AAACf,iCAAajZ,QACd,AAACoW,8BAAUlQ,GAAGlG;AAHzB,0FAIGga;;AAJH,GAOE,GAAK,EAAI,AAACjd,oDAAcid,SACf,EAAK,AAACI,sBAAMJ,SAAI,GAAK,AAACpI,qBAAKoI;AARtC,0FASGA;;AATH,GAYE,EAAK,iEAAA,jEAACnY,6CAAE,AAACqI,gBAAM8P,cACV,oDAAA,pDAAC7D,6BAASjQ,GAAG,AAAC1I,gBAAMwc;AAb3B,0FAcGA;;AAdH,AAgBQA;;;;;;AAEV,wBAAA,xBAAO0B,wDAASxV,GAAG0T;AAAnB,AACE,IAAMnD,MAAK,AAAA,mFAAQmD;IAEb+B,YAAK,AAACnZ,8CAAMoZ,iBACL,AAACne,+CACC,eAAAoe,JAAKhe;AAAL,AAAA,IAAAie,aAAAD;QAAA,AAAAje,4CAAAke,WAAA,IAAA,/DAAU9b;SAAV,AAAApC,4CAAAke,WAAA,IAAA,hEAAY9B;AAAZ,AACE,sHAAA,/GAAC5S,+CAAOvJ,IAAI,oCAAA,IAAA,tCAAI,AAACyY,2BAAOpQ,GAAGlG,aAAQ9C,kGAAM8C,EAAEga;GAF/C,mFAAA,iCAAA,yCAGUJ;AANvB,AAOE,IAAAmC,qBAAA,8CAAAC;AAAA,AAAA,YAAAC,kBAAA,KAAA;AAAA,AAAA,IAAAD,eAAAA;;AAAA,AAAA,IAAA1L,qBAAA,AAAA/E,cAAAyQ;AAAA,AAAA,GAAA1L;AAAA,AAAA,IAAA4L,mBAAA5L;AAAA,AAAA,IAAA6L,aAAA,AAAA3e,gBAAA0e;QAAA,AAAAte,4CAAAue,WAAA,IAAA,/DAAOnc;SAAP,AAAApC,4CAAAue,WAAA,IAAA,hEAASnC;AAAT,AAAA,GACa,kDAAA,lDAAClJ,gDAAK9Q;AADnB,IAEcK,IAAW,8BAAA,gDAAA,9EAACwN,4BAAc7N,uGAAUyW,IAAKzW,EAAEga;IAC3CmD,iBAAW,AAAClE,iCAAajZ;IACzBod,aAAW,EAAID,gBAAS,AAAC/D,0BAAYpZ,GAAGA;IACxCK,QAAW,wEAAA,6rBAAA,nwBAAM,EAAK8c,oBAAS,GAAK,AAAC7I,yBAAKpO,GAAGkX,iBAChC,kBAAA,AAAAzW,gDAAA,CAAA,iBAAA,AAAAC,gHAAA,qFAAA,2CAAA,uDAAA,wEAAA,kEAAA,2DAAA,gDAAA,pbAAwB5G,uUACoBA,kKAAoByW,IAAKzW,EAAEga;AAPlG,AAAA,IAAAoC,uBAAA;mEAAAC;AAAA,AAAA,YAAAJ,kBAAA,KAAA;;AAAA,AAAA,IAAAI,eAAAA;;AAAA,AAAA,IAAA/L,yBAAA,AAAA/E,cAAA8Q;AAAA,AAAA,GAAA/L;AAAA,AAAA,IAAA+L,eAAA/L;AAAA,AAAA,GAAA,AAAAC,6BAAA8L;AAAA,IAAAC,kBA8uC+C,AAAA7L,sBAAA4L;IA9uC/CE,qBAAA,AAAArS,gBAAAoS;IAAAE,WAAA,AAAAC,uBAAAF;AAAA,AAAA,GAAA,AAAA,iBAAAG,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAH;AAAA,QAAA,AAAA1Q,eAAAyQ,gBAAAI,nCAQMzc;AARN,AAAA,AAAA,AAAA0c,uBAAAH,SASE,EAAI,EAAK,AAAClI,yBAAKpO,GAAGkX,iBAAY,AAACxL,qBAAK3R,MAClC,AAACoL,8CAAMpL,EAAE,AAACmZ,0BAAYpZ,GAAGyW,KACzB,kBAAA,mFAAA,8EAAA,mFAAA,pQAAI0G,wJACOld,EAAImd,WAAW3G,oJACfA,IAAI2G,WAAWnd;;AAb9B,eAAA,CAAAyc,WAAA;;;;AAAA;;;;;AAAA,OAAAE,qBAAA,AAAAC,gBAAAL,UAAA,AAAAM,kDAAA,AAAApM,qBAAA2L;;AAAA,OAAAO,qBAAA,AAAAC,gBAAAL,UAAA;;;AAAA,QAAA,AAAAhf,gBAAA6e,pBAQMpc;AARN,AAAA,OAAA8c,mgBAAA,AAAAD,kDAAA,AAAAE,eAAAX,rjBASE,EAAI,EAAK,AAAC/H,yBAAKpO,GAAGkX,iBAAY,AAACxL,qBAAK3R,MAClC,AAACoL,8CAAMpL,EAAE,AAACmZ,0BAAYpZ,GAAGyW,KACzB,kBAAA,mFAAA,8EAAA,mFAAA,pQAAI0G,wJACOld,EAAImd,WAAW3G,oJACfA,IAAI2G,WAAWnd;;;AAb9B;;;;;CAAA,KAAA;;;IAAAgd,mBAAA,AAAA1R,cAAA,AAAA6Q,qBAQa,AAACX,kCAAoBvV,GAAGlG,EAAEga;AARvC,AAAA,GAAAiD;AAAA,OAAA1T,+CAAA0T,iBAAA,AAAAC,oCAAA,AAAAF,eAAAhB;;AAAA,eAAA,AAAAgB,eAAAhB;;;;;AAAA,eAAA,AAAAgB,eAAAhB;;;;;AAAA;;;;GAAA,KAAA;;AAAA,AAAA,OAAAD,mBAAaJ;;AAejB,6BAAA,4CAAA0B,zEAAOE,kEAAcrG;AAArB,AAAA,IAAAoG,aAAAD;QAAA,AAAAzf,4CAAA0f,WAAA,IAAA,/DAA6Bjd;QAA7B,AAAAzC,4CAAA0f,WAAA,IAAA,/DAA+Bvd;QAA/B,AAAAnC,4CAAA0f,WAAA,IAAA,/DAAiCtd;QAAjC,AAAApC,4CAAA0f,WAAA,IAAA,/DAAmCrd;SAAnC,AAAArC,4CAAA0f,WAAA,IAAA,hEAAqCpd;UAArCod,NAA4CE;AAA5C,AACE,AAAC3P,4BAAc7N,EAAEwd;;AACjB,AAACxG,2BAAc/W,EAAEud;;AACjB,IAAMtd,SAAU,iBAAAgS,mBAAIhS;AAAJ,AAAA,oBAAAgS;AAAAA;;AAAO,OAAC+E,yBAAWC;;;IAC7BhR,KAAU,AAAA,2FAAWgR;IACrBnX,QAAU,AAACwU,2BAAarO,GAAGnG;IAC3BE,QAAU,EAAI,AAACqU,yBAAKpO,GAAGlG,IAAG,AAACuU,2BAAarO,GAAGjG,GAAGA;IAC9Cwd,YAAU,AAACpb,kDAAMtC,MAAEC,EAAEC,MAAEC;IACvBmN,kBAAU,AAAC+I,8BAAUlQ,GAAGlG;IACxB0d,YAAU,EAAWrQ,iBACF,yBAAA,zBAAC7H,sBAAQU,sFAAInG,MAAEC,EAAEC,eACjB,yBAAA,zBAACuF,sBAAQU,sFAAInG,MAAEC;AARxC,AASI,GACE,cAAA,bAAM0d;AACN,OAAC5E,8BAAgB5B,OAAOuG;;AAF1B,GAIE,AAAC5b,6CAAE,AAAK6b,YAAWzd;AACnB,6DAAA,tDAACmH,+CAAO8P,sGAAsBla,oBAAMygB;;AALtC,mEAQMvG,9BACF,AAAC4B,qCAAgB,6EAAA,7EAACzW,kDAAMtC,MAAEC,EAAE,AAAK0d,YAAWxd,hJAC5C,OAAC4Y,wJAAgB2E;;;;;AAE3B,uCAAA,vCAAOE,sFAAwBzG,OAAc9W;AAA7C,AACE,IAAMF,KAAG,AAAC+W,yBAAWC;AAArB,AACE,OAAC4B,8BAAgB5B,OAAO,iEAAA,jEAAC7U,kDAAM,AAAKjC,IAAG,AAAKA,IAAG,AAAKA,IAAGF;;AAE3D,mCAAA,nCAAO0d,8EAAoB1X,GAAGmM;AAA9B,AACE,oDAAA,7CAACzN,+EAAS,AAACiZ,6CACC,AAACtQ,+CAAO,WAAYnN;AAAZ,AAAe,OAACiW,+BAAWnQ,GAAG,AAAK9F;IAC3C,AAAC+S,4CAAI,WAAY/S;AAAZ,AAAA,0FAAA,iFAAqC,AAAKA;KAAOiS;;AAEpE,AAAA,AAEA,kCAAA,lCAAOyL,4EAAmBC,eAAe7G,OAAO8G,GAAGC,OAAOC;AAA1D,AACE,GAAI,AAACvT,0BAAU,AAAA,yFAAUoT,gBAAgBE;AACvC,MAAA,AAAAtX,gDAAA,CAAA,uBAAA,AAAAC,qHAAA,YAAA,YAAA,AAAAA,2HAAA,QAAA,AAAAA,oVAAA,2CAAA,uDAAA,9lBAA8BqX,6IACXC,mIAAqB,8DAAA,mFAAA,jJAAC/G,+CAAO4G,6JAAyBE;;AAIzE,IAAME,qEAAa,AAAA,yFAAUjH,vIACZ,AAAC7L,+IAAM4S,OAAOC;IACzBnF,sBAAS,6DAAA,7DAAC1N,8CAAM0S,0EAAwBI;AAF9C,AAGE,QAACC,+DAAAA,uFAAAA,1BAAiBrF,mEAAAA,/CAAQiF,mEAAAA;;;AAEhC,kCAAA,iFAAA,mEAAA,2DAAA,sFAAA,gFAAA,oEAAA,0FAAA,iEAAA,tnBAAKK;AAUL,6BAAA,7BAAMC,kEAAcpH;AAApB,AACE,IAAMhR,KAAY,AAAA,2FAAWgR;IACvBpP,SAAY,AAAChB,sBAAQZ;IACrBqY,cAAY,2BAAA,3BAACvX,wBAAUd;AAF7B,AAGE,OAACyJ,oBACC,WAAK6O,SAAS/H,IAAIgI;AAAlB,AACE,OAAC9O,oBACC,WAAK6O,aAASjG,MAAMhZ;AAApB,AACE,IAAMA,YAAQ,sDAAA,pDAAI,AAACmf,uBAAOC,qBAAKpf,aAAWA;IACpCqf,UAAQ,AAAA,2EAAI,AAACphB,gBAAM,yBAAA,qDAAA,9EAACkI,sBAAQQ,2IAAUuQ,IAAI8B;AADhD,AAEE,GACE,AAAC1W,6CAAEtC,UAAMqf;AAASJ;;AADpB,GAEE,cAAA,bAAMjf;AAAY,iEAAA,oBAAA,mFAAA,yFAAA,2CAAA,sFAAA,3XAAC0F,6CAAKuZ,mLAAkC/H,IAAI8B,MAAMqG;;AAFtE,AAGoB,iEAAA,oBAAA,mFAAA,iFAAA,2CAAA,sFAAA,nXAAC3Z,6CAAKuZ,yKAA8B/H,IAAI8B,MAAMhZ;;;;GACtEif,SACAC;GAXN,iCAaE,AAAA,8HAAiBvH;;AAEvB,oCAAA,pCAAM2H,gFAAqB3H;AAA3B,AACE,IAAM4H,cAAY,AAAA,6HAAiB5H;IAC7B6H,YAAY,WAAK3J,QAAQyB;AAAb,AACE,oBAAI,AAAC7X,0BAAY6X;AACf,OAACjM,+CAAOwK,QAAQ,AAAA,6EAAIyB;;AACpBzB;;;IAChB4J,SAAY,AAACvhB,+CAAOshB,UAAUD,YAAY,AAACvV,+CAAO,AAAA,wFAAU2N,QAAQ,AAAA,6HAAgBA;AAL1F,AAME,GAAI,AAACxS,uBAAOsa;AACV,oEAAA,iJAAA,9MAACpU,sDAAOsM;;AACR,MAAA,AAAAvQ,gDAAA,CAAA,8CAAA,AAAAC,6LAAA,2CAAA,uDAAA,wEAAA,/PAAqD,AAACqY,6CAAK,AAACC,eAAKF,8PAC5BA;;;AAE3C,iCAAA,jCAAMZ,0EAAkBL,eAAeoB;AAAvC,AACE,GAAU,EAAI,eAAA,dAAMA,yBACN,AAAClO,4BAAYkO;AAD3B;AAAA,AAEE,MAAA,AAAAxY,gDAAA,CAAA,wBAAA,AAAAC,yHAAA,6CAAA,2CAAA,uDAAA,wEAAA,xOAA+BuY,kSACWA;;;AAC5C,IAAMC,8BAAoBrB;IAEpBsB,oBAAgB,GAAK,AAAC3a,uBAAO,mIAAA,nIAACsC,wBAAU,AAAA,2FAAW+W;IACnDuB,0BAAgB,EAAID,mBACF,AAACE,mDAAWJ,WAAW,+CAAA,/CAACzG,+IACxByG;AALxB,AAME,IAAOjI,SAAOkI;IACPpB,KAAOsB;;AADd,AAEE,GACE,AAAC5a,uBAAOsZ;uIACJ9G,lCACF,AAAC2H,/CACD,yFAAA,2EAAA,pKAACzX,oJAAgBqI,oFAAqB,AAACwH,yBAAWC,vTAClD,gUAAA,8EAAA,vYAAC9P,sXAAiBuY,0EAAeC;;AALrC,IAAAJ,aAQ4BxB;IAR5ByB,aAAA,AAAAlU,cAAAiU;IAAAE,eAAA,AAAAliB,gBAAAiiB;IAAAA,iBAAA,AAAAva,eAAAua;aAAAC,TAQS9F;eART6F,XAQkBjB;AARlB,AAAA,GAUE,WAAA,VAAM5E;AACN,eAAO1C;eAAOsH;;;;;AAXhB,GAaE,6CAAA,7CAAC3c,2IAAiB+X;AAClB,GAAI,iCAAA,jCAACjP,0BAAUuM;AACb,eACE,sDAAA,tDAACtM,+CAAOsM;eACR,AAAC3N,+CAAO,AAAC+U,2BAAapH,QAAQsH;;;;;AAChC,eAAOtH;eAAOsH;;;;;;AAlBlB,IAoBQtY,KAAQ,AAAA,2FAAWgR;IACnB9B,UAAQ,AAAA,yFAAU8B;AArB1B,AAAA,GAuBE,AAACtF,qBAAKgI;AACN,IAAMiG,UAAQ,AAAA,mFAAQjG;AAAtB,AACE,GAQE,AAACvC,2BAAOwI;AACR,IAAME,KAAG,AAAC9I,yBAAWC;AAArB,AACE,eAAO,AAAC8I,yDAAa9I,OAAO2I,QAAQE;eAC7B,AAAChD,eAAK,qDAAA,rDAAC1R,8CAAMuO,4DAAcmG,IAAIvB;;;;;AAX1C,GAcE,AAACvN,4BAAY4O;AACb,IAAME,KAAG,AAACxL,2BAAarO,GAAG2Z;AAA1B,AACE,eAAO3I;eACA,AAAC6F,eAAK,qDAAA,rDAAC1R,8CAAMuO,4DAAcmG,IAAIvB;;;;;AAjB1C,IAAAsB,aAoB0B,AAACnG,8BAAgBzT,GAAG0T;0BApB9C,AAAAhc,4CAAAkiB,WAAA,IAAA,jFAoBSG;cApBT,AAAAriB,4CAAAkiB,WAAA,IAAA,rEAoBiB3F;IACT+D,eAAkB,AAACxD,+BAAiBuF,oBAAQ9F;AArBpD,AAAA,GAuBE,GAAA,iBAAA,hBAAO+D;AACP,GAAI,4CAAA,1CAAK,AAAC5G,4BAAQuI,gBACT,AAAClV,0BAAUyK,QAAQyK,cACnB,AAAC/O,gDAAKoN,aAAa,AAAC1V,4CAAI4M,QAAQyK;AACvC,OAAC/B,gCAAkBC,eAAe7G,OAAOiI,WAAWU,QAAQ3B;;AAC5D,uHACMhH,zDACF,AAAC8I,gEAAaH,QAAQ3B,vHACtB,qIAAA,rIAAC9W,oOAAsBpK,oBAAM,+DAAA,KAAA,pEAACqF,kDAAM6b,uBAAqB1hB,AAAA;eAC3D,AAAC+M,+CAAO,AAACmS,sBAAQxV,GAAG,kEAAA,lEAACmF,8CAAM4U,yEAAe/B,eAAeM;;;;;;AAhC/D,GAmCE,mCAAA,jCAAI,OAASqB,4BACT,YAAA,XAASA,sBACT,OAASA;AACb,IAAMK,UAAQ,gDAAA,9CACE,YAAA,XAAML,kBAAY,AAACzI,uBAASlR,MAC5B,AAACoR,4BAAQuI,UAAS,iBAAA3N,mBAAI,AAAC1J,4CAAI4M,QAAQyK;AAAjB,AAAA,oBAAA3N;AAAAA;;AAA0B,OAACkF,uBAASlR;;KAFxD,AAGoB2Z;;IAC5BM,aAAW,qDAAA,rDAAC9U,8CAAMuO,4DAAcsG;AAJtC,AAKE,eAAO,AAACF,yDAAa9I,OAAO2I,QAAQK;eAC7B,AAAC3W,+CAAO,AAACmS,sBAAQxV,GAAGia,YAAY3B;;;;;AA5C3C,AAgDE,MAAA,AAAA7X,gDAAA,CAAA,yDAAA,AAAAC,gIAAA,2CAAA,uDAAA,0EAAA,pMAAgEiZ,6PAC1BjG;;;;;;;AA1E5C,GA4EE,AAAC3I,4BAAY2I;AACb,IAAAwG,aAAiBxG;SAAjB,AAAAhc,4CAAAwiB,WAAA,IAAA,hEAAOC;QAAP,AAAAziB,4CAAAwiB,WAAA,IAAA,/DAAUrgB;QAAV,AAAAnC,4CAAAwiB,WAAA,IAAA,/DAAYpgB;QAAZ,AAAApC,4CAAAwiB,WAAA,IAAA,/DAAcngB;AAAd,AACE,GACE,gDAAA,hDAAC4B,6CAAEwe;AACH,IAAAC,aAAmB1G;IAAnB2G,aAAA,AAAAhV,cAAA+U;IAAAE,eAAA,AAAAhjB,gBAAA+iB;IAAAA,iBAAA,AAAArb,eAAAqb;QAAAC,JAAOngB;IAAPmgB,mBAAA,AAAAhjB,gBAAA+iB;IAAAA,iBAAA,AAAArb,eAAAqb;QAAAC,JAASnjB;WAATkjB,PAAaE;AAAb,AACE,eAAOvJ;eAAO,AAAC3N,+CAAO,AAAC/G,8CAAMnF,EAAE6I,GAAGua,MAAMjC;;;;;AAH5C,GAKE,EAAK,eAAApc,dAAUie,sCACb,AAACK,cAAI,CAACrC,gEAAAA,oEAAAA,NAAYgC,gDAAAA;AACpB,IAAApI,qBAAgB,AAACzB,oBAAMtQ,GAAGma;AAA1B,AAAA,GAAA,CAAApI,sBAAA;AAOE,MAAA,AAAAtR,gDAAA,CAAA,6CAAA,AAAAC,2HAAA,2CAAA,uDAAA,wEAAA,gEAAA,8DAAA,3TAA+CyZ,qXACmBzG;;AARpE,YAAA3B,RAAU0I;AAAV,AACE,IAAMC,MAAK,AAAA,2EAAI,yBAAA,yFAAA,lHAACpb,sBAAQU,sFAAIya;IACtBF,OAAK,AAACvb,eAAK0U;AADjB,AAEE,GAAI,AAACiH,oBAAID;AACP,eAAO1J;eAAO,AAAC3N,+CAAO,AAAC/G,8CAAMoe,IAAI1a,GAAGua,MAAMjC;;;;;AAC1C,MAAA,AAAA7X,gDAAA,CAAA,UAAA,AAAAC,iHAAA,8DAAA,2CAAA,uDAAA,wEAAA,gEAAA,8DAAA,/WAAiByZ,yaACiDzG;;;;AAb1E,GAiBE,EAAK,AAACtC,4BAAQvX,QACZ,mDAAA,nDAAC+Q,gDAAKuP;AACR,MAAA,AAAA1Z,gDAAA,CAAA,wBAAA,AAAAC,qHAAA,mDAAA,2CAAA,uDAAA,wEAAA,1OAA+BgT,4RACEA;;AApBnC,GAsBE,EAAI,gDAAA,hDAAC/X,6CAAEwe,qEACL,gDAAA,hDAACxe,6CAAEwe;AACL,IAAAS,aAAoBlH;QAApB,AAAAhc,4CAAAkjB,WAAA,IAAA,/DAAOzgB;YAAP,AAAAzC,4CAAAkjB,WAAA,IAAA,nEAAS/gB;YAAT,AAAAnC,4CAAAkjB,WAAA,IAAA,nEAAW9gB;SAAX,AAAApC,4CAAAkjB,WAAA,IAAA,hEAAaC;SAAb,AAAAnjB,4CAAAkjB,WAAA,IAAA,hEAAgBE;IACVjhB,QAAE,AAACwU,2BAAarO,GAAGnG;IACnBM,QAAE,AAACwN,4BAAc7N,MAAE4Z;IACnBmH,SAAG,EAAI,AAACzM,yBAAKpO,GAAGlG,QAAG,AAACuU,2BAAarO,GAAG6a,IAAIA;IACxCC,SAAG,EAAI,AAAC1M,yBAAKpO,GAAGlG,QAAG,AAACuU,2BAAarO,GAAG8a,IAAIA;IACxC3gB,QAAE,AAAC2W,2BAAagK,OAAGpH;IACnBvH,SAAO,AAACoG,cAAI,yBAAA,zBAACrT,sBAAQc,sFAAInG,MAAEC;AANjC,AAOE,GAAI,AAACoW,8BAAUlQ,GAAGlG;AAChB,oBAAI,AAACihB,eAAK;kBAAY7gB;AAAZ,AAAe,OAACyB,6CAAE,AAAKzB,IAAG2gB;;CAAK1O;AACvC,eAAO,kCAAA,mFAAA,rHAACkL,2BAAarG,+IAAgBnX,MAAEC,MAAEghB;eAAKxC;;;;;AAC9C,MAAA,AAAA7X,gDAAA,CAAA,+BAAA,AAAAC,oHAAA,IAAA,AAAAA,oHAAA,IAAA,AAAAA,+MAAA,eAAA,AAAAA,+HAAA,2CAAA,uDAAA,iEAAA,2DAAA,oEAAA,vwBAAsC7G,wHAAMC,wHAAM,4CAAA,5CAACmT,yFAAOd,qIAAuB0O,8OAC9C1O,oEAAkB0O,2DAASC;;;AAChE,IAAM/gB,QAAE,AAAA,2EAAI,AAACzC,gBAAM6U;AAAnB,AACE,GAAI,AAACxQ,6CAAE5B,MAAE8gB;AACP,eAAO,kCAAA,mFAAA,rHAACxD,2BAAarG,+IAAgBnX,MAAEC,MAAEghB;eAAKxC;;;;;AAC9C,MAAA,AAAA7X,gDAAA,CAAA,+BAAA,AAAAC,oHAAA,IAAA,AAAAA,oHAAA,IAAA,AAAAA,oHAAA,eAAA,AAAAA,+HAAA,2CAAA,uDAAA,iEAAA,4EAAA,oEAAA,7rBAAsC7G,wHAAMC,wHAAMC,mIAAiB8gB,8OAChC,AAACvjB,gBAAM6U,qEAAmB0O,2DAASC;;;;AAxChF,GA0CE,AAAC3J,2BAAOtX;AACR,eAAO,AAACigB,yDAAa9I,OAAOnX,EAAE,AAACkX,yBAAWC;eAAS,eAAA,fAAC6F,kGAAMsD,GAAG,AAACpJ,yBAAWC,QAAQlX,EAAEC,UAAGue;;;;;AA3CxF,GA6CE,EAAK,AAAClK,yBAAKpO,GAAGlG,QAAG,AAACqX,2BAAOpX;AACzB,eAAO,AAAC+f,yDAAa9I,OAAOjX,EAAE,AAACgX,yBAAWC;eAAS,eAAA,fAAC6F,kGAAMsD,GAAGtgB,EAAEC,EAAE,AAACiX,yBAAWC,gBAASsH;;;;;AA9CxF,GAgDE,EAAK,AAAClK,yBAAKpO,GAAGlG,QAAG,AAACsX,4BAAQrX;AAC1B,IAAAgY,qBAAmB,AAACzP,4CAAI4M,QAAQnV;AAAhC,AAAA,GAAA,CAAAgY,sBAAA;AAGE,IAAMiJ,WAAS,AAAC9J,uBAASlR;IACnB6S,8HAAa7B,zDACF,AAAC8I,gEAAa/f,EAAEihB,jHAChB,2HAAA,3HAAC9Z,0NAAuBqI,gBAAMyR,SAASjhB;AAHxD,AAIE,eAAO8Y;eAAQiF;;;;;AAPnB,eAAA/F,XAAUiJ;AAAV,AACE,IAAMnI,sBAAQ,sDAAA,tDAAC3R,+CAAO8P,sGAAuBzH,gBAAMyR,SAASjhB;AAA5D,AACE,eAAO8Y;eAAQ,eAAA,fAACgE,kGAAMsD,GAAGtgB,EAAEC,EAAEkhB,iBAAU1C;;;;;;AAnD7C,GA0DE,AAAClH,4BAAQvX;AACT,IAAMme,eAAc,oHAAA,6QAAA,/XAAM,kCAAA,lCAAC/H,6BAASjQ,GAAGlG,kFACjB,AAAA,6EAAI,AAACxC,gBAAM,yBAAA,qDAAA,9EAACkI,sBAAQQ,2IAAUlG,EAAEC;IAChDkhB,gBAAc,AAAC3Y,4CAAI4M,QAAQrV;AAFjC,AAGE,oBAAI,iBAAAS,oBAAK0d;AAAL,AAAA,oBAAA1d;AAAA,IAAAA,wBAAkB2gB;AAAlB,AAAA,oBAAA3gB;AAAgC,OAACsQ,gDAAKoN,aAAaiD;;AAAnD3gB;;;AAAAA;;;AACF,OAACsd,gCAAkBC,eAAe7G,OAAOiI,WAAWpf,EAAEme;;AACtD,IAAMzH,MAAI,iBAAAvE,mBAAIgM;AAAJ,AAAA,oBAAAhM;AAAAA;;AAAA,IAAAA,uBAAiBiP;AAAjB,AAAA,oBAAAjP;AAAAA;;AAA+B,OAACkF,uBAASlR;;;;AAAnD,AACE,eAAO,AAAC8Z,yDAAa9I,OAAOnX,EAAE0W;eAAK,eAAA,fAACsG,kGAAMsD,GAAG5J,IAAIzW,EAAEC,UAAGue;;;;;;AAjE9D,GAmEE,EAAK,AAACkC,cAAI,AAAA,oHAAY,AAAC3T,eAAK6M,eAC1B,AAACtD,2BAAOpQ,GAAGlG;AAEb,IAAMohB,cAAY,kDAAA,mFAAA,4DAAA,jMAACjK,+CAAOjR,gJAAYlG;AAAtC,AACE,GAAI,qGAAA,nGACE,AAAC6B,6CAAE,AAACqI,gBAAMkX,aAAa,AAAClX,gBAAMjK,WAC9B,AAACye,uBAAO2C,sBAAMphB,QACd,AAACye,uBACC;kBAAA4C;AAAA,AAAA,IAAAC,aAAAD;iBAAA,AAAA1jB,4CAAA2jB,WAAA,IAAA,xEAAMhS;kBAAN,AAAA3R,4CAAA2jB,WAAA,IAAA,zEAAiB/I;AAAjB,AACE,IAAMgJ,WAAS,AAAA,2EAAI,AAAChkB,gBAAM,yBAAA,qDAAA,9EAACkI,sBAAQQ,2IAAUnG,EAAEwP;AAA/C,AACE,OAAC1N,6CAAE2W,YAAYgJ;;CACnB,AAACrO,4CAAIsO,iBAAOL,YAAYnhB;AAC9B,eAAOiX;eAAOsH;;;;;AACd,MAAA,AAAA7X,gDAAA,CAAA,2CAAA,AAAAC,+HAAA,2CAAA,uDAAA,wEAAA,jMAA6CgT,2PACRA;;;AAjF3C,GAmFE,gDAAA,hDAAC/X,6CAAEwe;AACH,eAAO,AAAC9C,2BAAarG,OAAO0C;eAAQ4E;;;;;AApFtC,GAsFE,EAAK,gDAAA,hDAAC3c,6CAAEwe,wEAAgB,GAAA,MAAA,LAAOpgB;AAC/B,IAAAgY,qBAAY,AAACzB,oBAAMtQ,GAAGnG;AAAtB,AAAA,GAAA,CAAAkY,sBAAA;AAOE,eAAOf;eAAOsH;;;;;AAPhB,YAAAvG,RAAUlY;AAAV,AACE,IAAME,QAAE,EAAI,AAACqU,yBAAKpO,GAAGlG,IAAG,AAACuU,2BAAarO,GAAGjG,GAAGA;AAA5C,AACE,AAAC4N,4BAAc7N,EAAE4Z;;AACjB,AAAC5C,2BAAa/W,MAAE2Z;;AAChB,IAAA3B,yBAAoB,yBAAA,zBAACzS,sBAAQU,sFAAInG,MAAEC,EAAEC;AAArC,AAAA,GAAA,CAAAgY,0BAAA;AAEE,eAAOf;eAAOsH;;;;;AAFhB,gBAAAvG,ZAAUyF;AAAV,AACE,eAAO,AAACC,qCAAuBzG,OAAOwG;eAAWc;;;;;;;AA5FzD,GAgGE,EAAI,gDAAA,hDAAC3c,6CAAEwe,8FACH,gDAAA,hDAACxe,6CAAEwe;AACP,IAAApI,qBAAY,AAACzB,oBAAMtQ,GAAGnG;AAAtB,AAAA,GAAA,CAAAkY,sBAAA;AAKE,eAAOf;eAAOsH;;;;;AALhB,YAAAvG,RAAUlY;AAAV,AACE,IAAMM,IAAO,AAACwN,4BAAc7N,EAAE4Z;IACxBvH,SAAO,AAACoG,cAAI,yBAAA,zBAACrT,sBAAQc,sFAAInG,MAAEC;AADjC,AAEE,eAAO,AAACvC,+CAAOkgB,qCAAuBzG,OAAO7E;eACtC,AAAC9I,+CAAO,AAACqU,iCAAmB1X,GAAGmM,QAAQmM;;;;;;AAtGpD,GAyGE,EAAI,gDAAA,hDAAC3c,6CAAEwe,0FACH,gDAAA,hDAACxe,6CAAEwe;AACP,IAAApI,qBAAY,AAACzB,oBAAMtQ,GAAGnG;AAAtB,AAAA,GAAA,CAAAkY,sBAAA;AAKE,eAAOf;eAAOsH;;;;;AALhB,YAAAvG,RAAUlY;AAAV,AACE,IAAM2hB,WAAS,AAACjJ,cAAI,yBAAA,zBAACrT,sBAAQc,sFAAInG;IAC3B4hB,WAAS,AAAClJ,cAAI,AAACmJ,sDAAO;kBAAK5hB;AAAL,AAAQ,gCAAA,mFAAA,5GAACoF,sBAAQc,2FAAQlG,MAAED;;mDAAK,2BAAA,3BAACiH,wBAAUd;AADvE,AAEE,eAAO,AAACzI,+CAAOkgB,qCAAuBzG,OAAO,AAAC3N,+CAAOmY,SAASC;eACvD,AAACpY,+CAAO,AAACqU,iCAAmB1X,GAAGwb,UAAUlD;;;;;;AA/GtD,AAmHC,MAAA,AAAA7X,gDAAA,CAAA,wBAAA,AAAAC,qHAAA,yRAAA,2CAAA,uDAAA,wEAAA,mEAAA,nhBAA+BgT,ghBAA2TyG,6DAAazG;;;;;;;;;;;;;;;;AAjM5W,GAmMC,AAACjY,2BAAOiY;AACR,IAAAiI,aAAuBjI;QAAvB,AAAAhc,4CAAAikB,WAAA,IAAA,/DAAO9hB;QAAP,AAAAnC,4CAAAikB,WAAA,IAAA,/DAAS7hB;QAAT,AAAApC,4CAAAikB,WAAA,IAAA,/DAAW5hB;SAAX,AAAArC,4CAAAikB,WAAA,IAAA,hEAAa3hB;YAAb,AAAAtC,4CAAAikB,WAAA,IAAA,nEAAgBngB;AAAhB,AACE,oBAAIA;AACF,eAAO,kCAAA,mFAAA,rHAAC6b,2BAAarG,+IAAgBnX,EAAEC,EAAEC,EAAEC;eAAKse;;;;;AAChD,eAAOtH;eAAO,eAAA,mFAAA,lGAAC6F,iKAAkBhd,EAAEC,EAAEC,UAAGue;;;;;;AAvM7C,AA0MC,MAAA,AAAA7X,gDAAA,CAAA,sBAAA,AAAAC,qHAAA,qCAAA,2CAAA,uDAAA,wEAAA,5NAA6BgT,sRACaA","names",["datascript.db/Exception","js/Error","datascript.db/IllegalArgumentException","datascript.db/UnsupportedOperationException","datascript.db/e0","datascript.db/tx0","datascript.db/emax","datascript.db/txmax","datascript.db/implicit-schema","datascript.db/seqable?","x","cljs.core/seqable?","me.tonsky.persistent-sorted-set.arrays/array?","datascript.db/conjv","cljs.core.fnil","cljs.core/conj","datascript.db/conjs","datascript.db/reduce-indexed","f","init","xs","cljs.core/first","cljs.core.reduce","p__38676","vec__38677","cljs.core.nth","acc","idx","res","cljs.core/reduced?","cljs.core/reduced","datascript.db/cljs-env?","env","cljs.core/boolean","datascript.db/combine-hashes","y","cljs.core/hash-combine","datascript$db$IDatom$datom_tx$dyn","x__4550__auto__","m__4551__auto__","datascript.db/datom-tx","goog/typeOf","m__4549__auto__","cljs.core/missing-protocol","datascript$db$IDatom$datom_added$dyn","datascript.db/datom-added","datascript$db$IDatom$datom_get_idx$dyn","datascript.db/datom-get-idx","datascript$db$IDatom$datom_set_idx$dyn","datascript.db/datom-set-idx","datascript.db/IDatom","this","value","cljs.core/PROTOCOL_SENTINEL","this__4491__auto__","writer__4492__auto__","opt__4493__auto__","cljs.core/-write","datascript.db/Datom","datascript.db/->Datom","e","a","v","tx","_hash","d","_","datascript.db/hash-datom","o","and__4251__auto__","datascript.db/equiv-datom","datascript.db/seq-datom","k","datascript.db/val-at-datom","nf","i","datascript.db/nth-datom","not-found","datascript.db/assoc-datom","writer","opts","cljs.core/pr-sequential-writer","cljs.core/pr-writer","goog/exportSymbol","var_args","G__38681","datascript.db/datom","added","datascript.db/datom?","cljs.core/hash","cljs.core._EQ_","cljs.core/List","G__38682","G__38684","G__38685","G__38686","G__38687","cljs.core/Keyword","datascript.db.datom","datascript.db/datom-from-reader","vec","cljs.core.apply","datascript.db/cmp","cljs.core/compare","datascript.db/class-identical?","cljs.core/type","datascript.db/class-compare","datascript.db.goog$module$goog$array.defaultCompare","cljs.core/type->str","datascript.db/value-compare","e38689","cljs.core/native-satisfies?","cljs.core/IComparable","cljs.core/-compare","cljs.core/array?","datascript.db/value-cmp","datascript.db/cmp-datoms-eavt","d1","d2","c__38034__auto__","datascript.db/cmp-datoms-aevt","datascript.db/cmp-datoms-avet","datascript.db/cmp-attr-quick","a1","a2","datascript.db/cmp-datoms-eav-quick","datascript.db/cmp-datoms-eavt-quick","datascript.db/cmp-datoms-aevt-quick","datascript.db/cmp-datoms-avet-quick","datascript.db/diff-sorted","b","cmp","only-a","only-b","both","cljs.core/empty?","cljs.core/not-empty","cljs.core.into","first-a","first-b","diff","e38692","cljs.core.conj","cljs.core/next","datascript$db$ISearch$_search$dyn","datascript.db/-search","datascript.db/ISearch","data","pattern","datascript.db/fsearch","datascript$db$IIndexAccess$_datoms$dyn","datascript.db/-datoms","datascript$db$IIndexAccess$_seek_datoms$dyn","datascript.db/-seek-datoms","datascript$db$IIndexAccess$_rseek_datoms$dyn","datascript.db/-rseek-datoms","datascript$db$IIndexAccess$_index_range$dyn","datascript.db/-index-range","datascript.db/IIndexAccess","db","index","components","attr","start","end","datascript.db/validate-indexed","temp__5757__auto__","datascript.db/indexing?","cljs.core.ex_info","cljs.core.pr_str","datascript$db$IDB$_schema$dyn","datascript.db/-schema","datascript$db$IDB$_attrs_by$dyn","datascript.db/-attrs-by","datascript.db/IDB","property","datascript.db/db-transient","cljs.core.update","cljs.core/transient","datascript.db/db-persistent!","cljs.core/persistent!","this__4502__auto__","k__4503__auto__","this__4504__auto__","k38695","else__4505__auto__","G__38699","schema","eavt","aevt","avet","max-eid","max-tx","rschema","pull-patterns","pull-attrs","hash","cljs.core.get","__extmap","this__4522__auto__","f__4523__auto__","init__4524__auto__","ret__4525__auto__","p__38700","vec__38701","k__4526__auto__","v__4527__auto__","this__4517__auto__","writer__4518__auto__","opts__4519__auto__","pr-pair__4520__auto__","keyval__4521__auto__","cljs.core.concat","cljs.core/PersistentVector","G__38694","cljs.core/RecordIter","cljs.core/-iterator","cljs.core/nil-iter","this__4500__auto__","__meta","this__4497__auto__","__hash","this__4506__auto__","cljs.core/count","this__4498__auto__","h__4360__auto__","coll__4499__auto__","cljs.core/hash-unordered-coll","this38696","other38697","this__4512__auto__","k__4513__auto__","cljs.core/contains?","cljs.core.dissoc","cljs.core/-with-meta","this__4509__auto__","G__38704","this__4510__auto__","k__4511__auto__","pred__38705","cljs.core/keyword-identical?","expr__38706","cljs.core.assoc","this__4515__auto__","cljs.core/seq","cljs.core/MapEntry","this__4501__auto__","this__4507__auto__","entry__4508__auto__","cljs.core/vector?","cljs.core/-nth","cljs.core/-conj","datascript.db/DB","this__4546__auto__","writer__4547__auto__","G__38698","extmap__4542__auto__","G__38708","cljs.core/record?","datascript.db/->DB","datascript.db/map->DB","datascript.db/hash-db","other","datascript.db/equiv-db","cljs.core/-rseq","cljs.core/with-meta","G__38709","datascript.db/empty-db","cljs.core/meta","w","datascript.db/pr-db","key","fexpr__38712","vec__38713","multival?","me.tonsky.persistent_sorted_set.slice","cljs.core.filter","cs","datascript.db/components->pattern","me.tonsky.persistent_sorted_set.rslice","G__38710","G__38711","datascript.db/validate-attr","datascript.db/resolve-datom","datascript.db/db?","k38723","G__38727","unfiltered-db","pred","p__38728","vec__38729","G__38722","this38724","other38725","G__38732","pred__38733","expr__38734","datascript.db/FilteredDB","G__38726","G__38736","datascript.db/->FilteredDB","datascript.db/map->FilteredDB","datascript.db/hash-fdb","datascript.db/unfiltered-db","datascript.db/attr->properties","G__38737","datascript.db/attr-tuples","m","tuple-attr","src-attr","cljs.core/assoc","datascript.db/rschema","cljs.core/reduce-kv","attr-schema","prop","datascript.db/validate-schema-key","expected","datascript.db/validate-schema","seq__38738","chunk__38739","count__38740","i__38741","vec__38760","temp__5753__auto__","cljs.core/chunked-seq?","c__4679__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","vec__38769","kv","comp?","cljs.core.not_EQ_","ex-data","attrs","cljs.core/sequential?","seq__38763","chunk__38765","count__38766","i__38767","seq__38772","chunk__38774","count__38775","i__38776","G__38779","datascript.db.empty_db","cljs.core/map?","cljs.core.merge","me.tonsky.persistent_sorted_set.sorted_set_by","datascript.lru/cache","cljs.core.atom","datascript.db/init-max-eid","or__4253__auto__","G__38781","datascript.db/init-db","datoms","datascript.db.init_db","not-datom","cljs.core.drop_while","indexed","arr","G__38782","me.tonsky.persistent-sorted-set.arrays/into-array","me.tonsky.persistent-sorted-set.arrays/asort","me.tonsky.persistent-sorted-set/from-sorted-array","avet-datoms","avet-arr","cljs.core/to-array","cljs.core.transduce","cljs.core.map","cljs.core/max","datascript.db/equiv-db-index","ys","cljs.core/deref","h","cljs.core/reset!","p__38783","map__38784","cljs.core/--destructure-map","datascript.db/db-from-reader","p__38785","vec__38786","t","default-e","default-tx","G__38789","G__38790","datascript.db/entid-some","datascript.db/ref?","datascript.db/entid-strict","p__38791","vec__38792","c0","c1","c2","c3","G__38795","k38797","G__38801","db-before","db-after","tx-data","tempids","tx-meta","p__38802","vec__38803","G__38796","this38798","other38799","G__38806","pred__38807","expr__38808","datascript.db/TxReport","G__38800","G__38810","datascript.db/->TxReport","datascript.db/map->TxReport","datascript.db/is-attr?","datascript.db/multival?","datascript.db/component?","datascript.db/tuple?","datascript.db/tuple-source?","datascript.db/entid","eid","vec__38811","cljs.core.array_seq","datascript.db/validate-datom","datom","found","at","datascript.db/validate-val","datascript.db/current-tx","report","cljs.core.get_in","datascript.db/next-eid","datascript.db/tx-id?","datascript.db/tempid?","datascript.db/new-eid?","datascript.db/advance-max-eid","G__38814","G__38816","datascript.db/allocate-eid","G__38817","datascript.db/with-datom","indexing?","G__38818","me.tonsky.persistent-sorted-set/conj","temp__5755__auto__","removing","G__38819","me.tonsky.persistent-sorted-set/disj","datascript.db/queue-tuple","queue","tuple","tuple-value","cljs.core/vec","cljs.core.repeat","tuple-value'","datascript.db/queue-tuples","tuples","datascript.db/transact-report","report'","queue'","datascript.db/reverse-ref?","cljs.core/name","cljs.core/re-matches","datascript.db/reverse-ref","cljs.core.keyword","cljs.core/namespace","cljs.core.subs","vec__38820","ns","name","datascript.db/resolve-upserts","entity","idents","resolve","split","vs","p__38823","vec__38824","upserts","cljs.core/coll?","vec__38827","insert","upsert","G__38830","G__38831","datascript.db/validate-upserts","upsert-ids","v->e","vec__38832","vec__38835","vec__38838","vec__38841","e1","v1","e2","v2","cljs.core/second","vec__38844","vec__38847","upsert-id","datascript.db/maybe-wrap-multival","datascript.db/explode","a+vs","cljs.core/concat","p__38850","vec__38851","iter__4652__auto__","s__38855","cljs.core/LazySeq","xs__6308__auto__","vec__38860","iterys__4648__auto__","s__38857","c__4650__auto__","size__4651__auto__","b__38859","cljs.core/chunk-buffer","i__38858","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__38856","cljs.core/cons","cljs.core/rest","fs__4649__auto__","iter__38854","reverse?","straight-a","p__38863","vec__38864","datascript.db/transact-add","ent","new-datom","old-datom","datascript.db/transact-retract-datom","datascript.db/retract-components","cljs.core.comp","datascript.db/retry-with-tempid","initial-report","es","tempid","upserted-eid","tempids'","datascript.db/transact-tx-data","datascript.db/builtin-fn?","datascript.db/flush-tuples","attr-tuples","entities","tuples+values","cljs.core/every?","cljs.core/nil?","current","datascript.db/check-value-tempids","all-tempids","reduce-fn","unused","cljs.core.sort","cljs.core/vals","initial-es","initial-report'","has-tuples?","initial-es'","cljs.core.interleave","vec__38889","seq__38890","first__38891","cljs.core/update","cljs.core/inc","old-eid","vec__38892","id","datascript.db.allocate_eid","entity'","new-eid","new-entity","vec__38895","op","vec__38898","seq__38899","first__38900","args","cljs.core/not","ident","fun","cljs.core/fn?","vec__38901","ov","nv","cljs.core/some","resolved","allocated-eid","tuple-attrs","cljs.core/some?","p__38904","vec__38905","db-value","cljs.core/vector","e-datoms","v-datoms","cljs.core.mapcat","vec__38908"]],"~:used-vars",["^L",["~$cljs.core/array?","~$cljs.core/to-array","~$cljs.core/mapcat","~$cljs.core/--destructure-map","~$datascript.db/allocate-eid","~$cljs.core/some?","~$cljs.core/PROTOCOL_SENTINEL","~$datascript.db/IllegalArgumentException","~$cljs.core/comp","~$cljs.core/rest","~$cljs.core/keyword","~$datascript.db/check-value-tempids","~$cljs.core/sequential?","~$datascript.db/nth-datom","~$datascript.db/resolve-datom","~$datascript.db/attr-tuples","~$datascript.db/current-tx","~$datascript.db/pr-db","~$datascript.db/Exception","~$datascript.db/empty-db","~$cljs.core/pr-sequential-writer","~$datascript.db/component?","~$me.tonsky.persistent-sorted-set/disj","~$cljs.core/vector?","~$datascript.db/assoc-datom","~$cljs.core/filter","~$cljs.core/=","~$datascript.db/txmax","~$datascript.db/map->TxReport","~$datascript.db/db?","~$datascript.db/-schema","~$cljs.core/-assoc","~$cljs.core/re-matches","~$cljs.core/-write","~$datascript.db/retract-components","~$datascript.db/-search","~$datascript.db/IDatom","~$cljs.core/drop-while","~$datascript.db/equiv-db-index","~$cljs.core/pr-writer","~$cljs.core/-iterator","~$cljs.core/hash","~$datascript.db/combine-hashes","~$datascript.db/tx0","~$cljs.core/count","~$datascript.db/value-compare","~$cljs.core/deref","~$goog/typeOf","~$datascript.db/cmp","~$cljs.core/transduce","~$cljs.core/reduce","~$cljs.core/seq","~$cljs.core/chunk-first","~$cljs.core/apply","~$datascript.db/maybe-wrap-multival","~$datascript.lru/cache","~$cljs.core/Keyword","~$datascript.db/->TxReport","~$datascript.db/map->DB","~$cljs.core/-rseq","~$me.tonsky.persistent-sorted-set/conj","~$datascript.db/datom-set-idx","~$me.tonsky.persistent-sorted-set/rslice","~$datascript.db/ref?","~$cljs.core/chunk","~$datascript.db/cmp-datoms-aevt","~$cljs.core/not=","~$datascript.db/explode","~$cljs.core/MapEntry","~$cljs.core/dissoc","~$datascript.db/unfiltered-db","~$datascript.db/cmp-datoms-avet-quick","~$datascript.db/implicit-schema","~$cljs.core/keyword-identical?","~$cljs.core/LazySeq","~$cljs.core/chunk-rest","~$cljs.core/atom","~$cljs.core/-with-meta","~$datascript.db/conjs","~$datascript.db/tuple-source?","~$datascript.db/queue-tuples","~$datascript.db/IDB","~$cljs.core/concat","~$datascript.db/db-transient","~$cljs.core/pr-str","~$datascript.db/validate-schema","~$datascript.db/new-eid?","~$datascript.db/builtin-fn?","~$goog/exportSymbol","~$datascript.db/equiv-db","~$datascript.db/reverse-ref?","~$me.tonsky.persistent-sorted-set.arrays/asort","~$datascript.db/->FilteredDB","~$cljs.core/native-satisfies?","~$datascript.db/class-identical?","~$datascript.db/init-db","~$cljs.core/empty?","~$cljs.core/fnil","~$cljs.core/contains?","~$cljs.core/into","~$cljs.core/map?","~$cljs.core/reset!","~$cljs.core/array-seq","~$datascript.db/datom?","~$datascript.db.goog$module$goog$array.defaultCompare","~$cljs.core/conj","~$datascript.db/attr->properties","~$datascript.db/tempid?","~$datascript.db/queue-tuple","~$cljs.core/sort","~$cljs.core/-compare","~$datascript.db/components->pattern","~$cljs.core/-conj","~$cljs.core/update","~$me.tonsky.persistent-sorted-set/from-sorted-array","~$datascript.db/validate-datom","~$datascript.db/datom-from-reader","~$cljs.core/with-meta","~$cljs.core/namespace","~$cljs.core/map","~$datascript.db/equiv-datom","~$cljs.core/fn?","~$datascript.db/multival?","~$cljs.core/PersistentVector","~$datascript.db/FilteredDB","~$datascript.db/validate-attr","~$datascript.db/e0","~$cljs.core/get-in","~$cljs.core/List","~$datascript.db/transact-report","~$datascript.db/cmp-datoms-eav-quick","~$cljs.core/vals","~$datascript.db/val-at-datom","~$datascript.db/conjv","~$datascript.db/datom-tx","~$cljs.core/get","~$me.tonsky.persistent-sorted-set.arrays/array?","~$datascript.db/reverse-ref","~$datascript.db/Datom","~$datascript.db/entid-strict","~$cljs.core/chunk-append","~$cljs.core/-nth","~$datascript.db/-attrs-by","~$datascript.db/-datoms","~$cljs.core/not-empty","~$datascript.db/advance-max-eid","~$datascript.db/->Datom","~$datascript.db/next-eid","~$datascript.db/cmp-datoms-eavt-quick","~$datascript.db/map->FilteredDB","~$datascript.db/transact-retract-datom","~$datascript.db/ISearch","~$cljs.core/record?","~$me.tonsky.persistent-sorted-set.arrays/into-array","~$cljs.core/missing-protocol","~$datascript.db/datom","~$datascript.db/entid","~$datascript.db/cmp-datoms-avet","~$cljs.core/persistent!","~$datascript.db/flush-tuples","~$cljs.core/-lookup","~$cljs.core/reduced","~$datascript.db/-index-range","~$cljs.core/reduced?","~$datascript.db/validate-upserts","~$cljs.core/nil?","~$datascript.db/value-cmp","~$cljs.core/nth","~$cljs.core/ex-info","~$cljs.core/meta","~$datascript.db/IIndexAccess","~$datascript.db/seqable?","~$cljs.core/max","~$datascript.db/hash-db","~$datascript.db/seq-datom","~$cljs.core/second","~$cljs.core/hash-combine","~$datascript.db/db-from-reader","~$cljs.core/nil-iter","~$datascript.db/tx-id?","~$datascript.db/db-persistent!","~$me.tonsky.persistent-sorted-set/sorted-set-by","~$cljs.core/interleave","~$cljs.core/next","~$cljs.core/vec","~$datascript.db/diff-sorted","~$cljs.core/RecordIter","~$cljs.core/transient","~$datascript.db/init-max-eid","~$datascript.db/hash-datom","~$cljs.core/chunk-cons","~$cljs.core/not","~$cljs.core/compare","~$datascript.db/is-attr?","~$datascript.db/retry-with-tempid","~$datascript.db/validate-schema-key","~$datascript.db/validate-val","~$datascript.db/hash-fdb","~$cljs.core/cons","~$datascript.db/reduce-indexed","~$me.tonsky.persistent-sorted-set/slice","~$cljs.core/assoc","~$datascript.db/emax","~$datascript.db/indexing?","~$cljs.core/chunk-buffer","~$cljs.core/seqable?","~$datascript.db/DB","~$datascript.db/rschema","~$cljs.core/coll?","~$datascript.db/cljs-env?","~$cljs.core/reduce-kv","~$cljs.core/repeat","~$cljs.core/hash-unordered-coll","~$datascript.db/cmp-datoms-aevt-quick","~$datascript.db/validate-indexed","~$datascript.db/resolve-upserts","~$cljs.core/IComparable","~$datascript.db/transact-add","~$cljs.core/first","~$datascript.db/cmp-attr-quick","~$datascript.db/-rseek-datoms","~$datascript.db/transact-tx-data","~$datascript.db/-seek-datoms","~$datascript.db/datom-added","~$datascript.db/tuple?","~$datascript.db/with-datom","~$cljs.core/name","~$cljs.core/subs","~$cljs.core/merge","~$cljs.core/every?","~$datascript.db/cmp-datoms-eavt","~$datascript.db/TxReport","~$js/Error","~$datascript.db/datom-get-idx","~$datascript.db/entid-some","~$cljs.core/vector","~$cljs.core/boolean","~$datascript.db/->DB","~$cljs.core/type","~$datascript.db/fsearch","~$cljs.core/inc","~$cljs.core/type->str","~$cljs.core/some","~$datascript.db/class-compare","~$cljs.core/chunked-seq?","~$datascript.db/UnsupportedOperationException"]]],"~:cache-keys",["~#cmap",[["^1[","datascript/db.cljc"],["3001ca64bfac62a277159ba626bea9e262583afa","~:shadow.build.compiler/resolve",["^ ","~:require-id",null,"~:deps-ids",["^L",[]],"~:deps-syms",["^1H","^1E","^1G","^1L","^1K","^1J","^1B","^1D"]]],["^1[","goog/dom/tagname.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","~$goog.dom.HtmlElement"]]],["^1[","goog/html/trustedtypes.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","goog/labs/useragent/browser.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^1G","~$goog.object","~$goog.labs.userAgent.util","~$goog.string.internal"]]],["^1[","goog/html/safeurl.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","~$goog.asserts","~$goog.fs.url","~$goog.html.TrustedResourceUrl","~$goog.i18n.bidi.Dir","~$goog.i18n.bidi.DirectionalString","~$goog.string.Const","~$goog.string.TypedString","^82"]]],["^1[","goog/array/array.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^83"]]],["^1[","goog/debug/error.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","goog/dom/nodetype.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","goog/string/typedstring.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","goog/object/object.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","goog/dom/asserts.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^83"]]],"~:SHADOW-TIMESTAMP",[1685454171000,1685454171000,1685454150000],["^1[","goog/math/long.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^83","~$goog.reflect"]]],["^1[","goog/html/trustedresourceurl.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^83","~$goog.fs.blob","^84","~$goog.html.SafeScript","~$goog.html.trustedtypes","^86","^87","^88","^89"]]],["^1[","goog/string/internal.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","goog/functions/functions.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","goog/html/safestyle.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^88","~$goog.html.SafeUrl","^89","^83","^82"]]],["^1[","goog/dom/safe.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^83","~$goog.dom.asserts","~$goog.functions","~$goog.html.SafeHtml","^8=","~$goog.html.SafeStyle","^8?","^85","~$goog.html.uncheckedconversions","^88","^82"]]],["^1[","clojure/walk.cljs"],["78c69af9064be23a596f27f744408340fe4ca37b","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^1E"]]],["^1[","goog/html/safehtml.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^88","^86","^87","^8=","^8C","~$goog.html.SafeStyleSheet","^8?","~$goog.dom.TagName","^85","^89","^83","~$goog.labs.userAgent.browser","^1G","^80","^82","~$goog.dom.tags","^8>"]]],["^1[","goog/dom/tags.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^80"]]],["^1[","me/tonsky/persistent_sorted_set/arrays.cljc"],["72e563d06c2c30ba8d331939722a699da6307431","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^1E","~$clojure.string"]]],["^1[","goog/fs/blob.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","goog/asserts/asserts.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","~$goog.debug.Error","~$goog.dom.NodeType"]]],["^1[","me/tonsky/persistent_sorted_set.cljs"],["72e563d06c2c30ba8d331939722a699da6307431","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^1E","^1D"]]],["^1[","goog/uri/uri.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^1G","^83","~$goog.collections.maps","~$goog.string","~$goog.structs","~$goog.uri.utils","~$goog.uri.utils.ComponentIndex","~$goog.uri.utils.StandardQueryParam"]]],["^1[","goog/collections/maps.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","goog/i18n/bidi.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","goog/fs/url.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","goog/base.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",[]]],["^1[","goog/structs/structs.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^1G","^80"]]],["^1[","clojure/string.cljs"],["78c69af9064be23a596f27f744408340fe4ca37b","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^1E","^8M","~$goog.string.StringBuffer"]]],["^1[","goog/string/string.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","~$goog.dom.safe","^8D","^88","^82"]]],["^1[","clojure/data.cljs"],["78c69af9064be23a596f27f744408340fe4ca37b","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^1E","~$clojure.set"]]],["^1[","goog/reflect/reflect.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","goog/labs/useragent/util.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","~$goog.labs.userAgent","^82"]]],["^1[","goog/string/stringbuffer.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","goog/labs/useragent/useragent.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","goog/html/uncheckedconversions.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^83","^8B","^8=","^8C","^8E","^8?","^85","^88","^82","^86"]]],["^1[","datascript/lru.cljc"],["3001ca64bfac62a277159ba626bea9e262583afa","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^1E"]]],["^1[","goog/dom/htmlelement.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H"]]],["^1[","cljs/core.cljs"],["78c69af9064be23a596f27f744408340fe4ca37b","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","~$goog.math.Long","~$goog.math.Integer","^8M","^80","^1G","~$goog.Uri","^8R"]]],["^1[","goog/html/safescript.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^88","^89","^8>","^83"]]],["^1[","goog/html/safestylesheet.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^88","^8C","^89","^80","^83","^82"]]],["^1[","goog/math/integer.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^8;"]]],["^1[","clojure/set.cljs"],["78c69af9064be23a596f27f744408340fe4ca37b","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^1E"]]],["^1[","goog/uri/utils.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^83","^8M"]]],["^1[","goog/string/const.js"],["e7c400433b3c1fadb574d4cc5a65cddccff5500f","^7W",["^ ","^7X",null,"^7Y",["^L",[]],"^7Z",["^1H","^83","^89"]]]]],"~:clj-info",["^ ","jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/source_map/base64_vlq.clj",1685454150000,"jar:file:/home/jo/.m2/repository/org/clojure/clojure/1.10.3/clojure-1.10.3.jar!/clojure/edn.clj",1685454147000,"jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/analyzer.cljc",1685454150000,"jar:file:/home/jo/.m2/repository/org/clojure/clojure/1.10.3/clojure-1.10.3.jar!/clojure/core.clj",1685454147000,"jar:file:/home/jo/.m2/repository/org/clojure/tools.reader/1.3.6/tools.reader-1.3.6.jar!/clojure/tools/reader/default_data_readers.clj",1685454146000,"jar:file:/home/jo/.m2/repository/org/clojure/tools.reader/1.3.6/tools.reader-1.3.6.jar!/clojure/tools/reader/impl/inspect.clj",1685454146000,"jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/util.cljc",1685454150000,"jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/instant.clj",1685454150000,"jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/env.cljc",1685454150000,"jar:file:/home/jo/.m2/repository/org/clojure/data.json/2.4.0/data.json-2.4.0.jar!/clojure/data/json.clj",1685454145000,"jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/source_map/base64.clj",1685454150000,"jar:file:/home/jo/.m2/repository/persistent-sorted-set/persistent-sorted-set/0.1.4/persistent-sorted-set-0.1.4.jar!/me/tonsky/persistent_sorted_set/arrays.cljc",1685712163000,"jar:file:/home/jo/.m2/repository/org/clojure/clojure/1.10.3/clojure-1.10.3.jar!/clojure/instant.clj",1685454147000,"jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/analyzer/passes.cljc",1685454150000,"jar:file:/home/jo/.m2/repository/org/clojure/tools.reader/1.3.6/tools.reader-1.3.6.jar!/clojure/tools/reader.clj",1685454146000,"jar:file:/home/jo/.m2/repository/persistent-sorted-set/persistent-sorted-set/0.1.4/persistent-sorted-set-0.1.4.jar!/me/tonsky/persistent_sorted_set.clj",1685712163000,"jar:file:/home/jo/.m2/repository/org/clojure/clojure/1.10.3/clojure-1.10.3.jar!/clojure/pprint.clj",1685454147000,"jar:file:/home/jo/.m2/repository/datascript/datascript/1.3.5/datascript-1.3.5.jar!/datascript/lru.cljc",1685712163000,"jar:file:/home/jo/.m2/repository/org/clojure/clojure/1.10.3/clojure-1.10.3.jar!/clojure/string.clj",1685454147000,"jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/core.cljc",1685454150000,"jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/source_map.clj",1685454150000,"jar:file:/home/jo/.m2/repository/org/clojure/clojure/1.10.3/clojure-1.10.3.jar!/clojure/set.clj",1685454147000,"jar:file:/home/jo/.m2/repository/org/clojure/clojure/1.10.3/clojure-1.10.3.jar!/clojure/java/io.clj",1685454147000,"jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/externs.clj",1685454150000,"jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/tagged_literals.cljc",1685454150000,"jar:file:/home/jo/.m2/repository/org/clojure/tools.reader/1.3.6/tools.reader-1.3.6.jar!/clojure/tools/reader/reader_types.clj",1685454146000,"jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/analyzer/impl.cljc",1685454150000,"jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/compiler.cljc",1685454150000,"jar:file:/home/jo/.m2/repository/datascript/datascript/1.3.5/datascript-1.3.5.jar!/datascript/db.cljc",1685712163000,"jar:file:/home/jo/.m2/repository/org/clojure/tools.reader/1.3.6/tools.reader-1.3.6.jar!/clojure/tools/reader/impl/errors.clj",1685454146000,"jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/analyzer/passes/and_or.cljc",1685454150000,"jar:file:/home/jo/.m2/repository/org/clojure/clojurescript/1.10.891/clojurescript-1.10.891.jar!/cljs/js_deps.cljc",1685454150000],"~:analyzer",["^ ","^3",null,"^4",["^ "],"^5",["^ ","^6","datascript/db.cljc","^7",1,"^8",24,"^9",1,"^:",37,"^;",true,"^<",true],"^=",["^ ","^>","^?","^@","^A","^B","^C"],"~:shadow/protocol-prefixes",["^L",["datascript$db$IIndexAccess$","datascript$db$IDatom$","datascript$db$IDB$","datascript$db$ISearch$"]],"^D",["^ ","^E","^F","^G","^F","^H","^F","^I","^F","^J","^F"],"^K",["^L",["^M"]],"^N",["^ ","^J",["^ ","^O",["^P",[["~$&","^Q"]]],"^7",48,"^8",3,"^6","datascript/db.cljc","^R","^S","^T","^F","^U",true],"^E",["^ ","^O",["^P",[["^V","^W"]]],"^7",334,"^8",4,"^6","datascript/db.cljc","^R","^X","^T","^F","^U",true],"^I",["^ ","^O",["^P",[["^Y","^Z","~$&","^["]]],"^7",145,"^8",4,"^6","datascript/db.cljc","^R","^10","^T","^F","^U",true],"^11",["^ ","^O",["^P",[["^12","^13"]]],"^14","Return then if we are generating cljs code and else for Clojure code.\n     https://groups.google.com/d/msg/clojurescript/iBY5HaQda4A/w1lAQi9_AwsJ","^7",92,"^8",4,"^6","datascript/db.cljc","^R","^15","^T","^F","^U",true],"^16",["^ ","^O",["^P",[[],["~$x"],["~$x","~$&","^17"]]],"^7",57,"^8",1,"^6","datascript/db.cljc","^R","^18","^T","^F","^U",true],"^H",["^ ","^O",["^P",[["~$&","^19"]]],"^7",29,"^8",3,"^6","datascript/db.cljc","^R","^1:","^T","^F","^U",true],"^G",["^ ","^O",["^P",[["~$&","^1;"]]],"^7",311,"^8",3,"^6","datascript/db.cljc","^R","^1<","^T","^F","^U",true]],"^R","^F","^1=",["^ "],"^1?",null,"^1@",["^ ","^1A","^1B","^1C","^1D","^1E","^1E","^1F","^1G","^1H","^1H","^1I","^1J","^1J","^1J","^1B","^1B","^1D","^1D","^1K","^1K","^1L","^1L","^1G","^1G"],"^1M",["^L",["^1N","^1O"]],"~:shadow/js-access-global",["^L",["Error"]],"^1P",null,"~:defs",["^ ","~$explode",["^ ","~:protocol-inline",null,"^5",["^ ","^6","datascript/db.cljc","^7",1222,"^8",8,"^9",1222,"^:",15,"~:private",true,"^O",["^P",["~$quote",["^P",[["~$db","~$entity"]]]]]],"^9T",true,"^R","^3R","^6","datascript/db.cljc","^:",15,"~:method-params",["^P",[["^9V","^9W"]]],"~:protocol-impl",null,"~:arglists-meta",["^P",[null,null]],"^8",1,"~:variadic?",false,"^7",1222,"~:ret-tag","^3Y","^9",1222,"~:max-fixed-arity",2,"~:fn-var",true,"^O",["^P",["^9U",["^P",[["^9V","^9W"]]]]]],"~$unfiltered-db",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",662,"^8",7,"^9",662,"^:",20,"^O",["^P",["^9U",["^P",[["^9V"]]]]]],"^R","^3U","^6","datascript/db.cljc","^:",20,"^9X",["^P",[["^9V"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",662,"^:0",["^L",[null,"~$any"]],"^9",662,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V"]]]]]],"~$cmp-datoms-aevt-quick",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",419,"^8",7,"^9",419,"^:",28,"^O",["^P",["^9U",["^P",[["~$d1","~$d2"]]]]]],"^R","^74","^6","datascript/db.cljc","^:",28,"^9X",["^P",[["^:6","^:7"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",419,"^:0",["^L",["^:4","~$number"]],"^9",419,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^:6","^:7"]]]]]],"~$reduce-indexed",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",66,"^8",7,"^9",66,"^:",21,"^O",["^P",["^9U",["^P",[["~$f","~$init","~$xs"]]]]],"^14","Same as reduce, but `f` takes [acc el idx]"],"^R","^6R","^6","datascript/db.cljc","^:",21,"^9X",["^P",[["~$f","^::","^:;"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",66,"^:0",["^L",["^:4","~$clj-nil"]],"^9",66,"^:1",3,"^:2",true,"^O",["^P",["^9U",["^P",[["~$f","^::","^:;"]]]]],"^14","Same as reduce, but `f` takes [acc el idx]"],"~$tempid?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1017,"^8",28,"^9",1017,"^:",35,"~:tag","~$boolean","^9T",true,"^O",["^P",["^9U",["^P",[["~$x"]]]]]],"^9T",true,"^R","^4N","^6","datascript/db.cljc","^:",35,"^9X",["^P",[["~$x"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1016,"^:0","^:?","^9",1017,"^:1",1,"^:>","^:?","^:2",true,"^O",["^P",["^9U",["^P",[["~$x"]]]]]],"~$validate-datom",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",983,"^8",7,"^9",983,"^:",21,"^O",["^P",["^9U",["^P",[["^9V","~$datom"]]]]]],"^R","^4V","^6","datascript/db.cljc","^:",21,"^9X",["^P",[["^9V","^:A"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",983,"^:0","^:<","^9",983,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:A"]]]]]],"~$rschema",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",694,"^8",8,"^9",694,"^:",15,"^9T",true,"^O",["^P",["^9U",["^P",[["~$schema"]]]]],"^14",":db/unique           => #{attr ...}\n   :db.unique/identity  => #{attr ...}\n   :db.unique/value     => #{attr ...}\n   :db/index            => #{attr ...}\n   :db.cardinality/many => #{attr ...}\n   :db.type/ref         => #{attr ...}\n   :db/isComponent      => #{attr ...}\n   :db.type/tuple       => #{attr ...}\n   :db/attrTuples       => {attr => {tuple-attr => idx}}"],"^9T",true,"^R","^6Z","^6","datascript/db.cljc","^:",15,"^9X",["^P",[["^:C"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",694,"^:0",["^L",["~$clj","^:4"]],"^9",694,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^:C"]]]]],"^14",":db/unique           => #{attr ...}\n   :db.unique/identity  => #{attr ...}\n   :db.unique/value     => #{attr ...}\n   :db/index            => #{attr ...}\n   :db.cardinality/many => #{attr ...}\n   :db.type/ref         => #{attr ...}\n   :db/isComponent      => #{attr ...}\n   :db.type/tuple       => #{attr ...}\n   :db/attrTuples       => {attr => {tuple-attr => idx}}"],"~$hash-fdb",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",844,"^8",8,"^9",844,"^:",16,"^9T",true,"^O",["^P",["^9U",["^P",[["^9V"]]]]]],"^9T",true,"^R","^6P","^6","datascript/db.cljc","^:",16,"^9X",["^P",[["^9V"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",844,"^:0",["^L",[null,"^:4"]],"^9",844,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V"]]]]]],"~$validate-schema-key",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",717,"^8",8,"^9",717,"^:",27,"^9T",true,"^O",["^P",["^9U",["^P",[["~$a","~$k","~$v","~$expected"]]]]]],"^9T",true,"^R","^6N","^6","datascript/db.cljc","^:",27,"^9X",["^P",[["~$a","~$k","~$v","^:G"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",717,"^:0","^:<","^9",717,"^:1",4,"^:2",true,"^O",["^P",["^9U",["^P",[["~$a","~$k","~$v","^:G"]]]]]],"~$builtin-fn?",["^ ","^R","^4:","^6","datascript/db.cljc","^7",1292,"^8",1,"^9",1292,"^:",17,"^5",["^ ","^6","datascript/db.cljc","^7",1292,"^8",6,"^9",1292,"^:",17],"^:>","~$cljs.core/ISet"],"~$cljs-env?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",86,"^8",8,"^9",86,"^:",17,"^9T",true,"^O",["^P",["^9U",["^P",[["~$env"]]]]],"^14","Take the &env from a macro, and tell whether we are expanding into cljs."],"^9T",true,"^R","^70","^6","datascript/db.cljc","^:",17,"^9X",["^P",[["^:K"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",86,"^:0","^:?","^9",86,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^:K"]]]]],"^14","Take the &env from a macro, and tell whether we are expanding into cljs."],"~$indexing?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",929,"^8",27,"^9",929,"^:",36,"^:>","^:?","^O",["^P",["^9U",["^P",[["^9V","~$attr"]]]]]],"^R","^6V","^6","datascript/db.cljc","^:",36,"^9X",["^P",[["^9V","^:M"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",928,"^:0","^:?","^9",929,"^:1",2,"^:>","^:?","^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:M"]]]]]],"~$emax",["^ ","^5",["^ ","^6","datascript/db.cljc","^7",22,"^8",14,"^9",22,"^:",18,"~:const",true],"^R","^6U","^6","datascript/db.cljc","^:",18,"~:const-expr",["^ ","^1>","^:O","~:val",2147483647,"~:env",["^ ","~:context","~:expr"],"^1Q",2147483647,"^:>","^:8"],"^8",1,"^:O",true,"^7",22,"^9",22,"^:>","^:8"],"~$validate-indexed",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",474,"^8",7,"^9",474,"^:",23,"^O",["^P",["^9U",["^P",[["^9V","~$index","~$components"]]]]]],"^R","^75","^6","datascript/db.cljc","^:",23,"^9X",["^P",[["^9V","^:V","^:W"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",474,"^:0","^:<","^9",474,"^:1",3,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:V","^:W"]]]]]],"~$init-max-eid",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",790,"^8",8,"^9",790,"^:",20,"^9T",true,"^O",["^P",["^9U",["^P",[["~$eavt"]]]]]],"^9T",true,"^R","^6G","^6","datascript/db.cljc","^:",20,"^9X",["^P",[["^:Y"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",790,"^:0",["^L",["^:4","^:8"]],"^9",790,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^:Y"]]]]]],"~$->FilteredDB",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^:",32,"^8",22,"~:internal-ctor",true,"~:factory","~:positional","^7",601,"^9",601,"^O",["^P",["^9U",["^P",[["^:3","~$pred","~$hash"]]]]],"^14","Positional factory function for datascript.db/FilteredDB."],"^R","^4?","^6","datascript/db.cljc","^:",32,"^9X",["^P",[["^:3","^;2","^;3"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^:[",true,"^9[",false,"^;0","^;1","^7",601,"^:0","^53","^9",601,"^:1",3,"^:2",true,"^O",["^P",["^9U",["^P",[["^:3","^;2","^;3"]]]]],"^14","Positional factory function for datascript.db/FilteredDB."],"~$hash-datom",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",240,"^8",8,"^9",240,"^:",18,"^9T",true,"^O",["^P",["^9U",["^P",[["~$d"]]]]]],"^9T",true,"^R","^6H","^6","datascript/db.cljc","^:",18,"^9X",["^P",[["~$d"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",240,"^:0","^:8","^9",240,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["~$d"]]]]]],"~$queue-tuples",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1075,"^8",8,"^9",1075,"^:",20,"^9T",true,"^O",["^P",["^9U",["^P",[["~$queue","~$tuples","^9V","~$e","~$a","~$v"]]]]]],"^9T",true,"^R","^43","^6","datascript/db.cljc","^:",20,"^9X",["^P",[["^;6","^;7","^9V","~$e","~$a","~$v"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1075,"^:0",["^L",[null,"^:4"]],"^9",1075,"^:1",6,"^:2",true,"^O",["^P",["^9U",["^P",[["^;6","^;7","^9V","~$e","~$a","~$v"]]]]]],"~$is-attr?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",913,"^8",27,"^9",913,"^:",35,"^:>","^:?","^O",["^P",["^9U",["^P",[["^9V","^:M","~$property"]]]]]],"^R","^6L","^6","datascript/db.cljc","^:",35,"^9X",["^P",[["^9V","^:M","^;9"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",912,"^:0","^:?","^9",913,"^:1",3,"^:>","^:?","^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:M","^;9"]]]]]],"~$-attrs-by",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",483,"^8",4,"^9",483,"^:",13,"~:protocol","^44","^14",null,"^O",["^P",["^9U",["^P",[["^9V","^;9"]]]]]],"^;;","^44","^R","^5E","^6","datascript/db.cljc","^:",13,"^9X",["^P",[["^9V","^;9"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",481,"^:0","^:4","^9",483,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^;9"]]]]],"^14",null],"~$datom-added",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",156,"^8",4,"^9",156,"^:",15,"^;;","^33","^14",null,"^O",["^P",["^9U",["^P",[["~$this"]]]]]],"^;;","^33","^R","^7>","^6","datascript/db.cljc","^:",15,"^9X",["^P",[["^;="]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",154,"^:0","^:4","^9",156,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^;="]]]]],"^14",null],"~$-datoms",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",469,"^8",4,"^9",469,"^:",11,"^;;","^65","^14",null,"^O",["^P",["^9U",["^P",[["^9V","^:V","^:W"]]]]]],"^;;","^65","^R","^5F","^6","datascript/db.cljc","^:",11,"^9X",["^P",[["^9V","^:V","^:W"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",468,"^:0","^:4","^9",469,"^:1",3,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:V","^:W"]]]]],"^14",null],"~$datom-get-idx",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",157,"^8",4,"^9",157,"^:",17,"^;;","^33","^14",null,"^O",["^P",["^9U",["^P",[["^;="]]]]]],"^;;","^33","^R","^7H","^6","datascript/db.cljc","^:",17,"^9X",["^P",[["^;="]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",154,"^:0","^:4","^9",157,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^;="]]]]],"^14",null],"~$-rseek-datoms",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",471,"^8",4,"^9",471,"^:",17,"^;;","^65","^14",null,"^O",["^P",["^9U",["^P",[["^9V","^:V","^:W"]]]]]],"^;;","^65","^R","^7;","^6","datascript/db.cljc","^:",17,"^9X",["^P",[["^9V","^:V","^:W"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",468,"^:0","^:4","^9",471,"^:1",3,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:V","^:W"]]]]],"^14",null],"~$init-db",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",796,"^8",11,"^9",796,"^:",18,"^:>","~$DB","^O",["^P",["^9U",["^P",[["~$datoms"],["^;C","^:C"]]]]],"~:top-fn",["^ ","^9[",false,"~:fixed-arity",2,"^:1",2,"^9X",[["^;C"],["^;C","^:C"]],"^O",["^P",[["^;C"],["^;C","^:C"]]],"^9Z",["^P",[null,null]]]],"^R","^4B","^6","datascript/db.cljc","^:",18,"^;D",["^ ","^9[",false,"^;E",2,"^:1",2,"^9X",[["^;C"],["^;C","^:C"]],"^O",["^P",[["^;C"],["^;C","^:C"]]],"^9Z",["^P",[null,null]]],"^9X",[["^;C"],["^;C","^:C"]],"^9Y",null,"^;E",2,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"~:methods",[["^ ","^;E",1,"^9[",false,"^:>","^;B"],["^ ","^;E",2,"^9[",false,"^:>","^6Y"]],"^7",796,"^:0","^;B","^9",796,"^:1",2,"^:>","^;B","^:2",true,"^O",["^P",[["^;C"],["^;C","^:C"]]]],"~$val-at-datom",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",255,"^8",8,"^9",255,"^:",20,"^9T",true,"^O",["^P",["^9U",["^P",[["~$d","~$k","~$not-found"]]]]]],"^9T",true,"^R","^5;","^6","datascript/db.cljc","^:",20,"^9X",["^P",[["~$d","~$k","^;H"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",255,"^:0",["^L",[null,"^:4"]],"^9",255,"^:1",3,"^:2",true,"^O",["^P",["^9U",["^P",[["~$d","~$k","^;H"]]]]]],"~$conjv",["^ ","^R","^5<","^6","datascript/db.cljc","^7",63,"^8",1,"^9",63,"^:",11,"^5",["^ ","^6","datascript/db.cljc","^7",63,"^8",6,"^9",63,"^:",11],"^:>","~$function"],"~$tuple?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",933,"^8",27,"^9",933,"^:",33,"^:>","^:?","^O",["^P",["^9U",["^P",[["^9V","^:M"]]]]]],"^R","^7?","^6","datascript/db.cljc","^:",33,"^9X",["^P",[["^9V","^:M"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",932,"^:0","^:?","^9",933,"^:1",2,"^:>","^:?","^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:M"]]]]]],"~$equiv-datom",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",245,"^8",8,"^9",245,"^:",19,"^9T",true,"^O",["^P",["^9U",["^P",[["~$d","~$o"]]]]]],"^9T",true,"^R","^4[","^6","datascript/db.cljc","^:",19,"^9X",["^P",[["~$d","~$o"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",245,"^:0","^:?","^9",245,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["~$d","~$o"]]]]]],"~$class-compare",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",346,"^8",7,"^9",346,"^:",20,"^O",["^P",["^9U",["^P",[["~$x","~$y"]]]]]],"^R","^7R","^6","datascript/db.cljc","^:",20,"^9X",["^P",[["~$x","~$y"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",346,"^:0","^:4","^9",346,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["~$x","~$y"]]]]]],"~$multival?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",917,"^8",27,"^9",917,"^:",36,"^:>","^:?","^O",["^P",["^9U",["^P",[["^9V","^:M"]]]]]],"^R","^51","^6","datascript/db.cljc","^:",36,"^9X",["^P",[["^9V","^:M"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",916,"^:0","^:?","^9",917,"^:1",2,"^:>","^:?","^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:M"]]]]]],"~$resolve-upserts",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1127,"^8",8,"^9",1127,"^:",23,"^9T",true,"^O",["^P",["^9U",["^P",[["^9V","^9W"]]]]],"^14","Returns [entity' upserts]. Upsert attributes that resolve to existing entities\n   are removed from entity, rest are kept in entity for insertion. No validation is performed.\n\n   upserts :: {:name  {\"Ivan\"  1}\n               :email {\"ivan@\" 2}\n               :alias {\"abc\"   3\n                       \"def\"   4}}}"],"^9T",true,"^R","^76","^6","datascript/db.cljc","^:",23,"^9X",["^P",[["^9V","^9W"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1127,"^:0",["^L",[null,"~$cljs.core/IVector","^:4"]],"^9",1127,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^9W"]]]]],"^14","Returns [entity' upserts]. Upsert attributes that resolve to existing entities\n   are removed from entity, rest are kept in entity for insertion. No validation is performed.\n\n   upserts :: {:name  {\"Ivan\"  1}\n               :email {\"ivan@\" 2}\n               :alias {\"abc\"   3\n                       \"def\"   4}}}"],"~$transact-add",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1245,"^8",8,"^9",1245,"^:",20,"^9T",true,"^O",["^P",["^9U",["^P",[["~$report",["~$_","~$e","~$a","~$v","~$tx","^1S","~$ent"]]]]]]],"^9T",true,"^R","^78","^6","datascript/db.cljc","^:",20,"^9X",["^P",[["^;R","~$p__38863"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1245,"^:0",["^L",["^:D","^:4"]],"^9",1245,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^;R",["~$_","~$e","~$a","~$v","^;S","^1S","^;T"]]]]]]],"~$queue-tuple",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1068,"^8",8,"^9",1068,"^:",19,"^9T",true,"^O",["^P",["^9U",["^P",[["^;6","~$tuple","~$idx","^9V","~$e","~$a","~$v"]]]]]],"^9T",true,"^R","^4O","^6","datascript/db.cljc","^:",19,"^9X",["^P",[["^;6","^;W","^;X","^9V","~$e","~$a","~$v"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1068,"^:0",["^L",["^:D","^:4"]],"^9",1068,"^:1",7,"^:2",true,"^O",["^P",["^9U",["^P",[["^;6","^;W","^;X","^9V","~$e","~$a","~$v"]]]]]],"~$transact-report",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1082,"^8",8,"^9",1082,"^:",23,"^9T",true,"^O",["^P",["^9U",["^P",[["^;R","^:A"]]]]]],"^9T",true,"^R","^58","^6","datascript/db.cljc","^:",23,"^9X",["^P",[["^;R","^:A"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1082,"^:0",["^L",["^:D","^:4"]],"^9",1082,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^;R","^:A"]]]]]],"~$transact-tx-data",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1333,"^8",7,"^9",1333,"^:",23,"^O",["^P",["^9U",["^P",[["~$initial-report","~$initial-es"]]]]]],"^R","^7<","^6","datascript/db.cljc","^:",23,"^9X",["^P",[["^;[","^<0"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1333,"^:0",["^L",["^:D","^:4"]],"^9",1333,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^;[","^<0"]]]]]],"~$pr-db",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",859,"^8",10,"^9",859,"^:",15,"^O",["^P",["^9U",["^P",[["^9V","~$w","~$opts"]]]]]],"^R","^2L","^6","datascript/db.cljc","^:",15,"^9X",["^P",[["^9V","~$w","^<2"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",4,"^9[",false,"^7",859,"^:0","^:4","^9",859,"^:1",3,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","~$w","^<2"]]]]]],"~$diff-sorted",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",433,"^8",8,"^9",433,"^:",19,"^9T",true,"^O",["^P",["^9U",["^P",[["~$a","~$b","~$cmp"]]]]]],"^9T",true,"^R","^6D","^6","datascript/db.cljc","^:",19,"^9X",["^P",[["~$a","~$b","^<4"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",433,"^:0",["^L",["^;P","^:<"]],"^9",433,"^:1",3,"^:2",true,"^O",["^P",["^9U",["^P",[["~$a","~$b","^<4"]]]]]],"~$datom-tx",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",155,"^8",4,"^9",155,"^:",12,"^;;","^33","^14",null,"^O",["^P",["^9U",["^P",[["^;="]]]]]],"^;;","^33","^R","^5=","^6","datascript/db.cljc","^:",12,"^9X",["^P",[["^;="]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",154,"^:0","^:4","^9",155,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^;="]]]]],"^14",null],"~$nth-datom",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",266,"^8",8,"^9",266,"^:",17,"^9T",true,"^O",["^P",["^9U",["^P",[["~$d","~$i"],["~$d","~$i","^;H"]]]]],"^;D",["^ ","^9[",false,"^;E",3,"^:1",3,"^9X",[["~$d","~$i"],["~$d","~$i","^;H"]],"^O",["^P",[["~$d","~$i"],["~$d","~$i","^;H"]]],"^9Z",["^P",[null,null]]]],"^9T",true,"^R","^2H","^6","datascript/db.cljc","^:",17,"^;D",["^ ","^9[",false,"^;E",3,"^:1",3,"^9X",[["~$d","~$i"],["~$d","~$i","^;H"]],"^O",["^P",[["~$d","~$i"],["~$d","~$i","^;H"]]],"^9Z",["^P",[null,null]]],"^9X",[["~$d","~$i"],["~$d","~$i","^;H"]],"^9Y",null,"^;E",3,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^;F",[["^ ","^;E",2,"^9[",false],["^ ","^;E",3,"^9[",false]],"^7",266,"^9",266,"^:1",3,"^:2",true,"^O",["^P",[["~$d","~$i"],["~$d","~$i","^;H"]]]],"~$IllegalArgumentException",["^ ","^R","^2B","^6","datascript/db.cljc","^7",17,"^8",6,"^9",17,"^:",35,"^5",["^ ","^6","datascript/db.cljc","^7",17,"^8",11,"^9",17,"^:",35],"^:>","~$js"],"~$cmp-datoms-avet",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",388,"^8",7,"^9",388,"^:",22,"^O",["^P",["^9U",["^P",[["^:6","^:7"]]]]]],"^R","^5T","^6","datascript/db.cljc","^:",22,"^9X",["^P",[["^:6","^:7"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",388,"^:0",["^L",["^:4","^:8"]],"^9",388,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^:6","^:7"]]]]]],"~$next-eid",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1005,"^8",8,"^9",1005,"^:",16,"^9T",true,"^O",["^P",["^9U",["^P",[["^9V"]]]]]],"^9T",true,"^R","^5J","^6","datascript/db.cljc","^:",16,"^9X",["^P",[["^9V"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1005,"^:0","^:8","^9",1005,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V"]]]]]],"~$validate-upserts",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1171,"^8",7,"^9",1171,"^:",23,"^O",["^P",["^9U",["^P",[["^9W","~$upserts"]]]]],"^14","Throws if not all upserts point to the same entity. \n   Returns single eid that all upserts point to, or null."],"^R","^5[","^6","datascript/db.cljc","^:",23,"^9X",["^P",[["^9W","^<<"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1171,"^:0",["^L",[null,"^:4","^:<"]],"^9",1171,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^9W","^<<"]]]]],"^14","Throws if not all upserts point to the same entity. \n   Returns single eid that all upserts point to, or null."],"~$check-value-tempids",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1321,"^8",7,"^9",1321,"^:",26,"^O",["^P",["^9U",["^P",[["^;R"]]]]]],"^R","^2F","^6","datascript/db.cljc","^:",26,"^9X",["^P",[["^;R"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1321,"^:0",["^L",["^:D","^:<"]],"^9",1321,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^;R"]]]]]],"~$Datom",["^ ","~:num-fields",6,"~:protocols",["^L",["~$cljs.core/IIndexed","^33","~$cljs.core/IEquiv","~$cljs.core/IHash","~$cljs.core/ISeqable","~$cljs.core/IPrintWithWriter","~$cljs.core/IAssociative","~$cljs.core/ILookup"]],"^R","^5A","^6","datascript/db.cljc","^:",15,"~:type",true,"^8",10,"^7",160,"~:record",false,"^9",160,"^:>","^;J","~:skip-protocol-flag",["^L",["^<A","^<B","^<C","^<D","^<E","^<F","^<G"]]],"~$db?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",595,"^8",7,"^9",595,"^:",10,"^O",["^P",["^9U",["^P",[["~$x"]]]]]],"^R","^2X","^6","datascript/db.cljc","^:",10,"^9X",["^P",[["~$x"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",595,"^:0","^:?","^9",595,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["~$x"]]]]]],"~$IDatom",["^ ","^5",["^ ","~:protocol-symbol",true,"^6","datascript/db.cljc","^:",20,"^8",14,"^7",154,"~:protocol-info",["^ ","^;F",["^ ","^<5",[["^;="]],"^;<",[["^;="]],"^;?",[["^;="]],"~$datom-set-idx",[["^;=","~$value"]]]],"^9",154,"~:sigs",["^ ","~:datom-tx",["^ ","^R","^<5","^O",["^P",[["^;="]]],"^14",null],"~:datom-added",["^ ","^R","^;<","^O",["^P",[["^;="]]],"^14",null],"~:datom-get-idx",["^ ","^R","^;?","^O",["^P",[["^;="]]],"^14",null],"~:datom-set-idx",["^ ","^R","^<O","^O",["^P",[["^;=","^<P"]]],"^14",null]],"~:jsdoc",["^P",["@interface"]]],"^<M",true,"^R","^33","^6","datascript/db.cljc","^:",20,"^8",1,"^7",154,"^<N",["^ ","^;F",["^ ","^<5",[["^;="]],"^;<",[["^;="]],"^;?",[["^;="]],"^<O",[["^;=","^<P"]]]],"~:info",null,"^9",154,"^:>","^:4","^<Q",["^ ","^<R",["^ ","^R","^<5","^O",["^P",[["^;="]]],"^14",null],"^<S",["^ ","^R","^;<","^O",["^P",[["^;="]]],"^14",null],"^<T",["^ ","^R","^;?","^O",["^P",[["^;="]]],"^14",null],"^<U",["^ ","^R","^<O","^O",["^P",[["^;=","^<P"]]],"^14",null]],"~:impls",["^L",["^5A"]],"^<V",["^P",["@interface"]]],"~$-search",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",463,"^8",4,"^9",463,"^:",11,"^;;","^5N","^14",null,"^O",["^P",["^9U",["^P",[["~$data","~$pattern"]]]]]],"^;;","^5N","^R","^32","^6","datascript/db.cljc","^:",11,"^9X",["^P",[["^<Z","^<["]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",462,"^:0","^:4","^9",463,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^<Z","^<["]]]]],"^14",null],"~$equiv-db-index",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",829,"^8",8,"^9",829,"^:",22,"^9T",true,"^O",["^P",["^9U",["^P",[["~$x","~$y"]]]]]],"^9T",true,"^R","^35","^6","datascript/db.cljc","^:",22,"^9X",["^P",[["~$x","~$y"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",829,"^:0","^:?","^9",829,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["~$x","~$y"]]]]]],"~$combine-hashes",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",98,"^8",7,"^9",98,"^:",21,"^O",["^P",["^9U",["^P",[["~$x","~$y"]]]]]],"^R","^39","^6","datascript/db.cljc","^:",21,"^9X",["^P",[["~$x","~$y"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",98,"^:0","^:8","^9",98,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["~$x","~$y"]]]]]],"^:A",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",233,"^8",14,"^9",233,"^:",19,"^:>","^<>","^O",["^P",["^9U",["^P",[["~$e","~$a","~$v"],["~$e","~$a","~$v","^;S"],["~$e","~$a","~$v","^;S","~$added"]]]]],"^;D",["^ ","^9[",false,"^;E",5,"^:1",5,"^9X",[["~$e","~$a","~$v"],["~$e","~$a","~$v","^;S"],["~$e","~$a","~$v","^;S","^=2"]],"^O",["^P",[["~$e","~$a","~$v"],["~$e","~$a","~$v","^;S"],["~$e","~$a","~$v","^;S","^=2"]]],"^9Z",["^P",[null,null,null]]]],"^R","^5R","^6","datascript/db.cljc","^:",19,"^;D",["^ ","^9[",false,"^;E",5,"^:1",5,"^9X",[["~$e","~$a","~$v"],["~$e","~$a","~$v","^;S"],["~$e","~$a","~$v","^;S","^=2"]],"^O",["^P",[["~$e","~$a","~$v"],["~$e","~$a","~$v","^;S"],["~$e","~$a","~$v","^;S","^=2"]]],"^9Z",["^P",[null,null,null]]],"^9X",[["~$e","~$a","~$v"],["~$e","~$a","~$v","^;S"],["~$e","~$a","~$v","^;S","^=2"]],"^9Y",null,"^;E",5,"^9Z",["^P",[null,null,null]],"^8",1,"^9[",false,"^;F",[["^ ","^;E",3,"^9[",false,"^:>","^5A"],["^ ","^;E",4,"^9[",false,"^:>","^5A"],["^ ","^;E",5,"^9[",false,"^:>","^5A"]],"^7",233,"^:0","^<>","^9",233,"^:1",5,"^:>","^<>","^:2",true,"^O",["^P",[["~$e","~$a","~$v"],["~$e","~$a","~$v","^;S"],["~$e","~$a","~$v","^;S","^=2"]]]],"^;B",["^ ","^<?",10,"^<@",["^L",["~$cljs.core/IRecord","~$cljs.core/IKVReduce","^<B","^<C","~$cljs.core/ICollection","~$cljs.core/ICounted","^<D","~$cljs.core/IMeta","~$cljs.core/ICloneable","^<E","~$cljs.core/IIterable","~$cljs.core/IWithMeta","^<F","~$cljs.core/IMap","^<G"]],"^R","^6Y","^6","datascript/db.cljc","^:",24,"^<H",true,"^8",22,"^:[",true,"^7",499,"^<I",true,"^9",499,"^:>","^;J","^<J",["^L",["^=3","^=4","^<B","^<C","^=5","^=6","^<D","^=7","^=8","^<E","^=9","^=:","^<F","^=;","^<G"]]],"~$value-compare",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",350,"^8",7,"^9",350,"^:",20,"^O",["^P",["^9U",["^P",[["~$x","~$y"]]]]]],"^R","^3<","^6","datascript/db.cljc","^:",20,"^9X",["^P",[["~$x","~$y"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",350,"^9",350,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["~$x","~$y"]]]]]],"~$map->TxReport",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^:",20,"^8",12,"^:[",true,"^;0","~:map","^7",910,"^9",910,"^O",["^P",["^9U",["^P",[["~$G__38800"]]]]],"^14","Factory function for datascript.db/TxReport, taking a map of keywords to field values."],"^R","^2W","^6","datascript/db.cljc","^:",20,"^9X",["^P",[["^=?"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^:[",true,"^9[",false,"^;0","^=>","^7",910,"^:0","^7F","^9",910,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^=?"]]]]],"^14","Factory function for datascript.db/TxReport, taking a map of keywords to field values."],"^<4",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",337,"^8",7,"^9",337,"^:",10,"^O",["^P",["^9U",["^P",[["~$x","~$y"]]]]]],"^R","^3?","^6","datascript/db.cljc","^:",10,"^9X",["^P",[["~$x","~$y"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",337,"^:0","^:8","^9",337,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["~$x","~$y"]]]]]],"~$maybe-wrap-multival",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1203,"^8",8,"^9",1203,"^:",27,"^9T",true,"^O",["^P",["^9U",["^P",[["^9V","~$a","^W"]]]]]],"^9T",true,"^R","^3E","^6","datascript/db.cljc","^:",27,"^9X",["^P",[["^9V","~$a","^W"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1203,"^:0",["^L",[null,"^;P"]],"^9",1203,"^:1",3,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","~$a","^W"]]]]]],"~$retract-components",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1273,"^8",8,"^9",1273,"^:",26,"^9T",true,"^O",["^P",["^9U",["^P",[["^9V","^;C"]]]]]],"^9T",true,"^R","^31","^6","datascript/db.cljc","^:",26,"^9X",["^P",[["^9V","^;C"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1273,"^:0",["^L",["^:D","^:4"]],"^9",1273,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^;C"]]]]]],"~$retry-with-tempid",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1280,"^8",8,"^9",1280,"^:",25,"^9T",true,"^O",["^P",["^9U",["^P",[["^;[","^;R","~$es","~$tempid","~$upserted-eid"]]]]]],"^9T",true,"^R","^6M","^6","datascript/db.cljc","^:",25,"^9X",["^P",[["^;[","^;R","^=C","^=D","^=E"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1280,"^:0","^:4","^9",1280,"^:1",5,"^:2",true,"^O",["^P",["^9U",["^P",[["^;[","^;R","^=C","^=D","^=E"]]]]]],"~$hash-db",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",837,"^8",8,"^9",837,"^:",15,"^9T",true,"^O",["^P",["^9U",["^P",[["^9V"]]]]]],"^9T",true,"^R","^68","^6","datascript/db.cljc","^:",15,"^9X",["^P",[["^9V"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",837,"^:0",["^L",[null,"^:4"]],"^9",837,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V"]]]]]],"~$tx0",["^ ","^5",["^ ","^6","datascript/db.cljc","^7",21,"^8",14,"^9",21,"^:",17,"^:O",true],"^R","^3:","^6","datascript/db.cljc","^:",17,"^:P",["^ ","^1>","^:O","^:Q",536870912,"^:R",["^ ","^:S","^:T"],"^1Q",536870912,"^:>","^:8"],"^8",1,"^:O",true,"^7",21,"^9",21,"^:>","^:8"],"~$tx-id?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1009,"^8",28,"^9",1009,"^:",34,"^:>","^:?","^9T",true,"^O",["^P",["^9U",["^P",[["~$e"]]]]]],"^9T",true,"^R","^6>","^6","datascript/db.cljc","^:",34,"^9X",["^P",[["~$e"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1008,"^:0","^:?","^9",1009,"^:1",1,"^:>","^:?","^:2",true,"^O",["^P",["^9U",["^P",[["~$e"]]]]]],"~$db-persistent!",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",493,"^8",7,"^9",493,"^:",21,"^O",["^P",["^9U",["^P",[["^9V"]]]]]],"^R","^6?","^6","datascript/db.cljc","^:",21,"^9X",["^P",[["^9V"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",493,"^:0",["^L",["^:D","^:4"]],"^9",493,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V"]]]]]],"~$reverse-ref?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1098,"^8",27,"^9",1098,"^:",39,"^:>","^:?","^O",["^P",["^9U",["^P",[["^:M"]]]]]],"^R","^4=","^6","datascript/db.cljc","^:",39,"^9X",["^P",[["^:M"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1097,"^:0","^:?","^9",1098,"^:1",1,"^:>","^:?","^:2",true,"^O",["^P",["^9U",["^P",[["^:M"]]]]]],"~$implicit-schema",["^ ","^5",["^ ","^6","datascript/db.cljc","^7",24,"^8",14,"^9",24,"^:",29,"^:O",true],"^R","^3W","^6","datascript/db.cljc","^:",29,"^:P",["^ ","^1>","^=>","^:R",["^ ","^:S","^:T"],"^1Q",["^ ","~:db/ident",["^ ","~:db/unique","~:db.unique/identity"]],"~:keys",[["^ ","^1>","^:O","^:Q","^=L","^:R",["^ ","^:S","^:T"],"^1Q","^=L","^:>","^3G"]],"~:vals",[["^ ","^1>","^=>","^:R",["^ ","^:S","^:T"],"^1Q",["^ ","^=M","^=N"],"^=O",[["^ ","^1>","^:O","^:Q","^=M","^:R",["^ ","^:S","^:T"],"^1Q","^=M","^:>","^3G"]],"^=P",[["^ ","^1>","^:O","^:Q","^=N","^:R",["^ ","^:S","^:T"],"^1Q","^=N","^:>","^3G"]],"~:children",["^=O","^=P"],"^:>","^=;"]],"^=Q",["^=O","^=P"],"^:>","^=;"],"^8",1,"^:O",true,"^7",24,"^9",24,"^:>","^=;"],"~$UnsupportedOperationException",["^ ","^R","^7T","^6","datascript/db.cljc","^7",18,"^8",6,"^9",18,"^:",40,"^5",["^ ","^6","datascript/db.cljc","^7",18,"^8",11,"^9",18,"^:",40],"^:>","^<8"],"~$validate-val",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",997,"^8",8,"^9",997,"^:",20,"^9T",true,"^O",["^P",["^9U",["^P",[["~$v","~$at"]]]]]],"^9T",true,"^R","^6O","^6","datascript/db.cljc","^:",20,"^9X",["^P",[["~$v","^=T"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",997,"^:0","^:<","^9",997,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["~$v","^=T"]]]]]],"~$->TxReport",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^:",20,"^8",12,"^:[",true,"^;0","^;1","^7",910,"^9",910,"^O",["^P",["^9U",["^P",[["~$db-before","~$db-after","~$tx-data","~$tempids","~$tx-meta"]]]]],"^14","Positional factory function for datascript.db/TxReport."],"^R","^3H","^6","datascript/db.cljc","^:",20,"^9X",["^P",[["^=V","^=W","^=X","^=Y","^=Z"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^:[",true,"^9[",false,"^;0","^;1","^7",910,"^:0","^7F","^9",910,"^:1",5,"^:2",true,"^O",["^P",["^9U",["^P",[["^=V","^=W","^=X","^=Y","^=Z"]]]]],"^14","Positional factory function for datascript.db/TxReport."],"~$map->DB",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^:",24,"^8",22,"^:[",true,"^;0","^=>","^7",499,"^9",499,"^O",["^P",["^9U",["^P",[["~$G__38698"]]]]],"^14","Factory function for datascript.db/DB, taking a map of keywords to field values."],"^R","^3I","^6","datascript/db.cljc","^:",24,"^9X",["^P",[["^>0"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^:[",true,"^9[",false,"^;0","^=>","^7",499,"^:0","^6Y","^9",499,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^>0"]]]]],"^14","Factory function for datascript.db/DB, taking a map of keywords to field values."],"~$cmp-datoms-eavt",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",374,"^8",7,"^9",374,"^:",22,"^O",["^P",["^9U",["^P",[["^:6","^:7"]]]]]],"^R","^7E","^6","datascript/db.cljc","^:",22,"^9X",["^P",[["^:6","^:7"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",374,"^:0",["^L",["^:4","^:8"]],"^9",374,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^:6","^:7"]]]]]],"~$tuple-source?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",937,"^8",27,"^9",937,"^:",40,"^:>","^:?","^O",["^P",["^9U",["^P",[["^9V","^:M"]]]]]],"^R","^42","^6","datascript/db.cljc","^:",40,"^9X",["^P",[["^9V","^:M"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",936,"^:0","^:?","^9",937,"^:1",2,"^:>","^:?","^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:M"]]]]]],"~$cmp-datoms-aevt",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",381,"^8",7,"^9",381,"^:",22,"^O",["^P",["^9U",["^P",[["^:6","^:7"]]]]]],"^R","^3P","^6","datascript/db.cljc","^:",22,"^9X",["^P",[["^:6","^:7"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",381,"^:0",["^L",["^:4","^:8"]],"^9",381,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^:6","^:7"]]]]]],"~$entid-some",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",977,"^8",7,"^9",977,"^:",17,"^O",["^P",["^9U",["^P",[["^9V","~$eid"]]]]]],"^R","^7I","^6","datascript/db.cljc","^:",17,"^9X",["^P",[["^9V","^>5"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",977,"^:0",["^L",["^:4","^:<"]],"^9",977,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^>5"]]]]]],"^<O",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",158,"^8",4,"^9",158,"^:",17,"^;;","^33","^14",null,"^O",["^P",["^9U",["^P",[["^;=","^<P"]]]]]],"^;;","^33","^R","^3L","^6","datascript/db.cljc","^:",17,"^9X",["^P",[["^;=","^<P"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",154,"^:0","^:4","^9",158,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^;=","^<P"]]]]],"^14",null],"~$fsearch",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",465,"^8",15,"^9",465,"^:",22,"^:>","^<>","^9T",true,"^O",["^P",["^9U",["^P",[["^<Z","^<["]]]]]],"^9T",true,"^R","^7N","^6","datascript/db.cljc","^:",22,"^9X",["^P",[["^<Z","^<["]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",465,"^:0","^<>","^9",465,"^:1",2,"^:>","^<>","^:2",true,"^O",["^P",["^9U",["^P",[["^<Z","^<["]]]]]],"~$-seek-datoms",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",470,"^8",4,"^9",470,"^:",16,"^;;","^65","^14",null,"^O",["^P",["^9U",["^P",[["^9V","^:V","^:W"]]]]]],"^;;","^65","^R","^7=","^6","datascript/db.cljc","^:",16,"^9X",["^P",[["^9V","^:V","^:W"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",468,"^:0","^:4","^9",470,"^:1",3,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:V","^:W"]]]]],"^14",null],"~$cmp-datoms-avet-quick",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",426,"^8",7,"^9",426,"^:",28,"^O",["^P",["^9U",["^P",[["^:6","^:7"]]]]]],"^R","^3V","^6","datascript/db.cljc","^:",28,"^9X",["^P",[["^:6","^:7"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",426,"^:0",["^L",["^:4","^:8"]],"^9",426,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^:6","^:7"]]]]]],"~$conjs",["^ ","^R","^41","^6","datascript/db.cljc","^7",64,"^8",1,"^9",64,"^:",11,"^5",["^ ","^6","datascript/db.cljc","^7",64,"^8",6,"^9",64,"^:",11],"^:>","^;J"],"~$with-datom",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1050,"^8",8,"^9",1050,"^:",18,"^9T",true,"^O",["^P",["^9U",["^P",[["^9V","^:A"]]]]]],"^9T",true,"^R","^7@","^6","datascript/db.cljc","^:",18,"^9X",["^P",[["^9V","^:A"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1050,"^:0",["^L",[null,"^:D","^:4"]],"^9",1050,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:A"]]]]]],"~$empty-db",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",773,"^8",11,"^9",773,"^:",19,"^:>","^;B","^O",["^P",["^9U",["^P",[[],["^:C"]]]]],"^;D",["^ ","^9[",false,"^;E",1,"^:1",1,"^9X",[[],["^:C"]],"^O",["^P",[[],["^:C"]]],"^9Z",["^P",[null,null]]]],"^R","^2N","^6","datascript/db.cljc","^:",19,"^;D",["^ ","^9[",false,"^;E",1,"^:1",1,"^9X",[[],["^:C"]],"^O",["^P",[[],["^:C"]]],"^9Z",["^P",[null,null]]],"^9X",[[],["^:C"]],"^9Y",null,"^;E",1,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^;F",[["^ ","^;E",0,"^9[",false,"^:>","^;B"],["^ ","^;E",1,"^9[",false,"^:>","^6Y"]],"^7",773,"^:0","^;B","^9",773,"^:1",1,"^:>","^;B","^:2",true,"^O",["^P",[[],["^:C"]]]],"~$datom?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",238,"^8",7,"^9",238,"^:",13,"^O",["^P",["^9U",["^P",[["~$x"]]]]]],"^R","^4J","^6","datascript/db.cljc","^:",13,"^9X",["^P",[["~$x"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",238,"^:0","^:?","^9",238,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["~$x"]]]]]],"~$attr->properties",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",669,"^8",7,"^9",669,"^:",23,"^O",["^P",["^9U",["^P",[["~$k","~$v"]]]]]],"^R","^4M","^6","datascript/db.cljc","^:",23,"^9X",["^P",[["~$k","~$v"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",669,"^9",669,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["~$k","~$v"]]]]]],"~$resolve-datom",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",892,"^8",8,"^9",892,"^:",21,"^9T",true,"^O",["^P",["^9U",["^P",[["^9V","~$e","~$a","~$v","~$t","~$default-e","~$default-tx"]]]]]],"^9T",true,"^R","^2I","^6","datascript/db.cljc","^:",21,"^9X",["^P",[["^9V","~$e","~$a","~$v","~$t","^>?","^>@"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",892,"^:0","^5A","^9",892,"^:1",7,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","~$e","~$a","~$v","~$t","^>?","^>@"]]]]]],"~$cmp-attr-quick",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",397,"^8",8,"^9",397,"^:",22,"^9T",true,"^O",["^P",["^9U",["^P",[["~$a1","~$a2"]]]]]],"^9T",true,"^R","^7:","^6","datascript/db.cljc","^:",22,"^9X",["^P",[["^>B","^>C"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",397,"^:0",["^L",["^:4","^:8"]],"^9",397,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^>B","^>C"]]]]]],"~$current-tx",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1002,"^8",8,"^9",1002,"^:",18,"^9T",true,"^O",["^P",["^9U",["^P",[["^;R"]]]]]],"^9T",true,"^R","^2K","^6","datascript/db.cljc","^:",18,"^9X",["^P",[["^;R"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1002,"^:0","^:8","^9",1002,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^;R"]]]]]],"~$allocate-eid",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1030,"^8",8,"^9",1030,"^:",20,"^9T",true,"^O",["^P",["^9U",["^P",[["^;R","^>5"],["^;R","~$e","^>5"]]]]],"^;D",["^ ","^9[",false,"^;E",3,"^:1",3,"^9X",[["^;R","^>5"],["^;R","~$e","^>5"]],"^O",["^P",[["^;R","^>5"],["^;R","~$e","^>5"]]],"^9Z",["^P",[null,null]]]],"^9T",true,"^R","^2?","^6","datascript/db.cljc","^:",20,"^;D",["^ ","^9[",false,"^;E",3,"^:1",3,"^9X",[["^;R","^>5"],["^;R","~$e","^>5"]],"^O",["^P",[["^;R","^>5"],["^;R","~$e","^>5"]]],"^9Z",["^P",[null,null]]],"^9X",[["^;R","^>5"],["^;R","~$e","^>5"]],"^9Y",null,"^;E",3,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^;F",[["^ ","^;E",2,"^9[",false,"^:>",["^L",["^:D","^:4"]]],["^ ","^;E",3,"^9[",false,"^:>",["^L",["^:D","^:4"]]]],"^7",1030,"^9",1030,"^:1",3,"^:2",true,"^O",["^P",[["^;R","^>5"],["^;R","~$e","^>5"]]]],"~$TxReport",["^ ","^<?",5,"^<@",["^L",["^=3","^=4","^<B","^<C","^=5","^=6","^<D","^=7","^=8","^<E","^=9","^=:","^<F","^=;","^<G"]],"^R","^7F","^6","datascript/db.cljc","^:",20,"^<H",true,"^8",12,"^:[",true,"^7",910,"^<I",true,"^9",910,"^:>","^;J","^<J",["^L",["^=3","^=4","^<B","^<C","^=5","^=6","^<D","^=7","^=8","^<E","^=9","^=:","^<F","^=;","^<G"]]],"~$components->pattern",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",902,"^8",8,"^9",902,"^:",27,"^9T",true,"^O",["^P",["^9U",["^P",[["^9V","^:V",["~$c0","~$c1","~$c2","~$c3"],"^>?","^>@"]]]]]],"^9T",true,"^R","^4R","^6","datascript/db.cljc","^:",27,"^9X",["^P",[["^9V","^:V","~$p__38791","^>?","^>@"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",902,"^9",902,"^:1",5,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:V",["^>H","^>I","^>J","^>K"],"^>?","^>@"]]]]]],"~$->DB",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^:",24,"^8",22,"^:[",true,"^;0","^;1","^7",499,"^9",499,"^O",["^P",["^9U",["^P",[["^:C","^:Y","~$aevt","~$avet","~$max-eid","~$max-tx","^:B","~$pull-patterns","~$pull-attrs","^;3"]]]]],"^14","Positional factory function for datascript.db/DB."],"^R","^7L","^6","datascript/db.cljc","^:",24,"^9X",["^P",[["^:C","^:Y","^>N","^>O","^>P","^>Q","^:B","^>R","^>S","^;3"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^:[",true,"^9[",false,"^;0","^;1","^7",499,"^:0","^6Y","^9",499,"^:1",10,"^:2",true,"^O",["^P",["^9U",["^P",[["^:C","^:Y","^>N","^>O","^>P","^>Q","^:B","^>R","^>S","^;3"]]]]],"^14","Positional factory function for datascript.db/DB."],"~$class-identical?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",342,"^8",7,"^9",342,"^:",23,"^O",["^P",["^9U",["^P",[["~$x","~$y"]]]]]],"^R","^4A","^6","datascript/db.cljc","^:",23,"^9X",["^P",[["~$x","~$y"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",342,"^:0","^:?","^9",342,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["~$x","~$y"]]]]]],"~$datom-from-reader",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",297,"^8",14,"^9",297,"^:",31,"^:>","^<>","^O",["^P",["^9U",["^P",[["~$vec"]]]]]],"^R","^4W","^6","datascript/db.cljc","^:",31,"^9X",["^P",[["^>V"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",297,"^:0","^<>","^9",297,"^:1",1,"^:>","^<>","^:2",true,"^O",["^P",["^9U",["^P",[["^>V"]]]]]],"~$cmp-datoms-eavt-quick",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",412,"^8",7,"^9",412,"^:",28,"^O",["^P",["^9U",["^P",[["^:6","^:7"]]]]]],"^R","^5K","^6","datascript/db.cljc","^:",28,"^9X",["^P",[["^:6","^:7"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",412,"^:0",["^L",["^:4","^:8"]],"^9",412,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^:6","^:7"]]]]]],"~$reverse-ref",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1110,"^8",7,"^9",1110,"^:",18,"^O",["^P",["^9U",["^P",[["^:M"]]]]]],"^R","^5@","^6","datascript/db.cljc","^:",18,"^9X",["^P",[["^:M"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1110,"^:0",["^L",["^3G","~$string"]],"^9",1110,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^:M"]]]]]],"~$entid-strict",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",971,"^8",7,"^9",971,"^:",19,"^O",["^P",["^9U",["^P",[["^9V","^>5"]]]]]],"^R","^5B","^6","datascript/db.cljc","^:",19,"^9X",["^P",[["^9V","^>5"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",971,"^:0","^:4","^9",971,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^>5"]]]]]],"~$advance-max-eid",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1025,"^8",8,"^9",1025,"^:",23,"^9T",true,"^O",["^P",["^9U",["^P",[["^9V","^>5"]]]]]],"^9T",true,"^R","^5H","^6","datascript/db.cljc","^:",23,"^9X",["^P",[["^9V","^>5"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1025,"^:0",["^L",[null,"^:D","^:4"]],"^9",1025,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^>5"]]]]]],"~$->Datom",["^ ","^9S",null,"^5",["^ ","^<@",["^L",["^<A","^33","^<B","^<C","^<D","^<E","^<F","^<G"]],"^6","datascript/db.cljc","^:",15,"^8",10,"^;0","^;1","^7",160,"^9",160,"^O",["^P",["^9U",["^P",[["~$e","~$a","~$v","^;S","^;X","~$_hash"]]]]],"^<J",["^L",["^<A","^<B","^<C","^<D","^<E","^<F","^<G"]],"^14","Positional factory function for datascript.db/Datom."],"^<@",["^L",["^<A","^33","^<B","^<C","^<D","^<E","^<F","^<G"]],"^R","^5I","^6","datascript/db.cljc","^:",15,"^9X",["^P",[["~$e","~$a","~$v","^;S","^;X","^?1"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^;0","^;1","^7",160,"^:0","^5A","^9",160,"^:1",6,"^:2",true,"^O",["^P",["^9U",["^P",[["~$e","~$a","~$v","^;S","^;X","^?1"]]]]],"^<J",["^L",["^<A","^<B","^<C","^<D","^<E","^<F","^<G"]],"^14","Positional factory function for datascript.db/Datom."],"~$Exception",["^ ","^R","^2M","^6","datascript/db.cljc","^7",16,"^8",6,"^9",16,"^:",20,"^5",["^ ","^6","datascript/db.cljc","^7",16,"^8",11,"^9",16,"^:",20],"^:>","^<8"],"~$attr-tuples",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",681,"^8",7,"^9",681,"^:",18,"^O",["^P",["^9U",["^P",[["^:C","^:B"]]]]],"^14","e.g. :reg/semester => #{:reg/semester+course+student ...}"],"^R","^2J","^6","datascript/db.cljc","^:",18,"^9X",["^P",[["^:C","^:B"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",681,"^:0",["^L",[null,"^:4"]],"^9",681,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^:C","^:B"]]]]],"^14","e.g. :reg/semester => #{:reg/semester+course+student ...}"],"~$FilteredDB",["^ ","^<?",3,"^<@",["^L",["^=3","^=4","^<B","^<C","^=5","^=6","^<D","^=7","^=8","^<E","^=9","^=:","^<F","^=;","^<G"]],"^R","^53","^6","datascript/db.cljc","^:",32,"^<H",true,"^8",22,"^:[",true,"^7",601,"^<I",true,"^9",601,"^:>","^;J","^<J",["^L",["^=3","^=4","^<B","^<C","^=5","^=6","^<D","^=7","^=8","^<E","^=9","^=:","^<F","^=;","^<G"]]],"~$validate-attr",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",992,"^8",8,"^9",992,"^:",21,"^9T",true,"^O",["^P",["^9U",["^P",[["^:M","^=T"]]]]]],"^9T",true,"^R","^54","^6","datascript/db.cljc","^:",21,"^9X",["^P",[["^:M","^=T"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",992,"^:0","^:<","^9",992,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^:M","^=T"]]]]]],"~$e0",["^ ","^5",["^ ","^6","datascript/db.cljc","^7",20,"^8",14,"^9",20,"^:",16,"^:O",true],"^R","^55","^6","datascript/db.cljc","^:",16,"^:P",["^ ","^1>","^:O","^:Q",0,"^:R",["^ ","^:S","^:T"],"^1Q",0,"^:>","^:8"],"^8",1,"^:O",true,"^7",20,"^9",20,"^:>","^:8"],"~$cmp-datoms-eav-quick",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",406,"^8",7,"^9",406,"^:",27,"^O",["^P",["^9U",["^P",[["^:6","^:7"]]]]]],"^R","^59","^6","datascript/db.cljc","^:",27,"^9X",["^P",[["^:6","^:7"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",406,"^:0",["^L",["^:4","^:8"]],"^9",406,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^:6","^:7"]]]]]],"~$txmax",["^ ","^5",["^ ","^6","datascript/db.cljc","^7",23,"^8",14,"^9",23,"^:",19,"^:O",true],"^R","^2V","^6","datascript/db.cljc","^:",19,"^:P",["^ ","^1>","^:O","^:Q",2147483647,"^:R",["^ ","^:S","^:T"],"^1Q",2147483647,"^:>","^:8"],"^8",1,"^:O",true,"^7",23,"^9",23,"^:>","^:8"],"~$validate-schema",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",726,"^8",8,"^9",726,"^:",23,"^9T",true,"^O",["^P",["^9U",["^P",[["^:C"]]]]]],"^9T",true,"^R","^48","^6","datascript/db.cljc","^:",23,"^9X",["^P",[["^:C"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",726,"^:0","^:<","^9",726,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^:C"]]]]]],"~$new-eid?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1021,"^8",8,"^9",1021,"^:",16,"^9T",true,"^O",["^P",["^9U",["^P",[["^9V","^>5"]]]]]],"^9T",true,"^R","^49","^6","datascript/db.cljc","^:",16,"^9X",["^P",[["^9V","^>5"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1021,"^:0","^:?","^9",1021,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^>5"]]]]]],"~$-schema",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",482,"^8",4,"^9",482,"^:",11,"^;;","^44","^14",null,"^O",["^P",["^9U",["^P",[["^9V"]]]]]],"^;;","^44","^R","^2Y","^6","datascript/db.cljc","^:",11,"^9X",["^P",[["^9V"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",481,"^:0","^:4","^9",482,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V"]]]]],"^14",null],"~$equiv-db",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",853,"^8",8,"^9",853,"^:",16,"^9T",true,"^O",["^P",["^9U",["^P",[["^9V","~$other"]]]]]],"^9T",true,"^R","^4<","^6","datascript/db.cljc","^:",16,"^9X",["^P",[["^9V","^?="]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",853,"^:0","^:?","^9",853,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^?="]]]]]],"~$flush-tuples",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1302,"^8",7,"^9",1302,"^:",19,"^O",["^P",["^9U",["^P",[["^;R"]]]]]],"^R","^5V","^6","datascript/db.cljc","^:",19,"^9X",["^P",[["^;R"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1302,"^:0",["^L",[null,"^:4"]],"^9",1302,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^;R"]]]]]],"~$IIndexAccess",["^ ","^5",["^ ","^<M",true,"^6","datascript/db.cljc","^:",26,"^8",14,"^7",468,"^<N",["^ ","^;F",["^ ","^;>",[["^9V","^:V","^:W"]],"^>7",[["^9V","^:V","^:W"]],"^;@",[["^9V","^:V","^:W"]],"~$-index-range",[["^9V","^:M","~$start","~$end"]]]],"^9",468,"^<Q",["^ ","~:-datoms",["^ ","^R","^;>","^O",["^P",[["^9V","^:V","^:W"]]],"^14",null],"~:-seek-datoms",["^ ","^R","^>7","^O",["^P",[["^9V","^:V","^:W"]]],"^14",null],"~:-rseek-datoms",["^ ","^R","^;@","^O",["^P",[["^9V","^:V","^:W"]]],"^14",null],"~:-index-range",["^ ","^R","^?@","^O",["^P",[["^9V","^:M","^?A","^?B"]]],"^14",null]],"^<V",["^P",["@interface"]]],"^<M",true,"^R","^65","^6","datascript/db.cljc","^:",26,"^8",1,"^7",468,"^<N",["^ ","^;F",["^ ","^;>",[["^9V","^:V","^:W"]],"^>7",[["^9V","^:V","^:W"]],"^;@",[["^9V","^:V","^:W"]],"^?@",[["^9V","^:M","^?A","^?B"]]]],"^<W",null,"^9",468,"^:>","^:4","^<Q",["^ ","^?C",["^ ","^R","^;>","^O",["^P",[["^9V","^:V","^:W"]]],"^14",null],"^?D",["^ ","^R","^>7","^O",["^P",[["^9V","^:V","^:W"]]],"^14",null],"^?E",["^ ","^R","^;@","^O",["^P",[["^9V","^:V","^:W"]]],"^14",null],"^?F",["^ ","^R","^?@","^O",["^P",[["^9V","^:M","^?A","^?B"]]],"^14",null]],"^<X",["^L",["^53","^6Y"]],"^<V",["^P",["@interface"]]],"~$component?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",925,"^8",27,"^9",925,"^:",37,"^:>","^:?","^O",["^P",["^9U",["^P",[["^9V","^:M"]]]]]],"^R","^2P","^6","datascript/db.cljc","^:",37,"^9X",["^P",[["^9V","^:M"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",924,"^:0","^:?","^9",925,"^:1",2,"^:>","^:?","^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:M"]]]]]],"~$IDB",["^ ","^5",["^ ","^<M",true,"^6","datascript/db.cljc","^:",17,"^8",14,"^7",481,"^<N",["^ ","^;F",["^ ","^?;",[["^9V"]],"^;:",[["^9V","^;9"]]]],"^9",481,"^<Q",["^ ","~:-schema",["^ ","^R","^?;","^O",["^P",[["^9V"]]],"^14",null],"~:-attrs-by",["^ ","^R","^;:","^O",["^P",[["^9V","^;9"]]],"^14",null]],"^<V",["^P",["@interface"]]],"^<M",true,"^R","^44","^6","datascript/db.cljc","^:",17,"^8",1,"^7",481,"^<N",["^ ","^;F",["^ ","^?;",[["^9V"]],"^;:",[["^9V","^;9"]]]],"^<W",null,"^9",481,"^:>","^:4","^<Q",["^ ","^?I",["^ ","^R","^?;","^O",["^P",[["^9V"]]],"^14",null],"^?J",["^ ","^R","^;:","^O",["^P",[["^9V","^;9"]]],"^14",null]],"^<X",["^L",["^53","^6Y"]],"^<V",["^P",["@interface"]]],"~$db-from-reader",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",885,"^8",7,"^9",885,"^:",21,"^O",["^P",["^9U",["^P",[[["^ ","^=O",["^:C","^;C"]]]]]]]],"^R","^6<","^6","datascript/db.cljc","^:",21,"^9X",["^P",[["~$p__38783"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",885,"^:0","^6Y","^9",885,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[[["^ ","^=O",["^:C","^;C"]]]]]]]],"~$assoc-datom",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",285,"^8",15,"^9",285,"^:",26,"^:>","^<>","^9T",true,"^O",["^P",["^9U",["^P",[["~$d","~$k","~$v"]]]]]],"^9T",true,"^R","^2S","^6","datascript/db.cljc","^:",26,"^9X",["^P",[["~$d","~$k","~$v"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",285,"^:0","^<>","^9",285,"^:1",3,"^:>","^<>","^:2",true,"^O",["^P",["^9U",["^P",[["~$d","~$k","~$v"]]]]]],"~$db-transient",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",487,"^8",7,"^9",487,"^:",19,"^O",["^P",["^9U",["^P",[["^9V"]]]]]],"^R","^46","^6","datascript/db.cljc","^:",19,"^9X",["^P",[["^9V"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",487,"^:0",["^L",["^:D","^:4"]],"^9",487,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V"]]]]]],"~$map->FilteredDB",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^:",32,"^8",22,"^:[",true,"^;0","^=>","^7",601,"^9",601,"^O",["^P",["^9U",["^P",[["~$G__38726"]]]]],"^14","Factory function for datascript.db/FilteredDB, taking a map of keywords to field values."],"^R","^5L","^6","datascript/db.cljc","^:",32,"^9X",["^P",[["^?P"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^:[",true,"^9[",false,"^;0","^=>","^7",601,"^:0","^53","^9",601,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["^?P"]]]]],"^14","Factory function for datascript.db/FilteredDB, taking a map of keywords to field values."],"~$entid",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",940,"^8",7,"^9",940,"^:",12,"^O",["^P",["^9U",["^P",[["^9V","^>5"]]]]]],"^R","^5S","^6","datascript/db.cljc","^:",12,"^9X",["^P",[["^9V","^>5"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",940,"^:0",["^L",[null,"^:4","^:<"]],"^9",940,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^>5"]]]]]],"^?@",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",472,"^8",4,"^9",472,"^:",16,"^;;","^65","^14",null,"^O",["^P",["^9U",["^P",[["^9V","^:M","^?A","^?B"]]]]]],"^;;","^65","^R","^5Y","^6","datascript/db.cljc","^:",16,"^9X",["^P",[["^9V","^:M","^?A","^?B"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",468,"^:0","^:4","^9",472,"^:1",4,"^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:M","^?A","^?B"]]]]],"^14",null],"~$value-cmp",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",365,"^8",7,"^9",365,"^:",16,"^O",["^P",["^9U",["^P",[["~$x","~$y"]]]]]],"^R","^61","^6","datascript/db.cljc","^:",16,"^9X",["^P",[["~$x","~$y"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",365,"^:0",["^L",["^:4","^:8"]],"^9",365,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["~$x","~$y"]]]]]],"^M",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",35,"^8",27,"^9",35,"^:",35,"^:>","^:?","^O",["^P",["^9U",["^P",[["~$x"]]]]]],"^R","^66","^6","datascript/db.cljc","^:",35,"^9X",["^P",[["~$x"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",34,"^:0","^:?","^9",35,"^:1",1,"^:>","^:?","^:2",true,"^O",["^P",["^9U",["^P",[["~$x"]]]]]],"~$seq-datom",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",250,"^8",8,"^9",250,"^:",17,"^9T",true,"^O",["^P",["^9U",["^P",[["~$d"]]]]]],"^9T",true,"^R","^69","^6","datascript/db.cljc","^:",17,"^9X",["^P",[["~$d"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",250,"^:0","^57","^9",250,"^:1",1,"^:2",true,"^O",["^P",["^9U",["^P",[["~$d"]]]]]],"~$transact-retract-datom",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",1269,"^8",8,"^9",1269,"^:",30,"^9T",true,"^O",["^P",["^9U",["^P",[["^;R","~$d"]]]]]],"^9T",true,"^R","^5M","^6","datascript/db.cljc","^:",30,"^9X",["^P",[["^;R","~$d"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",1269,"^:0",["^L",["^:D","^:4"]],"^9",1269,"^:1",2,"^:2",true,"^O",["^P",["^9U",["^P",[["^;R","~$d"]]]]]],"~$ISearch",["^ ","^5",["^ ","^<M",true,"^6","datascript/db.cljc","^:",21,"^8",14,"^7",462,"^<N",["^ ","^;F",["^ ","^<Y",[["^<Z","^<["]]]],"^9",462,"^<Q",["^ ","~:-search",["^ ","^R","^<Y","^O",["^P",[["^<Z","^<["]]],"^14",null]],"^<V",["^P",["@interface"]]],"^<M",true,"^R","^5N","^6","datascript/db.cljc","^:",21,"^8",1,"^7",462,"^<N",["^ ","^;F",["^ ","^<Y",[["^<Z","^<["]]]],"^<W",null,"^9",462,"^:>","^:4","^<Q",["^ ","^?V",["^ ","^R","^<Y","^O",["^P",[["^<Z","^<["]]],"^14",null]],"^<X",["^L",["^53","^6Y"]],"^<V",["^P",["@interface"]]],"~$ref?",["^ ","^9S",null,"^5",["^ ","^6","datascript/db.cljc","^7",921,"^8",27,"^9",921,"^:",31,"^:>","^:?","^O",["^P",["^9U",["^P",[["^9V","^:M"]]]]]],"^R","^3N","^6","datascript/db.cljc","^:",31,"^9X",["^P",[["^9V","^:M"]]],"^9Y",null,"^9Z",["^P",[null,null]],"^8",1,"^9[",false,"^7",920,"^:0","^:?","^9",921,"^:1",2,"^:>","^:?","^:2",true,"^O",["^P",["^9U",["^P",[["^9V","^:M"]]]]]]],"^1O",["^ ","^F","^F","^1E","^1E","^1C","^1D","^1D","^1D"],"~:cljs.analyzer/constants",["^ ","^1M",["^L",["~:transact/unique","^;X","^:3","^=Z","~:tempids","~:schema","^:B","~:attribute","~:db.type/tuple","~:transact/cas","~:lookup-ref/unique","^=N","~:db/fn","~:db/index","~:datascript.db/queued-tuples","~:max-tx","~:v","^=M","~:hash","~:aevt","~$a","~:pred","~:key","~:index","~:datom","~:else","~:db-after","~:datascript.db/internal","~:datascript.db/tx-redundant","~:added","~:new","^=Y","^T","~:db/valueType","~:avet","^:C","~:db.type/ref","~:value","^>Q","~$v","~:operation","~:max-eid","^;3","^>N","^;2","^:8","~:entity-id","^=W","^1>","^9V","~:db/isComponent","~:db.fn/call","~:db/cas","~:transact/upsert","~:e","~:datascript.db/flush-tuples","^>O","~:eavt","~:db.fn/retractEntity","~:db.unique/value","~:db-before","~:tx-data","~:db/retractEntity","~:db/retract","~:datascript.db/value-tempids","^>P","~:tx","~:components","~:db/current-tx","~:datascript/db","~:db.fn/retractAttribute","~:lookup-ref/syntax","~:db.fn/cas","~:entity-id/syntax","~$e","^>>","~:db/cardinality","~:expected","^:Y","~:db/id","~:entity-id/missing","~:pull-attrs","^=V","~:index-access","^:S","^=L","^?1","~:pull-patterns","~:error","^=X","~:schema/validation","~:db/add","^;S","^:>","~:unfiltered-db","~:mutable","~:rschema","~:tx-meta","~:db.cardinality/many","~:transact/syntax","~:entity","~:db/tupleAttrs","~:conflict","~:incomparable","~:db.cardinality/one","~:init-db","^?@","^>S","~:a","~:datoms","~:assertion","~:old","~:db/attrTuples","^>R"]],"~:order",["^=L","^=M","^=N","^T","~$e","^:>","^:8","~$a","~$v","^;S","^;X","^A?","^?1","~:v","^@B","~:e","^@X","~:a","^@>","^AG","^@E","^A;","^@<","^@Y","^A9","^@P","^@9","^?[","^@I","^@7","^A@","^A:","^A8","^@8","^:C","^:Y","^>N","^>O","^>P","^>Q","^:B","^>R","^>S","^;3","^@[","^?@","^9V","^AB","^A>","^@:","^:3","^;2","^@5","^@R","^@F","^@K","^AE","^@1","^AM","^@0","^@;","^@G","^A<","^@D","^A4","^AH","^AI","^AJ","^>>","^@S","^@?","^@T","^?Z","^AA","^=V","^=W","^=X","^=Y","^=Z","^@J","^A1","^@3","^A3","^A7","^@=","^?Y","^:S","^AC","^@Z","^@6","^AK","^AF","^@N","^A6","^A=","^@A","^@Q","^@L","^@M","^@U","^@V","^A0","^A2","^@@","^@W","^@O","^AD","^@H","^@4","^1>","^AL","^A5","^@C","^@2"]],"^1W",["^ ","^1N",["^L",[]],"^1O",["^L",[]]],"^1X",["^ "],"^1Y",["^1H","^1E","^1G","^1L","^1K","^1J","^1B","^1D"]],"^T","^F","~:ns-specs",["^ "],"~:ns-spec-vars",["^L",[]],"~:compiler-options",["^7V",[["^AQ","~:static-fns"],true,["^AQ","~:shadow-tweaks"],null,["^AQ","~:source-map-inline"],null,["^AQ","~:elide-asserts"],false,["^AQ","~:optimize-constants"],null,["^AQ","^22"],null,["^AQ","~:external-config"],null,["^AQ","~:tooling-config"],null,["^AQ","~:emit-constants"],null,["^AQ","~:load-tests"],null,["^AQ","~:form-size-threshold"],null,["^AQ","~:global-goog-object&array"],null,["^AQ","~:data-readers"],null,["^AQ","~:infer-externs"],"~:auto",["^AQ","^24"],null,["~:js-options","~:js-provider"],"~:shadow",["~:mode"],"~:dev",["^AQ","~:fn-invoke-direct"],null,["^AQ","~:source-map"],"/dev/null"]]]